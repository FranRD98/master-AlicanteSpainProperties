!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(e){var n=t(this),o=n.attr("data-target");o||(o=(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""));var r=t("#"===o?[]:o);function s(){r.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),r.length||(r=n.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.button"),r="object"==typeof i&&i;o||n.data("bs.button",o=new e(this,r)),"toggle"==i?o.toggle():i&&o.setState(i)})}e.VERSION="3.3.7",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=i,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var n=t(e.target).closest(".btn");i.call(n,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function i(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function n(i){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);!o&&r.toggle&&/show|hide/.test(i)&&(r.toggle=!1),o||n.data("bs.collapse",o=new e(this,r)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(i=o.data("bs.collapse"))&&i.transitioning)){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),i||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[s](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=t.Event("hide.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,n){var o=t(n);this.addAriaAndCollapsedClass(i(o),o)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var o=t(this);o.attr("data-target")||e.preventDefault();var r=i(o),s=r.data("bs.collapse")?"toggle":o.data();n.call(r,s)})}(jQuery),function(t){"use strict";var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',n=function(e){t(e).on("click.bs.dropdown",this.toggle)};function o(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function r(n){n&&3===n.which||(t(e).remove(),t(i).each(function(){var e=t(this),i=o(e),r={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(i[0],n.target)||(i.trigger(n=t.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}n.VERSION="3.3.7",n.prototype.toggle=function(e){var i=t(this);if(!i.is(".disabled, :disabled")){var n=o(i),s=n.hasClass("open");if(r(),!s){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",r);var a={relatedTarget:this};if(n.trigger(e=t.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var r=o(n),s=r.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&r.find(i).trigger("focus"),n.trigger("click");var a=r.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(t){"use strict";var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function i(i,n){return this.each(function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},e.DEFAULTS,o.data(),"object"==typeof i&&i);r||o.data("bs.modal",r=new e(this,s)),"string"==typeof i?r[i](n):s.show&&r.show(n)})}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var n=this,o=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:i});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(e.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=i,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),o=n.attr("href"),r=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),n.data());n.is("a")&&e.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),i.call(r,s,this)})}(jQuery),function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),d=r[0].offsetWidth,u=r[0].offsetHeight;if(c){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&h.bottom+u>f.bottom?"top":"top"==a&&h.top-u<f.top?"bottom":"right"==a&&h.right+d>f.width?"left":"left"==a&&h.left-d<f.left?"right":a,r.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,h,d,u);this.applyPlacement(g,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(e.top=e.top+r-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var d=/top|bottom/.test(i),u=d?2*h.left-o+l:2*h.top-r+c,p=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],d)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){var n=this,o=t(this.$tip),r=t.Event("hide.bs."+this.type);function s(){"in"!=n.hoverState&&o.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),i&&i()}if(this.$element.trigger(r),!r.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=window.SVGElement&&i instanceof window.SVGElement,s=n?{top:0,left:0}:r?null:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,l,s)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+n;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=e.left-r,h=e.left+r+i;c<s.left?o.left=s.left-c:h>s.right&&(o.left=s.left+s.width-h)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),r="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.tooltip",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),o=n.data("bs.popover"),r="object"==typeof i&&i;!o&&/destroy|hide/.test(i)||(o||n.data("bs.popover",o=new e(this,r)),"string"==typeof i&&o[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";var e=function(e){this.element=t(e)};function i(i){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new e(this)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},e.prototype.activate=function(i,n,o){var r=n.find("> .active"),s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade"),i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=i,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(e){e.preventDefault(),i.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t,e,i){var n=t();t.fn.dropdownHover=function(i){return"ontouchstart"in document?this:(n=n.add(this.parent()),this.each(function(){var o,r,s=t(this),a=s.parent(),l={delay:t(this).data("delay"),hoverDelay:t(this).data("hover-delay"),instantlyCloseOthers:t(this).data("close-others")},c="show.bs.dropdown",h=t.extend(!0,{},{delay:500,hoverDelay:0,instantlyCloseOthers:!0},i,l);function d(t){e.clearTimeout(o),e.clearTimeout(r),r=e.setTimeout(function(){n.find(":focus").blur(),!0===h.instantlyCloseOthers&&n.removeClass("open"),e.clearTimeout(r),s.attr("aria-expanded","true"),a.addClass("open"),s.trigger(c)},h.hoverDelay)}a.hover(function(t){if(!a.hasClass("open")&&!s.is(t.target))return!0;d(t)},function(){e.clearTimeout(r),o=e.setTimeout(function(){s.attr("aria-expanded","false"),a.removeClass("open"),s.trigger("hide.bs.dropdown")},h.delay)}),s.hover(function(t){if(!a.hasClass("open")&&!a.is(t.target))return!0;d(t)}),a.find(".dropdown-submenu").each(function(){var i,n=t(this);n.hover(function(){e.clearTimeout(i),n.children(".dropdown-menu").show(),n.siblings().children(".dropdown-menu").hide()},function(){var t=n.children(".dropdown-menu");i=e.setTimeout(function(){t.hide()},h.delay)})})}))},t(document).ready(function(){t('[data-hover="dropdown"]').dropdownHover()})}(jQuery,window),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,i){return e||(e=window),i||(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i,e,e.document)}:t(jQuery,window,document)}(function(t,e,i,n){"use strict";var o,r,s,a,l=function(e){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new r(t?re(this[o.iApiIndex]):this)},this.fnAddData=function(e,i){var o=this.api(!0),r=t.isArray(e)&&(t.isArray(e[0])||t.isPlainObject(e[0]))?o.rows.add(e):o.row.add(e);return(i===n||i)&&o.draw(),r.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),i=e.settings()[0],o=i.oScroll;t===n||t?e.draw(!1):""===o.sX&&""===o.sY||$t(i)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===n||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,i){var o=this.api(!0),r=o.rows(t),s=r.settings()[0],a=s.aoData[r[0][0]];return r.remove(),e&&e.call(this,s,a),(i===n||i)&&o.draw(),a},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,i,o,r,s){var a=this.api(!0);null===e||e===n?a.search(t,i,o,s):a.column(e).search(t,i,o,s),a.draw()},this.fnGetData=function(t,e){var i=this.api(!0);if(t!==n){var o=t.nodeName?t.nodeName.toLowerCase():"";return e!==n||"td"==o||"th"==o?i.cell(t,e).data():i.row(t).data()||null}return i.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==n?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),i=t.nodeName.toUpperCase();if("TR"==i)return e.row(t).index();if("TD"==i||"TH"==i){var n=e.cell(t).index();return[n.row,n.columnVisible,n.column]}return null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,i){return this.api(!0).row(t).child(e,i).show().child()[0]},this.fnPageChange=function(t,e){var i=this.api(!0).page(t);(e===n||e)&&i.draw(!1)},this.fnSetColumnVis=function(t,e,i){var o=this.api(!0).column(t).visible(e);(i===n||i)&&o.columns.adjust().draw()},this.fnSettings=function(){return re(this[o.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,i){this.api(!0).order.listener(t,e,i)},this.fnUpdate=function(t,e,i,o,r){var s=this.api(!0);return i===n||null===i?s.row(e).data(t):s.cell(e,i).data(t),(r===n||r)&&s.columns.adjust(),(o===n||o)&&s.draw(),0},this.fnVersionCheck=o.fnVersionCheck;var i=this,s=e===n,a=this.length;for(var c in s&&(e={}),this.oApi=this.internal=o.internal,l.ext.internal)c&&(this[c]=Ae(c));return this.each(function(){var o,r=a>1?le({},e,!0):e,c=0,h=this.getAttribute("id"),d=!1,u=l.defaults,p=t(this);if("table"==this.nodeName.toLowerCase()){I(u),M(u.column),T(u,u,!0),T(u.column,u.column,!0),T(u,t.extend(r,p.data()));var f=l.settings;for(c=0,o=f.length;c<o;c++){var g=f[c];if(g.nTable==this||g.nTHead.parentNode==this||g.nTFoot&&g.nTFoot.parentNode==this){var m=r.bRetrieve!==n?r.bRetrieve:u.bRetrieve,v=r.bDestroy!==n?r.bDestroy:u.bDestroy;if(s||m)return g.oInstance;if(v){g.oInstance.fnDestroy();break}return void se(g,0,"Cannot reinitialise DataTable",3)}if(g.sTableId==this.id){f.splice(c,1);break}}null!==h&&""!==h||(h="DataTables_Table_"+l.ext._unique++,this.id=h);var b=t.extend(!0,{},l.models.oSettings,{sDestroyWidth:p[0].style.width,sInstance:h,sTableId:h});b.nTable=this,b.oApi=i.internal,b.oInit=r,f.push(b),b.oInstance=1===i.length?i:p.dataTable(),I(r),r.oLanguage&&E(r.oLanguage),r.aLengthMenu&&!r.iDisplayLength&&(r.iDisplayLength=t.isArray(r.aLengthMenu[0])?r.aLengthMenu[0][0]:r.aLengthMenu[0]),r=le(t.extend(!0,{},u),r),ae(b.oFeatures,r,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),ae(b,r,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),ae(b.oScroll,r,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),ae(b.oLanguage,r,"fnInfoCallback"),he(b,"aoDrawCallback",r.fnDrawCallback,"user"),he(b,"aoServerParams",r.fnServerParams,"user"),he(b,"aoStateSaveParams",r.fnStateSaveParams,"user"),he(b,"aoStateLoadParams",r.fnStateLoadParams,"user"),he(b,"aoStateLoaded",r.fnStateLoaded,"user"),he(b,"aoRowCallback",r.fnRowCallback,"user"),he(b,"aoRowCreatedCallback",r.fnCreatedRow,"user"),he(b,"aoHeaderCallback",r.fnHeaderCallback,"user"),he(b,"aoFooterCallback",r.fnFooterCallback,"user"),he(b,"aoInitComplete",r.fnInitComplete,"user"),he(b,"aoPreDrawCallback",r.fnPreDrawCallback,"user"),b.rowIdFn=Z(r.rowId),A(b);var y=b.oClasses;if(r.bJQueryUI?(t.extend(y,l.ext.oJUIClasses,r.oClasses),r.sDom===u.sDom&&"lfrtip"===u.sDom&&(b.sDom='<"H"lfr>t<"F"ip>'),b.renderer?t.isPlainObject(b.renderer)&&!b.renderer.header&&(b.renderer.header="jqueryui"):b.renderer="jqueryui"):t.extend(y,l.ext.classes,r.oClasses),p.addClass(y.sTable),b.iInitDisplayStart===n&&(b.iInitDisplayStart=r.iDisplayStart,b._iDisplayStart=r.iDisplayStart),null!==r.iDeferLoading){b.bDeferLoading=!0;var w=t.isArray(r.iDeferLoading);b._iRecordsDisplay=w?r.iDeferLoading[0]:r.iDeferLoading,b._iRecordsTotal=w?r.iDeferLoading[1]:r.iDeferLoading}var x=b.oLanguage;t.extend(!0,x,r.oLanguage),x.sUrl&&(t.ajax({dataType:"json",url:x.sUrl,success:function(e){E(e),T(u.oLanguage,e),t.extend(!0,x,e),At(b)},error:function(){At(b)}}),d=!0),null===r.asStripeClasses&&(b.asStripeClasses=[y.sStripeOdd,y.sStripeEven]);var _=b.asStripeClasses,C=p.children("tbody").find("tr").eq(0);-1!==t.inArray(!0,t.map(_,function(t,e){return C.hasClass(t)}))&&(t("tbody tr",this).removeClass(_.join(" ")),b.asDestroyStripes=_.slice());var S,D=[],k=this.getElementsByTagName("thead");if(0!==k.length&&(ht(b.aoHeader,k[0]),D=dt(b)),null===r.aoColumns)for(S=[],c=0,o=D.length;c<o;c++)S.push(null);else S=r.aoColumns;for(c=0,o=S.length;c<o;c++)O(b,D?D[c]:null);if(U(b,r.aoColumnDefs,S,function(t,e){P(b,t,e)}),C.length){var R=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};t(C[0]).children("th, td").each(function(t,e){var i=b.aoColumns[t];if(i.mData===t){var o=R(e,"sort")||R(e,"order"),r=R(e,"filter")||R(e,"search");null===o&&null===r||(i.mData={_:t+".display",sort:null!==o?t+".@data-"+o:n,type:null!==o?t+".@data-"+o:n,filter:null!==r?t+".@data-"+r:n},P(b,t))}})}var F=b.oFeatures,N=function(){if(r.aaSorting===n){var e=b.aaSorting;for(c=0,o=e.length;c<o;c++)e[c][1]=b.aoColumns[c].asSorting[0]}ee(b),F.bSort&&he(b,"aoDrawCallback",function(){if(b.bSorted){var e=Zt(b),i={};t.each(e,function(t,e){i[e.src]=e.dir}),de(b,null,"order",[b,e,i]),Kt(b)}}),he(b,"aoDrawCallback",function(){(b.bSorted||"ssp"===fe(b)||F.bDeferRender)&&ee(b)},"sc");var i=p.children("caption").each(function(){this._captionSide=t(this).css("caption-side")}),s=p.children("thead");0===s.length&&(s=t("<thead/>").appendTo(p)),b.nTHead=s[0];var a=p.children("tbody");0===a.length&&(a=t("<tbody/>").appendTo(p)),b.nTBody=a[0];var l=p.children("tfoot");if(0===l.length&&i.length>0&&(""!==b.oScroll.sX||""!==b.oScroll.sY)&&(l=t("<tfoot/>").appendTo(p)),0===l.length||0===l.children().length?p.addClass(y.sNoFooter):l.length>0&&(b.nTFoot=l[0],ht(b.aoFooter,b.nTFoot)),r.aaData)for(c=0;c<r.aaData.length;c++)j(b,r.aaData[c]);else(b.bDeferLoading||"dom"==fe(b))&&W(b,t(b.nTBody).children("tr"));b.aiDisplay=b.aiDisplayMaster.slice(),b.bInitialised=!0,!1===d&&At(b)};r.bStateSave?(F.bStateSave=!0,he(b,"aoDrawCallback",ne,"state_save"),oe(b,r,N)):N()}else se(null,0,"Non-table node initialisation ("+this.nodeName+")",2)}),i=null,this},c={},h=/[\r\n]/g,d=/<.*?>/g,u=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,p=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),f=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,g=function(t){return!t||!0===t||"-"===t},m=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},v=function(t,e){return c[e]||(c[e]=new RegExp(Ct(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(c[e],"."):t},b=function(t,e,i){var n="string"==typeof t;return!!g(t)||(e&&n&&(t=v(t,e)),i&&n&&(t=t.replace(f,"")),!isNaN(parseFloat(t))&&isFinite(t))},y=function(t,e,i){return!!g(t)||(function(t){return g(t)||"string"==typeof t}(t)&&!!b(S(t),e,i)||null)},w=function(t,e,i){var o=[],r=0,s=t.length;if(i!==n)for(;r<s;r++)t[r]&&t[r][e]&&o.push(t[r][e][i]);else for(;r<s;r++)t[r]&&o.push(t[r][e]);return o},x=function(t,e,i,o){var r=[],s=0,a=e.length;if(o!==n)for(;s<a;s++)t[e[s]][i]&&r.push(t[e[s]][i][o]);else for(;s<a;s++)r.push(t[e[s]][i]);return r},_=function(t,e){var i,o=[];e===n?(e=0,i=t):(i=e,e=t);for(var r=e;r<i;r++)o.push(r);return o},C=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&e.push(t[i]);return e},S=function(t){return t.replace(d,"")},D=function(t){var e,i,n,o=[],r=t.length,s=0;t:for(i=0;i<r;i++){for(e=t[i],n=0;n<s;n++)if(o[n]===e)continue t;o.push(e),s++}return o};function k(e){var i,n,o={};t.each(e,function(t,r){(i=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(i[1]+" ")&&(n=t.replace(i[0],i[2].toLowerCase()),o[n]=t,"o"===i[1]&&k(e[t]))}),e._hungarianMap=o}function T(e,i,o){var r;e._hungarianMap||k(e),t.each(i,function(s,a){(r=e._hungarianMap[s])===n||!o&&i[r]!==n||("o"===r.charAt(0)?(i[r]||(i[r]={}),t.extend(!0,i[r],i[s]),T(e[r],i[r],o)):i[r]=i[s])})}function E(t){var e=l.defaults.oLanguage,i=t.sZeroRecords;!t.sEmptyTable&&i&&"No data available in table"===e.sEmptyTable&&ae(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&i&&"Loading..."===e.sLoadingRecords&&ae(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands);var n=t.sDecimal;n&&Ie(n)}l.util={throttle:function(t,e){var i,o,r=e!==n?e:200;return function(){var e=this,s=+new Date,a=arguments;i&&s<i+r?(clearTimeout(o),o=setTimeout(function(){i=n,t.apply(e,a)},r)):(i=s,t.apply(e,a))}},escapeRegex:function(t){return t.replace(p,"\\$1")}};var R=function(t,e,i){t[e]!==n&&(t[i]=t[e])};function I(t){R(t,"ordering","bSort"),R(t,"orderMulti","bSortMulti"),R(t,"orderClasses","bSortClasses"),R(t,"orderCellsTop","bSortCellsTop"),R(t,"order","aaSorting"),R(t,"orderFixed","aaSortingFixed"),R(t,"paging","bPaginate"),R(t,"pagingType","sPaginationType"),R(t,"pageLength","iDisplayLength"),R(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":"");var e=t.aoSearchCols;if(e)for(var i=0,n=e.length;i<n;i++)e[i]&&T(l.models.oSearch,e[i])}function M(e){R(e,"orderable","bSortable"),R(e,"orderData","aDataSort"),R(e,"orderSequence","asSorting"),R(e,"orderDataType","sortDataType");var i=e.aDataSort;i&&!t.isArray(i)&&(e.aDataSort=[i])}function A(i){if(!l.__browser){var n={};l.__browser=n;var o=t("<div/>").css({position:"fixed",top:0,left:-1*t(e).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(t("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(t("<div/>").css({width:"100%",height:10}))).appendTo("body"),r=o.children(),s=r.children();n.barWidth=r[0].offsetWidth-r[0].clientWidth,n.bScrollOversize=100===s[0].offsetWidth&&100!==r[0].clientWidth,n.bScrollbarLeft=1!==Math.round(s.offset().left),n.bBounding=!!o[0].getBoundingClientRect().width,o.remove()}t.extend(i.oBrowser,l.__browser),i.oScroll.iBarWidth=l.__browser.barWidth}function F(t,e,i,o,r,s){var a,l=o,c=!1;for(i!==n&&(a=i,c=!0);l!==r;)t.hasOwnProperty(l)&&(a=c?e(a,t[l],l,t):t[l],c=!0,l+=s);return a}function O(e,n){var o=l.defaults.column,r=e.aoColumns.length,s=t.extend({},l.models.oColumn,o,{nTh:n||i.createElement("th"),sTitle:o.sTitle?o.sTitle:n?n.innerHTML:"",aDataSort:o.aDataSort?o.aDataSort:[r],mData:o.mData?o.mData:r,idx:r});e.aoColumns.push(s);var a=e.aoPreSearchCols;a[r]=t.extend({},l.models.oSearch,a[r]),P(e,r,t(n).data())}function P(e,i,o){var r=e.aoColumns[i],s=e.oClasses,a=t(r.nTh);if(!r.sWidthOrig){r.sWidthOrig=a.attr("width")||null;var c=(a.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(r.sWidthOrig=c[1])}o!==n&&null!==o&&(M(o),T(l.defaults.column,o),o.mDataProp===n||o.mData||(o.mData=o.mDataProp),o.sType&&(r._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),t.extend(r,o),ae(r,o,"sWidth","sWidthOrig"),o.iDataSort!==n&&(r.aDataSort=[o.iDataSort]),ae(r,o,"aDataSort"));var h=r.mData,d=Z(h),u=r.mRender?Z(r.mRender):null,p=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};r._bAttrSrc=t.isPlainObject(h)&&(p(h.sort)||p(h.type)||p(h.filter)),r._setter=null,r.fnGetData=function(t,e,i){var o=d(t,e,n,i);return u&&e?u(o,e,t,i):o},r.fnSetData=function(t,e,i){return J(h)(t,e,i)},"number"!=typeof h&&(e._rowReadObject=!0),e.oFeatures.bSort||(r.bSortable=!1,a.addClass(s.sSortableNone));var f=-1!==t.inArray("asc",r.asSorting),g=-1!==t.inArray("desc",r.asSorting);r.bSortable&&(f||g)?f&&!g?(r.sSortingClass=s.sSortableAsc,r.sSortingClassJUI=s.sSortJUIAscAllowed):!f&&g?(r.sSortingClass=s.sSortableDesc,r.sSortingClassJUI=s.sSortJUIDescAllowed):(r.sSortingClass=s.sSortable,r.sSortingClassJUI=s.sSortJUI):(r.sSortingClass=s.sSortableNone,r.sSortingClassJUI="")}function N(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;Wt(t);for(var i=0,n=e.length;i<n;i++)e[i].nTh.style.width=e[i].sWidth}var o=t.oScroll;""===o.sY&&""===o.sX||$t(t),de(t,null,"column-sizing",[t])}function H(t,e){var i=B(t,"bVisible");return"number"==typeof i[e]?i[e]:null}function L(e,i){var n=B(e,"bVisible"),o=t.inArray(i,n);return-1!==o?o:null}function z(e){var i=0;return t.each(e.aoColumns,function(e,n){n.bVisible&&"none"!==t(n.nTh).css("display")&&i++}),i}function B(e,i){var n=[];return t.map(e.aoColumns,function(t,e){t[i]&&n.push(e)}),n}function $(t){var e,i,o,r,s,a,c,h,d,u=t.aoColumns,p=t.aoData,f=l.ext.type.detect;for(e=0,i=u.length;e<i;e++)if(d=[],!(c=u[e]).sType&&c._sManualType)c.sType=c._sManualType;else if(!c.sType){for(o=0,r=f.length;o<r;o++){for(s=0,a=p.length;s<a&&(d[s]===n&&(d[s]=Y(t,s,e,"type")),(h=f[o](d[s],t))||o===f.length-1)&&"html"!==h;s++);if(h){c.sType=h;break}}c.sType||(c.sType="string")}}function U(e,i,o,r){var s,a,l,c,h,d,u,p=e.aoColumns;if(i)for(s=i.length-1;s>=0;s--){var f=(u=i[s]).targets!==n?u.targets:u.aTargets;for(t.isArray(f)||(f=[f]),l=0,c=f.length;l<c;l++)if("number"==typeof f[l]&&f[l]>=0){for(;p.length<=f[l];)O(e);r(f[l],u)}else if("number"==typeof f[l]&&f[l]<0)r(p.length+f[l],u);else if("string"==typeof f[l])for(h=0,d=p.length;h<d;h++)("_all"==f[l]||t(p[h].nTh).hasClass(f[l]))&&r(h,u)}if(o)for(s=0,a=o.length;s<a;s++)r(s,o[s])}function j(e,i,o,r){var s=e.aoData.length,a=t.extend(!0,{},l.models.oRow,{src:o?"dom":"data",idx:s});a._aData=i,e.aoData.push(a);for(var c=e.aoColumns,h=0,d=c.length;h<d;h++)c[h].sType=null;e.aiDisplayMaster.push(s);var u=e.rowIdFn(i);return u!==n&&(e.aIds[u]=a),!o&&e.oFeatures.bDeferRender||nt(e,s,o,r),s}function W(e,i){var n;return i instanceof t||(i=t(i)),i.map(function(t,i){return n=it(e,i),j(e,n.data,i,n.cells)})}function Y(t,e,i,o){var r=t.iDraw,s=t.aoColumns[i],a=t.aoData[e]._aData,l=s.sDefaultContent,c=s.fnGetData(a,o,{settings:t,row:e,col:i});if(c===n)return t.iDrawError!=r&&null===l&&(se(t,0,"Requested unknown parameter "+("function"==typeof s.mData?"{function}":"'"+s.mData+"'")+" for row "+e+", column "+i,4),t.iDrawError=r),l;if(c!==a&&null!==c||null===l||o===n){if("function"==typeof c)return c.call(a)}else c=l;return null===c&&"display"==o?"":c}function V(t,e,i,n){var o=t.aoColumns[i],r=t.aoData[e]._aData;o.fnSetData(r,n,{settings:t,row:e,col:i})}var q=/\[.*?\]$/,G=/\(\)$/;function X(e){return t.map(e.match(/(\\.|[^\.])+/g)||[""],function(t){return t.replace(/\\\./g,".")})}function Z(e){if(t.isPlainObject(e)){var i={};return t.each(e,function(t,e){e&&(i[t]=Z(e))}),function(t,e,o,r){var s=i[e]||i._;return s!==n?s(t,e,o,r):t}}if(null===e)return function(t){return t};if("function"==typeof e)return function(t,i,n,o){return e(t,i,n,o)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t,i){return t[e]};var o=function(e,i,r){var s,a,l,c;if(""!==r)for(var h=X(r),d=0,u=h.length;d<u;d++){if(s=h[d].match(q),a=h[d].match(G),s){if(h[d]=h[d].replace(q,""),""!==h[d]&&(e=e[h[d]]),l=[],h.splice(0,d+1),c=h.join("."),t.isArray(e))for(var p=0,f=e.length;p<f;p++)l.push(o(e[p],i,c));var g=s[0].substring(1,s[0].length-1);e=""===g?l:l.join(g);break}if(a)h[d]=h[d].replace(G,""),e=e[h[d]]();else{if(null===e||e[h[d]]===n)return n;e=e[h[d]]}}return e};return function(t,i){return o(t,i,e)}}function J(e){if(t.isPlainObject(e))return J(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,i,n){e(t,"set",i,n)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t,i){t[e]=i};var i=function(e,o,r){for(var s,a,l,c,h,d=X(r),u=d[d.length-1],p=0,f=d.length-1;p<f;p++){if(a=d[p].match(q),l=d[p].match(G),a){if(d[p]=d[p].replace(q,""),e[d[p]]=[],(s=d.slice()).splice(0,p+1),h=s.join("."),t.isArray(o))for(var g=0,m=o.length;g<m;g++)i(c={},o[g],h),e[d[p]].push(c);else e[d[p]]=o;return}l&&(d[p]=d[p].replace(G,""),e=e[d[p]](o)),null!==e[d[p]]&&e[d[p]]!==n||(e[d[p]]={}),e=e[d[p]]}u.match(G)?e=e[u.replace(G,"")](o):e[u.replace(q,"")]=o};return function(t,n){return i(t,n,e)}}function K(t){return w(t.aoData,"_aData")}function Q(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function tt(t,e,i){for(var o=-1,r=0,s=t.length;r<s;r++)t[r]==e?o=r:t[r]>e&&t[r]--;-1!=o&&i===n&&t.splice(o,1)}function et(t,e,i,o){var r,s,a=t.aoData[e],l=function(i,n){for(;i.childNodes.length;)i.removeChild(i.firstChild);i.innerHTML=Y(t,e,n,"display")};if("dom"!==i&&(i&&"auto"!==i||"dom"!==a.src)){var c=a.anCells;if(c)if(o!==n)l(c[o],o);else for(r=0,s=c.length;r<s;r++)l(c[r],r)}else a._aData=it(t,a,o,o===n?n:a._aData).data;a._aSortData=null,a._aFilterData=null;var h=t.aoColumns;if(o!==n)h[o].sType=null;else{for(r=0,s=h.length;r<s;r++)h[r].sType=null;ot(t,a)}}function it(e,i,o,r){var s,a,l,c=[],h=i.firstChild,d=0,u=e.aoColumns,p=e._rowReadObject;r=r!==n?r:p?{}:[];var f=function(t,e){if("string"==typeof t){var i=t.indexOf("@");if(-1!==i){var n=t.substring(i+1);J(t)(r,e.getAttribute(n))}}},g=function(e){o!==n&&o!==d||(a=u[d],l=t.trim(e.innerHTML),a&&a._bAttrSrc?(J(a.mData._)(r,l),f(a.mData.sort,e),f(a.mData.type,e),f(a.mData.filter,e)):p?(a._setter||(a._setter=J(a.mData)),a._setter(r,l)):r[d]=l);d++};if(h)for(;h;)"TD"!=(s=h.nodeName.toUpperCase())&&"TH"!=s||(g(h),c.push(h)),h=h.nextSibling;else for(var m=0,v=(c=i.anCells).length;m<v;m++)g(c[m]);var b=i.firstChild?i:i.nTr;if(b){var y=b.getAttribute("id");y&&J(e.rowId)(r,y)}return{data:r,cells:c}}function nt(e,n,o,r){var s,a,l,c,h,d=e.aoData[n],u=d._aData,p=[];if(null===d.nTr){for(s=o||i.createElement("tr"),d.nTr=s,d.anCells=p,s._DT_RowIndex=n,ot(e,d),c=0,h=e.aoColumns.length;c<h;c++)l=e.aoColumns[c],(a=o?r[c]:i.createElement(l.sCellType))._DT_CellIndex={row:n,column:c},p.push(a),o&&!l.mRender&&l.mData===c||t.isPlainObject(l.mData)&&l.mData._===c+".display"||(a.innerHTML=Y(e,n,c,"display")),l.sClass&&(a.className+=" "+l.sClass),l.bVisible&&!o?s.appendChild(a):!l.bVisible&&o&&a.parentNode.removeChild(a),l.fnCreatedCell&&l.fnCreatedCell.call(e.oInstance,a,Y(e,n,c),u,n,c);de(e,"aoRowCreatedCallback",null,[s,u,n])}d.nTr.setAttribute("role","row")}function ot(e,i){var n=i.nTr,o=i._aData;if(n){var r=e.rowIdFn(o);if(r&&(n.id=r),o.DT_RowClass){var s=o.DT_RowClass.split(" ");i.__rowc=i.__rowc?D(i.__rowc.concat(s)):s,t(n).removeClass(i.__rowc.join(" ")).addClass(o.DT_RowClass)}o.DT_RowAttr&&t(n).attr(o.DT_RowAttr),o.DT_RowData&&t(n).data(o.DT_RowData)}}function rt(e){var i,n,o,r,s,a=e.nTHead,l=e.nTFoot,c=0===t("th, td",a).length,h=e.oClasses,d=e.aoColumns;for(c&&(r=t("<tr/>").appendTo(a)),i=0,n=d.length;i<n;i++)s=d[i],o=t(s.nTh).addClass(s.sClass),c&&o.appendTo(r),e.oFeatures.bSort&&(o.addClass(s.sSortingClass),!1!==s.bSortable&&(o.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),te(e,s.nTh,i))),s.sTitle!=o[0].innerHTML&&o.html(s.sTitle),pe(e,"header")(e,o,s,h);if(c&&ht(e.aoHeader,a),t(a).find(">tr").attr("role","row"),t(a).find(">tr>th, >tr>td").addClass(h.sHeaderTH),t(l).find(">tr>th, >tr>td").addClass(h.sFooterTH),null!==l){var u=e.aoFooter[0];for(i=0,n=u.length;i<n;i++)(s=d[i]).nTf=u[i].cell,s.sClass&&t(s.nTf).addClass(s.sClass)}}function st(e,i,o){var r,s,a,l,c,h,d,u,p,f=[],g=[],m=e.aoColumns.length;if(i){for(o===n&&(o=!1),r=0,s=i.length;r<s;r++){for(f[r]=i[r].slice(),f[r].nTr=i[r].nTr,a=m-1;a>=0;a--)e.aoColumns[a].bVisible||o||f[r].splice(a,1);g.push([])}for(r=0,s=f.length;r<s;r++){if(d=f[r].nTr)for(;h=d.firstChild;)d.removeChild(h);for(a=0,l=f[r].length;a<l;a++)if(u=1,p=1,g[r][a]===n){for(d.appendChild(f[r][a].cell),g[r][a]=1;f[r+u]!==n&&f[r][a].cell==f[r+u][a].cell;)g[r+u][a]=1,u++;for(;f[r][a+p]!==n&&f[r][a].cell==f[r][a+p].cell;){for(c=0;c<u;c++)g[r+c][a+p]=1;p++}t(f[r][a].cell).attr("rowspan",u).attr("colspan",p)}}}}function at(e){var i=de(e,"aoPreDrawCallback","preDraw",[e]);if(-1===t.inArray(!1,i)){var o=[],r=0,s=e.asStripeClasses,a=s.length,l=(e.aoOpenRows.length,e.oLanguage),c=e.iInitDisplayStart,h="ssp"==fe(e),d=e.aiDisplay;e.bDrawing=!0,c!==n&&-1!==c&&(e._iDisplayStart=h?c:c>=e.fnRecordsDisplay()?0:c,e.iInitDisplayStart=-1);var u=e._iDisplayStart,p=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,zt(e,!1);else if(h){if(!e.bDestroying&&!pt(e))return}else e.iDraw++;if(0!==d.length)for(var f=h?0:u,g=h?e.aoData.length:p,m=f;m<g;m++){var v=d[m],b=e.aoData[v];null===b.nTr&&nt(e,v);var y=b.nTr;if(0!==a){var w=s[r%a];b._sRowStripe!=w&&(t(y).removeClass(b._sRowStripe).addClass(w),b._sRowStripe=w)}de(e,"aoRowCallback",null,[y,b._aData,r,m]),o.push(y),r++}else{var x=l.sZeroRecords;1==e.iDraw&&"ajax"==fe(e)?x=l.sLoadingRecords:l.sEmptyTable&&0===e.fnRecordsTotal()&&(x=l.sEmptyTable),o[0]=t("<tr/>",{class:a?s[0]:""}).append(t("<td />",{valign:"top",colSpan:z(e),class:e.oClasses.sRowEmpty}).html(x))[0]}de(e,"aoHeaderCallback","header",[t(e.nTHead).children("tr")[0],K(e),u,p,d]),de(e,"aoFooterCallback","footer",[t(e.nTFoot).children("tr")[0],K(e),u,p,d]);var _=t(e.nTBody);_.children().detach(),_.append(t(o)),de(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}else zt(e,!1)}function lt(t,e){var i=t.oFeatures,n=i.bSort,o=i.bFilter;n&&Jt(t),o?bt(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,at(t),t._drawHold=!1}function ct(e){var i=e.oClasses,n=t(e.nTable),o=t("<div/>").insertBefore(n),r=e.oFeatures,s=t("<div/>",{id:e.sTableId+"_wrapper",class:i.sWrapper+(e.nTFoot?"":" "+i.sNoFooter)});e.nHolding=o[0],e.nTableWrapper=s[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var a,c,h,d,u,p,f=e.sDom.split(""),g=0;g<f.length;g++){if(a=null,"<"==(c=f[g])){if(h=t("<div/>")[0],"'"==(d=f[g+1])||'"'==d){for(u="",p=2;f[g+p]!=d;)u+=f[g+p],p++;if("H"==u?u=i.sJUIHeader:"F"==u&&(u=i.sJUIFooter),-1!=u.indexOf(".")){var m=u.split(".");h.id=m[0].substr(1,m[0].length-1),h.className=m[1]}else"#"==u.charAt(0)?h.id=u.substr(1,u.length-1):h.className=u;g+=p}s.append(h),s=t(h)}else if(">"==c)s=s.parent();else if("l"==c&&r.bPaginate&&r.bLengthChange)a=Pt(e);else if("f"==c&&r.bFilter)a=vt(e);else if("r"==c&&r.bProcessing)a=Lt(e);else if("t"==c)a=Bt(e);else if("i"==c&&r.bInfo)a=Rt(e);else if("p"==c&&r.bPaginate)a=Nt(e);else if(0!==l.ext.feature.length)for(var v=l.ext.feature,b=0,y=v.length;b<y;b++)if(c==v[b].cFeature){a=v[b].fnInit(e);break}if(a){var w=e.aanFeatures;w[c]||(w[c]=[]),w[c].push(a),s.append(a)}}o.replaceWith(s),e.nHolding=null}function ht(e,i){var n,o,r,s,a,l,c,h,d,u,p=t(i).children("tr"),f=function(t,e,i){for(var n=t[e];n[i];)i++;return i};for(e.splice(0,e.length),r=0,l=p.length;r<l;r++)e.push([]);for(r=0,l=p.length;r<l;r++)for(0,o=(n=p[r]).firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(h=(h=1*o.getAttribute("colspan"))&&0!==h&&1!==h?h:1,d=(d=1*o.getAttribute("rowspan"))&&0!==d&&1!==d?d:1,c=f(e,r,0),u=1===h,a=0;a<h;a++)for(s=0;s<d;s++)e[r+s][c+a]={cell:o,unique:u},e[r+s].nTr=n;o=o.nextSibling}}function dt(t,e,i){var n=[];i||(i=t.aoHeader,e&&ht(i=[],e));for(var o=0,r=i.length;o<r;o++)for(var s=0,a=i[o].length;s<a;s++)!i[o][s].unique||n[s]&&t.bSortCellsTop||(n[s]=i[o][s].cell);return n}function ut(e,i,n){if(de(e,"aoServerParams","serverParams",[i]),i&&t.isArray(i)){var o={},r=/(.*?)\[\]$/;t.each(i,function(t,e){var i=e.name.match(r);if(i){var n=i[0];o[n]||(o[n]=[]),o[n].push(e.value)}else o[e.name]=e.value}),i=o}var s,a=e.ajax,l=e.oInstance,c=function(t){de(e,null,"xhr",[e,t,e.jqXHR]),n(t)};if(t.isPlainObject(a)&&a.data){s=a.data;var h=t.isFunction(s)?s(i,e):s;i=t.isFunction(s)&&h?h:t.extend(!0,i,h),delete a.data}var d={data:i,success:function(t){var i=t.error||t.sError;i&&se(e,0,i),e.json=t,c(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(i,n,o){var r=de(e,null,"xhr",[e,null,e.jqXHR]);-1===t.inArray(!0,r)&&("parsererror"==n?se(e,0,"Invalid JSON response",1):4===i.readyState&&se(e,0,"Ajax error",7)),zt(e,!1)}};e.oAjaxData=i,de(e,null,"preXhr",[e,i]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,t.map(i,function(t,e){return{name:e,value:t}}),c,e):e.sAjaxSource||"string"==typeof a?e.jqXHR=t.ajax(t.extend(d,{url:a||e.sAjaxSource})):t.isFunction(a)?e.jqXHR=a.call(l,i,c,e):(e.jqXHR=t.ajax(t.extend(d,a)),a.data=s)}function pt(t){return!t.bAjaxDataGet||(t.iDraw++,zt(t,!0),ut(t,ft(t),function(e){gt(t,e)}),!1)}function ft(e){var i,n,o,r,s=e.aoColumns,a=s.length,c=e.oFeatures,h=e.oPreviousSearch,d=e.aoPreSearchCols,u=[],p=Zt(e),f=e._iDisplayStart,g=!1!==c.bPaginate?e._iDisplayLength:-1,m=function(t,e){u.push({name:t,value:e})};m("sEcho",e.iDraw),m("iColumns",a),m("sColumns",w(s,"sName").join(",")),m("iDisplayStart",f),m("iDisplayLength",g);var v={draw:e.iDraw,columns:[],order:[],start:f,length:g,search:{value:h.sSearch,regex:h.bRegex}};for(i=0;i<a;i++)o=s[i],r=d[i],n="function"==typeof o.mData?"function":o.mData,v.columns.push({data:n,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:r.sSearch,regex:r.bRegex}}),m("mDataProp_"+i,n),c.bFilter&&(m("sSearch_"+i,r.sSearch),m("bRegex_"+i,r.bRegex),m("bSearchable_"+i,o.bSearchable)),c.bSort&&m("bSortable_"+i,o.bSortable);c.bFilter&&(m("sSearch",h.sSearch),m("bRegex",h.bRegex)),c.bSort&&(t.each(p,function(t,e){v.order.push({column:e.col,dir:e.dir}),m("iSortCol_"+t,e.col),m("sSortDir_"+t,e.dir)}),m("iSortingCols",p.length));var b=l.ext.legacy.ajax;return null===b?e.sAjaxSource?u:v:b?u:v}function gt(t,e){var i=function(t,i){return e[t]!==n?e[t]:e[i]},o=mt(t,e),r=i("sEcho","draw"),s=i("iTotalRecords","recordsTotal"),a=i("iTotalDisplayRecords","recordsFiltered");if(r){if(1*r<t.iDraw)return;t.iDraw=1*r}Q(t),t._iRecordsTotal=parseInt(s,10),t._iRecordsDisplay=parseInt(a,10);for(var l=0,c=o.length;l<c;l++)j(t,o[l]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,at(t),t._bInitComplete||Ft(t,e),t.bAjaxDataGet=!0,zt(t,!1)}function mt(e,i){var o=t.isPlainObject(e.ajax)&&e.ajax.dataSrc!==n?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===o?i.aaData||i[o]:""!==o?Z(o)(i):i}function vt(e){var n=e.oClasses,o=e.sTableId,r=e.oLanguage,s=e.oPreviousSearch,a=e.aanFeatures,l='<input type="search" class="'+n.sFilterInput+'"/>',c=r.sSearch;c=c.match(/_INPUT_/)?c.replace("_INPUT_",l):c+l;var h=t("<div/>",{id:a.f?null:o+"_filter",class:n.sFilter}).append(t("<label/>").append(c)),d=function(){a.f;var t=this.value?this.value:"";t!=s.sSearch&&(bt(e,{sSearch:t,bRegex:s.bRegex,bSmart:s.bSmart,bCaseInsensitive:s.bCaseInsensitive}),e._iDisplayStart=0,at(e))},u=null!==e.searchDelay?e.searchDelay:"ssp"===fe(e)?400:0,p=t("input",h).val(s.sSearch).attr("placeholder",r.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",u?Yt(d,u):d).on("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",o);return t(e.nTable).on("search.dt.DT",function(t,n){if(e===n)try{p[0]!==i.activeElement&&p.val(s.sSearch)}catch(t){}}),h[0]}function bt(t,e,i){var o=t.oPreviousSearch,r=t.aoPreSearchCols,s=function(t){o.sSearch=t.sSearch,o.bRegex=t.bRegex,o.bSmart=t.bSmart,o.bCaseInsensitive=t.bCaseInsensitive},a=function(t){return t.bEscapeRegex!==n?!t.bEscapeRegex:t.bRegex};if($(t),"ssp"!=fe(t)){xt(t,e.sSearch,i,a(e),e.bSmart,e.bCaseInsensitive),s(e);for(var l=0;l<r.length;l++)wt(t,r[l].sSearch,l,a(r[l]),r[l].bSmart,r[l].bCaseInsensitive);yt(t)}else s(e);t.bFiltered=!0,de(t,null,"search",[t])}function yt(e){for(var i,n,o=l.ext.search,r=e.aiDisplay,s=0,a=o.length;s<a;s++){for(var c=[],h=0,d=r.length;h<d;h++)n=r[h],i=e.aoData[n],o[s](e,i._aFilterData,n,i._aData,h)&&c.push(n);r.length=0,t.merge(r,c)}}function wt(t,e,i,n,o,r){if(""!==e){for(var s,a=[],l=t.aiDisplay,c=_t(e,n,o,r),h=0;h<l.length;h++)s=t.aoData[l[h]]._aFilterData[i],c.test(s)&&a.push(l[h]);t.aiDisplay=a}}function xt(t,e,i,n,o,r){var s,a,c,h=_t(e,n,o,r),d=t.oPreviousSearch.sSearch,u=t.aiDisplayMaster,p=[];if(0!==l.ext.search.length&&(i=!0),a=kt(t),e.length<=0)t.aiDisplay=u.slice();else{for((a||i||d.length>e.length||0!==e.indexOf(d)||t.bSorted)&&(t.aiDisplay=u.slice()),s=t.aiDisplay,c=0;c<s.length;c++)h.test(t.aoData[s[c]]._sFilterRow)&&p.push(s[c]);t.aiDisplay=p}}function _t(e,i,n,o){if(e=i?e:Ct(e),n){var r=t.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")});e="^(?=.*?"+r.join(")(?=.*?")+").*$"}return new RegExp(e,o?"i":"")}var Ct=l.util.escapeRegex,St=t("<div>")[0],Dt=St.textContent!==n;function kt(t){var e,i,n,o,r,s,a,c,h=t.aoColumns,d=l.ext.type.search,u=!1;for(i=0,o=t.aoData.length;i<o;i++)if(!(c=t.aoData[i])._aFilterData){for(s=[],n=0,r=h.length;n<r;n++)(e=h[n]).bSearchable?(a=Y(t,i,n,"filter"),d[e.sType]&&(a=d[e.sType](a)),null===a&&(a=""),"string"!=typeof a&&a.toString&&(a=a.toString())):a="",a.indexOf&&-1!==a.indexOf("&")&&(St.innerHTML=a,a=Dt?St.textContent:St.innerText),a.replace&&(a=a.replace(/[\r\n]/g,"")),s.push(a);c._aFilterData=s,c._sFilterRow=s.join("  "),u=!0}return u}function Tt(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function Et(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function Rt(e){var i=e.sTableId,n=e.aanFeatures.i,o=t("<div/>",{class:e.oClasses.sInfo,id:n?null:i+"_info"});return n||(e.aoDrawCallback.push({fn:It,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),t(e.nTable).attr("aria-describedby",i+"_info")),o[0]}function It(e){var i=e.aanFeatures.i;if(0!==i.length){var n=e.oLanguage,o=e._iDisplayStart+1,r=e.fnDisplayEnd(),s=e.fnRecordsTotal(),a=e.fnRecordsDisplay(),l=a?n.sInfo:n.sInfoEmpty;a!==s&&(l+=" "+n.sInfoFiltered),l=Mt(e,l+=n.sInfoPostFix);var c=n.fnInfoCallback;null!==c&&(l=c.call(e.oInstance,e,o,r,s,a,l)),t(i).html(l)}}function Mt(t,e){var i=t.fnFormatNumber,n=t._iDisplayStart+1,o=t._iDisplayLength,r=t.fnRecordsDisplay(),s=-1===o;return e.replace(/_START_/g,i.call(t,n)).replace(/_END_/g,i.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,i.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,i.call(t,r)).replace(/_PAGE_/g,i.call(t,s?1:Math.ceil(n/o))).replace(/_PAGES_/g,i.call(t,s?1:Math.ceil(r/o)))}function At(t){var e,i,n,o=t.iInitDisplayStart,r=t.aoColumns,s=t.oFeatures,a=t.bDeferLoading;if(t.bInitialised){for(ct(t),rt(t),st(t,t.aoHeader),st(t,t.aoFooter),zt(t,!0),s.bAutoWidth&&Wt(t),e=0,i=r.length;e<i;e++)(n=r[e]).sWidth&&(n.nTh.style.width=Xt(n.sWidth));de(t,null,"preInit",[t]),lt(t);var l=fe(t);("ssp"!=l||a)&&("ajax"==l?ut(t,[],function(i){var n=mt(t,i);for(e=0;e<n.length;e++)j(t,n[e]);t.iInitDisplayStart=o,lt(t),zt(t,!1),Ft(t,i)}):(zt(t,!1),Ft(t)))}else setTimeout(function(){At(t)},200)}function Ft(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&N(t),de(t,null,"plugin-init",[t,e]),de(t,"aoInitComplete","init",[t,e])}function Ot(t,e){var i=parseInt(e,10);t._iDisplayLength=i,ue(t),de(t,null,"length",[t,i])}function Pt(e){for(var i=e.oClasses,n=e.sTableId,o=e.aLengthMenu,r=t.isArray(o[0]),s=r?o[0]:o,a=r?o[1]:o,l=t("<select/>",{name:n+"_length","aria-controls":n,class:i.sLengthSelect}),c=0,h=s.length;c<h;c++)l[0][c]=new Option(a[c],s[c]);var d=t("<div><label/></div>").addClass(i.sLength);return e.aanFeatures.l||(d[0].id=n+"_length"),d.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),t("select",d).val(e._iDisplayLength).on("change.DT",function(i){Ot(e,t(this).val()),at(e)}),t(e.nTable).on("length.dt.DT",function(i,n,o){e===n&&t("select",d).val(o)}),d[0]}function Nt(e){var i=e.sPaginationType,n=l.ext.pager[i],o="function"==typeof n,r=function(t){at(t)},s=t("<div/>").addClass(e.oClasses.sPaging+i)[0],a=e.aanFeatures;return o||n.fnInit(e,s,r),a.p||(s.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(t){if(o){var e,i,s=t._iDisplayStart,l=t._iDisplayLength,c=t.fnRecordsDisplay(),h=-1===l,d=h?0:Math.ceil(s/l),u=h?1:Math.ceil(c/l),p=n(d,u);for(e=0,i=a.p.length;e<i;e++)pe(t,"pageButton")(t,a.p[e],e,p,d,u)}else n.fnUpdate(t,r)},sName:"pagination"})),s}function Ht(t,e,i){var n=t._iDisplayStart,o=t._iDisplayLength,r=t.fnRecordsDisplay();0===r||-1===o?n=0:"number"==typeof e?(n=e*o)>r&&(n=0):"first"==e?n=0:"previous"==e?(n=o>=0?n-o:0)<0&&(n=0):"next"==e?n+o<r&&(n+=o):"last"==e?n=Math.floor((r-1)/o)*o:se(t,0,"Unknown paging action: "+e,5);var s=t._iDisplayStart!==n;return t._iDisplayStart=n,s&&(de(t,null,"page",[t]),i&&at(t)),s}function Lt(e){return t("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function zt(e,i){e.oFeatures.bProcessing&&t(e.aanFeatures.r).css("display",i?"block":"none"),de(e,null,"processing",[e,i])}function Bt(e){var i=t(e.nTable);i.attr("role","grid");var n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;var o=n.sX,r=n.sY,s=e.oClasses,a=i.children("caption"),l=a.length?a[0]._captionSide:null,c=t(i[0].cloneNode(!1)),h=t(i[0].cloneNode(!1)),d=i.children("tfoot"),u="<div/>",p=function(t){return t?Xt(t):null};d.length||(d=null);var f=t(u,{class:s.sScrollWrapper}).append(t(u,{class:s.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:o?p(o):"100%"}).append(t(u,{class:s.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?a:null).append(i.children("thead"))))).append(t(u,{class:s.sScrollBody}).css({position:"relative",overflow:"auto",width:p(o)}).append(i));d&&f.append(t(u,{class:s.sScrollFoot}).css({overflow:"hidden",border:0,width:o?p(o):"100%"}).append(t(u,{class:s.sScrollFootInner}).append(h.removeAttr("id").css("margin-left",0).append("bottom"===l?a:null).append(i.children("tfoot")))));var g=f.children(),m=g[0],v=g[1],b=d?g[2]:null;return o&&t(v).on("scroll.DT",function(t){var e=this.scrollLeft;m.scrollLeft=e,d&&(b.scrollLeft=e)}),t(v).css(r&&n.bCollapse?"max-height":"height",r),e.nScrollHead=m,e.nScrollBody=v,e.nScrollFoot=b,e.aoDrawCallback.push({fn:$t,sName:"scrolling"}),f[0]}function $t(e){var i,o,r,s,a,l,c,h,d,u=e.oScroll,p=u.sX,f=u.sXInner,g=u.sY,m=u.iBarWidth,v=t(e.nScrollHead),b=v[0].style,y=v.children("div"),x=y[0].style,_=y.children("table"),C=e.nScrollBody,S=t(C),D=C.style,k=t(e.nScrollFoot).children("div"),T=k.children("table"),E=t(e.nTHead),R=t(e.nTable),I=R[0],M=I.style,A=e.nTFoot?t(e.nTFoot):null,F=e.oBrowser,O=F.bScrollOversize,P=w(e.aoColumns,"nTh"),L=[],z=[],B=[],$=[],U=function(t){var e=t.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0},j=C.scrollHeight>C.clientHeight;if(e.scrollBarVis!==j&&e.scrollBarVis!==n)return e.scrollBarVis=j,void N(e);e.scrollBarVis=j,R.children("thead, tfoot").remove(),A&&(l=A.clone().prependTo(R),o=A.find("tr"),s=l.find("tr")),a=E.clone().prependTo(R),i=E.find("tr"),r=a.find("tr"),a.find("th, td").removeAttr("tabindex"),p||(D.width="100%",v[0].style.width="100%"),t.each(dt(e,a),function(t,i){c=H(e,t),i.style.width=e.aoColumns[c].sWidth}),A&&Ut(function(t){t.style.width=""},s),d=R.outerWidth(),""===p?(M.width="100%",O&&(R.find("tbody").height()>C.offsetHeight||"scroll"==S.css("overflow-y"))&&(M.width=Xt(R.outerWidth()-m)),d=R.outerWidth()):""!==f&&(M.width=Xt(f),d=R.outerWidth()),Ut(U,r),Ut(function(e){B.push(e.innerHTML),L.push(Xt(t(e).css("width")))},r),Ut(function(e,i){-1!==t.inArray(e,P)&&(e.style.width=L[i])},i),t(r).height(0),A&&(Ut(U,s),Ut(function(e){$.push(e.innerHTML),z.push(Xt(t(e).css("width")))},s),Ut(function(t,e){t.style.width=z[e]},o),t(s).height(0)),Ut(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+B[e]+"</div>",t.style.width=L[e]},r),A&&Ut(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+$[e]+"</div>",t.style.width=z[e]},s),R.outerWidth()<d?(h=C.scrollHeight>C.offsetHeight||"scroll"==S.css("overflow-y")?d+m:d,O&&(C.scrollHeight>C.offsetHeight||"scroll"==S.css("overflow-y"))&&(M.width=Xt(h-m)),""!==p&&""===f||se(e,1,"Possible column misalignment",6)):h="100%",D.width=Xt(h),b.width=Xt(h),A&&(e.nScrollFoot.style.width=Xt(h)),g||O&&(D.height=Xt(I.offsetHeight+m));var W=R.outerWidth();_[0].style.width=Xt(W),x.width=Xt(W);var Y=R.height()>C.clientHeight||"scroll"==S.css("overflow-y"),V="padding"+(F.bScrollbarLeft?"Left":"Right");x[V]=Y?m+"px":"0px",A&&(T[0].style.width=Xt(W),k[0].style.width=Xt(W),k[0].style[V]=Y?m+"px":"0px"),R.children("colgroup").insertBefore(R.children("thead")),S.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(C.scrollTop=0)}function Ut(t,e,i){for(var n,o,r=0,s=0,a=e.length;s<a;){for(n=e[s].firstChild,o=i?i[s].firstChild:null;n;)1===n.nodeType&&(i?t(n,o,r):t(n,r),r++),n=n.nextSibling,o=i?o.nextSibling:null;s++}}var jt=/<.*?>/g;function Wt(i){var n,o,r,s=i.nTable,a=i.aoColumns,l=i.oScroll,c=l.sY,h=l.sX,d=l.sXInner,u=a.length,p=B(i,"bVisible"),f=t("th",i.nTHead),g=s.getAttribute("width"),m=s.parentNode,v=!1,b=i.oBrowser,y=b.bScrollOversize,w=s.style.width;for(w&&-1!==w.indexOf("%")&&(g=w),n=0;n<p.length;n++)null!==(o=a[p[n]]).sWidth&&(o.sWidth=Vt(o.sWidthOrig,m),v=!0);if(y||!v&&!h&&!c&&u==z(i)&&u==f.length)for(n=0;n<u;n++){var x=H(i,n);null!==x&&(a[x].sWidth=Xt(f.eq(n).width()))}else{var _=t(s).clone().css("visibility","hidden").removeAttr("id");_.find("tbody tr").remove();var C=t("<tr/>").appendTo(_.find("tbody"));for(_.find("thead, tfoot").remove(),_.append(t(i.nTHead).clone()).append(t(i.nTFoot).clone()),_.find("tfoot th, tfoot td").css("width",""),f=dt(i,_.find("thead")[0]),n=0;n<p.length;n++)o=a[p[n]],f[n].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?Xt(o.sWidthOrig):"",o.sWidthOrig&&h&&t(f[n]).append(t("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(i.aoData.length)for(n=0;n<p.length;n++)o=a[r=p[n]],t(qt(i,r)).clone(!1).append(o.sContentPadding).appendTo(C);t("[name]",_).removeAttr("name");var S=t("<div/>").css(h||c?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(_).appendTo(m);h&&d?_.width(d):h?(_.css("width","auto"),_.removeAttr("width"),_.width()<m.clientWidth&&g&&_.width(m.clientWidth)):c?_.width(m.clientWidth):g&&_.width(g);var D=0;for(n=0;n<p.length;n++){var k=t(f[n]),T=k.outerWidth()-k.width(),E=b.bBounding?Math.ceil(f[n].getBoundingClientRect().width):k.outerWidth();D+=E,a[p[n]].sWidth=Xt(E-T)}s.style.width=Xt(D),S.remove()}if(g&&(s.style.width=Xt(g)),(g||h)&&!i._reszEvt){var R=function(){t(e).on("resize.DT-"+i.sInstance,Yt(function(){N(i)}))};y?setTimeout(R,1e3):R(),i._reszEvt=!0}}var Yt=l.util.throttle;function Vt(e,n){if(!e)return 0;var o=t("<div/>").css("width",Xt(e)).appendTo(n||i.body),r=o[0].offsetWidth;return o.remove(),r}function qt(e,i){var n=Gt(e,i);if(n<0)return null;var o=e.aoData[n];return o.nTr?o.anCells[i]:t("<td/>").html(Y(e,n,i,"display"))[0]}function Gt(t,e){for(var i,n=-1,o=-1,r=0,s=t.aoData.length;r<s;r++)(i=(i=(i=Y(t,r,e,"display")+"").replace(jt,"")).replace(/&nbsp;/g," ")).length>n&&(n=i.length,o=r);return o}function Xt(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Zt(e){var i,o,r,s,a,c,h,d=[],u=e.aoColumns,p=e.aaSortingFixed,f=t.isPlainObject(p),g=[],m=function(e){e.length&&!t.isArray(e[0])?g.push(e):t.merge(g,e)};for(t.isArray(p)&&m(p),f&&p.pre&&m(p.pre),m(e.aaSorting),f&&p.post&&m(p.post),i=0;i<g.length;i++)for(o=0,r=(s=u[h=g[i][0]].aDataSort).length;o<r;o++)c=u[a=s[o]].sType||"string",g[i]._idx===n&&(g[i]._idx=t.inArray(g[i][1],u[a].asSorting)),d.push({src:h,col:a,dir:g[i][1],index:g[i]._idx,type:c,formatter:l.ext.type.order[c+"-pre"]});return d}function Jt(t){var e,i,n,o,r,s=[],a=l.ext.type.order,c=t.aoData,h=(t.aoColumns,0),d=t.aiDisplayMaster;for($(t),e=0,i=(r=Zt(t)).length;e<i;e++)(o=r[e]).formatter&&h++,ie(t,o.col);if("ssp"!=fe(t)&&0!==r.length){for(e=0,n=d.length;e<n;e++)s[d[e]]=e;h===r.length?d.sort(function(t,e){var i,n,o,a,l,h=r.length,d=c[t]._aSortData,u=c[e]._aSortData;for(o=0;o<h;o++)if(0!==(a=(i=d[(l=r[o]).col])<(n=u[l.col])?-1:i>n?1:0))return"asc"===l.dir?a:-a;return(i=s[t])<(n=s[e])?-1:i>n?1:0}):d.sort(function(t,e){var i,n,o,l,h,d=r.length,u=c[t]._aSortData,p=c[e]._aSortData;for(o=0;o<d;o++)if(i=u[(h=r[o]).col],n=p[h.col],0!==(l=(a[h.type+"-"+h.dir]||a["string-"+h.dir])(i,n)))return l;return(i=s[t])<(n=s[e])?-1:i>n?1:0})}t.bSorted=!0}function Kt(t){for(var e,i,n=t.aoColumns,o=Zt(t),r=t.oLanguage.oAria,s=0,a=n.length;s<a;s++){var l=n[s],c=l.asSorting,h=l.sTitle.replace(/<.*?>/g,""),d=l.nTh;d.removeAttribute("aria-sort"),l.bSortable?(o.length>0&&o[0].col==s?(d.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),i=c[o[0].index+1]||c[0]):i=c[0],e=h+("asc"===i?r.sSortAscending:r.sSortDescending)):e=h,d.setAttribute("aria-label",e)}}function Qt(e,i,o,r){var s,a=e.aoColumns[i],l=e.aaSorting,c=a.asSorting,h=function(e,i){var o=e._idx;return o===n&&(o=t.inArray(e[1],c)),o+1<c.length?o+1:i?null:0};if("number"==typeof l[0]&&(l=e.aaSorting=[l]),o&&e.oFeatures.bSortMulti){var d=t.inArray(i,w(l,"0"));-1!==d?(null===(s=h(l[d],!0))&&1===l.length&&(s=0),null===s?l.splice(d,1):(l[d][1]=c[s],l[d]._idx=s)):(l.push([i,c[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==i?(s=h(l[0]),l.length=1,l[0][1]=c[s],l[0]._idx=s):(l.length=0,l.push([i,c[0]]),l[0]._idx=0);lt(e),"function"==typeof r&&r(e)}function te(t,e,i,n){var o=t.aoColumns[i];ce(e,{},function(e){!1!==o.bSortable&&(t.oFeatures.bProcessing?(zt(t,!0),setTimeout(function(){Qt(t,i,e.shiftKey,n),"ssp"!==fe(t)&&zt(t,!1)},0)):Qt(t,i,e.shiftKey,n))})}function ee(e){var i,n,o,r=e.aLastSort,s=e.oClasses.sSortColumn,a=Zt(e),l=e.oFeatures;if(l.bSort&&l.bSortClasses){for(i=0,n=r.length;i<n;i++)o=r[i].src,t(w(e.aoData,"anCells",o)).removeClass(s+(i<2?i+1:3));for(i=0,n=a.length;i<n;i++)o=a[i].src,t(w(e.aoData,"anCells",o)).addClass(s+(i<2?i+1:3))}e.aLastSort=a}function ie(t,e){var i,n,o,r=t.aoColumns[e],s=l.ext.order[r.sSortDataType];s&&(i=s.call(t.oInstance,t,e,L(t,e)));for(var a=l.ext.type.order[r.sType+"-pre"],c=0,h=t.aoData.length;c<h;c++)(n=t.aoData[c])._aSortData||(n._aSortData=[]),n._aSortData[e]&&!s||(o=s?i[c]:Y(t,c,e,"sort"),n._aSortData[e]=a?a(o):o)}function ne(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var i={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:t.extend(!0,[],e.aaSorting),search:Tt(e.oPreviousSearch),columns:t.map(e.aoColumns,function(t,i){return{visible:t.bVisible,search:Tt(e.aoPreSearchCols[i])}})};de(e,"aoStateSaveParams","stateSaveParams",[e,i]),e.oSavedState=i,e.fnStateSaveCallback.call(e.oInstance,e,i)}}function oe(e,i,o){var r,s,a=e.aoColumns,l=function(i){if(i&&i.time){var l=de(e,"aoStateLoadParams","stateLoadParams",[e,c]);if(-1===t.inArray(!1,l)){var h=e.iStateDuration;if(h>0&&i.time<+new Date-1e3*h)o();else if(i.columns&&a.length!==i.columns.length)o();else{if(e.oLoadedState=t.extend(!0,{},c),i.start!==n&&(e._iDisplayStart=i.start,e.iInitDisplayStart=i.start),i.length!==n&&(e._iDisplayLength=i.length),i.order!==n&&(e.aaSorting=[],t.each(i.order,function(t,i){e.aaSorting.push(i[0]>=a.length?[0,i[1]]:i)})),i.search!==n&&t.extend(e.oPreviousSearch,Et(i.search)),i.columns)for(r=0,s=i.columns.length;r<s;r++){var d=i.columns[r];d.visible!==n&&(a[r].bVisible=d.visible),d.search!==n&&t.extend(e.aoPreSearchCols[r],Et(d.search))}de(e,"aoStateLoaded","stateLoaded",[e,c]),o()}}else o()}else o()};if(e.oFeatures.bStateSave){var c=e.fnStateLoadCallback.call(e.oInstance,e,l);c!==n&&l(c)}else o()}function re(e){var i=l.settings,n=t.inArray(e,w(i,"nTable"));return-1!==n?i[n]:null}function se(t,i,n,o){if(n="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+n,o&&(n+=". For more information about this error, please see http://datatables.net/tn/"+o),i)e.console&&console.log&&console.log(n);else{var r=l.ext,s=r.sErrMode||r.errMode;if(t&&de(t,null,"error",[t,o,n]),"alert"==s)alert(n);else{if("throw"==s)throw new Error(n);"function"==typeof s&&s(t,o,n)}}}function ae(e,i,o,r){t.isArray(o)?t.each(o,function(n,o){t.isArray(o)?ae(e,i,o[0],o[1]):ae(e,i,o)}):(r===n&&(r=o),i[o]!==n&&(e[r]=i[o]))}function le(e,i,n){var o;for(var r in i)i.hasOwnProperty(r)&&(o=i[r],t.isPlainObject(o)?(t.isPlainObject(e[r])||(e[r]={}),t.extend(!0,e[r],o)):n&&"data"!==r&&"aaData"!==r&&t.isArray(o)?e[r]=o.slice():e[r]=o);return e}function ce(e,i,n){t(e).on("click.DT",i,function(t){e.blur(),n(t)}).on("keypress.DT",i,function(t){13===t.which&&(t.preventDefault(),n(t))}).on("selectstart.DT",function(){return!1})}function he(t,e,i,n){i&&t[e].push({fn:i,sName:n})}function de(e,i,n,o){var r=[];if(i&&(r=t.map(e[i].slice().reverse(),function(t,i){return t.fn.apply(e.oInstance,o)})),null!==n){var s=t.Event(n+".dt");t(e.nTable).trigger(s,o),r.push(s.result)}return r}function ue(t){var e=t._iDisplayStart,i=t.fnDisplayEnd(),n=t._iDisplayLength;e>=i&&(e=i-n),e-=e%n,(-1===n||e<0)&&(e=0),t._iDisplayStart=e}function pe(e,i){var n=e.renderer,o=l.ext.renderer[i];return t.isPlainObject(n)&&n[i]?o[n[i]]||o._:"string"==typeof n&&o[n]||o._}function fe(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}var ge=[],me=Array.prototype;r=function(e,i){if(!(this instanceof r))return new r(e,i);var n=[],o=function(e){var i=function(e){var i,n,o=l.settings,r=t.map(o,function(t,e){return t.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?-1!==(i=t.inArray(e,r))?[o[i]]:null:e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?n=t(e):e instanceof t&&(n=e),n?n.map(function(e){return-1!==(i=t.inArray(this,r))?o[i]:null}).toArray():void 0):[]}(e);i&&(n=n.concat(i))};if(t.isArray(e))for(var s=0,a=e.length;s<a;s++)o(e[s]);else o(e);this.context=D(n),i&&t.merge(this,i),this.selector={rows:null,cols:null,opts:null},r.extend(this,this,ge)},l.Api=r,t.extend(r.prototype,{any:function(){return 0!==this.count()},concat:me.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,i=this.length;e<i;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new r(e[t],this[t]):null},filter:function(t){var e=[];if(me.filter)e=me.filter.call(this,t,this);else for(var i=0,n=this.length;i<n;i++)t.call(this,this[i],i,this)&&e.push(this[i]);return new r(this.context,e)},flatten:function(){var t=[];return new r(this.context,t.concat.apply(t,this.toArray()))},join:me.join,indexOf:me.indexOf||function(t,e){for(var i=e||0,n=this.length;i<n;i++)if(this[i]===t)return i;return-1},iterator:function(t,e,i,o){var s,a,l,c,h,d,u,p,f=[],g=this.context,m=this.selector;for("string"==typeof t&&(o=i,i=e,e=t,t=!1),a=0,l=g.length;a<l;a++){var v=new r(g[a]);if("table"===e)(s=i.call(v,g[a],a))!==n&&f.push(s);else if("columns"===e||"rows"===e)(s=i.call(v,g[a],this[a],a))!==n&&f.push(s);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(u=this[a],"column-rows"===e&&(d=xe(g[a],m.opts)),c=0,h=u.length;c<h;c++)p=u[c],(s="cell"===e?i.call(v,g[a],p.row,p.column,a,c):i.call(v,g[a],p,a,c,d))!==n&&f.push(s)}if(f.length||o){var b=new r(g,t?f.concat.apply([],f):f),y=b.selector;return y.rows=m.rows,y.cols=m.cols,y.opts=m.opts,b}return this},lastIndexOf:me.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(me.map)e=me.map.call(this,t,this);else for(var i=0,n=this.length;i<n;i++)e.push(t.call(this,this[i],i));return new r(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:me.pop,push:me.push,reduce:me.reduce||function(t,e){return F(this,t,e,0,this.length,1)},reduceRight:me.reduceRight||function(t,e){return F(this,t,e,this.length-1,-1,-1)},reverse:me.reverse,selector:null,shift:me.shift,sort:me.sort,splice:me.splice,toArray:function(){return me.slice.call(this)},to$:function(){return t(this)},toJQuery:function(){return t(this)},unique:function(){return new r(this.context,D(this))},unshift:me.unshift}),r.extend=function(e,i,n){if(n.length&&i&&(i instanceof r||i.__dt_wrapper)){var o,s,a,l=function(t,e,i){return function(){var n=e.apply(t,arguments);return r.extend(n,n,i.methodExt),n}};for(o=0,s=n.length;o<s;o++)i[(a=n[o]).name]="function"==typeof a.val?l(e,a.val,a):t.isPlainObject(a.val)?{}:a.val,i[a.name].__dt_wrapper=!0,r.extend(e,i[a.name],a.propExt)}},r.register=s=function(e,i){if(t.isArray(e))for(var n=0,o=e.length;n<o;n++)r.register(e[n],i);else{var s,a,l,c,h=e.split("."),d=ge,u=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i].name===e)return t[i];return null};for(s=0,a=h.length;s<a;s++){var p=u(d,l=(c=-1!==h[s].indexOf("()"))?h[s].replace("()",""):h[s]);p||(p={name:l,val:{},methodExt:[],propExt:[]},d.push(p)),s===a-1?p.val=i:d=c?p.methodExt:p.propExt}}},r.registerPlural=a=function(e,i,o){r.register(e,o),r.register(i,function(){var e=o.apply(this,arguments);return e===this?this:e instanceof r?e.length?t.isArray(e[0])?new r(e.context,e[0]):e[0]:n:e})};s("tables()",function(e){return e?new r(function(e,i){if("number"==typeof e)return[i[e]];var n=t.map(i,function(t,e){return t.nTable});return t(n).filter(e).map(function(e){var o=t.inArray(this,n);return i[o]}).toArray()}(e,this.context)):this}),s("table()",function(t){var e=this.tables(t),i=e.context;return i.length?new r(i[0]):e}),a("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),a("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),a("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),a("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),a("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),s("draw()",function(t){return this.iterator("table",function(e){"page"===t?at(e):("string"==typeof t&&(t="full-hold"!==t),lt(e,!1===t))})}),s("page()",function(t){return t===n?this.page.info().page:this.iterator("table",function(e){Ht(e,t)})}),s("page.info()",function(t){if(0===this.context.length)return n;var e=this.context[0],i=e._iDisplayStart,o=e.oFeatures.bPaginate?e._iDisplayLength:-1,r=e.fnRecordsDisplay(),s=-1===o;return{page:s?0:Math.floor(i/o),pages:s?1:Math.ceil(r/o),start:i,end:e.fnDisplayEnd(),length:o,recordsTotal:e.fnRecordsTotal(),recordsDisplay:r,serverSide:"ssp"===fe(e)}}),s("page.len()",function(t){return t===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(e){Ot(e,t)})});var ve=function(t,e,i){if(i){var n=new r(t);n.one("draw",function(){i(n.ajax.json())})}if("ssp"==fe(t))lt(t,e);else{zt(t,!0);var o=t.jqXHR;o&&4!==o.readyState&&o.abort(),ut(t,[],function(i){Q(t);for(var n=mt(t,i),o=0,r=n.length;o<r;o++)j(t,n[o]);lt(t,e),zt(t,!1)})}};s("ajax.json()",function(){var t=this.context;if(t.length>0)return t[0].json}),s("ajax.params()",function(){var t=this.context;if(t.length>0)return t[0].oAjaxData}),s("ajax.reload()",function(t,e){return this.iterator("table",function(i){ve(i,!1===e,t)})}),s("ajax.url()",function(e){var i=this.context;return e===n?0===i.length?n:(i=i[0]).ajax?t.isPlainObject(i.ajax)?i.ajax.url:i.ajax:i.sAjaxSource:this.iterator("table",function(i){t.isPlainObject(i.ajax)?i.ajax.url=e:i.ajax=e})}),s("ajax.url().load()",function(t,e){return this.iterator("table",function(i){ve(i,!1===e,t)})});var be=function(e,i,r,s,a){var l,c,h,d,u,p,f=[],g=typeof i;for(i&&"string"!==g&&"function"!==g&&i.length!==n||(i=[i]),h=0,d=i.length;h<d;h++)for(u=0,p=(c=i[h]&&i[h].split&&!i[h].match(/[\[\(:]/)?i[h].split(","):[i[h]]).length;u<p;u++)(l=r("string"==typeof c[u]?t.trim(c[u]):c[u]))&&l.length&&(f=f.concat(l));var m=o.selector[e];if(m.length)for(h=0,d=m.length;h<d;h++)f=m[h](s,a,f);return D(f)},ye=function(e){return e||(e={}),e.filter&&e.search===n&&(e.search=e.filter),t.extend({search:"none",order:"current",page:"all"},e)},we=function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].length>0)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},xe=function(e,i){var n,o,r,s=[],a=e.aiDisplay,l=e.aiDisplayMaster,c=i.search,h=i.order,d=i.page;if("ssp"==fe(e))return"removed"===c?[]:_(0,l.length);if("current"==d)for(n=e._iDisplayStart,o=e.fnDisplayEnd();n<o;n++)s.push(a[n]);else if("current"==h||"applied"==h)s="none"==c?l.slice():"applied"==c?a.slice():t.map(l,function(e,i){return-1===t.inArray(e,a)?e:null});else if("index"==h||"original"==h)for(n=0,o=e.aoData.length;n<o;n++)"none"==c?s.push(n):(-1===(r=t.inArray(n,a))&&"removed"==c||r>=0&&"applied"==c)&&s.push(n);return s};s("rows()",function(e,i){e===n?e="":t.isPlainObject(e)&&(i=e,e=""),i=ye(i);var o=this.iterator("table",function(o){return function(e,i,o){var r;return be("row",i,function(i){var s=m(i);if(null!==s&&!o)return[s];if(r||(r=xe(e,o)),null!==s&&-1!==t.inArray(s,r))return[s];if(null===i||i===n||""===i)return r;if("function"==typeof i)return t.map(r,function(t){var n=e.aoData[t];return i(t,n._aData,n.nTr)?t:null});var a=C(x(e.aoData,r,"nTr"));if(i.nodeName){if(i._DT_RowIndex!==n)return[i._DT_RowIndex];if(i._DT_CellIndex)return[i._DT_CellIndex.row];var l=t(i).closest("*[data-dt-row]");return l.length?[l.data("dt-row")]:[]}if("string"==typeof i&&"#"===i.charAt(0)){var c=e.aIds[i.replace(/^#/,"")];if(c!==n)return[c.idx]}return t(a).filter(i).map(function(){return this._DT_RowIndex}).toArray()},e,o)}(o,e,i)},1);return o.selector.rows=e,o.selector.opts=i,o}),s("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||n},1)}),s("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return x(t.aoData,e,"_aData")},1)}),a("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,i){var n=e.aoData[i];return"search"===t?n._aFilterData:n._aSortData},1)}),a("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,i){et(e,i,t)})}),a("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),a("rows().ids()","row().id()",function(t){for(var e=[],i=this.context,n=0,o=i.length;n<o;n++)for(var s=0,a=this[n].length;s<a;s++){var l=i[n].rowIdFn(i[n].aoData[this[n][s]]._aData);e.push((!0===t?"#":"")+l)}return new r(i,e)}),a("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,i,o){var r,s,a,l,c,h,d=e.aoData,u=d[i];for(d.splice(i,1),r=0,s=d.length;r<s;r++)if(h=(c=d[r]).anCells,null!==c.nTr&&(c.nTr._DT_RowIndex=r),null!==h)for(a=0,l=h.length;a<l;a++)h[a]._DT_CellIndex.row=r;tt(e.aiDisplayMaster,i),tt(e.aiDisplay,i),tt(t[o],i,!1),ue(e);var p=e.rowIdFn(u._aData);p!==n&&delete e.aIds[p]}),this.iterator("table",function(t){for(var e=0,i=t.aoData.length;e<i;e++)t.aoData[e].idx=e}),this}),s("rows.add()",function(e){var i=this.iterator("table",function(t){var i,n,o,r=[];for(n=0,o=e.length;n<o;n++)(i=e[n]).nodeName&&"TR"===i.nodeName.toUpperCase()?r.push(W(t,i)[0]):r.push(j(t,i));return r},1),n=this.rows(-1);return n.pop(),t.merge(n,i),n}),s("row()",function(t,e){return we(this.rows(t,e))}),s("row().data()",function(t){var e=this.context;return t===n?e.length&&this.length?e[0].aoData[this[0]]._aData:n:(e[0].aoData[this[0]]._aData=t,et(e[0],this[0],"data"),this)}),s("row().node()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null}),s("row.add()",function(e){e instanceof t&&e.length&&(e=e[0]);var i=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?W(t,e)[0]:j(t,e)});return this.row(i[0])});var _e=function(t,e){var i=t.context;if(i.length){var o=i[0].aoData[e!==n?e:t[0]];o&&o._details&&(o._details.remove(),o._detailsShow=n,o._details=n)}},Ce=function(t,e){var i=t.context;if(i.length&&t.length){var n=i[0].aoData[t[0]];n._details&&(n._detailsShow=e,e?n._details.insertAfter(n.nTr):n._details.detach(),Se(i[0]))}},Se=function(t){var e=new r(t),i=t.aoData;e.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),w(i,"_details").length>0&&(e.on("draw.dt.DT_details",function(n,o){t===o&&e.rows({page:"current"}).eq(0).each(function(t){var e=i[t];e._detailsShow&&e._details.insertAfter(e.nTr)})}),e.on("column-visibility.dt.DT_details",function(e,n,o,r){if(t===n)for(var s,a=z(n),l=0,c=i.length;l<c;l++)(s=i[l])._details&&s._details.children("td[colspan]").attr("colspan",a)}),e.on("destroy.dt.DT_details",function(n,o){if(t===o)for(var r=0,s=i.length;r<s;r++)i[r]._details&&_e(e,r)}))};s("row().child()",function(e,i){var o=this.context;return e===n?o.length&&this.length?o[0].aoData[this[0]]._details:n:(!0===e?this.child.show():!1===e?_e(this):o.length&&this.length&&function(e,i,n,o){var r=[],s=function(i,n){if(t.isArray(i)||i instanceof t)for(var o=0,a=i.length;o<a;o++)s(i[o],n);else if(i.nodeName&&"tr"===i.nodeName.toLowerCase())r.push(i);else{var l=t("<tr><td/></tr>").addClass(n);t("td",l).addClass(n).html(i)[0].colSpan=z(e),r.push(l[0])}};s(n,o),i._details&&i._details.detach(),i._details=t(r),i._detailsShow&&i._details.insertAfter(i.nTr)}(o[0],o[0].aoData[this[0]],e,i),this)}),s(["row().child.show()","row().child().show()"],function(t){return Ce(this,!0),this}),s(["row().child.hide()","row().child().hide()"],function(){return Ce(this,!1),this}),s(["row().child.remove()","row().child().remove()"],function(){return _e(this),this}),s("row().child.isShown()",function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1});var De=/^([^:]+):(name|visIdx|visible)$/,ke=function(t,e,i,n,o){for(var r=[],s=0,a=o.length;s<a;s++)r.push(Y(t,o[s],e));return r};s("columns()",function(e,i){e===n?e="":t.isPlainObject(e)&&(i=e,e=""),i=ye(i);var o=this.iterator("table",function(n){return function(e,i,n){var o=e.aoColumns,r=w(o,"sName"),s=w(o,"nTh");return be("column",i,function(i){var a=m(i);if(""===i)return _(o.length);if(null!==a)return[a>=0?a:o.length+a];if("function"==typeof i){var l=xe(e,n);return t.map(o,function(t,n){return i(n,ke(e,n,0,0,l),s[n])?n:null})}var c="string"==typeof i?i.match(De):"";if(c)switch(c[2]){case"visIdx":case"visible":var h=parseInt(c[1],10);if(h<0){var d=t.map(o,function(t,e){return t.bVisible?e:null});return[d[d.length+h]]}return[H(e,h)];case"name":return t.map(r,function(t,e){return t===c[1]?e:null});default:return[]}if(i.nodeName&&i._DT_CellIndex)return[i._DT_CellIndex.column];var u=t(s).filter(i).map(function(){return t.inArray(this,s)}).toArray();if(u.length||!i.nodeName)return u;var p=t(i).closest("*[data-dt-column]");return p.length?[p.data("dt-column")]:[]},e,n)}(n,e,i)},1);return o.selector.cols=e,o.selector.opts=i,o}),a("columns().header()","column().header()",function(t,e){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),a("columns().footer()","column().footer()",function(t,e){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),a("columns().data()","column().data()",function(){return this.iterator("column-rows",ke,1)}),a("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),a("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,i,n,o,r){return x(e.aoData,r,"search"===t?"_aFilterData":"_aSortData",i)},1)}),a("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,i,n,o){return x(t.aoData,o,"anCells",e)},1)}),a("columns().visible()","column().visible()",function(e,i){var o=this.iterator("column",function(i,o){if(e===n)return i.aoColumns[o].bVisible;!function(e,i,o){var r,s,a,l,c=e.aoColumns,h=c[i],d=e.aoData;if(o===n)return h.bVisible;if(h.bVisible!==o){if(o){var u=t.inArray(!0,w(c,"bVisible"),i+1);for(s=0,a=d.length;s<a;s++)l=d[s].nTr,r=d[s].anCells,l&&l.insertBefore(r[i],r[u]||null)}else t(w(e.aoData,"anCells",i)).detach();h.bVisible=o,st(e,e.aoHeader),st(e,e.aoFooter),ne(e)}}(i,o,e)});return e!==n&&(this.iterator("column",function(t,n){de(t,null,"column-visibility",[t,n,e,i])}),(i===n||i)&&this.columns.adjust()),o}),a("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,i){return"visible"===t?L(e,i):i},1)}),s("columns.adjust()",function(){return this.iterator("table",function(t){N(t)},1)}),s("column.index()",function(t,e){if(0!==this.context.length){var i=this.context[0];if("fromVisible"===t||"toData"===t)return H(i,e);if("fromData"===t||"toVisible"===t)return L(i,e)}}),s("column()",function(t,e){return we(this.columns(t,e))});s("cells()",function(e,i,o){if(t.isPlainObject(e)&&(e.row===n?(o=e,e=null):(o=i,i=null)),t.isPlainObject(i)&&(o=i,i=null),null===i||i===n)return this.iterator("table",function(i){return function(e,i,o){var r,s,a,l,c,h,d,u=e.aoData,p=xe(e,o),f=C(x(u,p,"anCells")),g=t([].concat.apply([],f)),m=e.aoColumns.length;return be("cell",i,function(i){var o="function"==typeof i;if(null===i||i===n||o){for(s=[],a=0,l=p.length;a<l;a++)for(r=p[a],c=0;c<m;c++)h={row:r,column:c},o?(d=u[r],i(h,Y(e,r,c),d.anCells?d.anCells[c]:null)&&s.push(h)):s.push(h);return s}if(t.isPlainObject(i))return[i];var f=g.filter(i).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray();return f.length||!i.nodeName?f:(d=t(i).closest("*[data-dt-row]")).length?[{row:d.data("dt-row"),column:d.data("dt-column")}]:[]},e,o)}(i,e,ye(o))});var r,s,a,l,c,h=this.columns(i,o),d=this.rows(e,o),u=this.iterator("table",function(t,e){for(r=[],s=0,a=d[e].length;s<a;s++)for(l=0,c=h[e].length;l<c;l++)r.push({row:d[e][s],column:h[e][l]});return r},1);return t.extend(u.selector,{cols:i,rows:e,opts:o}),u}),a("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,i){var o=t.aoData[e];return o&&o.anCells?o.anCells[i]:n},1)}),s("cells().data()",function(){return this.iterator("cell",function(t,e,i){return Y(t,e,i)},1)}),a("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,i,n){return e.aoData[i][t][n]},1)}),a("cells().render()","cell().render()",function(t){return this.iterator("cell",function(e,i,n){return Y(e,i,n,t)},1)}),a("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,i){return{row:e,column:i,columnVisible:L(t,i)}},1)}),a("cells().invalidate()","cell().invalidate()",function(t){return this.iterator("cell",function(e,i,n){et(e,i,t,n)})}),s("cell()",function(t,e,i){return we(this.cells(t,e,i))}),s("cell().data()",function(t){var e=this.context,i=this[0];return t===n?e.length&&i.length?Y(e[0],i[0].row,i[0].column):n:(V(e[0],i[0].row,i[0].column,t),et(e[0],i[0].row,"data",i[0].column),this)}),s("order()",function(e,i){var o=this.context;return e===n?0!==o.length?o[0].aaSorting:n:("number"==typeof e?e=[[e,i]]:e.length&&!t.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),s("order.listener()",function(t,e,i){return this.iterator("table",function(n){te(n,t,e,i)})}),s("order.fixed()",function(e){if(!e){var i=this.context,o=i.length?i[0].aaSortingFixed:n;return t.isArray(o)?{pre:o}:o}return this.iterator("table",function(i){i.aaSortingFixed=t.extend(!0,{},e)})}),s(["columns().order()","column().order()"],function(e){var i=this;return this.iterator("table",function(n,o){var r=[];t.each(i[o],function(t,i){r.push([i,e])}),n.aaSorting=r})}),s("search()",function(e,i,o,r){var s=this.context;return e===n?0!==s.length?s[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&bt(n,t.extend({},n.oPreviousSearch,{sSearch:e+"",bRegex:null!==i&&i,bSmart:null===o||o,bCaseInsensitive:null===r||r}),1)})}),a("columns().search()","column().search()",function(e,i,o,r){return this.iterator("column",function(s,a){var l=s.aoPreSearchCols;if(e===n)return l[a].sSearch;s.oFeatures.bFilter&&(t.extend(l[a],{sSearch:e+"",bRegex:null!==i&&i,bSmart:null===o||o,bCaseInsensitive:null===r||r}),bt(s,s.oPreviousSearch,1))})}),s("state()",function(){return this.context.length?this.context[0].oSavedState:null}),s("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),s("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),s("state.save()",function(){return this.iterator("table",function(t){ne(t)})}),l.versionCheck=l.fnVersionCheck=function(t){for(var e,i,n=l.version.split("."),o=t.split("."),r=0,s=o.length;r<s;r++)if((e=parseInt(n[r],10)||0)!==(i=parseInt(o[r],10)||0))return e>i;return!0},l.isDataTable=l.fnIsDataTable=function(e){var i=t(e).get(0),n=!1;return e instanceof l.Api||(t.each(l.settings,function(e,o){var r=o.nScrollHead?t("table",o.nScrollHead)[0]:null,s=o.nScrollFoot?t("table",o.nScrollFoot)[0]:null;o.nTable!==i&&r!==i&&s!==i||(n=!0)}),n)},l.tables=l.fnTables=function(e){var i=!1;t.isPlainObject(e)&&(i=e.api,e=e.visible);var n=t.map(l.settings,function(i){if(!e||e&&t(i.nTable).is(":visible"))return i.nTable});return i?new r(n):n},l.camelToHungarian=T,s("$()",function(e,i){var n=this.rows(i).nodes(),o=t(n);return t([].concat(o.filter(e).toArray(),o.find(e).toArray()))}),t.each(["on","one","off"],function(e,i){s(i+"()",function(){var e=Array.prototype.slice.call(arguments);e[0]=t.map(e[0].split(/\s/),function(t){return t.match(/\.dt\b/)?t:t+".dt"}).join(" ");var n=t(this.tables().nodes());return n[i].apply(n,e),this})}),s("clear()",function(){return this.iterator("table",function(t){Q(t)})}),s("settings()",function(){return new r(this.context,this.context)}),s("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),s("data()",function(){return this.iterator("table",function(t){return w(t.aoData,"_aData")}).flatten()}),s("destroy()",function(i){return i=i||!1,this.iterator("table",function(n){var o,s=n.nTableWrapper.parentNode,a=n.oClasses,c=n.nTable,h=n.nTBody,d=n.nTHead,u=n.nTFoot,p=t(c),f=t(h),g=t(n.nTableWrapper),m=t.map(n.aoData,function(t){return t.nTr});n.bDestroying=!0,de(n,"aoDestroyCallback","destroy",[n]),i||new r(n).columns().visible(!0),g.off(".DT").find(":not(tbody *)").off(".DT"),t(e).off(".DT-"+n.sInstance),c!=d.parentNode&&(p.children("thead").detach(),p.append(d)),u&&c!=u.parentNode&&(p.children("tfoot").detach(),p.append(u)),n.aaSorting=[],n.aaSortingFixed=[],ee(n),t(m).removeClass(n.asStripeClasses.join(" ")),t("th, td",d).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),n.bJUI&&(t("th span."+a.sSortIcon+", td span."+a.sSortIcon,d).detach(),t("th, td",d).each(function(){var e=t("div."+a.sSortJUIWrapper,this);t(this).append(e.contents()),e.detach()})),f.children().detach(),f.append(m);var v=i?"remove":"detach";p[v](),g[v](),!i&&s&&(s.insertBefore(c,n.nTableReinsertBefore),p.css("width",n.sDestroyWidth).removeClass(a.sTable),(o=n.asDestroyStripes.length)&&f.children().each(function(e){t(this).addClass(n.asDestroyStripes[e%o])}));var b=t.inArray(n,l.settings);-1!==b&&l.settings.splice(b,1)})}),t.each(["column","row","cell"],function(t,e){s(e+"s().every()",function(t){var i=this.selector.opts,o=this;return this.iterator(e,function(r,s,a,l,c){t.call(o[e](s,"cell"===e?a:i,"cell"===e?i:n),s,a,l,c)})})}),s("i18n()",function(e,i,o){var r=this.context[0],s=Z(e)(r.oLanguage);return s===n&&(s=i),o!==n&&t.isPlainObject(s)&&(s=s[o]!==n?s[o]:s._),s.replace("%d",o)}),l.version="1.10.13",l.settings=[],l.models={},l.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},l.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},l.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},l.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(t){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:t.extend({},l.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},k(l.defaults),l.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},k(l.defaults.column),l.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:n,oAjaxData:n,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==fe(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==fe(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,i=e+t,n=this.aiDisplay.length,o=this.oFeatures,r=o.bPaginate;return o.bServerSide?!1===r||-1===t?e+n:Math.min(e+t,this._iRecordsDisplay):!r||i>n||-1===t?n:i},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},l.ext=o={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:l.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:l.version},t.extend(o,{afnFiltering:o.search,aTypes:o.type.detect,ofnSearch:o.type.search,oSort:o.type.order,afnSortData:o.order,aoFeatures:o.feature,oApi:o.internal,oStdClasses:o.classes,oPagination:o.pager}),t.extend(l.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var e="ui-state-default",i="css_right ui-icon ui-icon-",n="fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";t.extend(l.ext.oJUIClasses,l.ext.classes,{sPageButton:"fg-button ui-button "+e,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:e+" sorting_asc",sSortDesc:e+" sorting_desc",sSortable:e+" sorting",sSortableAsc:e+" sorting_asc_disabled",sSortableDesc:e+" sorting_desc_disabled",sSortableNone:e+" sorting_disabled",sSortJUIAsc:i+"triangle-1-n",sSortJUIDesc:i+"triangle-1-s",sSortJUI:i+"carat-2-n-s",sSortJUIAscAllowed:i+"carat-1-n",sSortJUIDescAllowed:i+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+e,sScrollFoot:"dataTables_scrollFoot "+e,sHeaderTH:e,sFooterTH:e,sJUIHeader:n+" ui-corner-tl ui-corner-tr",sJUIFooter:n+" ui-corner-bl ui-corner-br"})}();var Te=l.ext.pager;function Ee(t,e){var i=[],n=Te.numbers_length,o=Math.floor(n/2);return e<=n?i=_(0,e):t<=o?((i=_(0,n-2)).push("ellipsis"),i.push(e-1)):t>=e-1-o?((i=_(e-(n-2),e)).splice(0,0,"ellipsis"),i.splice(0,0,0)):((i=_(t-o+2,t+o-1)).push("ellipsis"),i.push(e-1),i.splice(0,0,"ellipsis"),i.splice(0,0,0)),i.DT_el="span",i}t.extend(Te,{simple:function(t,e){return["previous","next"]},full:function(t,e){return["first","previous","next","last"]},numbers:function(t,e){return[Ee(t,e)]},simple_numbers:function(t,e){return["previous",Ee(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ee(t,e),"next","last"]},first_last_numbers:function(t,e){return["first",Ee(t,e),"last"]},_numbers:Ee,numbers_length:7}),t.extend(!0,l.ext.renderer,{pageButton:{_:function(e,o,r,s,a,l){var c,h,d,u=e.oClasses,p=e.oLanguage.oPaginate,f=e.oLanguage.oAria.paginate||{},g=0,m=function(i,n){var o,s,d,v=function(t){Ht(e,t.data.action,!0)};for(o=0,s=n.length;o<s;o++)if(d=n[o],t.isArray(d)){var b=t("<"+(d.DT_el||"div")+"/>").appendTo(i);m(b,d)}else{switch(c=null,h="",d){case"ellipsis":i.append('<span class="ellipsis">&#x2026;</span>');break;case"first":c=p.sFirst,h=d+(a>0?"":" "+u.sPageButtonDisabled);break;case"previous":c=p.sPrevious,h=d+(a>0?"":" "+u.sPageButtonDisabled);break;case"next":c=p.sNext,h=d+(a<l-1?"":" "+u.sPageButtonDisabled);break;case"last":c=p.sLast,h=d+(a<l-1?"":" "+u.sPageButtonDisabled);break;default:c=d+1,h=a===d?u.sPageButtonActive:""}null!==c&&(ce(t("<a>",{class:u.sPageButton+" "+h,"aria-controls":e.sTableId,"aria-label":f[d],"data-dt-idx":g,tabindex:e.iTabIndex,id:0===r&&"string"==typeof d?e.sTableId+"_"+d:null}).html(c).appendTo(i),{action:d},v),g++)}};try{d=t(o).find(i.activeElement).data("dt-idx")}catch(t){}m(t(o).empty(),s),d!==n&&t(o).find("[data-dt-idx="+d+"]").focus()}}}),t.extend(l.ext.type.detect,[function(t,e){var i=e.oLanguage.sDecimal;return b(t,i)?"num"+i:null},function(t,e){if(t&&!(t instanceof Date)&&!u.test(t))return null;var i=Date.parse(t);return null!==i&&!isNaN(i)||g(t)?"date":null},function(t,e){var i=e.oLanguage.sDecimal;return b(t,i,!0)?"num-fmt"+i:null},function(t,e){var i=e.oLanguage.sDecimal;return y(t,i)?"html-num"+i:null},function(t,e){var i=e.oLanguage.sDecimal;return y(t,i,!0)?"html-num-fmt"+i:null},function(t,e){return g(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),t.extend(l.ext.type.search,{html:function(t){return g(t)?t:"string"==typeof t?t.replace(h," ").replace(d,""):""},string:function(t){return g(t)?t:"string"==typeof t?t.replace(h," "):t}});var Re=function(t,e,i,n){return 0===t||t&&"-"!==t?(e&&(t=v(t,e)),t.replace&&(i&&(t=t.replace(i,"")),n&&(t=t.replace(n,""))),1*t):-1/0};function Ie(e){t.each({num:function(t){return Re(t,e)},"num-fmt":function(t){return Re(t,e,f)},"html-num":function(t){return Re(t,e,d)},"html-num-fmt":function(t){return Re(t,e,d,f)}},function(t,i){o.type.order[t+e+"-pre"]=i,t.match(/^html\-/)&&(o.type.search[t+e]=o.type.search.html)})}t.extend(o.type.order,{"date-pre":function(t){return Date.parse(t)||-1/0},"html-pre":function(t){return g(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return g(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Ie(""),t.extend(!0,l.ext.renderer,{header:{_:function(e,i,n,o){t(e.nTable).on("order.dt.DT",function(t,r,s,a){if(e===r){var l=n.idx;i.removeClass(n.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==a[l]?o.sSortAsc:"desc"==a[l]?o.sSortDesc:n.sSortingClass)}})},jqueryui:function(e,i,n,o){t("<div/>").addClass(o.sSortJUIWrapper).append(i.contents()).append(t("<span/>").addClass(o.sSortIcon+" "+n.sSortingClassJUI)).appendTo(i),t(e.nTable).on("order.dt.DT",function(t,r,s,a){if(e===r){var l=n.idx;i.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==a[l]?o.sSortAsc:"desc"==a[l]?o.sSortDesc:n.sSortingClass),i.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==a[l]?o.sSortJUIAsc:"desc"==a[l]?o.sSortJUIDesc:n.sSortingClassJUI)}})}}});var Me=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};function Ae(t){return function(){var e=[re(this[l.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return l.ext.internal[t].apply(this,e)}}return l.render={number:function(t,e,i,n,o){return{display:function(r){if("number"!=typeof r&&"string"!=typeof r)return r;var s=r<0?"-":"",a=parseFloat(r);if(isNaN(a))return Me(r);a=a.toFixed(i),r=Math.abs(a);var l=parseInt(r,10),c=i?e+(r-l).toFixed(i).substring(2):"";return s+(n||"")+l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+c+(o||"")}}},text:function(){return{display:Me}}},t.extend(l.ext.internal,{_fnExternApiFunc:Ae,_fnBuildAjax:ut,_fnAjaxUpdate:pt,_fnAjaxParameters:ft,_fnAjaxUpdateDraw:gt,_fnAjaxDataSrc:mt,_fnAddColumn:O,_fnColumnOptions:P,_fnAdjustColumnSizing:N,_fnVisibleToColumnIndex:H,_fnColumnIndexToVisible:L,_fnVisbleColumns:z,_fnGetColumns:B,_fnColumnTypes:$,_fnApplyColumnDefs:U,_fnHungarianMap:k,_fnCamelToHungarian:T,_fnLanguageCompat:E,_fnBrowserDetect:A,_fnAddData:j,_fnAddTr:W,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==n?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,i,n){return t.inArray(n,e.aoData[i].anCells)},_fnGetCellData:Y,_fnSetCellData:V,_fnSplitObjNotation:X,_fnGetObjectDataFn:Z,_fnSetObjectDataFn:J,_fnGetDataMaster:K,_fnClearTable:Q,_fnDeleteIndex:tt,_fnInvalidate:et,_fnGetRowElements:it,_fnCreateTr:nt,_fnBuildHead:rt,_fnDrawHead:st,_fnDraw:at,_fnReDraw:lt,_fnAddOptionsHtml:ct,_fnDetectHeader:ht,_fnGetUniqueThs:dt,_fnFeatureHtmlFilter:vt,_fnFilterComplete:bt,_fnFilterCustom:yt,_fnFilterColumn:wt,_fnFilter:xt,_fnFilterCreateSearch:_t,_fnEscapeRegex:Ct,_fnFilterData:kt,_fnFeatureHtmlInfo:Rt,_fnUpdateInfo:It,_fnInfoMacros:Mt,_fnInitialise:At,_fnInitComplete:Ft,_fnLengthChange:Ot,_fnFeatureHtmlLength:Pt,_fnFeatureHtmlPaginate:Nt,_fnPageChange:Ht,_fnFeatureHtmlProcessing:Lt,_fnProcessingDisplay:zt,_fnFeatureHtmlTable:Bt,_fnScrollDraw:$t,_fnApplyToChildren:Ut,_fnCalculateColumnWidths:Wt,_fnThrottle:Yt,_fnConvertToWidth:Vt,_fnGetWidestNode:qt,_fnGetMaxLenString:Gt,_fnStringToCss:Xt,_fnSortFlatten:Zt,_fnSort:Jt,_fnSortAria:Kt,_fnSortListener:Qt,_fnSortAttachListener:te,_fnSortingClasses:ee,_fnSortData:ie,_fnSaveState:ne,_fnLoadState:oe,_fnSettingsFromNode:re,_fnLog:se,_fnMap:ae,_fnBindAction:ce,_fnCallbackReg:he,_fnCallbackFire:de,_fnLengthOverflow:ue,_fnRenderer:pe,_fnDataSource:fe,_fnRowAttributes:ot,_fnCalculateEnd:function(){}}),t.fn.dataTable=l,l.$=t,t.fn.dataTableSettings=l.settings,t.fn.dataTableExt=l.ext,t.fn.DataTable=function(e){return t(this).dataTable(e).api()},t.each(l,function(e,i){t.fn.DataTable[e]=i}),t.fn.dataTable}),function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,i){return e||(e=window),i&&i.fn.dataTable||(i=require("datatables.net")(e,i).$),t(i,e,e.document)}:t(jQuery,window,document)}(function(t,e,i){"use strict";var n=t.fn.dataTable,o=function(t){if(!n.versionCheck||!n.versionCheck("1.10.8"))throw"DataTables Checkboxes requires DataTables 1.10.8 or newer";this.s={dt:new n.Api(t),columns:[],data:[],dataDisabled:[],ignoreSelect:!1},this.s.ctx=this.s.dt.settings()[0],this.s.ctx.checkboxes||(t.checkboxes=this,this._constructor())};o.prototype={_constructor:function(){for(var e=this,r=e.s.dt,s=e.s.ctx,a=!1,l=!1,c=r.state.loaded(),h=0;h<s.aoColumns.length;h++)if(s.aoColumns[h].checkboxes){var d=t(r.column(h).header());a=!0,t.isPlainObject(s.aoColumns[h].checkboxes)||(s.aoColumns[h].checkboxes={}),s.aoColumns[h].checkboxes=t.extend({},o.defaults,s.aoColumns[h].checkboxes);var u={searchable:!1,orderable:!1};if(""===s.aoColumns[h].sClass?u.className="dt-checkboxes-cell":u.className=s.aoColumns[h].sClass+" dt-checkboxes-cell",null===s.aoColumns[h].sWidthOrig&&(u.width="1%"),null===s.aoColumns[h].mRender&&(u.render=function(){return'<input type="checkbox" class="dt-checkboxes">'}),n.ext.internal._fnColumnOptions(s,h,u),d.removeClass("sorting"),d.off(".dt"),null===s.sAjaxSource){var p=r.cells("tr",h);p.invalidate("data"),t(p.nodes()).addClass(u.className)}if(e.s.data[h]={},e.s.dataDisabled[h]={},c&&c.checkboxes&&c.checkboxes.hasOwnProperty(h)&&s.aoColumns[h].checkboxes.stateSave&&(e.s.data[h]=c.checkboxes[h]),e.s.columns.push(h),s.aoColumns[h].checkboxes.selectRow&&(s._select?l=!0:s.aoColumns[h].checkboxes.selectRow=!1),s.aoColumns[h].checkboxes.selectAll&&(d.data("html",d.html()),null!==s.aoColumns[h].checkboxes.selectAllRender)){var f="";t.isFunction(s.aoColumns[h].checkboxes.selectAllRender)?f=s.aoColumns[h].checkboxes.selectAllRender():"string"==typeof s.aoColumns[h].checkboxes.selectAllRender&&(f=s.aoColumns[h].checkboxes.selectAllRender),d.html(f).addClass("dt-checkboxes-select-all").attr("data-col",h)}}if(a){var g=t(r.table().node()),m=t(r.table().body()),v=t(r.table().container());l&&(g.addClass("dt-checkboxes-select"),g.on("user-select.dt.dtCheckboxes",function(t,i,n,o){var r=o.index().row,s=e.getSelectRowColIndex(),a=i.cell({row:r,column:s}).data();e.isCellSelectable(s,a)||t.preventDefault()}),g.on("select.dt.dtCheckboxes deselect.dt.dtCheckboxes",function(t,i,n,o){e.onSelect(t,n,o)}),r.select.info(!1),g.on("draw.dt.dtCheckboxes select.dt.dtCheckboxes deselect.dt.dtCheckboxes",function(){e.showInfoSelected()})),g.on("draw.dt.dtCheckboxes",function(t){e.onDraw(t)}),m.on("click.dtCheckboxes","input.dt-checkboxes",function(t){e.onClick(t,this)}),v.on("click.dtCheckboxes",'thead th.dt-checkboxes-select-all input[type="checkbox"]',function(t){e.onClickSelectAll(t,this)}),v.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all",function(){t('input[type="checkbox"]',this).not(":disabled").trigger("click")}),l||v.on("click.dtCheckboxes","tbody td.dt-checkboxes-cell",function(){t('input[type="checkbox"]',this).not(":disabled").trigger("click")}),v.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all label, tbody td.dt-checkboxes-cell label",function(t){t.preventDefault()}),t(i).on("click.dtCheckboxes",'.fixedHeader-floating thead th.dt-checkboxes-select-all input[type="checkbox"]',function(t){s._fixedHeader&&s._fixedHeader.dom.header.floating&&e.onClickSelectAll(t,this)}),t(i).on("click.dtCheckboxes",".fixedHeader-floating thead th.dt-checkboxes-select-all",function(){s._fixedHeader&&s._fixedHeader.dom.header.floating&&t('input[type="checkbox"]',this).trigger("click")}),g.on("init.dt.dtCheckboxes",function(){s.oFeatures.bServerSide||(s.oFeatures.bStateSave&&e.updateState(),g.on("xhr.dt.dtCheckboxes",function(){if(t.each(e.s.columns,function(t,i){e.s.data[i]={},e.s.dataDisabled[i]={}}),s.oFeatures.bStateSave){var i=r.state.loaded();t.each(e.s.columns,function(t,n){i&&i.checkboxes&&i.checkboxes.hasOwnProperty(n)&&s.aoColumns[n].checkboxes.stateSave&&(e.s.data[n]=i.checkboxes[n])}),g.one("draw.dt.dtCheckboxes",function(){e.updateState()})}})),s.oFeatures.bStateSave&&g.on("stateSaveParams.dt.dtCheckboxes",function(i,n,o){o.checkboxes=[],t.each(e.s.columns,function(t,i){s.aoColumns[i].checkboxes.stateSave&&(o.checkboxes[i]=e.s.data[i])})})}),g.one("destroy.dt.dtCheckboxes",function(){t(i).off("click.dtCheckboxes"),v.on(".dtCheckboxes"),m.off(".dtCheckboxes"),g.off(".dtCheckboxes"),e.s.data={},e.s.dataDisabled={},t(".dt-checkboxes-select-all",g).each(function(e,i){t(i).html(t(i).data("html")).removeClass("dt-checkboxes-select-all")})})}},updateData:function(t,e,i){var n=this.s.dt,o=this.s.ctx;o.aoColumns[e].checkboxes&&(t.data().each(function(t){i?o.checkboxes.s.data[e][t]=1:delete o.checkboxes.s.data[e][t]}),o.oFeatures.bStateSave&&o.aoColumns[e].checkboxes.stateSave&&n.state.save())},updateSelect:function(t,e){var i=this.s.dt;this.s.ctx._select&&(this.s.ignoreSelect=!0,e?i.rows(t).select():i.rows(t).deselect(),this.s.ignoreSelect=!1)},updateCheckbox:function(e,i,n){var o=this.s.ctx,r=e.nodes();r.length&&(t("input.dt-checkboxes",r).not(":disabled").prop("checked",n),t.isFunction(o.aoColumns[i].checkboxes.selectCallback)&&o.aoColumns[i].checkboxes.selectCallback(r,n))},updateState:function(){var e=this;e.updateStateCheckboxes({page:"all",search:"none"}),t.each(e.s.columns,function(t,i){e.updateSelectAll(i)})},updateStateCheckboxes:function(e){var i=this,n=i.s.dt,o=i.s.ctx;n.cells("tr",i.s.columns,e).every(function(e,n){var r=this.data(),s=i.isCellSelectable(n,r);o.checkboxes.s.data[n].hasOwnProperty(r)&&(i.updateCheckbox(this,n,!0),o.aoColumns[n].checkboxes.selectRow&&s&&i.updateSelect(e,!0)),s||t("input.dt-checkboxes",this.node()).prop("disabled",!0)})},onClick:function(e,i){var n,o=this,r=o.s.dt,s=o.s.ctx,a=t(i).closest("td");n=a.parents(".DTFC_Cloned").length?r.fixedColumns().cellIndex(a):a;var l=r.cell(n),c=l.index().column;s.aoColumns[c].checkboxes.selectRow?setTimeout(function(){var t=l.data(),e=o.s.data[c].hasOwnProperty(t);e!==i.checked&&(o.updateCheckbox(l,c,e),o.updateSelectAll(c))},0):(l.checkboxes.select(i.checked),e.stopPropagation())},onSelect:function(t,e,i){var n=this.s.dt;if(!this.s.ignoreSelect&&"row"===e){var o=this.getSelectRowColIndex();if(null!==o){var r=n.cells(i,o);this.updateData(r,o,"select"===t.type),this.updateCheckbox(r,o,"select"===t.type),this.updateSelectAll(o)}}},onClickSelectAll:function(e,i){var n=this.s.dt,o=this.s.ctx,r=null,s=t(i).closest("th");s.parents(".DTFC_Cloned").length?r=n.fixedColumns().cellIndex(s).column:r=n.column(s).index();t(i).data("is-changed",!0),n.column(r,{page:o.aoColumns[r].checkboxes&&o.aoColumns[r].checkboxes.selectAllPages?"all":"current",search:"applied"}).checkboxes.select(i.checked),e.stopPropagation()},onDraw:function(){var e=this,i=e.s.ctx;(i.oFeatures.bServerSide||i.oFeatures.bDeferRender)&&e.updateStateCheckboxes({page:"current",search:"none"}),t.each(e.s.columns,function(t,i){e.updateSelectAll(i)})},updateSelectAll:function(e){var i=this,n=i.s.dt,o=i.s.ctx;if(o.aoColumns[e].checkboxes&&o.aoColumns[e].checkboxes.selectAll){var r,s,a=n.cells("tr",e,{page:o.aoColumns[e].checkboxes.selectAllPages?"all":"current",search:"applied"}),l=n.table().container(),c=t('.dt-checkboxes-select-all[data-col="'+e+'"] input[type="checkbox"]',l),h=0,d=0,u=a.data();t.each(u,function(t,n){i.isCellSelectable(e,n)?i.s.data[e].hasOwnProperty(n)&&h++:d++}),o._fixedHeader&&o._fixedHeader.dom.header.floating&&(c=t('.fixedHeader-floating .dt-checkboxes-select-all[data-col="'+e+'"] input[type="checkbox"]')),0===h?(r=!1,s=!1):h+d===u.length?(r=!0,s=!1):(r=!0,s=!0);var p=c.data("is-changed"),f=c.prop("checked"),g=c.prop("indeterminate");(p||f!==r||g!==s)&&(c.data("is-changed",!1),c.prop({checked:r,indeterminate:s}),t.isFunction(o.aoColumns[e].checkboxes.selectAllCallback)&&o.aoColumns[e].checkboxes.selectAllCallback(c.closest("th").get(0),r,s))}},showInfoSelected:function(){var e=this.s.dt,i=this.s.ctx;if(i.aanFeatures.i){var n,o,r=t('<span class="select-info"/>'),s=this.getSelectRowColIndex();if(null!==s){var a=0;for(var l in i.checkboxes.s.data[s])i.checkboxes.s.data[s].hasOwnProperty(l)&&a++;n="row",o=a,r.append(t('<span class="select-item"/>').append(e.i18n("select."+n+"s",{_:"%d "+n+"s selected",0:"",1:"1 "+n+" selected"},o))),t.each(i.aanFeatures.i,function(e,i){var n=t(i),o=n.children("span.select-info");o.length&&o.remove(),""!==r.text()&&n.append(r)})}}},isCellSelectable:function(t,e){return!this.s.ctx.checkboxes.s.dataDisabled[t].hasOwnProperty(e)},getCellIndex:function(t){var e=this.s.dt;return this.s.ctx._oFixedColumns?e.fixedColumns().cellIndex(t):e.cell(t).index()},getSelectRowColIndex:function(){for(var t=this.s.ctx,e=null,i=0;i<t.aoColumns.length;i++)if(t.aoColumns[i].checkboxes&&t.aoColumns[i].checkboxes.selectRow){e=i;break}return e},updateFixedColumn:function(t){var e=this.s.dt,i=this.s.ctx;if(i._oFixedColumns){var n=i._oFixedColumns.s.iLeftColumns,o=i.aoColumns.length-i._oFixedColumns.s.iRightColumns-1;(t<n||t>o)&&e.fixedColumns().update()}}},o.defaults={stateSave:!0,selectRow:!1,selectAll:!0,selectAllPages:!0,selectCallback:null,selectAllCallback:null,selectAllRender:'<input type="checkbox">'};var r=t.fn.dataTable.Api;return r.register("checkboxes()",function(){return this}),r.registerPlural("columns().checkboxes.select()","column().checkboxes.select()",function(e){return void 0===e&&(e=!0),this.iterator("column-rows",function(i,n,o,r,s){if(i.aoColumns[n].checkboxes){var a=[];t.each(s,function(t,e){a.push({row:e,column:n})});var l=this.cells(a),c=l.data(),h=[];a=[],t.each(c,function(t,e){i.checkboxes.isCellSelectable(n,e)&&(a.push({row:s[t],column:n}),h.push(s[t]))}),l=this.cells(a),i.checkboxes.updateData(l,n,e),i.checkboxes.updateCheckbox(l,n,e),i.aoColumns[n].checkboxes.selectRow&&i.checkboxes.updateSelect(h,e),i._oFixedColumns?setTimeout(function(){i.checkboxes.updateSelectAll(n)},0):i.checkboxes.updateSelectAll(n),i.checkboxes.updateFixedColumn(n)}},1)}),r.registerPlural("cells().checkboxes.select()","cell().checkboxes.select()",function(t){return void 0===t&&(t=!0),this.iterator("cell",function(e,i,n){if(e.aoColumns[n].checkboxes){var o=this.cells([{row:i,column:n}]),r=this.cell({row:i,column:n}).data();e.checkboxes.isCellSelectable(n,r)&&(e.checkboxes.updateData(o,n,t),e.checkboxes.updateCheckbox(o,n,t),e.aoColumns[n].checkboxes.selectRow&&e.checkboxes.updateSelect(i,t),e._oFixedColumns?setTimeout(function(){e.checkboxes.updateSelectAll(n)},0):e.checkboxes.updateSelectAll(n),e.checkboxes.updateFixedColumn(n))}},1)}),r.registerPlural("cells().checkboxes.enable()","cell().checkboxes.enable()",function(e){return void 0===e&&(e=!0),this.iterator("cell",function(i,n,o){if(i.aoColumns[o].checkboxes){var r=this.cell({row:n,column:o}),s=r.data();e?delete i.checkboxes.s.dataDisabled[o][s]:i.checkboxes.s.dataDisabled[o][s]=1;var a=r.node();a&&t("input.dt-checkboxes",a).prop("disabled",!e),i.aoColumns[o].checkboxes.selectRow&&i.checkboxes.s.data[o].hasOwnProperty(s)&&i.checkboxes.updateSelect(n,e)}},1)}),r.registerPlural("cells().checkboxes.disable()","cell().checkboxes.disable()",function(t){return void 0===t&&(t=!0),this.checkboxes.enable(!t)}),r.registerPlural("columns().checkboxes.deselect()","column().checkboxes.deselect()",function(t){return void 0===t&&(t=!0),this.checkboxes.select(!t)}),r.registerPlural("cells().checkboxes.deselect()","cell().checkboxes.deselect()",function(t){return void 0===t&&(t=!0),this.checkboxes.select(!t)}),r.registerPlural("columns().checkboxes.deselectAll()","column().checkboxes.deselectAll()",function(){return this.iterator("column",function(t,e){t.aoColumns[e].checkboxes&&(t.checkboxes.s.data[e]={},this.column(e).checkboxes.select(!1))},1)}),r.registerPlural("columns().checkboxes.selected()","column().checkboxes.selected()",function(){return this.iterator("column-rows",function(e,i,n,o,r){if(e.aoColumns[i].checkboxes){var s=[];t.each(r,function(t,e){s.push({row:e,column:i})});var a=this.cells(s).data(),l=[];return t.each(a,function(t,n){e.checkboxes.s.data[i].hasOwnProperty(n)&&e.checkboxes.isCellSelectable(i,n)&&l.push(n)}),l}return[]},1)}),o.version="1.2.10",t.fn.DataTable.Checkboxes=o,t.fn.dataTable.Checkboxes=o,t(i).on("preInit.dt.dtCheckboxes",function(t,e){"dt"===t.namespace&&new o(e)}),o}),function(t,e,i){var n=function(t,e){"use strict";t.extend(!0,e.defaults,{dom:"l<'row'<'col-sm-12 table-responsive'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",renderer:"bootstrap",iDisplayStart:0,iDisplayLength:10,bStateSave:!0,bProcessing:!0,bServerSide:!0,oLanguage:{sProcessing:"",sLengthMenu:'<select class="form-control input-sm"><option value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option><option value="50">50</option><option value="-1">'+dtTodos+"</option></select>",sEmptyTable:dtVacio,sZeroRecords:dtNoreg,sInfo:dtMostr,sInfoEmpty:dtMostrVacio,sInfoFiltered:dtFiltr,sInfoPostFix:"",sSearch:"",sUrl:"",oPaginate:{sFirst:dtPrimero,sPrevious:dtAnterior,sNext:dtSiguiente,sLast:dtUltimo}}}),t.extend(e.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"}),e.ext.renderer.pageButton.bootstrap=function(i,n,o,r,s,a){var l,c,h=new e.Api(i),d=i.oClasses,u=i.oLanguage.oPaginate,p=function(e,n){var r,f,g,m,v=function(e){e.preventDefault(),t(e.currentTarget).hasClass("disabled")||h.page(e.data.action).draw(!1)};for(r=0,f=n.length;r<f;r++)if(m=n[r],t.isArray(m))p(e,m);else{switch(l="",c="",m){case"ellipsis":l="&hellip;",c="disabled";break;case"first":l=u.sFirst,c=m+(s>0?"":" disabled");break;case"previous":l=u.sPrevious,c=m+(s>0?"":" disabled");break;case"next":l=u.sNext,c=m+(s<a-1?"":" disabled");break;case"last":l=u.sLast,c=m+(s<a-1?"":" disabled");break;default:l=m+1,c=s===m?"active":""}l&&(g=t("<li>",{class:d.sPageButton+" "+c,"aria-controls":i.sTableId,tabindex:i.iTabIndex,id:0===o&&"string"==typeof m?i.sTableId+"_"+m:null}).append(t("<a>",{href:"#"}).html(l)).appendTo(e),i.oApi._fnBindAction(g,{action:m},v))}};p(t(n).empty().html('<ul class="pagination pagination-sm"/>').children("ul"),r)},e.TableTools&&(t.extend(!0,e.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),t.extend(!0,e.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define(["jquery","datatables"],n):"object"==typeof exports?n(require("jquery"),require("datatables")):jQuery&&n(jQuery,jQuery.fn.dataTable)}(window,document),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-eu-pre":function(t){if((t=t.replace(" ","")).indexOf(".")>0)var e=t.split(".");else e=t.split("/");if(e[2])var i=e[2];else i=0;var n=e[1];1==n.length&&(n=0+n);var o=e[0];return 1==o.length&&(o=0+o),1*(i+n+o)},"date-eu-asc":function(t,e){return t<e?-1:t>e?1:0},"date-eu-desc":function(t,e){return t<e?1:t>e?-1:0}}),function(t){"use strict";Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t)}});var e=0;function i(t,e){return new i.prototype.init(t,e)}t.fn.redactor=function(e){var n=[],o=Array.prototype.slice.call(arguments,1);return"string"==typeof e?this.each(function(){var i,r=t.data(this,"redactor");if("-1"!==e.search(/\./)?void 0!==r[(i=e.split("."))[0]]&&(i=r[i[0]][i[1]]):i=r[e],void 0!==r&&t.isFunction(i)){var s=i.apply(r,o);void 0!==s&&s!==r&&n.push(s)}else t.error('No such method "'+e+'" for Redactor')}):this.each(function(){t.data(this,"redactor",{}),t.data(this,"redactor",i(this,e))}),0===n.length?this:1===n.length?n[0]:n},t.Redactor=i,t.Redactor.VERSION="2.12",t.Redactor.modules=["air","autosave","block","buffer","build","button","caret","clean","code","core","detect","dropdown","events","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","marker","modal","observe","offset","paragraphize","paste","placeholder","progress","selection","shortcuts","storage","toolbar","upload","uploads3","utils","browser"],t.Redactor.settings={},t.Redactor.opts={animation:!1,lang:"en",direction:"ltr",spellcheck:!0,overrideStyles:!0,stylesClass:!1,scrollTarget:document,focus:!1,focusEnd:!1,clickToEdit:!1,structure:!1,tabindex:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:!1,callbacks:{},placeholder:!1,linkify:!0,enterKey:!0,pastePlainText:!1,pasteImages:!0,pasteLinks:!0,pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i"],preClass:!1,preSpaces:4,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveFields:!1,imageUpload:null,imageUploadParam:"file",imageUploadFields:!1,imageUploadForms:!1,imageTag:"figure",imageEditable:!0,imageCaption:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",dragImageUpload:!0,multipleImageUpload:!0,clipboardImageUpload:!0,fileUpload:null,fileUploadParam:"file",fileUploadFields:!1,fileUploadForms:!1,dragFileUpload:!0,s3:!1,linkNewTab:!1,linkTooltip:!0,linkNofollow:!1,linkSize:30,linkValidation:!0,pasteLinkTarget:!1,videoContainerClass:"video-container",toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,air:!1,airWidth:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,buttons:["format","bold","italic","deleted","lists","image","file","link","horizontalrule"],buttonsTextLabeled:!1,buttonsHide:[],buttonsHideOnMobile:[],script:!0,removeNewlines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},keepStyleAttr:[],keepInlineOnEnter:!1,shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,activeButtons:["deleted","italic","bold"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted"},langs:{en:{format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U",lists:"Lists","link-insert":"Insert link","link-edit":"Edit link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save",delete:"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line","upload-label":"Drop file here or ",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center","accessibility-help-label":"Rich text editor"}},type:"textarea",inline:!1,inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],paragraphize:!0,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",emptyHtmlRendered:t("").html("​").html(),imageTypes:["image/png","image/jpeg","image/gif"],userAgent:navigator.userAgent.toLowerCase(),observe:{dropdowns:[]},regexps:{linkyoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,linkvimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,linkimage:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},i.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(i,n){if(this.$element=t(i),this.uuid=e++,this.sBuffer=[],this.sRebuffer=[],this.loadOptions(n),this.loadModules(),this.opts.clickToEdit&&!this.$element.hasClass("redactor-click-to-edit"))return this.loadToEdit(n);this.$element.hasClass("redactor-click-to-edit")&&this.$element.removeClass("redactor-click-to-edit"),this.reIsBlock=new RegExp("^("+this.opts.blockTags.join("|").toUpperCase()+")$","i"),this.reIsInline=new RegExp("^("+this.opts.inlineTags.join("|").toUpperCase()+")$","i"),this.opts.dragImageUpload=null!==this.opts.imageUpload&&this.opts.dragImageUpload,this.opts.dragFileUpload=null!==this.opts.fileUpload&&this.opts.dragFileUpload,this.formatting={},this.lang.load(),t.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.$editor=this.$element,this.detectType(),this.core.callback("start"),this.core.callback("startToEdit"),this.start=!0,this.build.start()},detectType:function(){this.build.isInline()||this.opts.inline?this.opts.type="inline":this.build.isTag("DIV")?this.opts.type="div":this.build.isTag("PRE")&&(this.opts.type="pre")},loadToEdit:function(e){this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},initToEdit:function(e){t.extend(e.callbacks,{startToEdit:function(){this.insert.node(this.marker.get(),!1)},initToEdit:function(){this.selection.restore(),this.clickToCancelStorage=this.code.get(),t(this.opts.clickToCancel).off(".redactor-click-to-edit"),t(this.opts.clickToCancel).show().on("click.redactor-click-to-edit",t.proxy(function(i){i.preventDefault(),this.core.destroy(),this.events.syncFire=!1,this.$element.html(this.clickToCancelStorage),this.core.callback("cancel",this.clickToCancelStorage),this.events.syncFire=!0,this.clickToCancelStorage="",t(this.opts.clickToCancel).hide(),t(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},this)),t(this.opts.clickToSave).off(".redactor-click-to-edit"),t(this.opts.clickToSave).show().on("click.redactor-click-to-edit",t.proxy(function(i){i.preventDefault(),this.core.destroy(),this.core.callback("save",this.code.get()),t(this.opts.clickToCancel).hide(),t(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",t.proxy(function(){this.initToEdit(e)},this)),this.$element.addClass("redactor-click-to-edit")},this))}}),this.$element.redactor(e),this.$element.off(".redactor-click-to-edit")},loadOptions:function(e){var i={};void 0!==t.Redactor.settings.namespace?this.$element.hasClass(t.Redactor.settings.namespace)&&(i=t.Redactor.settings):i=t.Redactor.settings,this.opts=t.extend({},t.Redactor.opts,this.$element.data(),e),this.opts=t.extend({},this.opts,i)},getModuleMethods:function(t){return Object.getOwnPropertyNames(t).filter(function(e){return"function"==typeof t[e]})},loadModules:function(){for(var e=t.Redactor.modules.length,i=0;i<e;i++)this.bindModuleMethods(t.Redactor.modules[i])},bindModuleMethods:function(t){if(void 0!==this[t]){this[t]=this[t]();for(var e=this.getModuleMethods(this[t]),i=e.length,n=0;n<i;n++)this[t][e[n]]=this[t][e[n]].bind(this)}},air:function(){return{enabled:!1,collapsed:function(){this.opts.air&&this.selection.get().collapseToStart()},collapsedEnd:function(){this.opts.air&&this.selection.get().collapseToEnd()},build:function(){this.detect.isMobile()||(this.button.hideButtons(),this.button.hideButtonsOnMobile(),0!==this.opts.buttons.length&&(this.$air=this.air.createContainer(),!1!==this.opts.airWidth&&this.$air.css("width",this.opts.airWidth),this.air.append(),this.button.$toolbar=this.$air,this.button.setFormatting(),this.button.load(this.$air),this.core.editor().on("mouseup.redactor",this,t.proxy(function(t){""!==this.selection.text()&&this.air.show(t)},this))))},append:function(){this.$air.appendTo("body")},createContainer:function(){return t("<ul>").addClass("redactor-air").attr({id:"redactor-air-"+this.uuid,role:"toolbar"}).hide()},show:function(e){this.selection.saveInstant(),t(".redactor-air").hide();var i=0,n=this.$air.innerWidth();t(window).width()<e.clientX+n&&(i=200),this.$air.css({left:e.clientX-i+"px",top:e.clientY+10+t(document).scrollTop()+"px"}).show(),this.air.enabled=!0,this.air.bindHide()},bindHide:function(){t(document).on("mousedown.redactor-air."+this.uuid,t.proxy(function(e){var i=t(e.target).closest(".redactor-dropdown").length;0===t(e.target).closest(this.$air).length&&0===i&&(!1!==this.air.hide(e)&&this.marker.remove())},this)).on("keydown.redactor-air."+this.uuid,t.proxy(function(e){var i=e.which;if((this.utils.isRedactorParent(e.target)||t(e.target).hasClass("redactor-in"))&&0===t(e.target).closest("#redactor-modal").length){if(i===this.keyCode.ESC)this.selection.get().collapseToStart();else if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){var n=this.selection.get();this.selection.range(n).deleteContents()}else i===this.keyCode.ENTER&&this.selection.get().collapseToEnd();this.air.enabled?this.air.hide(e):this.selection.get().collapseToStart()}},this))},hide:function(e){if(e.ctrlKey||e.metaKey||e.shiftKey&&e.altKey)return!1;this.button.setInactiveAll(),this.$air.fadeOut(100),this.air.enabled=!1,t(document).off("mousedown.redactor-air."+this.uuid),t(document).off("keydown.redactor-air."+this.uuid)}}},autosave:function(){return{enabled:!1,html:!1,init:function(){this.opts.autosave&&(this.autosave.enabled=!0,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"))},is:function(){return this.autosave.enabled},send:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var e={};e.name=this.autosave.name,e[this.autosave.name]=this.autosave.source,e=this.autosave.getHiddenFields(e),t.ajax({url:this.opts.autosave,type:"post",data:e}).done(this.autosave.success)}},getHiddenFields:function(e){return!1===this.opts.autosaveFields||"object"!=typeof this.opts.autosaveFields?e:(t.each(this.opts.autosaveFields,t.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),e[i]=n},this)),e)},success:function(t){var e;try{e=JSON.parse(t)}catch(i){e=t}var i=void 0===e.error?"autosave":"autosaveError";this.core.callback(i,this.autosave.name,e),this.autosave.html=this.autosave.source},disable:function(){this.autosave.enabled=!1,clearInterval(this.autosaveTimeout)}}},block:function(){return{format:function(e,i,n,o){if(e="quote"===e?"blockquote":e,this.block.tags=["p","blockquote","pre","h1","h2","h3","h4","h5","h6","div","figure"],-1!==t.inArray(e,this.block.tags))return"p"===e&&void 0===i&&(i="class"),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.block.formatCollapsed(e,i,n,o):this.block.formatUncollapsed(e,i,n,o)},formatCollapsed:function(e,i,n,o){this.selection.save();var r=this.selection.block(),s=r.tagName.toLowerCase();if(-1!==t.inArray(s,this.block.tags)){var a,l=!1;if(s===e&&void 0===i&&(e="p",l=!0),l&&(this.block.removeAllClass(),this.block.removeAllAttr()),"blockquote"===s&&this.utils.isEndOfElement(r)){this.marker.remove(),(a=document.createElement("p")).innerHTML=this.opts.invisibleSpace,t(r).after(a),this.caret.start(a);var c=t(r).children().last();0!==c.length&&"BR"===c[0].tagName&&c.remove()}else a=this.utils.replaceToTag(r,e);if("object"==typeof i)for(var h in o=n,i)a=this.block.setAttr(a,h,i[h],o);else a=this.block.setAttr(a,i,n,o);return"pre"===e&&1===a.length&&t(a).html(t.trim(t(a).html())),this.selection.restore(),this.block.removeInlineTags(a),a}this.selection.restore()},formatUncollapsed:function(e,i,n,o){this.selection.save();var r=[],s=this.selection.blocks();s[0]&&(t(s[0]).hasClass("redactor-in")||t(s[0]).hasClass("redactor-box"))&&(s=this.core.editor().find(this.opts.blockTags.join(", ")));for(var a=s.length,l=0;l<a;l++){var c=s[l].tagName.toLowerCase();if(-1!==t.inArray(c,this.block.tags)&&"figure"!==c){var h=this.utils.replaceToTag(s[l],e);if("object"==typeof i)for(var d in o=n,i)h=this.block.setAttr(h,d,i[d],o);else h=this.block.setAttr(h,i,n,o);r.push(h),this.block.removeInlineTags(h)}}if(this.selection.restore(),"pre"===e&&0!==r.length){var u=r[0];t.each(r,function(e,i){0!==e&&(t(u).append("\n"+t.trim(i.html())),t(i).remove())}),(r=[]).push(u)}return r},removeInlineTags:function(e){e=e[0]||e;var i=this.opts.inlineTags;if(-1!==t.inArray(e.tagName,["PRE","H1","H2","H3","H4","H5","H6"])){if("PRE"!==e.tagName){var n=i.indexOf("a");i.splice(n,1)}t(e).find(i.join(",")).not(".redactor-selection-marker").contents().unwrap()}},setAttr:function(t,e,i,n){if(void 0===e)return t;var o=void 0===n?"replace":n;return t="class"===e?this.block[o+"Class"](i,t):"remove"===o?this.block[o+"Attr"](e,t):"removeAll"===o?this.block[o+"Attr"](e,t):this.block[o+"Attr"](e,i,t)},getBlocks:function(e){if(e=void 0===e?this.selection.blocks():e,t(e).hasClass("redactor-box")){var i=[],n=this.core.editor().children();return t.each(n,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this)),i}return e},replaceClass:function(e,i){return t(this.block.getBlocks(i)).removeAttr("class").addClass(e)[0]},toggleClass:function(e,i){return t(this.block.getBlocks(i)).toggleClass(e)[0]},addClass:function(e,i){return t(this.block.getBlocks(i)).addClass(e)[0]},removeClass:function(e,i){return t(this.block.getBlocks(i)).removeClass(e)[0]},removeAllClass:function(e){return t(this.block.getBlocks(e)).removeAttr("class")[0]},replaceAttr:function(e,i,n){return n=this.block.removeAttr(e,n),t(n).attr(e,i)[0]},toggleAttr:function(e,i,n){n=this.block.getBlocks(n);var o=this,r=[];return t.each(n,function(n,s){t(s).attr(e)?r.push(o.block.removeAttr(e,s)):r.push(o.block.addAttr(e,i,s))}),r},addAttr:function(e,i,n){return t(this.block.getBlocks(n)).attr(e,i)[0]},removeAttr:function(e,i){return t(this.block.getBlocks(i)).removeAttr(e)[0]},removeAllAttr:function(e){e=this.block.getBlocks(e);var i=[];return t.each(e,function(t,e){if(void 0!==e.attributes)for(;e.attributes.length;)e.removeAttribute(e.attributes[0].name);i.push(e)}),i}}},buffer:function(){return{set:function(t){void 0===t&&this.buffer.clear(),void 0===t||"undo"===t?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){var t=this.selection.saveInstant(),e=this.sBuffer[this.sBuffer.length-1],i=this.core.editor().html();(void 0===e||e[0]!==i)&&this.sBuffer.push([i,t])},setRedo:function(){var t=this.selection.saveInstant();this.sRebuffer.push([this.core.editor().html(),t])},add:function(){this.sBuffer.push([this.core.editor().html(),0])},undo:function(){if(0!==this.sBuffer.length){var t=this.sBuffer.pop();this.buffer.set("redo"),this.core.editor().html(t[0]),this.selection.restoreInstant(t[1]),this.selection.restore(),this.observe.load()}},redo:function(){if(0!==this.sRebuffer.length){var t=this.sRebuffer.pop();this.buffer.set("undo"),this.core.editor().html(t[0]),this.selection.restoreInstant(t[1]),this.selection.restore(),this.observe.load()}},clear:function(){this.sRebuffer=[]}}},build:function(){return{start:function(){if("inline"===this.opts.type)this.opts.type="inline";else if("div"===this.opts.type){""===t.trim(this.$editor.html())&&this.$editor.html(this.opts.emptyHtml),this.build.buildTextarea()}else"textarea"===this.opts.type&&this.build.startTextarea();this.build.setIn(),this.build.setId(),this.build.enableEditor(),this.build.setOptions(),this.build.callEditor()},createContainerBox:function(){this.$box=t('<div class="redactor-box" role="application" />')},setIn:function(){this.core.editor().addClass("redactor-in")},setId:function(){var t="textarea"===this.opts.type?"redactor-uuid-"+this.uuid:this.$element.attr("id");this.core.editor().attr("id",void 0===t?"redactor-uuid-"+this.uuid:t)},getName:function(){var t=this.$element.attr("name");return void 0===t?"content-"+this.uuid:t},buildTextarea:function(){this.$textarea=t("<textarea>"),this.$textarea.attr("name",this.build.getName()),this.$textarea.hide(),this.$element.after(this.$textarea),this.build.setStartAttrs()},loadFromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$element.attr("name",this.build.getName()),this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.build.setStartAttrs(),this.$editor.addClass("redactor-layer"),this.opts.overrideStyles&&this.$editor.addClass("redactor-styles"),this.$element.hide(),this.$box.prepend('<span class="redactor-voice-label" id="redactor-voice-'+this.uuid+'" aria-hidden="false">'+this.lang.get("accessibility-help-label")+"</span>")},setStartAttrs:function(){this.$editor.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},startTextarea:function(){this.build.createContainerBox(),this.build.loadFromTextarea(),this.code.start(this.core.textarea().val()),this.core.textarea().val(this.clean.onSync(this.$editor.html()))},isTag:function(t){return this.$element[0].tagName===t},isInline:function(){return!this.build.isTag("TEXTAREA")&&!this.build.isTag("DIV")&&!this.build.isTag("PRE")},enableEditor:function(){this.core.editor().attr({contenteditable:!0})},setOptions:function(){"inline"===this.opts.type&&(this.opts.enterKey=!1),"inline"!==this.opts.type&&"pre"!==this.opts.type||(this.opts.toolbarMobile=!1,this.opts.toolbar=!1,this.opts.air=!1,this.opts.linkify=!1),this.core.editor().attr("spellcheck",this.opts.spellcheck),this.opts.structure&&this.core.editor().addClass("redactor-structure"),this.opts.stylesClass&&this.core.editor().addClass(this.opts.stylesClass),"textarea"===this.opts.type&&(this.core.box().attr("dir",this.opts.direction),this.core.editor().attr("dir",this.opts.direction),this.opts.tabindex&&this.core.editor().attr("tabindex",this.opts.tabindex),this.opts.minHeight?this.core.editor().css("min-height",this.opts.minHeight):this.core.editor().css("min-height","40px"),this.opts.maxHeight&&this.core.editor().css("max-height",this.opts.maxHeight),this.opts.maxWidth&&this.core.editor().css({"max-width":this.opts.maxWidth,margin:"auto"}))},callEditor:function(){this.build.disableBrowsersEditing(),this.events.init(),this.build.setHelpers(),(this.opts.toolbar||this.opts.air)&&(this.toolbarsButtons=this.button.init()),this.opts.air?this.air.build():this.opts.toolbar&&this.toolbar.build(),this.detect.isMobile()&&this.opts.toolbarMobile&&this.opts.air&&(this.opts.toolbar=!0,this.toolbar.build()),(this.opts.air||this.opts.toolbar)&&(this.core.editor().on("mouseup.redactor-observe."+this.uuid+" keyup.redactor-observe."+this.uuid+" focus.redactor-observe."+this.uuid+" touchstart.redactor-observe."+this.uuid,t.proxy(this.observe.toolbar,this)),this.core.element().on("blur.callback.redactor",t.proxy(function(){this.button.setInactiveAll()},this))),this.modal.templates(),this.build.plugins(),this.autosave.init(),this.code.html=this.code.cleaned(this.core.editor().html()),this.core.callback("init"),this.core.callback("initToEdit"),this.storage.observe(),this.start=!1},setHelpers:function(){this.opts.linkify&&this.linkify.format(),this.placeholder.init(),this.opts.focus?setTimeout(this.focus.start,100):this.opts.focusEnd&&setTimeout(this.focus.end,100)},disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1)}catch(t){}},plugins:function(){this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(e,n){var o="undefined"!=typeof RedactorPlugins&&void 0!==RedactorPlugins[n]?RedactorPlugins:i.fn;if(t.isFunction(o[n])){this[n]=o[n]();for(var r=this.getModuleMethods(this[n]),s=r.length,a=0;a<s;a++)this[n][r[a]]=this[n][r[a]].bind(this);if(void 0!==this[n].langs){var l={};void 0!==this[n].langs[this.opts.lang]?l=this[n].langs[this.opts.lang]:void 0===this[n].langs[this.opts.lang]&&void 0!==this[n].langs.en&&(l=this[n].langs.en);var c=this;t.each(l,function(t,e){void 0===c.opts.curLang[t]&&(c.opts.curLang[t]=e)})}t.isFunction(this[n].init)&&this[n].init()}},this))}}},button:function(){return{toolbar:function(){return void 0!==this.button.$toolbar&&this.button.$toolbar?this.button.$toolbar:this.$toolbar},init:function(){return{format:{title:this.lang.get("format"),icon:!0,dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("heading1"),func:"block.format"},h2:{title:this.lang.get("heading2"),func:"block.format"},h3:{title:this.lang.get("heading3"),func:"block.format"},h4:{title:this.lang.get("heading4"),func:"block.format"},h5:{title:this.lang.get("heading5"),func:"block.format"},h6:{title:this.lang.get("heading6"),func:"block.format"}}},bold:{title:this.lang.get("bold-abbr"),icon:!0,label:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic-abbr"),icon:!0,label:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted-abbr"),icon:!0,label:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline-abbr"),icon:!0,label:this.lang.get("underline"),func:"inline.format"},lists:{title:this.lang.get("lists"),icon:!0,dropdown:{unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease",observe:{element:"li",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase",observe:{element:"li",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},ul:{title:"&bull; "+this.lang.get("bulletslist"),icon:!0,func:"list.toggle"},ol:{title:"1. "+this.lang.get("numberslist"),icon:!0,func:"list.toggle"},outdent:{title:this.lang.get("outdent"),icon:!0,func:"indent.decrease"},indent:{title:this.lang.get("indent"),icon:!0,func:"indent.increase"},image:{title:this.lang.get("image"),icon:!0,func:"image.show"},file:{title:this.lang.get("file"),icon:!0,func:"file.show"},link:{title:this.lang.get("link"),icon:!0,dropdown:{link:{title:this.lang.get("link-insert"),func:"link.show",observe:{element:"a",in:{title:this.lang.get("link-edit")},out:{title:this.lang.get("link-insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},horizontalrule:{title:this.lang.get("horizontalrule"),icon:!0,func:"line.insert"}}},setFormatting:function(){t.each(this.toolbarsButtons.format.dropdown,t.proxy(function(e,i){-1===t.inArray(e,this.opts.formatting)&&delete this.toolbarsButtons.format.dropdown[e]},this))},hideButtons:function(){0!==this.opts.buttonsHide.length&&this.button.hideButtonsSlicer(this.opts.buttonsHide)},hideButtonsOnMobile:function(){this.detect.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&this.button.hideButtonsSlicer(this.opts.buttonsHideOnMobile)},hideButtonsSlicer:function(e){t.each(e,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);-1!==i&&this.opts.buttons.splice(i,1)},this))},load:function(e){this.button.buttons=[],t.each(this.opts.buttons,t.proxy(function(i,n){!this.toolbarsButtons[n]||"file"===n&&!this.file.is()||"image"===n&&!this.image.is()||e.append(t("<li>").append(this.button.build(n,this.toolbarsButtons[n])))},this))},buildButtonTooltip:function(e,i){if(void 0!==this.button.toolbar()&&!this.opts.air&&!this.detect.isMobile()){var n=t("<span>");n.addClass("re-button-tooltip"),n.html(i);var o=this,r=this.button.toolbar(),s=r.closest(".redactor-toolbar-box");(s=0===s.length?r:s).prepend(n),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=r.hasClass("toolbar-fixed-box")?e.offset():e.position();i=o.opts.toolbarFixedTarget!==document?e.position():i;var s=r.hasClass("toolbar-fixed-box")?e.position().top:i.top,a=e.innerHeight(),l=e.innerWidth(),c=r.hasClass("toolbar-fixed-box")?"fixed":"absolute";c=o.opts.toolbarFixedTarget!==document?"absolute":c;var h=o.opts.toolbarFixedTarget!==document?r.position().top:0;n.show(),n.css({top:s+a+h+"px",left:i.left+l/2-n.innerWidth()/2+"px",position:c})}}).on("mouseout",function(){n.hide()})}},build:function(e,i){if(!1!==this.opts.toolbar){var n=void 0!==i.label?i.label:i.title,o=t('<a href="javascript:void(null);" alt="'+n+'" rel="'+e+'" />');if(o.addClass("re-button re-"+e),o.attr({role:"button","aria-label":n,tabindex:"-1"}),void 0===i.icon||this.opts.buttonsTextLabeled)o.html(i.title);else{var r=t("<i>");r.addClass("re-icon-"+e),o.append(r),o.addClass("re-button-icon"),this.button.buildButtonTooltip(o,n)}if((i.func||i.command||i.dropdown)&&this.button.setEvent(o,e,i),i.dropdown){o.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var s=t('<ul class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');o.data("dropdown",s),this.dropdown.build(e,s,i.dropdown)}return this.button.buttons.push(o),o}},getButtons:function(){return this.button.toolbar().find("a.re-button")},getButtonsKeys:function(){return this.button.buttons},setEvent:function(e,i,n){e.on("mousedown",t.proxy(function(t){if(t.preventDefault(),e.hasClass("redactor-button-disabled"))return!1;var o="func",r=n.func;return n.command?(o="command",r=n.command):n.dropdown&&(o="dropdown",r=!1),this.button.toggle(t,i,o,r),!1},this))},toggle:function(t,e,i,n,o){!this.detect.isIe()&&this.detect.isDesktop()||(this.utils.freezeScroll(),t.returnValue=!1),"command"===i?this.inline.format(n):"dropdown"===i?this.dropdown.show(t,e):this.button.clickCallback(t,n,e,o),"dropdown"!==i&&this.dropdown.hideAll(!1),this.opts.air&&"dropdown"!==i&&this.air.hide(t),!this.detect.isIe()&&this.detect.isDesktop()||this.utils.unfreezeScroll()},clickCallback:function(e,i,n,o){var r;if(o=void 0===o?n:o,t.isFunction(i))i.call(this,n);else if("-1"!==i.search(/\./)){if(void 0===this[(r=i.split("."))[0]])return;"object"==typeof o?this[r[0]][r[1]].apply(this,o):this[r[0]][r[1]].call(this,o)}else"object"==typeof o?this[i].apply(this,o):this[i].call(this,o);this.observe.buttons(e,n)},all:function(){return this.button.buttons},get:function(t){if(!1!==this.opts.toolbar)return this.button.toolbar().find("a.re-"+t)},set:function(t,e){if(!1!==this.opts.toolbar){var i=this.button.toolbar().find("a.re-"+t);return i.html(e).attr("aria-label",e),i}},add:function(e,i){if(!0!==this.button.isAdded(e))return t();var n=this.button.build(e,{title:i});return this.button.toolbar().append(t("<li>").append(n)),n},addFirst:function(e,i){if(!0!==this.button.isAdded(e))return t();var n=this.button.build(e,{title:i});return this.button.toolbar().prepend(t("<li>").append(n)),n},addAfter:function(e,i,n){if(!0!==this.button.isAdded(i))return t();var o=this.button.build(i,{title:n}),r=this.button.get(e);return 0!==r.length?r.parent().after(t("<li>").append(o)):this.button.toolbar().append(t("<li>").append(o)),o},addBefore:function(e,i,n){if(!0!==this.button.isAdded(i))return t();var o=this.button.build(i,{title:n}),r=this.button.get(e);return 0!==r.length?r.parent().before(t("<li>").append(o)):this.button.toolbar().append(t("<li>").append(o)),o},isAdded:function(t){var e=this.opts.buttonsHideOnMobile.indexOf(t);return!(!1===this.opts.toolbar||-1!==e&&this.detect.isMobile())},setIcon:function(t,e){this.opts.buttonsTextLabeled||(t.html(e).addClass("re-button-icon"),this.button.buildButtonTooltip(t,t.attr("alt")))},changeIcon:function(t,e){var i=this.button.get(t);0!==i.length&&i.find("i").removeAttr("class").addClass("re-icon-"+e)},addCallback:function(e,i){if(void 0!==e&&!1!==this.opts.toolbar){var n="dropdown"===i?"dropdown":"func",o=e.attr("rel");e.on("mousedown",t.proxy(function(t){if(e.hasClass("redactor-button-disabled"))return!1;this.button.toggle(t,o,n,i)},this))}},addDropdown:function(e,i){if(!1!==this.opts.toolbar){e.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var n=e.attr("rel");this.button.addCallback(e,"dropdown");var o=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return e.data("dropdown",o),i&&this.dropdown.build(n,o,i),o}},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){var e=this.button.toolbar().find("a.re-button");void 0!==t&&(e=e.not(".re-"+t)),e.removeClass("redactor-act")},disable:function(t){this.button.get(t).addClass("redactor-button-disabled")},enable:function(t){this.button.get(t).removeClass("redactor-button-disabled")},disableAll:function(t){var e=this.button.toolbar().find("a.re-button");void 0!==t&&(e=e.not(".re-"+t)),e.addClass("redactor-button-disabled")},enableAll:function(){this.button.toolbar().find("a.re-button").removeClass("redactor-button-disabled")},remove:function(t){this.button.get(t).remove()}}},caret:function(){return{set:function(t,e,i){var n=this.core.editor().scrollTop();this.core.editor().focus(),this.core.editor().scrollTop(n),i=void 0===i?0:1,t=t[0]||t,e=e[0]||e;var o=this.selection.get(),r=this.selection.range(o);try{r.setStart(t,0),r.setEnd(e,i)}catch(t){}this.selection.update(o,r)},prepare:function(t){return this.detect.isFirefox()&&void 0!==this.start&&this.core.editor().focus(),t[0]||t},start:function(e){var i,n;if(e=this.caret.prepare(e)){if("BR"===e.tagName)return this.caret.before(e);var o=t(e).children().first(),r=this.utils.isInlineTag(e.tagName);""===e.innerHTML||r?this.caret.setStartEmptyOrInline(e,r):o&&0!==o.length&&this.utils.isInlineTag(o[0].tagName)&&""===o.text()?this.caret.setStartEmptyOrInline(o[0],!0):((i=window.getSelection()).removeAllRanges(),(n=document.createRange()).selectNodeContents(e),n.collapse(!0),i.addRange(n))}},setStartEmptyOrInline:function(e,i){var n=window.getSelection(),o=document.createRange(),r=document.createTextNode("​");o.setStart(e,0),o.insertNode(r),o.setStartAfter(r),o.collapse(!0),n.removeAllRanges(),n.addRange(o),i||this.core.editor().on("keydown.redactor-remove-textnode",function(){t(r).remove(),t(this).off("keydown.redactor-remove-textnode")})},end:function(e){if(e=this.caret.prepare(e)){if("BR"!==e.tagName&&""===e.innerHTML)return this.caret.start(e);if("BR"===e.tagName){var i=document.createElement("span");return i.className="redactor-invisible-space",i.innerHTML="&#x200b;",t(e).after(i),(n=window.getSelection()).removeAllRanges(),(o=document.createRange()).setStartBefore(i),o.setEndBefore(i),n.addRange(o),void t(i).replaceWith(function(){return t(this).contents()})}if(e.lastChild&&1===e.lastChild.nodeType)return this.caret.after(e.lastChild);var n;if((n=window.getSelection()).getRangeAt||n.rangeCount)try{var o;(o=n.getRangeAt(0)).selectNodeContents(e),o.collapse(!1),n.removeAllRanges(),n.addRange(o)}catch(t){}}},after:function(e){var i,n;if(e=this.caret.prepare(e)){if("BR"===e.tagName)return this.caret.end(e);if(this.utils.isBlockTag(e.tagName)){var o=this.caret.next(e);void 0===o?this.caret.end(e):("TABLE"===o.tagName?o=t(o).find("th, td").first()[0]:"UL"!==o.tagName&&"OL"!==o.tagName||(o=t(o).find("li").first()[0]),this.caret.start(o))}else{var r=document.createTextNode("​");(i=window.getSelection()).removeAllRanges(),(n=document.createRange()).setStartAfter(e),n.insertNode(r),n.setStartAfter(r),n.collapse(!0),i.addRange(n)}}},before:function(e){var i,n;if(e=this.caret.prepare(e))if(this.utils.isBlockTag(e.tagName)){var o=this.caret.prev(e);void 0===o?this.caret.start(e):("TABLE"===o.tagName?o=t(o).find("th, td").last()[0]:"UL"!==o.tagName&&"OL"!==o.tagName||(o=t(o).find("li").last()[0]),this.caret.end(o))}else(i=window.getSelection()).removeAllRanges(),(n=document.createRange()).setStartBefore(e),n.collapse(!0),i.addRange(n)},next:function(e){var i=t(e).next();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.next()[0]:i[0]},prev:function(e){var i=t(e).prev();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.prev()[0]:i[0]},offset:function(t){return this.offset.get(t)}}},clean:function(){return{onSet:function(e){e=this.clean.savePreCode(e),e=this.clean.saveFormTags(e),this.opts.script&&(e=e.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" $1>$2</pre>')),e=(e=(e=(e=(e=e.replace(/\$/g,"&#36;")).replace(/&amp;/g,"&")).replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi,'<a href="$1&reg$2">')).replace(/<span id="selection-marker-1"(.*?[^>]?)>​<\/span>/gi,"###marker1###")).replace(/<span id="selection-marker-2"(.*?[^>]?)>​<\/span>/gi,"###marker2###");var i=this,n=t("<div/>").html(t.parseHTML(e,document,!0)),o=this.opts.replaceTags;if(o){var r=Object.keys(this.opts.replaceTags);n.find(r.join(",")).each(function(t,e){i.utils.replaceToTag(e,o[e.tagName.toLowerCase()])})}n.find("span, a").attr("data-redactor-span",!0),n.find(this.opts.inlineTags.join(",")).each(function(){var e=t(this);e.attr("style")&&e.attr("data-redactor-style-cache",e.attr("style"))}),e=n.html();var s=["font","html","head","link","body","meta","applet"];return this.opts.script||s.push("script"),e=this.clean.stripTags(e,s),this.opts.removeComments&&(e=e.replace(/<!--[\s\S]*?-->/gi,"")),-1!==(e=(e=(e=this.paragraphize.load(e)).replace("###marker1###",'<span id="selection-marker-1" class="redactor-selection-marker">​</span>')).replace("###marker2###",'<span id="selection-marker-2" class="redactor-selection-marker">​</span>')).search(/^(||\s||<br\s?\/?>||&nbsp;)$/i)?this.opts.emptyHtml:e},onGet:function(t){return this.clean.onSync(t)},onSync:function(e){if(-1!==(e=(e=e.replace(/\u200B/g,"")).replace(/&#x200b;/gi,"")).search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";e=(e=(e=(e=e.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>")).replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,"")).replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,"")).replace(/<img(.*?)style="(.*?)opacity: 0\.5;(.*?)"(.*?)>/gi,'<img$1style="$2$3"$4>');var i=t("<div/>").html(t.parseHTML(e,document,!0));i.find('*[style=""]').removeAttr("style"),i.find('*[class=""]').removeAttr("class"),i.find('*[rel=""]').removeAttr("rel"),i.find('*[data-image=""]').removeAttr("data-image"),i.find('*[alt=""]').removeAttr("alt"),i.find('*[title=""]').removeAttr("title"),i.find("*[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),i.find(".redactor-invisible-space, .redactor-unlink").each(function(){t(this).contents().unwrap()}),i.find("span, a").removeAttr("data-redactor-span data-redactor-style-cache").each(function(){0===this.attributes.length&&t(this).contents().unwrap()}),i.find("img").removeAttr("rel"),i.find(".redactor-selection-marker, #redactor-insert-marker").remove(),e=i.html(),this.opts.script&&(e=e.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2<\/script>")),e=(e=(e=(e=(e=this.clean.restoreFormTags(e)).replace(new RegExp("<br\\s?/?></h","gi"),"</h")).replace(new RegExp("<br\\s?/?></li>","gi"),"</li>")).replace(new RegExp("</li><br\\s?/?>","gi"),"</li>")).replace(/<pre>/gi,"<pre>\n"),this.opts.preClass&&(e=e.replace(/<pre>/gi,'<pre class="'+this.opts.preClass+'">')),this.opts.linkNofollow&&(e=(e=e.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>")).replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">'));return t.each({"™":"&trade;","©":"&copy;","…":"&hellip;","—":"&mdash;","‐":"&dash;"},function(t,i){e=e.replace(new RegExp(t,"g"),i)}),e=(e=e.replace(/&amp;/g,"&")).replace(/\n{2,}/g,"\n"),this.opts.removeNewlines&&(e=e.replace(/\r?\n/g,"")),e},onPaste:function(e,i,n){!0!==n&&(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2")).replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3")).replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>")).replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>")).replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>")).replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>")).replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>")).replace(/<o:p[^>]*>/gi,"")).replace(/<\/o:p>/gi,""),this.clean.isHtmlMsWord(e)&&(e=this.clean.cleanMsWord(e)));return e=t.trim(e),i.pre?this.opts.preSpaces&&(e=e.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))):(e=this.clean.replaceBrToNl(e),e=this.clean.removeTagsInsidePre(e)),!0!==n&&(e=this.clean.removeEmptyInlineTags(e),!1===i.encode&&(e=e.replace(/&/g,"&amp;"),e=this.clean.convertTags(e,i),e=this.clean.getPlainText(e),e=this.clean.reconvertTags(e,i))),i.text&&(e=this.clean.replaceNbspToSpaces(e),e=this.clean.getPlainText(e)),i.lists&&(e=e.replace("\n","<br>")),i.encode&&(e=this.clean.encodeHtml(e)),i.paragraphize&&(e=(e=e.replace(/ \n/g," ")).replace(/\n /g," "),e=(e=this.paragraphize.load(e)).replace(/<p><\/p>/g,"")),e=(e=e.replace(/<li><p>/g,"<li>")).replace(/<\/p><\/li>/g,"</li>")},getCurrentType:function(t,e){var i=this.selection.blocks(),n={text:!1,encode:!1,paragraphize:!0,line:this.clean.isHtmlLine(t),blocks:this.clean.isHtmlBlocked(t),pre:!1,lists:!1,block:!0,inline:!0,links:!0,images:!0};return 1===i.length&&this.utils.isCurrentOrParent(["h1","h2","h3","h4","h5","h6","a","figcaption"])?(n.text=!0,n.paragraphize=!1,n.inline=!1,n.images=!1,n.links=!1,n.line=!0):"inline"===this.opts.type||!1===this.opts.enterKey?(n.paragraphize=!1,n.block=!1,n.line=!0):1===i.length&&this.utils.isCurrentOrParent(["li"])?(n.lists=!0,n.block=!1,n.paragraphize=!1,n.images=!1):1===i.length&&this.utils.isCurrentOrParent(["th","td","blockquote"])?(n.block=!1,n.paragraphize=!1):("pre"===this.opts.type||1===i.length&&this.utils.isCurrentOrParent("pre"))&&(n.inline=!1,n.block=!1,n.encode=!0,n.pre=!0,n.paragraphize=!1,n.images=!1,n.links=!1),!0===n.line&&(n.paragraphize=!1),!0===e&&(n.text=!1),n},isHtmlBlocked:function(t){var e=t.match(new RegExp("</("+this.opts.blockTags.join("|").toUpperCase()+")>","gi")),i=t.match(new RegExp("<hr(.*?[^>])>","gi"));return null!==e||null!==i},isHtmlLine:function(t){if(this.clean.isHtmlBlocked(t))return!1;var e=t.match(/<br\s?\/?>/gi),i=t.match(/\n/gi);return!e&&!i},isHtmlMsWord:function(t){return t.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},removeEmptyInlineTags:function(e){var i=this.opts.inlineTags,n=t("<div/>").html(t.parseHTML(e,document,!0)),o=this,r=n.find("span"),s=n.find(i.join(","));return s.removeAttr("style"),s.each(function(){var e=t(this).html();0===this.attributes.length&&o.utils.isEmpty(e)&&t(this).replaceWith(function(){return t(this).contents()})}),r.each(function(){t(this).html();0===this.attributes.length&&t(this).replaceWith(function(){return t(this).contents()})}),e=(e=(e=(e=n.html()).replace("\x3c!--?php","<?php")).replace("\x3c!--?","<?")).replace("?--\x3e","?>"),n.remove(),e},cleanMsWord:function(e){e=(e=(e=(e=e.replace(/<!--[\s\S]*?-->/g,"")).replace(/<o:p>[\s\S]*?<\/o:p>/gi,"")).replace(/\n/g," ")).replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n\n");var i=t("<div/>").html(e),n=!1,o=1,r=[];return i.find("p[style]").each(function(){var e=t(this).attr("style").match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);if(e){var s=parseInt(e[1]),a=parseInt(e[2]),l=t(this).html().match(/^[\w]+\./)?"ol":"ul",c=t("<li/>").html(t(this).html());if(c.html(c.html().replace(/^([\w\.]+)</,"<")),c.find("span:first").remove(),1==a&&-1==t.inArray(s,r)){var h=t("<"+l+"/>").attr({"data-level":a,"data-list":s}).html(c);t(this).replaceWith(h),n=s,r.push(s)}else{if(a>o){for(var d=i.find('[data-level="'+o+'"][data-list="'+n+'"]'),u=o;u<a;u++)(h=t("<"+l+"/>")).appendTo(d.find("li").last()),d=h;d.attr({"data-level":a,"data-list":s}).html(c)}else{i.find('[data-level="'+a+'"][data-list="'+s+'"]').last().append(c)}o=a,n=s,t(this).remove()}}}),i.find("[data-level][data-list]").removeAttr("data-level data-list"),e=i.html()},replaceNbspToSpaces:function(t){return t.replace("&nbsp;"," ")},replaceBrToNl:function(t){return t.replace(/<br\s?\/?>/gi,"\n")},replaceNlToBr:function(t){return t.replace(/\n/g,"<br />")},convertTags:function(e,i){var n=t("<div>").html(e);n.find("iframe").remove();var o=n.find("a");if(o.removeAttr("style"),!1!==this.opts.pasteLinkTarget&&o.attr("target",this.opts.pasteLinkTarget),i.links&&this.opts.pasteLinks&&n.find("a").each(function(t,e){if(e.href){for(var i,n='#####[a href="'+e.href+'"',o=0,r=e.attributes.length;o<r;o++)"href"!==(i=e.attributes.item(o)).name&&(n+=" "+i.name+'="'+i.value+'"');e.outerHTML=n+"]#####"+e.innerHTML+"#####[/a]#####"}}),e=n.html(),i.images&&this.opts.pasteImages&&(e=e.replace(/<img(.*?)src="(.*?)"(.*?[^>])>/gi,'#####[img$1src="$2"$3]#####')),this.opts.pastePlainText)return e;for(var r,s=i.lists?["ul","ol","li"]:this.opts.pasteBlockTags,a=(r=i.block||i.lists?i.inline?s.concat(this.opts.pasteInlineTags):s:i.inline?this.opts.pasteInlineTags:[]).length,l=0;l<a;l++)e=e.replace(new RegExp("</"+r[l]+">","gi"),"###/"+r[l]+"###"),e="td"===r[l]||"th"===r[l]?e.replace(new RegExp("<"+r[l]+'(.*?[^>])((colspan|rowspan)="(.*?[^>])")?(.*?[^>])>',"gi"),"###"+r[l]+" $2###"):this.utils.isInlineTag(r[l])?(e=(e=e.replace(new RegExp("<"+r[l]+'([^>]*)class="([^>]*)"[^>]*>',"gi"),"###"+r[l]+' class="$2"###')).replace(new RegExp("<"+r[l]+'([^>]*)data-redactor-style-cache="([^>]*)"[^>]*>',"gi"),"###"+r[l]+' cache="$2"###')).replace(new RegExp("<"+r[l]+"[^>]*>","gi"),"###"+r[l]+"###"):e.replace(new RegExp("<"+r[l]+"[^>]*>","gi"),"###"+r[l]+"###");return e},reconvertTags:function(t,e){if((e.links&&this.opts.pasteLinks||e.images&&this.opts.pasteImages)&&(t=(t=t.replace(new RegExp("#####\\[","gi"),"<")).replace(new RegExp("\\]#####","gi"),">")),this.opts.pastePlainText)return t;for(var i,n=e.lists?["ul","ol","li"]:this.opts.pasteBlockTags,o=(i=e.block||e.lists?e.inline?n.concat(this.opts.pasteInlineTags):n:e.inline?this.opts.pasteInlineTags:[]).length,r=0;r<o;r++)t=t.replace(new RegExp("###/"+i[r]+"###","gi"),"</"+i[r]+">");for(r=0;r<o;r++)t=t.replace(new RegExp("###"+i[r]+"###","gi"),"<"+i[r]+">");for(r=0;r<o;r++)if("td"===i[r]||"th"===i[r])t=t.replace(new RegExp("###"+i[r]+"s?(.*?[^#])###","gi"),"<"+i[r]+"$1>");else if(this.utils.isInlineTag(i[r])){var s="span"===i[r]?' data-redactor-span="true"':"";t=(t=t.replace(new RegExp("###"+i[r]+' cache="(.*?[^#])"###',"gi"),"<"+i[r]+' style="$1"'+s+' data-redactor-style-cache="$1">')).replace(new RegExp("###"+i[r]+"s?(.*?[^#])###","gi"),"<"+i[r]+"$1>")}return t},cleanPre:function(e){e=void 0===e?t(this.selection.block()).closest("pre",this.core.editor()[0]):e,t(e).find("br").replaceWith(function(){return document.createTextNode("\n")}),t(e).find("p").replaceWith(function(){return t(this).contents()})},removeTagsInsidePre:function(e){var i=t("<div />").append(e);return i.find("pre").replaceWith(function(){var e=t(this).html();return e=(e=e.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n")).replace(/(<([^>]+)>)/gi,""),t("<pre />").append(e)}),e=i.html(),i.remove(),e},getPlainText:function(e){e=(e=(e=(e=(e=(e=e.replace(/<!--[\s\S]*?-->/gi,"")).replace(/<style[\s\S]*?style>/gi,"")).replace(/<p><\/p>/g,"")).replace(/<\/div>|<\/li>|<\/td>/gi,"\n")).replace(/<\/p>/gi,"\n\n")).replace(/<\/H[1-6]>/gi,"\n\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t),t=this.clean.restoreSelectionMarkers(t)},savePreFormatting:function(e){var i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null===i?e:(t.each(i,t.proxy(function(t,i){var n,o,r,s=[],a=!1;i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>/i)?(a=!0,n=(s=i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>([\w\W]*?)<\/code>(([\n\r\s]+)?)<\/pre>/i))[5],o=s[1],r=s[4]):(n=(s=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i))[2],o=s[1]),n=(n=n.replace(/<br\s?\/?>/g,"\n")).replace(/&nbsp;/g," "),this.opts.preSpaces&&(n=n.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),n=(n=this.clean.encodeEntities(n)).replace(/\$/g,"&#36;"),e=a?e.replace(i,"<pre"+o+"><code"+r+">"+n+"</code></pre>"):e.replace(i,"<pre"+o+">"+n+"</pre>")},this)),e)},saveCodeFormatting:function(e){var i=e.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null===i?e:(t.each(i,t.proxy(function(t,i){var n=i.match(/<code(.*?)>([\w\W]*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),e)},restoreSelectionMarkers:function(t){return t=t.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot;&gt;​&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker">​</span>')},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")},encodeHtml:function(t){return t=(t=(t=(t=t.replace(/”/g,'"')).replace(/“/g,'"')).replace(/‘/g,"'")).replace(/’/g,"'"),t=this.clean.encodeEntities(t)},encodeEntities:function(t){return t=(t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},stripTags:function(t,e){if(void 0===e)return t.replace(/(<([^>]+)>)/gi,"");return t.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,i){return-1===e.indexOf(i.toLowerCase())?t:""})},removeMarkers:function(t){return t.replace(/<span(.*?[^>]?)class="redactor-selection-marker"(.*?[^>]?)>([\w\W]*?)<\/span>/gi,"")},removeSpaces:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=t.trim(e)).replace(/\n/g,"")).replace(/[\t]*/g,"")).replace(/\n\s*\n/g,"\n")).replace(/^[\s\n]*/g," ")).replace(/[\s\n]*$/g," ")).replace(/>\s{2,}</g,"> <")).replace(/\n\n/g,"\n")).replace(/\u200B/g,"")},removeSpacesHard:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=t.trim(e)).replace(/\n/g,"")).replace(/[\t]*/g,"")).replace(/\n\s*\n/g,"\n")).replace(/^[\s\n]*/g,"")).replace(/[\s\n]*$/g,"")).replace(/>\s{2,}</g,"><")).replace(/\n\n/g,"\n")).replace(/\u200B/g,"")},normalizeCurrentHeading:function(){var t=this.selection.block();this.utils.isCurrentOrParentHeader()&&t&&t.normalize()}}},code:function(){return{syncFire:!0,html:!1,start:function(e){e=(e=t.trim(e)).replace(/^(<span id="selection-marker-1" class="redactor-selection-marker">​<\/span>)/,""),"textarea"===this.opts.type?e=this.clean.onSet(e):"div"===this.opts.type&&""===e&&(e=this.opts.emptyHtml),e=e.replace(/<p><span id="selection-marker-1" class="redactor-selection-marker">​<\/span><\/p>/,""),this.events.stopDetectChanges(),this.core.editor().html(e),this.observe.load(),this.events.startDetectChanges()},set:function(e,i){e=t.trim(e),(i=i||{}).start&&(this.start=i.start),"textarea"===this.opts.type?e=this.clean.onSet(e):"div"===this.opts.type&&""===e&&(e=this.opts.emptyHtml),this.core.editor().html(e),"textarea"===this.opts.type&&this.code.sync(),this.placeholder.enable()},get:function(){if("textarea"===this.opts.type)return this.core.textarea().val();var t=this.core.editor().html();return t=this.clean.onGet(t)},sync:function(){if(this.code.syncFire){var e=this.core.editor().html(),i=this.code.cleaned(e);if(!this.code.isSync(i)){if(this.code.html=i,"textarea"!==this.opts.type)return this.core.callback("sync",e),void this.core.callback("change",e);"textarea"===this.opts.type&&setTimeout(t.proxy(function(){this.code.startSync(e)},this),10)}}},startSync:function(t){t=this.core.callback("syncBefore",t),t=this.clean.onSync(t),this.core.textarea().val(t),this.core.callback("sync",t),!1===this.start&&this.core.callback("change",t),this.start=!1},isSync:function(t){var e=!1!==this.code.html&&this.code.html;return!1!==e&&e===t},cleaned:function(t){return t=t.replace(/\u200B/g,""),this.clean.removeMarkers(t)}}},core:function(){return{id:function(){return this.$editor.attr("id")},element:function(){return this.$element},editor:function(){return void 0===this.$editor?t():this.$editor},textarea:function(){return this.$textarea},box:function(){return"textarea"===this.opts.type?this.$box:this.$element},toolbar:function(){return!!this.$toolbar&&this.$toolbar},air:function(){return!!this.$air&&this.$air},object:function(){return t.extend({},this)},structure:function(){this.core.editor().toggleClass("redactor-structure")},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},callback:function(e,i,n){var o=!1,r=t._data(this.core.element()[0],"events");if(void 0!==r&&void 0!==r[e])for(var s=r[e].length,a=0;a<s;a++){if("callback.redactor"===r[e][a].namespace){var l=r[e][a].handler,c=void 0===n?[i]:[i,n];o=void 0===c?l.call(this,i):l.call(this,i,c)}}if(o)return o;if(void 0===this.opts.callbacks[e])return void 0===n?i:n;var h=this.opts.callbacks[e];return t.isFunction(h)?void 0===n?h.call(this,i):h.call(this,i,n):void 0===n?i:n},destroy:function(){this.opts.destroyed=!0,this.core.callback("destroy"),this.placeholder.destroy(),this.progress.destroy(),t("#redactor-voice-"+this.uuid).remove(),this.core.editor().removeClass("redactor-in redactor-styles redactor-structure redactor-layer-img-edit"),this.core.editor().off("keydown.redactor-remove-textnode"),this.core.editor().off(".redactor-observe."+this.uuid),this.$element.off(".redactor").removeData("redactor"),this.core.editor().off(".redactor"),t(document).off(".redactor-dropdown"),t(document).off(".redactor-air."+this.uuid),t(document).off("mousedown.redactor-blur."+this.uuid),t(document).off("mousedown.redactor."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t(window).off(".redactor-toolbar."+this.uuid),t(window).off("touchmove.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid);var e=this;!1!==this.opts.plugins&&t.each(this.opts.plugins,function(i,n){t(window).off(".redactor-plugin-"+n),t(document).off(".redactor-plugin-"+n),t("body").off(".redactor-plugin-"+n),e.core.editor().off(".redactor-plugin-"+n)}),this.$element.off("click.redactor-click-to-edit"),this.$element.removeClass("redactor-click-to-edit"),this.core.editor().removeClass("redactor-layer"),this.core.editor().removeAttr("contenteditable");var i=this.code.get();this.opts.toolbar&&this.$toolbar&&this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),"textarea"===this.opts.type&&(this.$box.after(this.$element),this.$box.remove(),this.$element.val(i).show()),this.opts.air&&this.$air.remove(),this.opts.toolbar&&this.$toolbar&&this.$toolbar.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),t(".redactor-link-tooltip").remove(),clearInterval(this.autosaveTimeout)}}},detect:function(){return{isWebkit:function(){return/webkit/.test(this.opts.userAgent)},isFirefox:function(){return this.opts.userAgent.indexOf("firefox")>-1},isIe:function(t){return document.documentMode||/Edge/.test(navigator.userAgent)?"edge":((e=RegExp("msie"+(isNaN(t)?"":"\\s"+t),"i").test(navigator.userAgent))||(e=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),e);var e},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}},dropdown:function(){return{active:!1,button:!1,key:!1,position:[],getDropdown:function(){return this.dropdown.active},build:function(e,i,n){n=this.dropdown.buildFormatting(e,n),t.each(n,t.proxy(function(t,n){var o=this.dropdown.buildItem(t,n);this.observe.addDropdown(o,t,n),i.attr("rel",e).append(o)},this))},buildFormatting:function(e,i){return"format"!==e||!1===this.opts.formattingAdd?i:(t.each(this.opts.formattingAdd,t.proxy(function(t,e){var n=this.utils.isBlockTag(e.args[0])?"block":"inline";i[t]={func:"block"===n?"block.format":"inline.format",args:e.args,title:e.title}},this)),i)},buildItem:function(e,i){var n=t("<li />");if(void 0!==i.classname&&n.addClass(i.classname),-1!==e.search(/^divider/i))return n.addClass("redactor-dropdown-divider"),n;var o=t('<a href="#" class="redactor-dropdown-'+e+'" role="button" />'),r=t("<span />").html(i.title);return o.append(r),o.on("mousedown",t.proxy(function(t){t.preventDefault(),this.dropdown.buildClick(t,e,i)},this)),n.append(o),n},buildClick:function(e,i,n){if(!t(e.target).hasClass("redactor-dropdown-link-inactive")){var o=this.dropdown.buildCommand(n);void 0!==n.args?this.button.toggle(e,i,o.type,o.callback,n.args):this.button.toggle(e,i,o.type,o.callback)}},buildCommand:function(t){var e={type:"func"};return e.callback=t.func,t.command?(e.type="command",e.callback=t.command):t.dropdown&&(e.type="dropdown",e.callback=t.dropdown),e},show:function(e,i){this.detect.isDesktop()&&this.core.editor().focus(),this.dropdown.hideAll(!1,i),this.dropdown.key=i,this.dropdown.button=this.button.get(this.dropdown.key),this.dropdown.button.hasClass("dropact")?this.dropdown.hide():(this.dropdown.active=this.dropdown.button.data("dropdown").appendTo(document.body),this.core.callback("dropdownShow",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button}),this.button.setActive(this.dropdown.key),this.dropdown.button.addClass("dropact"),this.dropdown.getButtonPosition(),this.button.toolbar().hasClass("toolbar-fixed-box")&&this.detect.isDesktop()?this.dropdown.showIsFixedToolbar():this.dropdown.showIsUnFixedToolbar(),this.detect.isDesktop()&&!this.detect.isFirefox()&&(this.dropdown.active.on("mouseover.redactor-dropdown",t.proxy(this.utils.disableBodyScroll,this)),this.dropdown.active.on("mouseout.redactor-dropdown mousedown.redactor-dropdown",t.proxy(this.utils.enableBodyScroll,this))),e.stopPropagation())},showIsFixedToolbar:function(){var e=this.dropdown.button.position().top+this.dropdown.button.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.dropdown.button.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),this.dropdown.active.css({position:i,left:this.dropdown.position.left+"px",top:e+"px"}).show(),this.dropdown.active.redactorAnimation("slideDown",{duration:.2},t.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},showIsUnFixedToolbar:function(){this.dropdown.active.css({position:"absolute",left:this.dropdown.position.left+"px",top:this.dropdown.button.innerHeight()+this.dropdown.position.top+"px"}).show(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideDown":"show",{duration:.2},t.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},enableEvents:function(){t(document).on("mousedown.redactor-dropdown",t.proxy(this.dropdown.hideAll,this)),this.core.editor().on("touchstart.redactor-dropdown",t.proxy(this.dropdown.hideAll,this)),t(document).on("keyup.redactor-dropdown",t.proxy(this.dropdown.closeHandler,this))},enableCallback:function(){this.core.callback("dropdownShown",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button})},getButtonPosition:function(){this.dropdown.position=this.dropdown.button.offset();var e=this.dropdown.active.width();this.dropdown.position.left+e>t(document).width()&&(this.dropdown.position.left=Math.max(0,this.dropdown.position.left-e+parseInt(this.dropdown.button.innerWidth())))},closeHandler:function(t){t.which===this.keyCode.ESC&&(this.dropdown.hideAll(t),this.core.editor().focus())},hideAll:function(e,i){if(this.detect.isDesktop()&&this.utils.enableBodyScroll(),!1===e||0===t(e.target).closest(".redactor-dropdown").length){var n=void 0===i?this.button.toolbar().find("a.dropact"):this.button.toolbar().find("a.dropact").not(".re-"+i),o=void 0===i?t(".redactor-dropdown-"+this.uuid):t(".redactor-dropdown-"+this.uuid).not(".redactor-dropdown-box-"+i);0!==o.length&&(t(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),t.each(o,t.proxy(function(e,i){var n=t(i);this.core.callback("dropdownHide",n),n.hide(),n.off("mouseover mouseout").off(".redactor-dropdown")},this)),n.removeClass("redactor-act dropact"))}},hide:function(){!1!==this.dropdown.active&&(this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideUp":"hide",{duration:.2},t.proxy(function(){t(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),this.dropdown.hideOut()},this)))},hideOut:function(){this.core.callback("dropdownHide",this.dropdown.active),this.dropdown.button.removeClass("redactor-act dropact"),this.dropdown.active.off("mouseover mouseout").off(".redactor-dropdown"),this.dropdown.button=!1,this.dropdown.key=!1,this.dropdown.active=!1}}},events:function(){return{focused:!1,blured:!0,dropImage:!1,stopChanges:!1,stopDetectChanges:function(){this.events.stopChanges=!0},startDetectChanges:function(){var t=this;setTimeout(function(){t.events.stopChanges=!1},1)},dragover:function(e){e.preventDefault(),e.stopPropagation(),"IMG"===e.target.tagName&&t(e.target).addClass("redactor-image-dragover")},dragleave:function(t){this.core.editor().find("img").removeClass("redactor-image-dragover")},drop:function(t){return t=t.originalEvent||t,this.core.editor().find("img").removeClass("redactor-image-dragover"),"inline"===this.opts.type||"pre"===this.opts.type?(t.preventDefault(),!1):void 0===window.FormData||!t.dataTransfer||(0===t.dataTransfer.files.length?this.events.onDrop(t):(this.events.onDropUpload(t),void this.core.callback("drop",t)))},click:function(t){var e=this.core.getEvent(),i="click"!==e&&"arrow"!==e&&"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.callback("click",t)},focus:function(t){if(!this.rtePaste&&(this.events.isCallback("focus")&&this.core.callback("focus",t),this.events.focused=!0,this.events.blured=!1,!1===this.selection.current())){var e=this.selection.get(),i=this.selection.range(e);i.setStart(this.core.editor()[0],0),i.setEnd(this.core.editor()[0],0),this.selection.update(e,i)}},blur:function(e){this.start||this.rtePaste||0===t(e.target).closest("#"+this.core.id()+", .redactor-toolbar, .redactor-dropdown, #redactor-modal-box").length&&(!this.events.blured&&this.events.isCallback("blur")&&this.core.callback("blur",e),this.events.focused=!1,this.events.blured=!0)},touchImageEditing:function(){var e=-1;this.events.imageEditing=!1,t(window).on("touchmove.redactor."+this.uuid,t.proxy(function(){this.events.imageEditing=!0,-1!==e&&clearTimeout(e),e=setTimeout(t.proxy(function(){this.events.imageEditing=!1},this),500)},this))},init:function(){this.core.editor().on("dragover.redactor dragenter.redactor",t.proxy(this.events.dragover,this)),this.core.editor().on("dragleave.redactor",t.proxy(this.events.dragleave,this)),this.core.editor().on("drop.redactor",t.proxy(this.events.drop,this)),this.core.editor().on("click.redactor",t.proxy(this.events.click,this)),this.core.editor().on("paste.redactor",t.proxy(this.paste.init,this)),this.core.editor().on("keydown.redactor",t.proxy(this.keydown.init,this)),this.core.editor().on("keyup.redactor",t.proxy(this.keyup.init,this)),this.core.editor().on("focus.redactor",t.proxy(this.events.focus,this)),t(document).on("mousedown.redactor-blur."+this.uuid,t.proxy(this.events.blur,this)),this.events.touchImageEditing(),this.events.createObserver(),this.events.setupObserver()},createObserver:function(){var e=this;this.events.observer=new MutationObserver(function(i){i.forEach(t.proxy(e.events.iterateObserver,e))})},iterateObserver:function(t){var e=!1;(("textarea"===this.opts.type||"div"===this.opts.type)&&!this.detect.isFirefox()&&t.target===this.core.editor()[0]||"class"===t.attributeName&&t.target===this.core.editor()[0]||"data-vivaldi-spatnav-clickable"==t.attributeName)&&(e=!0),e||(this.observe.load(),this.events.changeHandler())},setupObserver:function(){this.events.observer.observe(this.core.editor()[0],{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})},changeHandler:function(){this.events.stopChanges||(this.code.sync(),this.autosave.is()&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=setTimeout(t.proxy(this.autosave.send,this),300)))},onDropUpload:function(t){if(t.preventDefault(),t.stopPropagation(),(this.opts.dragImageUpload||this.opts.dragFileUpload)&&(null!==this.opts.imageUpload||null!==this.opts.fileUpload)){"IMG"===t.target.tagName&&(this.events.dropImage=t.target);for(var e=t.dataTransfer.files,i=e.length,n=0;n<i;n++)this.upload.directUpload(e[n],t)}},onDrop:function(t){this.core.callback("drop",t)},isCallback:function(e){return void 0!==this.opts.callbacks[e]&&t.isFunction(this.opts.callbacks[e])},stopDetect:function(){this.events.stopDetectChanges()},startDetect:function(){this.events.startDetectChanges()}}},file:function(){return{is:function(){return!(!this.opts.fileUpload||!this.opts.fileUpload&&!this.opts.s3)},show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),t("#redactor-filename").val(this.selection.get().toString()),this.modal.show()},insert:function(e,i,n){if(void 0!==e.error)return this.modal.close(),void this.core.callback("fileUploadError",e);this.file.release(n,i),this.buffer.set(),this.air.collapsed();var o=this.file.text(e),r=t("<a />").attr("href",e.url).text(o),s=void 0===e.id?"":e.id,a=void 0===e.s3?"file":"s3";r.attr("data-"+a,s),r=t(this.insert.node(r)),this.caret.after(r),this.storage.add({type:a,node:r[0],url:e.url,id:s}),null!==i&&this.core.callback("fileUpload",r,e)},release:function(t,e){e?(this.marker.remove(),this.insert.nodeToPoint(t,this.marker.get()),this.selection.restore()):this.modal.close()},text:function(e){var i=t("#redactor-filename").val();return void 0===i||""===i?e.name:i}}},focus:function(){return{start:function(){if(this.core.editor().focus(),"inline"!==this.opts.type){var t=this.focus.first();!1!==t&&this.caret.start(t)}},end:function(){this.core.editor().focus();var t=this.opts.inline?this.core.editor():this.focus.last();if(0!==t.length){var e=this.focus.lastChild(t);if(this.detect.isWebkit()||!1===e){var i=this.selection.get(),n=this.selection.range(i);null!==n?(n.selectNodeContents(t[0]),n.collapse(!1),this.selection.update(i,n)):this.caret.end(t)}else this.caret.end(e)}},first:function(){var t=this.core.editor().children().first();return(0!==t.length||0!==t[0].length&&"BR"!==t[0].tagName&&"HR"!==t[0].tagName&&3!==t[0].nodeType)&&("UL"===t[0].tagName||"OL"===t[0].tagName?t.find("li").first():t)},last:function(){return this.core.editor().children().last()},lastChild:function(t){var e=t[0].lastChild;return!(null===e||!this.utils.isInlineTag(e.tagName))&&e},is:function(){return this.core.editor()[0]===document.activeElement}}},image:function(){return{is:function(){return!(!this.opts.imageUpload||!this.opts.imageUpload&&!this.opts.s3)},show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.modal.show()},insert:function(e,i,n){var o;if(void 0!==e.error)return this.modal.close(),this.events.dropImage=!1,void this.core.callback("imageUploadError",e,n);if(!1!==this.events.dropImage)return o=t(this.events.dropImage),this.core.callback("imageDelete",o[0].src,o),o.attr("src",e.url),this.events.dropImage=!1,void this.core.callback("imageUpload",o,e);this.placeholder.hide();var r=t("<"+this.opts.imageTag+">");(o=t("<img>")).attr("src",e.url);var s=void 0===e.id?"":e.id,a=void 0===e.s3?"image":"s3";o.attr("data-"+a,s),r.append(o);var l=this.utils.isTag(this.selection.current(),"pre");if(i){this.air.collapsed(),this.marker.remove();var c=this.insert.nodeToPoint(n,this.marker.get()),h=t(c).next();this.selection.restore(),this.buffer.set(),void 0!==h&&0!==h.length&&"IMG"===h[0].tagName?(this.core.callback("imageDelete",h[0].src,h),h.closest("figure, p",this.core.editor()[0]).replaceWith(r),this.caret.after(r)):(l?t(l).after(r):this.insert.node(r),this.caret.after(r))}else this.modal.close(),this.buffer.set(),this.air.collapsed(),l?t(l).after(r):this.insert.node(r),this.caret.after(r);this.events.dropImage=!1,this.storage.add({type:a,node:o[0],url:e.url,id:s});var d=o[0].nextSibling,u=r.next(),p=t(d).text().replace(/\u200B/g,""),f=u.text().replace(/\u200B/g,"");""===p&&t(d).remove(),1===u.length&&"FIGURE"===u[0].tagName&&""===f&&u.remove(),null!==i?this.core.callback("imageUpload",o,e):this.core.callback("imageInserted",o,e)},setEditable:function(e){if(e.on("dragstart",function(t){t.preventDefault()}),this.opts.imageResizable){var i=t.proxy(function(i){this.observe.image=e,this.image.resizer=this.image.loadEditableControls(e),t(document).on("mousedown.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),this.image.resizer&&this.image.resizer.on("mousedown.redactor touchstart.redactor",t.proxy(function(t){this.image.setResizable(t,e)},this))},this);e.off("mousedown.redactor").on("mousedown.redactor",t.proxy(this.image.hideResize,this)),e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",i)}else e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",t.proxy(function(i){setTimeout(t.proxy(function(){this.image.showEdit(e)},this),200)},this))},setResizable:function(t,e){t.preventDefault(),this.image.resizeHandle={x:t.pageX,y:t.pageY,el:e,ratio:e.width()/e.height(),h:e.height()},(t=t.originalEvent||t).targetTouches&&(this.image.resizeHandle.x=t.targetTouches[0].pageX,this.image.resizeHandle.y=t.targetTouches[0].pageY),this.image.startResize()},startResize:function(){t(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",t.proxy(this.image.moveResize,this)),t(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",t.proxy(this.image.stopResize,this))},moveResize:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.image.resizeHandle.h;t.targetTouches?e+=t.targetTouches[0].pageY-this.image.resizeHandle.y:e+=t.pageY-this.image.resizeHandle.y;var i=Math.round(e*this.image.resizeHandle.ratio);e<50||i<100||this.core.editor().width()<=i||(this.image.resizeHandle.el.attr({width:i,height:e}),this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(e),this.code.sync())},stopResize:function(){this.handle=!1,t(document).off(".redactor-image-resize"),this.image.hideResize()},hideResize:function(e){if(!e||0===t(e.target).closest("#redactor-image-box",this.$editor[0]).length){if(e&&"IMG"==e.target.tagName)t(e.target);var i=this.$editor.find("#redactor-image-box");0!==i.length&&(t("#redactor-image-editter").remove(),t("#redactor-image-resizer").remove(),i.find("img").css({marginTop:i[0].style.marginTop,marginBottom:i[0].style.marginBottom,marginLeft:i[0].style.marginLeft,marginRight:i[0].style.marginRight}),i.css("margin",""),i.find("img").css("opacity",""),i.replaceWith(function(){return t(this).contents()}),t(document).off("mousedown.redactor-image-resize-hide."+this.uuid),void 0!==this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")))}},loadResizableControls:function(e,i){if(this.opts.imageResizable&&!this.detect.isMobile()){var n=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.detect.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(e),n}return i.append(e),!1},loadEditableControls:function(e){if(0===t("#redactor-image-box").length){var i=t('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",e.css("float")).attr("contenteditable",!1),"auto"!=e[0].style.margin?(i.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):i.css({display:"block",margin:"auto"}),e.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",t.proxy(function(){this.image.showEdit(e)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(e,i)}},showEdit:function(e){if(!this.events.imageEditing){this.observe.image=e;var i=e.closest("a",this.$editor[0]),n=e.closest("figure",this.$editor[0]),o=0!==n.length?n:e;if(this.modal.load("image-edit",this.lang.get("edit"),705),this.image.buttonDelete=this.modal.getDeleteButton().text(this.lang.get("delete")),this.image.buttonSave=this.modal.getActionButton().text(this.lang.get("save")),this.image.buttonDelete.on("click",t.proxy(this.image.remove,this)),this.image.buttonSave.on("click",t.proxy(this.image.update,this)),!1===this.opts.imageCaption)t("#redactor-image-caption").val("").hide().prev().hide();else{var r=e.closest(this.opts.imageTag,this.$editor[0]).find("figcaption");0!==r&&t("#redactor-image-caption").val(r.text()).show()}if(this.opts.imagePosition){var s=(0!==n.length?"center"===o.css("text-align"):"block"==o.css("display")&&"none"==o.css("float"))?"center":o.css("float");t("#redactor-image-align").val(s)}else t(".redactor-image-position-option").hide();t("#redactor-image-preview").html(t('<img src="'+e.attr("src")+'" style="max-width: 100%;">')),t("#redactor-image-title").val(e.attr("alt")),0!==i.length&&(t("#redactor-image-link").val(i.attr("href")),"_blank"===i.attr("target")&&t("#redactor-image-link-blank").prop("checked",!0)),t(".redactor-link-tooltip").remove(),this.modal.show(),this.detect.isDesktop()&&t("#redactor-image-title").focus()}},update:function(){var e=this.observe.image,i=e.closest("a",this.core.editor()[0]),n=t("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");e.attr("alt",n).attr("title",n),this.image.setFloating(e);var o=t.trim(t("#redactor-image-link").val()).replace(/(<([^>]+)>)/gi,"");if(""!==o){var r="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+r,"i"),a=new RegExp("^"+r,"i");-1===o.search(s)&&0===o.search(a)&&this.opts.linkProtocol&&(o=this.opts.linkProtocol+"://"+o);var l=!!t("#redactor-image-link-blank").prop("checked");if(0===i.length){var c=t('<a href="'+o+'" id="redactor-img-tmp">'+this.utils.getOuterHtml(e)+"</a>");l&&c.attr("target","_blank"),e=e.replaceWith(c),(i=this.core.editor().find("#redactor-img-tmp")).removeAttr("id")}else i.attr("href",o),l?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(e));this.image.addCaption(e,i),this.modal.close(),this.buffer.set()},setFloating:function(e){var i=e.closest("figure",this.$editor[0]),n=0!==i.length?i:e,o="",r="",s="",a="";switch(t("#redactor-image-align").val()){case"left":o="left",s="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":o="right",s="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":0!==i.length?a="center":(r="block",s="auto")}n.css({float:o,display:r,margin:s,"text-align":a}),n.attr("rel",e.attr("style"))},addCaption:function(e,i){var n=t("#redactor-image-caption").val(),o=0!==i.length?i:e,r=o.next();0!==r.length&&"FIGCAPTION"===r[0].tagName||(r=!1),""!==n?!1===r?(r=t("<figcaption />").text(n),o.after(r)):r.text(n):!1!==r&&r.remove()},remove:function(e,i,n){i=void 0===i?t(this.observe.image):i,"boolean"!=typeof e&&this.buffer.set(),this.events.stopDetectChanges();var o,r,s=i.closest("a",this.core.editor()[0]),a=i.closest(this.opts.imageTag,this.core.editor()[0]);i.parent();if(!1===this.core.callback("imageDelete",e,i[0]))return e&&e.preventDefault(),!1;0!==t("#redactor-image-box").length&&t("#redactor-image-box").parent(),0!==a.length?(r=a.prev(),o=a.next(),a.remove()):0!==s.length?(s.parent(),s.remove()):i.remove(),t("#redactor-image-box").remove(),!1!==e&&(o&&0!==o.length?this.caret.start(o):r&&0!==r.length&&this.caret.end(r)),"boolean"!=typeof e&&this.modal.close(),this.utils.restoreScroll(),this.observe.image=!1,this.events.startDetectChanges(),this.placeholder.enable(),this.code.sync()}}},indent:function(){return{increase:function(){if(this.list.get()){var e=t(this.selection.current()).closest("li"),i=e.closest("ul, ol",this.core.editor()[0]),n=e.closest("li").prev();if(0!==n.length&&"LI"===n[0].tagName)if(this.buffer.set(),this.utils.isCollapsed()){var o=i[0].tagName,r=t("<"+o+" />");this.selection.save();var s=n.find("ol").first();if(1===s.length)s.append(e);else{o=i[0].tagName;(r=t("<"+o+" />")).append(e),n.append(r)}this.selection.restore()}else document.execCommand("indent"),this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},decrease:function(){if(this.list.get()){t(this.selection.current()).closest("li").closest("ul, ol",this.core.editor()[0]);this.buffer.set(),document.execCommand("outdent");var e=t(this.selection.current()).closest("li",this.core.editor()[0]);if(this.utils.isCollapsed()&&this.indent.repositionItem(e),0===e.length){document.execCommand("formatblock",!1,"p");var i=(e=t(this.selection.current())).next();0!==i.length&&"BR"===i[0].tagName&&i.remove()}this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},repositionItem:function(t){var e=t.next();0===e.length||"UL"===e[0].tagName&&"OL"===e[0].tagName||t.append(e);var i=t.prev();0!==i.length&&"LI"!==i[0].tagName&&(this.selection.save(),t.parents("li",this.core.editor()[0]).after(t),this.selection.restore())},normalize:function(){this.core.editor().find("li").each(t.proxy(function(e,i){var n=t(i),o="";0!==this.opts.keepStyleAttr.length&&(o=","+this.opts.keepStyleAttr.join(",")),n.find(this.opts.inlineTags.join(",")).not("img"+o).removeAttr("style");var r=n.parent();if(0===r.length||"LI"!==r[0].tagName){var s=n.next();0===s.length||"UL"!==s[0].tagName&&"OL"!==s[0].tagName||n.append(s)}else r.after(n)},this))},removeEmpty:function(e){var i=this.core.editor().find("ul, ol"),n=this.core.editor().find("li");n.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this)),i.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this)),n.each(t.proxy(function(t,e){this.indent.removeItemEmpty(e)},this))},removeItemEmpty:function(e){var i=e.innerHTML.replace(/[\t\s\n]/g,"");""===(i=i.replace(/<span><\/span>/g,""))&&t(e).remove()}}},inline:function(){return{format:function(t,e,i,n){if(!this.utils.isCurrentOrParent(["PRE","CODE"])){var o=this.inline.getParams(e,i,n);t=this.inline.arrangeTag(t),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.inline.formatCollapsed(t,o):this.inline.formatUncollapsed(t,o)}},formatCollapsed:function(e,i){var n,o=this.selection.inline();if(o){var r=o.tagName.toLowerCase();if(r===e)if(this.utils.isEmpty(o.innerHTML))this.caret.after(o),t(o).remove();else{var s=this.inline.insertBreakpoint(o,r);this.caret.after(s)}else if(0===t(o).closest(e).length)n=this.inline.insertInline(e),n=this.inline.setParams(n,i);else{s=this.inline.insertBreakpoint(o,r);this.caret.after(s)}}else n=this.inline.insertInline(e),n=this.inline.setParams(n,i)},formatUncollapsed:function(e,i){this.selection.save();var n=this.inline.getClearedNodes();this.inline.setNodesStriked(n,e,i),this.selection.restore(),document.execCommand("strikethrough"),this.selection.saveInstant();var o=this;this.core.editor().find("strike").each(function(){var n=o.utils.replaceToTag(this,e);o.inline.setParams(n[0],i);var r=n.find(e),s=n.parent(),a=s.parent();if(0!==a.length&&a[0].tagName.toLowerCase()===e&&a.html()==s[0].outerHTML)return n.replaceWith(function(){return t(this).contents()}),void a.replaceWith(function(){return t(this).contents()});0!==r.length&&o.inline.cleanInsideOrParent(r,i),s.html()==n[0].outerHTML&&o.inline.cleanInsideOrParent(s,i),o.detect.isFirefox()&&o.core.editor().find(e+":empty").remove()}),this.selection.restoreInstant()},cleanInsideOrParent:function(t,e){if(e)for(var i in e.data)this.inline.removeSpecificAttr(t,i,e.data[i])},getClearedNodes:function(){for(var e=this.selection.nodes(),i=[],n=e.length,o=0,r=0;r<n;r++)if(t(e[r]).hasClass("redactor-selection-marker")){o=r+2;break}for(r=0;r<n;r++)r>=o&&!this.utils.isBlockTag(e[r].tagName)&&i.push(e[r]);return i},isConvertableAttr:function(e,i,n){var o=t(e).attr(i);if(o)if("style"===i){for(var r=(n=t.trim(n).replace(/;$/,"")).split(";"),s=0,a=0;a<r.length;a++){var l=r[a].split(":"),c=t.trim(l[0]),h=t.trim(l[1]);if(-1!==c.search(/color/)){var d=t(e).css(c);!d||d!==h&&this.utils.rgb2hex(d)!==h||s++}else t(e).css(c)===h&&s++}if(s===r.length)return 1}else if(o===n)return 1;return 0},isConvertable:function(t,e,i,n){if(e===i){if(!n)return!0;var o=0;for(var r in n.data)o+=this.inline.isConvertableAttr(t,r,n.data[r]);if(o===Object.keys(n.data).length)return!0}return!1},setNodesStriked:function(e,i,n){for(var o=0;o<e.length;o++){var r=e[o].tagName?e[o].tagName.toLowerCase():void 0,s=e[o].parentNode,a=s&&s.tagName?s.tagName.toLowerCase():void 0;if(this.inline.isConvertable(s,a,i,n))t(s).replaceWith(function(){return t("<strike>").append(t(this).contents())}).attr("data-redactor-inline-converted");if(this.inline.isConvertable(e[o],r,i,n))t(e[o]).replaceWith(function(){return t("<strike>").append(t(this).contents())})}},insertBreakpoint:function(e,i){var n=document.createElement("span");n.id="redactor-inline-breakpoint",n=this.insert.node(n);var o=this.utils.isEndOfElement(e),r=this.utils.getOuterHtml(e),s=o?"":"<"+i+">";r=r.replace(/<span id="redactor-inline-breakpoint"><\/span>/i,"</"+i+">"+s);var a=t(r);return t(e).replaceWith(a),""!==s&&this.utils.cloneAttributes(e,a.last()),a.first()},insertInline:function(t){var e=document.createElement(t);return this.insert.node(e),this.caret.start(e),e},arrangeTag:function(t){var e=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],i=["strong","strong","em","em","u","del","del","sup","sub"];t=t.toLowerCase();for(var n=0;n<e.length;n++)t===e[n]&&(t=i[n]);return t},getStyleParams:function(t){for(var e={},i=t.trim().replace(/;$/,"").split(";"),n=0;n<i.length;n++){var o=i[n].split(":");o&&(e[o[0].trim()]=o[1].trim())}return e},getParams:function(t,e,i){var n=!1,o="toggle";return"object"==typeof t?(n=t,o=void 0!==e?e:o):void 0!==t&&void 0!==e&&((n={})[t]=e,o=void 0!==i?i:o),!!n&&{func:o,data:n}},setParams:function(e,i){if(i)for(var n in i.data){var o=t(e);"style"===n?(e=this.inline[i.func+"Style"](i.data[n],e),o.attr("data-redactor-style-cache",o.attr("style"))):e="class"===n?this.inline[i.func+"Class"](i.data[n],e):"remove"===i.func?this.inline[i.func+"Attr"](n,e):this.inline[i.func+"Attr"](n,i.data[n],e),"style"===n&&"SPAN"===e.tagName&&o.attr("data-redactor-span",!0)}return e},eachInline:function(t,e){var i,n=void 0===t?this.selection.inlines():[t];if(n)for(var o=0;o<n.length;o++)i=e(n[o])[0];return i},replaceClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).removeAttr("class").addClass(e)})},toggleClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).toggleClass(e)})},addClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).addClass(e)})},removeClass:function(e,i){return this.inline.eachInline(i,function(i){return t(i).removeClass(e)})},removeAllClass:function(e){return this.inline.eachInline(e,function(e){return t(e).removeAttr("class")})},replaceAttr:function(e,i,n){return this.inline.eachInline(n,function(i){return t(i).removeAttr(e).attr(e.value)})},toggleAttr:function(e,i,n){return this.inline.eachInline(n,function(i){return t(i).attr(e)?t(i).removeAttr(e):t(i).attr(e.value)})},addAttr:function(e,i,n){return this.inline.eachInline(n,function(n){return t(n).attr(e,i)})},removeAttr:function(e,i){return this.inline.eachInline(i,function(i){var n=t(i);return n.removeAttr(e),"style"===e&&n.removeAttr("data-redactor-style-cache"),n})},removeAllAttr:function(e){return this.inline.eachInline(e,function(e){for(var i=t(e),n=e.attributes.length,o=0;o<n;o++)i.removeAttr(e.attributes[o].name);return i})},removeSpecificAttr:function(e,i,n){var o=t(e);if("style"===i){var r=n.split(":")[0].trim();o.css(r,""),this.utils.removeEmptyAttr(e,"style")&&o.removeAttr("data-redactor-style-cache")}else o.removeAttr(i)[0]},hasParentStyle:function(t){var e=t.parent();return 1===e.length&&e[0].tagName===t[0].tagName&&e.html()===t[0].outerHTML&&e},addParentStyle:function(e){var i=this.inline.hasParentStyle(e);if(i){var n=this.inline.getStyleParams(e.attr("style"));i.css(n),i.attr("data-redactor-style-cache",i.attr("style")),e.replaceWith(function(){return t(this).contents()})}else e.attr("data-redactor-style-cache",e.attr("style"));return e},replaceStyle:function(e,i){e=this.inline.getStyleParams(e);var n=this;return this.inline.eachInline(i,function(i){var o=t(i);o.removeAttr("style").css(e);var r=o.attr("style");return r&&o.attr("style",r.replace(/"/g,"'")),o=n.inline.addParentStyle(o)})},toggleStyle:function(e,i){e=this.inline.getStyleParams(e);var n=this;return this.inline.eachInline(i,function(i){var o=t(i);for(var r in e){var s=e[r],a=o.css(r);(a=n.utils.isRgb(a)?n.utils.rgb2hex(a):a.replace(/"/g,""))===(s=n.utils.isRgb(s)?n.utils.rgb2hex(s):s.replace(/"/g,""))?o.css(r,""):o.css(r,s)}var l=o.attr("style");return l&&o.attr("style",l.replace(/"/g,"'")),n.utils.removeEmptyAttr(i,"style")?o.removeAttr("data-redactor-style-cache"):o=n.inline.addParentStyle(o),o})},addStyle:function(e,i){e=this.inline.getStyleParams(e);var n=this;return this.inline.eachInline(i,function(i){var o=t(i);o.css(e);var r=o.attr("style");return r&&o.attr("style",r.replace(/"/g,"'")),o=n.inline.addParentStyle(o)})},removeStyle:function(e,i){e=this.inline.getStyleParams(e);var n=this;return this.inline.eachInline(i,function(i){var o=t(i);for(var r in e)o.css(r,"");return n.utils.removeEmptyAttr(i,"style")?o.removeAttr("data-redactor-style-cache"):o.attr("data-redactor-style-cache",o.attr("style")),o})},removeAllStyle:function(e){return this.inline.eachInline(e,function(e){return t(e).removeAttr("style").removeAttr("data-redactor-style-cache")})},removeStyleRule:function(e){var i=this.selection.parent(),n=this.selection.inlines();this.buffer.set(),i&&"SPAN"===i.tagName&&this.inline.removeStyleRuleAttr(t(i),e);for(var o=0;o<n.length;o++){var r=n[o],s=t(r);-1==t.inArray(r.tagName.toLowerCase(),this.opts.inlineTags)||s.hasClass("redactor-selection-marker")||this.inline.removeStyleRuleAttr(s,e)}},removeStyleRuleAttr:function(t,e){t.css(e,""),this.utils.removeEmptyAttr(t,"style")?t.removeAttr("data-redactor-style-cache"):t.attr("data-redactor-style-cache",t.attr("style"))},update:function(t,e,i,n){t=this.inline.arrangeTag(t);var o=this.inline.getParams(e,i,n),r=this.selection.inlines(),s=[];if(r)for(var a=0;a<r.length;a++){var l=r[a];"*"!==t&&l.tagName.toLowerCase()!==t||s.push(this.inline.setParams(l,o))}return s},removeFormat:function(){this.selection.save();for(var e=this.inline.getClearedNodes(),i=0;i<e.length;i++)1===e[i].nodeType&&t(e[i]).replaceWith(function(){return t(this).contents()});this.selection.restore()}}},insert:function(){return{set:function(t){this.placeholder.hide(),this.code.set(t),this.focus.end(),this.placeholder.enable()},html:function(e,i){this.placeholder.hide(),this.core.editor().focus();var n=this.selection.block(),o=this.selection.inline();void 0===i&&(i=this.clean.getCurrentType(e,!0),e=this.clean.onPaste(e,i,!0)),e=t.parseHTML(e);var r=t(e).last(),s=this.selection.get(),a=this.selection.range(s);if(a.deleteContents(),this.selection.update(s,a),i.lists){var l=t(e);if(0!==l.length&&("UL"===l[0].tagName||"OL"===l[0].tagName))return void this.insert.appendLists(n,l)}if(i.blocks&&n)if(this.utils.isSelectAll())this.core.editor().html(e),this.focus.end();else{var c=this.utils.breakBlockTag();if(!1===c)this.insert.placeHtml(e);else t(e).children().last().append(this.marker.get()),"start"===c.type?c.$block.before(e):c.$block.after(e),this.selection.restore(),this.core.editor().find("p").each(function(){""===t.trim(this.innerHTML)&&t(this).remove()})}else{if(o){var h=t("<div/>").html(e);h.find(o.tagName.toLowerCase()).each(function(){t(this).contents().unwrap()}),e=h.html(),e=t.parseHTML(e),r=t(e).last()}if(this.utils.isSelectAll()){var d=t(this.opts.emptyHtml);this.core.editor().html("").append(d),d.html(e),this.caret.end(d)}else this.insert.placeHtml(e)}this.utils.disableSelectAll(),i.pre&&this.clean.cleanPre(),this.caret.end(r),this.linkify.format()},text:function(e){e=e.toString(),e=t.trim(e);var i=document.createElement("div");if(i.innerHTML=e,void 0!==(e=i.textContent||i.innerText)){this.placeholder.hide(),this.core.editor().focus();var n=this.selection.blocks();if(e=e.replace(/\n/g," "),this.utils.isSelectAll()){var o=t(this.opts.emptyHtml);this.core.editor().html("").append(o),o.html(e),this.caret.end(o)}else{var r=this.selection.get(),s=document.createTextNode(e);if(r.getRangeAt&&r.rangeCount){var a=r.getRangeAt(0);a.deleteContents(),a.insertNode(s),a.setStartAfter(s),a.collapse(!0),this.selection.update(r,a)}n.length>1&&(t(s).wrap("<p>"),this.caret.after(s))}this.utils.disableSelectAll(),this.linkify.format(),this.clean.normalizeCurrentHeading()}},raw:function(t){this.placeholder.hide(),this.core.editor().focus();var e=this.selection.get(),i=this.selection.range(e);i.deleteContents();var n=document.createElement("div");n.innerHTML=t;for(var o,r,s=document.createDocumentFragment();o=n.firstChild;)r=s.appendChild(o);i.insertNode(s),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!0),e.removeAllRanges(),e.addRange(i))},node:function(e,i){this.placeholder.hide(),void 0!==this.start&&this.core.editor().focus(),e=e[0]||e;var n=this.selection.block(),o=this.utils.isBlockTag(e.tagName),r=!0;if(this.utils.isSelectAll())o?this.core.editor().html(e):this.core.editor().html(t("<p>").html(e)),this.code.sync();else if(o&&n){var s=this.utils.breakBlockTag();!1===s?this.insert.placeNode(e,i):("start"===s.type?s.$block.before(e):s.$block.after(e),this.core.editor().find("p:empty").remove())}else r=this.insert.placeNode(e,i);return this.utils.disableSelectAll(),r&&this.caret.end(e),e},appendLists:function(e,i){var n,o=t(e),r=this.utils.isEmpty(e.innerHTML);if(r||this.utils.isEndOfElement(e))n=o,i.find("li").each(function(){n.after(this),n=t(this)}),r&&o.remove();else if(this.utils.isStartOfElement(e))i.find("li").each(function(){o.before(this),n=t(this)});else{var s=this.selection.extractEndOfNode(e);o.after(t("<li>").append(s)),o.append(i),n=i}this.marker.remove(),n&&this.caret.end(n),this.linkify.format()},placeHtml:function(e){var i=document.createElement("span");i.id="redactor-insert-marker",i=this.insert.node(i),t(i).before(e),this.selection.restore(),this.caret.after(i),t(i).remove()},placeNode:function(t,e){var i=this.selection.get(),n=this.selection.range(i);if(null==n)return!1;!1!==e&&n.deleteContents(),n.insertNode(t),n.collapse(!1),this.selection.update(i,n)},nodeToPoint:function(e,i){if(this.placeholder.hide(),i=i[0]||i,this.utils.isEmpty())return i=this.utils.isBlock(i)?i:t("<p />").append(i),this.core.editor().html(i),i;var n,o=e.clientX,r=e.clientY;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(o,r);(n=document.getSelection().getRangeAt(0)).setStart(s.offsetNode,s.offset),n.collapse(!0),n.insertNode(i)}else if(document.caretRangeFromPoint)(n=document.caretRangeFromPoint(o,r)).insertNode(i);else if(void 0!==document.body.createTextRange){(n=document.body.createTextRange()).moveToPoint(o,r);var a=n.duplicate();a.moveToPoint(o,r),n.setEndPoint("EndToEnd",a),n.select()}return i},nodeToCaretPositionFromPoint:function(t,e){this.insert.nodeToPoint(t,e)},marker:function(){this.marker.insert()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var i=e.which,n=i>=37&&i<=40;if(this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.parent=this.selection.parent(),this.keydown.current=this.selection.current(),this.keydown.block=this.selection.block(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.keydown.figure=this.utils.isTag(this.keydown.current,"figure"),!1===this.core.callback("keydown",e))return e.preventDefault(),!1;if(this.shortcuts.init(e,i),this.keydown.checkEvents(n,i),this.keydown.setupBuffer(e,i),this.utils.isSelectAll()&&(i===this.keyCode.ENTER||i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE))return e.preventDefault(),this.code.set(this.opts.emptyHtml),void this.events.changeHandler();if(this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(e,i),this.opts.enterKey||i!==this.keyCode.ENTER){if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),this.opts.enterKey&&i===this.keyCode.UP&&this.keydown.onArrowUp(),("textarea"===this.opts.type||"div"===this.opts.type)&&this.keydown.current&&3===this.keydown.current.nodeType&&t(this.keydown.parent).hasClass("redactor-in")&&this.keydown.wrapToParagraph(),!this.keyup.lastShiftKey&&i===this.keyCode.SPACE&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftSpace();if(i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return e.preventDefault(),this.keydown.onShiftEnter(e);if(i===this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey)return this.keydown.onEnter(e);if(i===this.keyCode.TAB||e.metaKey&&221===i||e.metaKey&&219===i)return this.keydown.onTab(e,i);if(this.detect.isFirefox()&&i===this.keyCode.BACKSPACE&&this.keydown.block&&"P"===this.keydown.block.tagName&&this.utils.isStartOfElement(this.keydown.block))if(0!==(o=t(this.keydown.block).prev()).length)return e.preventDefault(),o.append(this.marker.get()),o.append(t(this.keydown.block).html()),t(this.keydown.block).remove(),void this.selection.restore();if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.observe.image&&void 0!==this.observe.image&&0!==t("#redactor-image-box").length){e.preventDefault();var o=this.observe.image.closest("figure, p").prev();return this.image.remove(!1),this.observe.image=!1,void(o&&0!==o.length?this.caret.end(o):this.core.editor().focus())}this.keydown.onBackspaceAndDeleteBefore()}if(i===this.keyCode.DELETE){var r=t(this.keydown.block).next();if(this.utils.isEndOfElement(this.keydown.block)&&0!==r.length&&"FIGURE"===r[0].tagName)return r.remove(),!1;if(!(!this.keydown.block||"LI"!==this.keydown.block.tagName)&&this.keydown.block){var s=t(this.keydown.block).parents("ul, ol").last(),a=s.next();if(this.utils.isRedactorParent(s)&&this.utils.isEndOfElement(s)&&0!==a.length&&("UL"===a[0].tagName||"OL"===a[0].tagName))return e.preventDefault(),s.append(a.contents()),a.remove(),!1}if(this.utils.isEndOfElement(this.keydown.block)&&0!==r.length&&"PRE"===r[0].tagName)return t(this.keydown.block).append(r.text()),r.remove(),!1}if(i===this.keyCode.DELETE&&0!==t("#redactor-image-box").length&&this.image.remove(),i===this.keyCode.BACKSPACE){if(this.detect.isFirefox()&&this.line.removeOnBackspace(e),this.list.combineAfterAndBefore(this.keydown.block))return void e.preventDefault();var l=this.selection.block();if(l&&"LI"===l.tagName&&this.utils.isCollapsed()&&this.utils.isStartOfElement())return this.indent.decrease(),void e.preventDefault();this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)}i!==this.keyCode.BACKSPACE&&i!==this.keyCode.DELETE||this.keydown.onBackspaceAndDeleteAfter(e)}else{e.preventDefault();var c=this.selection.get(),h=this.selection.range(c);h.collapsed||h.deleteContents()}}},onShiftSpace:function(){return this.buffer.set(),this.insert.raw("&nbsp;"),!1},onShiftEnter:function(t){return this.buffer.set(),this.keydown.pre?this.keydown.insertNewLine(t):this.insert.raw("<br>")},onBackspaceAndDeleteBefore:function(){this.utils.saveScroll()},onBackspaceAndDeleteAfter:function(e){setTimeout(t.proxy(function(){this.code.syncFire=!1,this.keydown.removeEmptyLists();var t="";0!==this.opts.keepStyleAttr.length&&(t=","+this.opts.keepStyleAttr.join(",")),this.core.editor().find("*[style]").not("img, figure, iframe, #redactor-image-box, #redactor-image-editter, [data-redactor-style-cache], [data-redactor-span]"+t).removeAttr("style"),this.keydown.formatEmpty(e),this.code.syncFire=!0},this),1)},onEnter:function(e){if(!1===this.core.callback("enter",e))return e.preventDefault(),!1;if(this.keydown.blockquote&&!0===this.keydown.exitFromBlockquote(e))return!1;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return this.keydown.insertBreakLine(e);if(this.keydown.figure)setTimeout(t.proxy(function(){this.keydown.replaceToParagraph("FIGURE")},this),1);else if(this.keydown.block){if(setTimeout(t.proxy(function(){this.keydown.replaceToParagraph("DIV")},this),1),"LI"===this.keydown.block.tagName){var i=this.selection.current(),n=t(i).closest("li",this.$editor[0]),o=n.parents("ul,ol",this.$editor[0]).last();if(0!==n.length&&this.utils.isEmpty(n.html())&&0===o.next().length&&this.utils.isEmpty(o.find("li").last().html())){o.find("li").last().remove();var r=t(this.opts.emptyHtml);return o.after(r),this.caret.start(r),!1}}}else if(!this.keydown.block)return this.keydown.insertParagraph(e);this.detect.isFirefox()&&this.utils.isInline(this.keydown.parent)?this.keydown.insertBreakLine(e):this.opts.keepInlineOnEnter||setTimeout(t.proxy(function(){var e=this.selection.inline();if(e&&this.utils.isEmpty(e.innerHTML)){var i=this.selection.block();t(e).remove();var n=document.createRange();n.setStart(i,0);var o=document.createTextNode("​");n.insertNode(o),n.setStartAfter(o),n.collapse(!0);var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}},this),1)},checkEvents:function(t,e){t||"click"!==this.core.getEvent()&&"arrow"!==this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1===t.inArray(e,n)},addArrowsEvent:function(t){t&&("click"!==this.core.getEvent()&&"arrow"!==this.core.getEvent()?this.core.addEvent("arrow"):this.core.addEvent(!1))},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.sBuffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.sRebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||e!==this.keyCode.SPACE&&e!==this.keyCode.BACKSPACE&&e!==this.keyCode.DELETE&&(e!==this.keyCode.ENTER||t.ctrlKey||t.shiftKey)||this.buffer.set())},exitFromBlockquote:function(e){if(this.utils.isEndOfElement(this.keydown.blockquote)&&-1!==this.clean.removeSpacesHard(t(this.keydown.blockquote).html()).search(/(<br\s?\/?>){1}$/i)){e.preventDefault(),t(this.keydown.blockquote).children().last().filter("br").remove(),t(this.keydown.blockquote).children().last().filter("span").remove();var i=t(this.opts.emptyHtml);return t(this.keydown.blockquote).after(i),this.caret.start(i),!0}},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onArrowUp:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertBeforeFirstElement(t[e]),!1},insertAfterLastElement:function(e){if(this.utils.isEndOfElement(e)){var i=this.core.editor().contents().last();if(0===("FIGCAPTION"===e.tagName?t(this.keydown.block).parent().next():t(this.keydown.block).next()).length)if(0!==i.length||i[0]===e){var n=t(this.opts.emptyHtml);"FIGCAPTION"===e.tagName?t(e).parent().after(n):t(e).after(n),this.caret.start(n)}else this.caret.start(i)}},insertBeforeFirstElement:function(e){if(this.utils.isStartOfElement()&&!(this.core.editor().contents().length>1&&this.core.editor().contents().first()[0]!==e)){var i=t(this.opts.emptyHtml);t(e).before(i),this.caret.start(i)}},onTab:function(t,e){if(!this.opts.tabKey)return!0;var i=this.keydown.block&&"LI"===this.keydown.block.tagName;if(this.utils.isEmpty(this.code.get())||!i&&!this.keydown.pre&&!1===this.opts.tabAsSpaces)return!0;t.preventDefault(),this.buffer.set();var n,o=i&&this.utils.isStartOfElement(this.keydown.block);return this.keydown.pre&&!t.shiftKey?(n=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("\t"),this.insert.node(n)):!1===this.opts.tabAsSpaces||o?t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase():(n=document.createTextNode(Array(this.opts.tabAsSpaces+1).join(" ")),this.insert.node(n)),!1},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e===this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n"),i=this.selection.get(),n=this.selection.range(i);return n.deleteContents(),n.insertNode(e),this.caret.after(e),!1},insertParagraph:function(t){t.preventDefault();var e=document.createElement("p");e.innerHTML="<br>";var i=this.selection.get(),n=this.selection.range(i);return n.deleteContents(),n.insertNode(e),this.caret.start(e),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(t,e){t.stopPropagation();var i=document.createElement("br");if(this.insert.node(i),!0===e){var n=document.createElement("br");this.insert.node(n),this.caret.after(n)}else this.caret.after(i);return!1},wrapToParagraph:function(){var e=t(this.keydown.current),i=t("<p>").append(e.clone());e.replaceWith(i);var n=t(i).next();void 0!==n[0]&&"BR"===n[0].tagName&&n.remove(),this.caret.end(i)},replaceToParagraph:function(e){var i=this.selection.block(),n=t(i).prev(),o=i.innerHTML.replace(/<br\s?\/?>/gi,"");if(i.tagName===e&&this.utils.isEmpty(o)&&!t(i).hasClass("redactor-in")){var r=document.createElement("p");return t(i).replaceWith(r),this.keydown.setCaretToParagraph(r),!1}if("P"===i.tagName)return t(i).removeAttr("class").removeAttr("style"),this.detect.isIe()&&this.utils.isEmpty(o)&&this.utils.isInline(this.keydown.parent)&&t(i).on("input",t.proxy(function(){var e=this.selection.parent();if(this.utils.isInline(e)){var n=t(e).html();t(i).html(n),this.caret.end(i)}t(i).off("keyup")},this)),!1;if(n.hasClass(this.opts.videoContainerClass)){n.removeAttr("class");r=document.createElement("p");return n.replaceWith(r),this.keydown.setCaretToParagraph(r),!1}},setCaretToParagraph:function(t){var e=document.createRange();e.setStart(t,0);var i=document.createTextNode("​");e.insertNode(i),e.setStartAfter(i),e.collapse(!0);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),n=t(this.keydown.parent),o=i.closest("td",this.$editor[0]);if(0!==o.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),n.remove(),this.caret.start(o)}},removeEmptyLists:function(){var e=function(){""===t.trim(this.innerHTML).replace(/\/t\/n/g,"")&&t(this).remove()};this.core.editor().find("li").each(e),this.core.editor().find("ul, ol").each(e)},formatEmpty:function(e){var i=t.trim(this.core.editor().html());if(this.utils.isEmpty(i))return e.preventDefault(),"inline"===this.opts.type||"pre"===this.opts.type?(this.core.editor().html(this.marker.html()),this.selection.restore()):(this.core.editor().html(this.opts.emptyHtml),this.focus.start()),!1}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var i=e.which;if(this.keyup.block=this.selection.block(),this.keyup.current=this.selection.current(),this.keyup.parent=this.selection.parent(),this.keyup.lastShiftKey=e.shiftKey,!1===this.core.callback("keyup",e))return e.preventDefault(),!1;if(i===this.keyCode.ENTER&&this.keyup.block&&"FIGURE"===this.keyup.block.tagName){var n=t(this.keyup.block).prev();if(0!==n.length&&"FIGURE"===n[0].tagName){var o=this.utils.replaceToTag(n,"p");return void this.caret.start(o)}}if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.utils.isSelectAll())return this.focus.start(),void this.toolbar.setUnfixed();if(this.keyup.block&&this.keydown.block&&"FIGURE"===this.keyup.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){e.preventDefault(),this.selection.save(),t(this.keyup.block).find("figcaption").remove(),t(this.keyup.block).find("img").first().remove(),this.utils.replaceToTag(this.keyup.block,"p");var r=this.marker.find();return t("html, body").animate({scrollTop:r.position().top+20},500),void this.selection.restore()}if(this.keyup.block&&"P"===this.keyup.block.tagName){var s=t(this.keyup.block).find("img").length;""===t(this.keyup.block).text().replace(/\u200B/g,"")&&0!==s&&this.utils.replaceToTag(this.keyup.block,"figure")}this.keyup.block&&"FIGURE"===this.keyup.block.tagName&&0===t(this.keyup.block).find("img").length&&(this.selection.save(),this.utils.replaceToTag(this.keyup.block,"p"),this.selection.restore())}this.linkify.isKey(i)&&(this.selection.save(),this.linkify.format(),this.selection.restore())}}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return void 0!==this.opts.curLang[t]?this.opts.curLang[t]:""}}},line:function(){return{insert:function(){this.buffer.set(),this.insert.html(this.line.getLineHtml());var t=this.core.editor().find("#redactor-hr-tmp-id");return t.removeAttr("id"),this.core.callback("insertedLine",t),t},getLineHtml:function(){var t='<hr id="redactor-hr-tmp-id" />';return!this.detect.isFirefox()&&this.utils.isEmpty()&&(t+="<p>"+this.opts.emptyHtml+"</p>"),t},removeOnBackspace:function(e){if(this.utils.isCollapsed()){var i=t(this.selection.block());if(0!==i.length&&this.utils.isStartOfElement(i)){var n=i.prev();n&&0!==n.length&&"HR"===n[0].tagName&&(e.preventDefault(),n.remove())}}}}},link:function(){return{get:function(){return t(this.selection.inlines("a"))},is:function(){var e=this.selection.nodes(),i=t(this.selection.current()).closest("a",this.core.editor()[0]);return!(0===i.length||e.length>1)&&i},unlink:function(t){void 0!==t&&t.preventDefault&&t.preventDefault(),this.buffer.set();var e=this.selection.inlines("a");if(0!==e.length){var i=this.link.replaceLinksToText(e);this.observe.closeAllTooltip(),this.core.callback("deletedLink",i)}},insert:function(e,i){var n=this.link.is();if(!0!==i&&!1===(e=this.link.buildLinkFromObject(n,e)))return!1;if(this.buffer.set(),e=this.core.callback("beforeInsertingLink",e),!1===n){n=t("<a />"),n=this.link.update(n,e);var o=(n=t(this.insert.node(n))).parent();!1===this.utils.isRedactorParent(o)&&n.wrap("<p>"),o.hasClass("redactor-unlink")&&o.replaceWith(function(){return t(this).contents()}),this.caret.after(n),this.core.callback("insertedLink",n)}else n=this.link.update(n,e),this.caret.after(n);return n},update:function(t,e){return t.text(e.text),t.attr("href",e.url),this.link.target(t,e.target),t},target:function(t,e){return e?t.attr("target","_blank"):t.removeAttr("target")},show:function(e){void 0!==e&&e.preventDefault&&e.preventDefault(),this.observe.closeAllTooltip();var i=this.link.is();this.link.buildModal(i);var n=this.link.buildLinkFromElement(i);n.url=this.link.removeSelfHostFromUrl(n.url),this.opts.linkNewTab&&!i&&(n.target=!0),this.link.setModalValues(n),this.modal.show(),this.detect.isDesktop()&&t("#redactor-link-url").focus()},setModalValues:function(e){t("#redactor-link-blank").prop("checked",e.target),t("#redactor-link-url").val(e.url),t("#redactor-link-url-text").val(e.text)},buildModal:function(e){this.modal.load("link",this.lang.get(!1===e?"link-insert":"link-edit"),600),this.modal.getActionButton().text(this.lang.get(!1===e?"insert":"save")).on("click",t.proxy(this.link.callback,this))},callback:function(){var t=this.link.buildLinkFromModal();if(!1===t)return!1;this.modal.close(),this.link.insert(t,!0)},cleanUrl:function(e){return void 0===e?"":t.trim(e.replace(/[^\W\w\D\d+&\'@#/%?=~_|!:,.;\(\)]/gi,""))},cleanText:function(e){return void 0===e?"":t.trim(e.replace(/(<([^>]+)>)/gi,""))},getText:function(t){return""===t.text&&""!==t.url?this.link.truncateUrl(t.url.replace(/<|>/g,"")):t.text},isUrl:function(t){return!!new RegExp("^((https?|ftp):\\/\\/)?(([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)&&t},isMailto:function(t){return-1!==t.search("@")&&!1===/(http|ftp|https):\/\//i.test(t)},isEmpty:function(t){return""===t.url||""===t.text&&""===t.url},truncateUrl:function(t){return t.length>this.opts.linkSize?t.substring(0,this.opts.linkSize)+"...":t},parse:function(t){return this.link.isMailto(t.url)?t.url="mailto:"+t.url.replace("mailto:",""):0!==t.url.search("#")&&this.opts.linkValidation&&(t.url=this.link.isUrl(t.url)?"http://"+t.url.replace(/(ftp|https?):\/\//gi,""):t.url),!this.link.isEmpty(t)&&!1!==t.url&&t},buildLinkFromModal:function(){var e={};return e.url=this.link.cleanUrl(t("#redactor-link-url").val()),e.text=this.link.cleanText(t("#redactor-link-url-text").val()),e.text=this.link.getText(e),e.target=!!t("#redactor-link-blank").prop("checked"),this.link.parse(e)},buildLinkFromObject:function(t,e){return e.url=this.link.cleanUrl(e.url),e.text=void 0===e.text&&this.selection.is()?this.selection.text():this.link.cleanText(e.text),e.text=this.link.getText(e),e.target=!1===t?e.target:this.link.buildTarget(t),this.link.parse(e)},buildLinkFromElement:function(t){var e={url:"",text:this.selection.is()?this.selection.text():"",target:!1};return!1!==t&&(e.url=t.attr("href"),e.text=t.text(),e.target=this.link.buildTarget(t)),e},buildTarget:function(t){return void 0!==t.attr("target")&&"_blank"===t.attr("target")},removeSelfHostFromUrl:function(t){var e=self.location.href.replace("#","").replace(/\/$/i,"");return t.replace(/^\/\#/,"#").replace(e,"").replace("mailto:","")},replaceLinksToText:function(e){var i,n=t.each(e,function(e,n){var o=t(n),r=t('<span class="redactor-unlink" />').append(o.contents());return o.replaceWith(r),0===e&&(i=r),o});return 1===e.length&&this.selection.isCollapsed()&&this.caret.after(i),n}}},linkify:function(){return{isKey:function(t){return t===this.keyCode.ENTER||t===this.keyCode.SPACE},isLink:function(t){return t.nodeValue.match(this.opts.regexps.linkyoutube)||t.nodeValue.match(this.opts.regexps.linkvimeo)||t.nodeValue.match(this.opts.regexps.linkimage)||t.nodeValue.match(this.opts.regexps.url)},isFiltered:function(e,i){return 3===i.nodeType&&""!==t.trim(i.nodeValue)&&!t(i).parent().is("pre")&&this.linkify.isLink(i)},handler:function(e,i){var n=t(i),o=n.text(),r=o;r=r.match(this.opts.regexps.linkyoutube)||r.match(this.opts.regexps.linkvimeo)?this.linkify.convertVideoLinks(r):r.match(this.opts.regexps.linkimage)?this.linkify.convertImages(r):this.linkify.convertLinks(r),n.before(o.replace(o,r)).remove()},format:function(){if(this.opts.linkify&&!this.utils.isCurrentOrParent("pre")){var e;this.core.editor().find(":not(iframe,img,a,pre,code,.redactor-unlink)").addBack().contents().filter(t.proxy(this.linkify.isFiltered,this)).each(t.proxy(this.linkify.handler,this));var i=this.core.editor().find(".redactor-linkify-object").each(t.proxy(function(i,n){return(e=t(n)).removeClass("redactor-linkify-object"),""===e.attr("class")&&e.removeAttr("class"),"A"===n.tagName&&this.core.callback("insertedLink",e),e},this));setTimeout(t.proxy(function(){this.code.sync(),this.core.callback("linkify",i)},this),100)}},convertVideoLinks:function(t){var e='<div class="'+this.opts.videoContainerClass+' redactor-linkify-object"><iframe class="redactor-linkify-object" width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe></div>';return t.match(this.opts.regexps.linkyoutube)&&(t=t.replace(this.opts.regexps.linkyoutube,e+"//www.youtube.com/embed/$1"+i)),t.match(this.opts.regexps.linkvimeo)&&(t=t.replace(this.opts.regexps.linkvimeo,e+"//player.vimeo.com/video/$2"+i)),t},convertImages:function(t){var e=t.match(this.opts.regexps.linkimage);return e?t.replace(t,'<img src="'+e+'"  class="redactor-linkify-object" />'):t},convertLinks:function(e){var i=e.match(this.opts.regexps.url);if(!i)return e;for(var n=(i=t.grep(i,function(e,n){return t.inArray(e,i)===n})).length,o=0;o<n;o++){var r=i[o],s=r,a=null!==r.match(/(https?|ftp):\/\//i)?"":"http://";s.length>this.opts.linkSize&&(s=s.substring(0,this.opts.linkSize)+"..."),-1===s.search("%")&&(s=decodeURIComponent(s));var l="\\b";-1!==t.inArray(r.slice(-1),["/","&","="])&&(l="");var c=new RegExp("("+r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g"),h="";!1!==this.opts.pasteLinkTarget&&(h=' target="'+this.opts.pasteLinkTarget+'"'),e=e.replace(c,'<a href="'+a+t.trim(r)+'"'+h+' class="redactor-linkify-object">'+t.trim(s)+"</a>")}return e}}},list:function(){return{toggle:function(e){if(!this.utils.inBlocks(["table","td","th","tr"])){e=(e="unorderedlist"===(e="orderedlist"===e?"ol":e)?"ul":e).toLowerCase(),this.buffer.set(),this.selection.save();var i=this.list._getBlocks(),n=this.selection.block(),o=t(n).parents("ul, ol").last();return 0===i.length&&0!==o.length&&(i=[o.get(0)]),i=this.list._isUnformat(e,i)?this.list._unformat(e,i):this.list._format(e,i),this.selection.restore(),i}},get:function(){var e=this.selection.current(),i=t(e).closest("ul, ol",this.core.editor()[0]);return 0!==i.length&&i},combineAfterAndBefore:function(e){var i=t(e).prev(),n=t(e).next(),o=e&&"P"===e.tagName&&("<br>"===e.innerHTML||""===e.innerHTML),r=1===i.closest("ol, ul",this.core.editor()[0]).length&&1===n.closest("ol, ul",this.core.editor()[0]).length;return!(!o||!r)&&(i.children("li").last().append(this.marker.get()),i.append(n.contents()),this.selection.restore(),!0)},_getBlocks:function(){for(var e=[],i=this.selection.blocks(),n=0;n<i.length;n++){t(i[n]).parent().hasClass("redactor-in")&&e.push(i[n])}return e},_isUnformat:function(t,e){for(var i=0,n=0;n<e.length;n++)if(3!==e[n].nodeType){var o=e[n].tagName.toLowerCase();o!==t&&"figure"!==o||i++}return i===e.length},_uniteBlocks:function(e,i){for(var n=0,o={0:[]},r=!1,s=0;s<e.length;s++){var a=t(e[s]).closest("th, td");0!==a.length?(a.get(0)!==r&&(o[++n]=[]),this.list._isUniteBlock(e[s],i)&&o[n].push(e[s])):this.list._isUniteBlock(e[s],i)?o[n].push(e[s]):o[++n]=[],r=a.get()}return o},_isUniteBlock:function(t,e){return 3===t.nodeType||-1!==e.indexOf(t.tagName.toLowerCase())},_createList:function(e,i,n){var o=i[i.length-1],r=t(o),s=t("<"+e+">");return r.after(s),s},_createListItem:function(e){var i=t("<li>");if(3===e.nodeType)i.append(e);else{var n=t(e);i.append(n.contents()),n.remove()}return i},_format:function(e,i){var n=this.list._uniteBlocks(i,["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6","ul","ol"]),o=[];for(var r in n){for(var s=n[r],a=this.list._createList(e,n[r]),l=0;l<s.length;l++){var c;3===s[l].nodeType||"UL"!==s[l].tagName&&"OL"!==s[l].tagName?(c=this.list._createListItem(s[l]),a.append(c)):(c=t(s[l]).contents(),a.append(c))}o.push(a.get(0))}return o},_unformat:function(e,i){if(1===i.length){var n=t(i[0]),o=n.find("li"),r=this.selection.blocks(["li"]),s=this.selection.block(),a=t(s).closest("li");if(0===r.length&&0!==a.length&&(r=[a.get(0)]),r.length===o.length)return this.list._unformatEntire(i[0]);var l=this.list._getItemsPosition(o,r);if("Top"===l)return this.list._unformatAtSide("before",r,n);if("Bottom"===l)return r.reverse(),this.list._unformatAtSide("after",r,n);if("Middle"===l){var c=t(r[r.length-1]),h=!1,d=!1,u=t("<"+n.get(0).tagName.toLowerCase()+">");o.each(function(e,i){if(h){var n=t(i);n.children("ul, ol").length;0!==n.closest(".redactor-split-item").length||!1!==d&&0!==n.closest(d).length||n.addClass("redactor-split-item"),d=n}i===c.get(0)&&(h=!0)}),o.filter(".redactor-split-item").each(function(e,i){t(i).removeClass("redactor-split-item"),u.append(i)}),n.after(u),r.reverse();for(var p=0;p<r.length;p++){var f=t(r[p]),g=this.list._createUnformatContainer(f);n.after(g),g.find("ul, ol").remove(),f.remove()}return}}else for(p=0;p<i.length;p++)3!==i[p].nodeType&&i[p].tagName.toLowerCase()===e&&this.list._unformatEntire(i[p])},_unformatEntire:function(e){var i=t(e);i.find("li").each(function(e,n){var o=t(n),r=this.list._createUnformatContainer(o);o.remove(),i.before(r)}.bind(this)),i.remove()},_unformatAtSide:function(e,i,n){for(var o=0;o<i.length;o++){var r=t(i[o]),s=this.list._createUnformatContainer(r);n[e](s);var a=s.find("ul, ol").first();r.append(a),a.each(function(e,n){var o=t(n),r=o.closest("li");r.get(0)===i[e]&&(o.unwrap(),r.addClass("r-unwrapped"))}),this.utils.isEmpty(r.html())&&r.remove()}n.find(".r-unwrapped").each(function(e){var i=t(e);""===i.html().trim()?i.remove():i.removeClass("r-unwrapped")})},_getItemsPosition:function(t,e){var i="Middle",n=e[0],o=e[e.length-1],r=t.first().get(0),s=t.last().get(0);return r===n&&s!==o?i="Top":r!==n&&s===o&&(i="Bottom"),i},_createUnformatContainer:function(e){var i=t("<p>");return i.append(e.contents()),i}}},marker:function(){return{get:function(t){t=void 0===t?1:t;var e=document.createElement("span");return e.id="selection-marker-"+t,e.className="redactor-selection-marker",e.innerHTML=this.opts.invisibleSpace,e},html:function(t){return this.utils.getOuterHtml(this.marker.get(t))},find:function(t){return t=void 0===t?1:t,this.core.editor().find("span#selection-marker-"+t)},insert:function(){var t=this.selection.get(),e=this.selection.range(t);this.marker.insertNode(e,this.marker.get(1),!0),e&&!1===e.collapsed&&this.marker.insertNode(e,this.marker.get(2),!1)},remove:function(){this.core.editor().find(".redactor-selection-marker").each(this.marker.iterateRemove)},insertNode:function(e,i,n){var o=this.selection.parent();if(null!==e&&0!==t(o).closest(".redactor-in").length){e=e.cloneRange();try{e.collapse(n),e.insertNode(i)}catch(t){this.focus.start()}}},iterateRemove:function(e,i){var n=t(i),o=n.text().replace(/\u200B/g,"");n.parent()[0];""===o?n.remove():n.replaceWith(function(){return t(this).contents()})}}},modal:function(){return{callbacks:{},templates:function(){this.opts.modal={"image-edit":String()+'<div class="redactor-modal-tab redactor-group" data-title="General"><div id="redactor-image-preview" class="redactor-modal-tab-side"></div><div class="redactor-modal-tab-area"><section><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /></section><section><label>'+this.lang.get("caption")+'</label><input type="text" id="redactor-image-caption" aria-label="'+this.lang.get("caption")+'" /></section><section><label>'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" aria-label="'+this.lang.get("link")+'" /></section><section><label class="redactor-image-position-option">'+this.lang.get("image-position")+'</label><select class="redactor-image-position-option" id="redactor-image-align" aria-label="'+this.lang.get("image-position")+'"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+'</option></select></section><section><label class="checkbox"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link-in-new-tab")+'"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+'</button><button id="redactor-modal-button-delete" class="redactor-modal-button-offset">'+this.lang.get("delete")+"</button></section></div></div>",image:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><div id="redactor-modal-image-droparea"></div></section></div>',file:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><label>'+this.lang.get("filename")+' <span class="desc">('+this.lang.get("optional")+')</span></label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br></section><section><div id="redactor-modal-file-upload"></div></section></div>',link:String()+'<div class="redactor-modal-tab" data-title="General"><section><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /></section><section><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /></section><section><label class="checkbox"><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+"</button></section></div>"},t.extend(this.opts,this.opts.modal)},addCallback:function(t,e){this.modal.callbacks[t]=e},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody},getActionButton:function(){return this.$modalBody.find("#redactor-modal-button-action")},getCancelButton:function(){return this.$modalBody.find("#redactor-modal-button-cancel")},getDeleteButton:function(){return this.$modalBody.find("#redactor-modal-button-delete")},load:function(t,e,i){void 0!==this.$modalBox&&this.$modalBox.hasClass("open")||(this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),void 0!==this.modal.callbacks[t]&&this.modal.callbacks[t].call(this))},show:function(){this.detect.isDesktop()||document.activeElement.blur(),this.selection.save(),this.modal.buildTabber(),this.detect.isMobile()&&(this.modal.width="96%"),setTimeout(t.proxy(this.modal.buildWidth,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.buildWidth,this)),this.$modalOverlay.redactorAnimation("fadeIn",{duration:.25}),this.$modalBox.addClass("open").show(),this.$modal.redactorAnimation("fadeIn",{timing:"cubic-bezier(0.175, 0.885, 0.320, 1.105)"},t.proxy(function(){this.utils.saveScroll(),this.utils.disableBodyScroll(),this.core.callback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},this))},buildWidth:function(){var e=t(window).height(),i=t(window).width(),n="number"==typeof this.modal.width;!n&&this.modal.width.match(/%$/)?this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}):parseInt(this.modal.width)>i?this.$modal.css({width:"96%","margin-bottom":"2%"}):(n&&(this.modal.width+="px"),this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}));var o=this.$modal.outerHeight(),r=e/2-o/2+"px";this.detect.isMobile()?r="2%":o>e&&(r="16px"),this.$modal.css("margin-top",r)},buildTabber:function(){this.modal.tabs=this.$modal.find(".redactor-modal-tab"),this.modal.tabs.length<2||(this.modal.$tabsBox=t('<div id="redactor-modal-tabber" />'),t.each(this.modal.tabs,t.proxy(function(e,i){var n=t('<a href="#" rel="'+e+'" />').text(t(i).attr("data-title"));n.on("click",t.proxy(this.modal.showTab,this)),0===e&&n.addClass("active"),this.modal.$tabsBox.append(n)},this)),this.$modalBody.prepend(this.modal.$tabsBox))},showTab:function(e){e.preventDefault();var i=t(e.target),n=i.attr("rel");return this.modal.tabs.hide(),this.modal.tabs.eq(n).show(),t("#redactor-modal-tabber").find("a").removeClass("active"),i.addClass("active"),!1},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName)),this.modal.getCancelButton().on("mousedown",t.proxy(this.modal.close,this))},setDraggable:function(){void 0!==t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13===t.which&&(t.preventDefault(),this.modal.getActionButton().click())},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box"/>').hide(),this.$modal=t('<div id="redactor-modal" role="dialog" />'),this.$modalHeader=t('<div id="redactor-modal-header" />'),this.$modalClose=t('<button type="button" id="redactor-modal-close" aria-label="'+this.lang.get("close")+'" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalClose),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("mousedown.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.core.editor().on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("mousedown.redactor-modal"),t(document).off("keyup.redactor-modal"),this.core.editor().off("keyup.redactor-modal"),this.$modalBox.off("click§.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if("redactor-modal-button-cancel"!==t(e.target).attr("id")&&e.target!==this.$modalClose[0]&&e.target!==this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.selection.restore(),this.modal.disableEvents(),this.utils.enableBodyScroll(),this.utils.restoreScroll(),this.$modalOverlay.redactorAnimation("fadeOut",{duration:.4},t.proxy(function(){this.$modalOverlay.remove()},this)),this.$modal.redactorAnimation("fadeOut",{duration:.3,timing:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},t.proxy(function(){void 0!==this.$modalBox&&(this.$modalBox.remove(),this.$modalBox=void 0),this.core.callback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){void 0===this.opts.destroyed&&(this.observe.links(),this.observe.images())},isCurrent:function(e,i){return void 0===i&&(i=t(this.selection.current())),i.is(e)||i.parents(e).length>0},toolbar:function(){this.observe.buttons(),this.observe.dropdowns()},buttons:function(e,i){var n=this.selection.current(),o=this.selection.parent();!1!==e?this.button.setInactiveAll():this.button.setInactiveAll(i),!1!==e||"html"===i?this.utils.isRedactorParent(n)&&("none"!==this.core.editor().css("display")&&(this.utils.isCurrentOrParentHeader()||this.utils.isCurrentOrParent(["table","pre","blockquote","li"])?this.button.disable("horizontalrule"):this.button.enable("horizontalrule")),t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var r=t(o).closest(e,this.$editor[0]),s=t(n).closest(e,this.$editor[0]);(0===r.length||this.utils.isRedactorParent(r))&&this.utils.isRedactorParent(s)&&(0===r.length&&0===s.closest(e,this.$editor[0]).length||this.button.setActive(i))},this))):-1!==t.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i)},dropdowns:function(){var e=t("<div />").html(this.selection.html()).find("a").length,i=t(this.selection.current()),n=this.utils.isRedactorParent(i);t.each(this.opts.observe.dropdowns,t.proxy(function(t,o){var r=o.observe,s=r.element,a=o.item,l=void 0!==r.in&&r.in,c=void 0!==r.out&&r.out;i.closest(s).length>0&&n||"a"===s&&0!==e?this.observe.setDropdownProperties(a,l,c):this.observe.setDropdownProperties(a,c,l)},this))},setDropdownProperties:function(t,e,i){i&&void 0!==i.attr&&this.observe.setDropdownAttr(t,i.attr,!0),void 0!==e.attr&&this.observe.setDropdownAttr(t,e.attr),void 0!==e.title&&t.find("span").text(e.title)},setDropdownAttr:function(e,i,n){t.each(i,function(t,i){"class"===t?n?e.removeClass(i):e.addClass(i):n?e.removeAttr(t):e.attr(t,i)})},addDropdown:function(t,e,i){void 0!==i.observe&&(i.item=t,this.opts.observe.dropdowns.push(i))},images:function(){this.opts.imageEditable&&(this.core.editor().addClass("redactor-layer-img-edit"),this.core.editor().find("img").each(t.proxy(function(e,i){var n=t(i);n.closest("a",this.$editor[0]).on("click",function(t){t.preventDefault()}),this.image.setEditable(n)},this)))},links:function(){this.opts.linkTooltip&&this.core.editor().find("a").each(t.proxy(function(e,i){var n=t(i);!0!==n.data("cached")&&(n.data("cached",!0),n.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)))},this))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target);if("IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,o=this.observe.getTooltipPosition(n),r=t('<span class="redactor-link-tooltip"></span>'),s=n.attr("href");void 0===s&&(s=""),s.length>24&&(s=s.substring(0,24)+"...");var a=t('<a href="'+n.attr("href")+'" target="_blank" />').html(s).addClass("redactor-link-tooltip-action"),l=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");r.append(a).append(" | ").append(l).append(" | ").append(c);var h=parseInt(n.css("line-height"),10),d=Math.ceil((e.pageY-o.top)/h),u=o.top+d*h;r.css({top:u+"px",left:o.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(r),this.core.editor().on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this))}},closeAllTooltip:function(){t(".redactor-link-tooltip").remove()},closeTooltip:function(e){var i=(e=e.originalEvent||e).target,n=t(i).closest("a",this.$editor[0]);0!==n.length&&"A"===n[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||(this.observe.closeAllTooltip(),this.core.editor().off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))}}},offset:function(){return{get:function(e){var i=this.offset.clone(e);if(!1===i)return 0;var n=document.createElement("div");return n.appendChild(i.cloneContents()),n.innerHTML=n.innerHTML.replace(/<img(.*?[^>])>$/gi,"i"),t.trim(t(n).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,"").length},clone:function(t){var e=this.selection.get(),i=this.selection.range(e);if(null===i&&void 0===t)return!1;if(!1===(t=void 0===t?this.$editor:t))return!1;t=t[0]||t;var n=i.cloneRange();return n.selectNodeContents(t),n.setEnd(i.endContainer,i.endOffset),n},set:function(t,e){e=void 0===e?t:e,this.focus.is()||this.focus.start();for(var i,n=this.selection.get(),o=this.selection.range(n),r=0,s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);null!==(i=s.nextNode());)if((r+=i.nodeValue.length)>t&&(o.setStart(i,i.nodeValue.length+t-r),t=1/0),r>=e){o.setEnd(i,i.nodeValue.length+e-r);break}o.collapse(!1),this.selection.update(n,o)}}},paragraphize:function(){return{load:function(e){return!1===this.opts.paragraphize||"inline"===this.opts.type||"pre"===this.opts.type?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=(e=(e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")).replace(/<\/pre>/gi,"</pre>\n\n")).replace(/<p>\s<br><\/p>/gi,"<p></p>"),e=(e=this.paragraphize.getSafes(e)).replace("<br>","\n"),e=this.paragraphize.convert(e),e=this.paragraphize.clear(e),e=(e=this.paragraphize.restoreSafes(e)).replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),i.find(this.opts.paragraphizeBlocks.join(", ")).each(t.proxy(function(e,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.find("span.redactor-selection-marker").each(t.proxy(function(e,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.html()},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i=void 0!==i?i.replace(/\$/g,"&#36;"):i,e=e.replace("#####replace"+t+"#####",i)}),e},convert:function(e){e=(e=(e=(e=e.replace(/\r\n/g,"xparagraphmarkerz")).replace(/\n/g,"xparagraphmarkerz")).replace(/\r/g,"xparagraphmarkerz")).replace(/\s+/g," ");return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e="<p>"+(e=(e=(e=t.trim(e)).replace(/xparagraphmarkerzxparagraphmarkerz/gi,"</p><p>")).replace(/xparagraphmarkerz/gi,"<br>"))+"</p>").replace("<p></p>","")).replace("\r\n\r\n","")).replace(/<\/p><p>/g,"</p>\r\n\r\n<p>")).replace(new RegExp("<br\\s?/?></p>","g"),"</p>")).replace(new RegExp("<p><br\\s?/?>","g"),"<p>")).replace(new RegExp("<p><br\\s?/?>","g"),"<p>")).replace(new RegExp("<br\\s?/?></p>","g"),"</p>")).replace(/<p>&nbsp;<\/p>/gi,"")).replace(/<p>\s?<br>&nbsp;<\/p>/gi,"")).replace(/<p>\s?<br>/gi,"<p>")},clear:function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<p>(.*?)#####replace(.*?)#####\s?<\/p>/gi,"<p>$1</p>#####replace$2#####")).replace(/(<br\s?\/?>){2,}<\/p>/gi,"</p>")).replace(new RegExp("</blockquote></p>","gi"),"</blockquote>")).replace(new RegExp("<p></blockquote>","gi"),"</blockquote>")).replace(new RegExp("<p><blockquote>","gi"),"<blockquote>")).replace(new RegExp("<blockquote></p>","gi"),"<blockquote>")).replace(new RegExp("<p><p ","gi"),"<p ")).replace(new RegExp("<p><p>","gi"),"<p>")).replace(new RegExp("</p></p>","gi"),"</p>")).replace(new RegExp("<p>\\s?</p>","gi"),"")).replace(new RegExp("\n</p>","gi"),"</p>")).replace(new RegExp("<p>\t?\t?\n?<p>","gi"),"<p>")).replace(new RegExp("<p>\t*</p>","gi"),"")}}},paste:function(){return{init:function(e){this.rtePaste=!0;var i=!("pre"!==this.opts.type&&!this.utils.isCurrentOrParent("pre"));this.detect.isDesktop()&&!this.paste.pre&&this.opts.clipboardImageUpload&&this.opts.imageUpload&&this.paste.detectClipboardUpload(e)?this.detect.isIe()&&setTimeout(t.proxy(this.paste.clipboardUpload,this),100):(this.utils.saveScroll(),this.selection.save(),this.paste.createPasteBox(i),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),setTimeout(t.proxy(function(){var e=this.paste.getPasteBoxCode(i);this.buffer.set(),this.selection.restore(),this.utils.restoreScroll();var n=this.clean.getCurrentType(e);e=this.clean.onPaste(e,n);var o=this.core.callback("paste",e);e=void 0===o?e:o,this.paste.insert(e,n),this.rtePaste=!1,i&&this.clean.cleanPre(),t(window).off("scroll.redactor-freeze")},this),1))},getPasteBoxCode:function(t){var e=t?this.$pasteBox.val():this.$pasteBox.html();return this.$pasteBox.remove(),e},createPasteBox:function(e){var i={position:"fixed",width:"1px",top:0,left:"-9999px"};this.$pasteBox=e?t("<textarea>").css(i):t("<div>").attr("contenteditable","true").css(i),this.paste.appendPasteBox(),this.$pasteBox.focus()},appendPasteBox:function(){if(this.detect.isIe())this.core.box().append(this.$pasteBox);else{var e=t(".modal-body:visible");e.length>0?e.append(this.$pasteBox):t("body").prepend(this.$pasteBox)}},detectClipboardUpload:function(e){var i=(e=e.originalEvent||e).clipboardData;if(this.detect.isIe()||this.detect.isFirefox())return!1;if(-1!==i.types.indexOf("public.tiff"))return e.preventDefault(),!1;if(i.items&&i.items.length){var n=i.items[0].getAsFile();if(null===n)return!1;var o=new FileReader;return o.readAsDataURL(n),o.onload=t.proxy(this.paste.insertFromClipboard,this),!0}},clipboardUpload:function(){var e=this.$editor.find("img");t.each(e,t.proxy(function(e,i){if(-1!==i.src.search(/^data\:image/i)){var n=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=t.proxy(function(e){if(this.detect.isIe())t(i).wrap(t("<figure />"));else{var n=t(i).parent();this.utils.replaceToTag(n,"figure")}i.src=e.url,this.core.callback("imageUpload",t(i),e)},this);var o=this.utils.dataURItoBlob(i.src);n.append("clipboard",1),n.append(this.opts.imageUploadParam,o),this.progress.show(),this.upload.send(n,!1),this.code.sync(),this.rtePaste=!1}}},this))},insertFromClipboard:function(t){var e=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=this.image.insert;var i=this.utils.dataURItoBlob(t.target.result);e.append("clipboard",1),e.append(this.opts.imageUploadParam,i),this.progress.show(),this.upload.send(e,t),this.rtePaste=!1}},insert:function(e,i){i.pre?this.insert.raw(e):i.text?this.insert.text(e):this.insert.html(e,i),this.detect.isFirefox()&&this.opts.imageUpload&&this.opts.clipboardImageUpload&&setTimeout(t.proxy(this.paste.clipboardUpload,this),100)}}},placeholder:function(){return{enable:function(){setTimeout(t.proxy(function(){return this.placeholder.isEditorEmpty()?this.placeholder.show():this.placeholder.hide()},this),5)},show:function(){this.core.editor().addClass("redactor-placeholder")},update:function(t){this.opts.placeholder=t,this.core.editor().attr("placeholder",t)},hide:function(){this.core.editor().removeClass("redactor-placeholder")},is:function(){return this.core.editor().hasClass("redactor-placeholder")},init:function(){this.placeholder.enabled()&&(this.utils.isEditorRelative()||this.utils.setEditorRelative(),this.placeholder.build(),this.placeholder.buildPosition(),this.placeholder.enable(),this.placeholder.enableEvents())},enabled:function(){return this.opts.placeholder?this.core.element().attr("placeholder",this.opts.placeholder):this.placeholder.isAttr()},enableEvents:function(){this.core.editor().on("keydown.redactor-placeholder."+this.uuid,t.proxy(this.placeholder.enable,this))},disableEvents:function(){this.core.editor().off(".redactor-placeholder."+this.uuid)},build:function(){this.core.editor().attr("placeholder",this.core.element().attr("placeholder"))},buildPosition:function(){var e=t("<style />");e.addClass("redactor-placeholder-style-tag"),e.html("#"+this.core.id()+".redactor-placeholder::after "+this.placeholder.getPosition()),t("head").append(e)},getPosition:function(){return"{ top: "+this.core.editor().css("padding-top")+"; left: "+this.core.editor().css("padding-left")+"; }"},isEditorEmpty:function(){var e=t.trim(this.core.editor().html()).replace(/[\t\n]/g,""),i=["","<p>​</p>","<p>​<br></p>",this.opts.emptyHtmlRendered];return-1!==t.inArray(e,i)},isAttr:function(){return void 0!==this.core.element().attr("placeholder")&&""!==this.core.element().attr("placeholder")},destroy:function(){this.core.editor().removeAttr("placeholder"),this.placeholder.hide(),this.placeholder.disableEvents(),t(".redactor-placeholder-style-tag").remove()}}},progress:function(){return{$box:null,$bar:null,target:document.body,show:function(){this.progress.is()?this.progress.$box.show():(this.progress.build(),this.progress.$box.redactorAnimation("fadeIn"))},hide:function(){this.progress.is()&&this.progress.$box.redactorAnimation("fadeOut",{duration:.35},t.proxy(this.progress.destroy,this))},update:function(t){this.progress.show(),this.progress.$bar.css("width",t+"%")},is:function(){return null!==this.progress.$box},build:function(){this.progress.$bar=t("<span />"),this.progress.$box=t('<div id="redactor-progress" />'),this.progress.$box.append(this.progress.$bar),t(this.progress.target).append(this.progress.$box)},destroy:function(){this.progress.is()&&this.progress.$box.remove(),this.progress.$box=null,this.progress.$bar=null}}},selection:function(){return{get:function(){return window.getSelection?window.getSelection():document.selection&&"Control"!==document.selection.type?document.selection:null},range:function(t){return void 0===t&&(t=this.selection.get()),t.getRangeAt&&t.rangeCount?t.getRangeAt(0):null},is:function(){return!this.selection.isCollapsed()},isRedactor:function(){var e=this.selection.range();if(null!==e){var i=e.startContainer.parentNode;if(t(i).hasClass("redactor-in")||0!==t(i).parents(".redactor-in").length)return!0}return!1},isCollapsed:function(){var t=this.selection.get();return null!==t&&t.isCollapsed},update:function(t,e){null!==e&&(t.removeAllRanges(),t.addRange(e))},current:function(){var t=this.selection.get();return null!==t&&t.anchorNode},parent:function(){var t=this.selection.current();return null!==t&&t.parentNode},block:function(e){for(e=e||this.selection.current();e;){if(this.utils.isBlockTag(e.tagName))return!t(e).hasClass("redactor-in")&&e;e=e.parentNode}return!1},inline:function(e){for(e=e||this.selection.current();e;){if(this.utils.isInlineTag(e.tagName))return!t(e).hasClass("redactor-in")&&e;e=e.parentNode}return!1},element:function(e){for(e||(e=this.selection.current());e;){if(1===e.nodeType)return!t(e).hasClass("redactor-in")&&e;e=e.parentNode}return!1},prev:function(){return null!==this.selection.current()&&this.selection.current().previousSibling},next:function(){return null!==this.selection.current()&&this.selection.current().nextSibling},blocks:function(e){var i=[],n=this.selection.nodes(e);t.each(n,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this));var o=this.selection.block();return 0===i.length&&!1===o?[]:0===i.length&&!1!==o?[o]:i},inlines:function(e){var i=[],n=this.selection.nodes(e);t.each(n,t.proxy(function(t,e){this.utils.isInline(e)&&i.push(e)},this));var o=this.selection.inline();return 0===i.length&&!1===o?[]:0===i.length&&!1!==o?[o]:i},nodes:function(e){var i=void 0===e?[]:t.isArray(e)?e:[e],n=this.selection.get(),o=this.selection.range(n),r=[],s=[];if(this.utils.isCollapsed())r=[this.selection.current()];else{var a=o.startContainer,l=o.endContainer;if(a===l)return[a];for(;a&&a!==l;)r.push(a=this.selection.nextNode(a));for(a=o.startContainer;a&&a!==o.commonAncestorContainer;)r.unshift(a),a=a.parentNode}return t.each(r,function(e,n){if(n){var o=1===n.nodeType&&n.tagName.toLowerCase();if(t(n).hasClass("redactor-script-tag")||t(n).hasClass("redactor-selection-marker"))return;if(o&&0!==i.length&&-1===t.inArray(o,i))return;s.push(n)}}),0===s.length?[]:s},nextNode:function(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},save:function(){this.marker.insert(),this.savedSel=this.core.editor().html()},restore:function(t){var e=this.marker.find(1),i=this.marker.find(2);this.detect.isFirefox()&&this.core.editor().focus(),0!==e.length&&0!==i.length?this.caret.set(e,i):0!==e.length?this.caret.start(e):this.core.editor().focus(),!1!==t&&(this.marker.remove(),this.savedSel=!1)},saveInstant:function(){var t=this.core.editor()[0],e=t.ownerDocument.defaultView.getSelection();if(e.getRangeAt&&e.rangeCount){var i=e.getRangeAt(0),n=i.cloneRange();n.selectNodeContents(t),n.setEnd(i.startContainer,i.startOffset);var o=n.toString().length;return this.saved={start:o,end:o+i.toString().length,node:i.startContainer},this.saved}},restoreInstant:function(t){if(void 0!==t||this.saved){this.saved=void 0!==t?t:this.saved;var e=this.core.editor().find(this.saved.node);if(0===e.length||0!==e.text().trim().replace(/\u200B/g,"").length){var i=this.core.editor()[0],n=i.ownerDocument,o=n.defaultView,r=0;(u=n.createRange()).setStart(i,0),u.collapse(!0);for(var s,a=[i],l=!1,c=!1;!c&&(s=a.pop());)if(3==s.nodeType){var h=r+s.length;!l&&this.saved.start>=r&&this.saved.start<=h&&(u.setStart(s,this.saved.start-r),l=!0),l&&this.saved.end>=r&&this.saved.end<=h&&(u.setEnd(s,this.saved.end-r),c=!0),r=h}else for(var d=s.childNodes.length;d--;)a.push(s.childNodes[d]);(p=o.getSelection()).removeAllRanges(),p.addRange(u)}else try{var u,p;(u=document.createRange()).setStart(e[0],0),(p=window.getSelection()).removeAllRanges(),p.addRange(u)}catch(t){}}},node:function(e){t(e).prepend(this.marker.get(1)),t(e).append(this.marker.get(2)),this.selection.restore()},all:function(){this.core.editor().focus();var t=this.selection.get(),e=this.selection.range(t);e.selectNodeContents(this.core.editor()[0]),this.selection.update(t,e)},remove:function(){this.selection.get().removeAllRanges()},replace:function(t){this.insert.html(t)},text:function(){return this.selection.get().toString()},html:function(){var t="",e=this.selection.get();if(e.rangeCount){for(var i=document.createElement("div"),n=e.rangeCount,o=0;o<n;++o)i.appendChild(e.getRangeAt(o).cloneContents());t=this.clean.onGet(i.innerHTML)}return t},extractEndOfNode:function(t){var e=this.selection.get(),i=this.selection.range(e),n=i.cloneRange();return n.selectNodeContents(t),n.setStart(i.endContainer,i.endOffset),n.extractContents()},removeMarkers:function(){this.marker.remove()},marker:function(t){return this.marker.get(t)},markerHtml:function(t){return this.marker.html(t)}}},shortcuts:function(){return{hotkeysSpecialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hotkeysShiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},init:function(e,i){if(!1===this.opts.shortcuts)return!e.ctrlKey&&!e.metaKey||66!==i&&73!==i||e.preventDefault(),!1;t.each(this.opts.shortcuts,t.proxy(function(t,i){this.shortcuts.build(e,t,i)},this))},build:function(e,i,n){for(var o=t.proxy(function(){this.shortcuts.buildHandler(n)},this),r=i.split(","),s=r.length,a=0;a<s;a++)"string"==typeof r[a]&&this.shortcuts.handler(e,t.trim(r[a]),o)},buildHandler:function(t){var e;"-1"!==t.func.search(/\./)?void 0!==this[(e=t.func.split("."))[0]]&&this[e[0]][e[1]].apply(this,t.params):this[t.func].apply(this,t.params)},handler:function(e,i,n){i=i.toLowerCase().split(" ");var o=this.shortcuts.hotkeysSpecialKeys[e.keyCode],r=String.fromCharCode(e.which).toLowerCase(),s="",a={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&o!==i&&(s+=i+"+")}),o&&(a[s+o]=!0),r&&(a[s+r]=!0,a[s+this.shortcuts.hotkeysShiftNums[r]]=!0,"shift+"===s&&(a[this.shortcuts.hotkeysShiftNums[r]]=!0));for(var l=i.length,c=0;c<l;c++)if(a[i[c]])return e.preventDefault(),n.apply(this,arguments)}}},storage:function(){return{data:[],add:function(t){t.status=!0,t.url=decodeURI(t.url),this.storage.data[t.url]=t},status:function(t,e){this.storage.data[decodeURI(t)].status=e},observe:function(){var e=this;this.core.editor().find("[data-image]").each(function(i,n){e.storage.add({type:"image",node:n,url:n.src,id:t(n).attr("data-image")})}),this.core.editor().find("[data-file]").each(function(i,n){e.storage.add({type:"file",node:n,url:n.href,id:t(n).attr("data-file")})}),this.core.editor().find("[data-s3]").each(function(i,n){var o="IMG"===n.tagName?n.src:n.href;e.storage.add({type:"s3",node:n,url:o,id:t(n).attr("data-s3")})})},changes:function(){for(var t in this.storage.data){var e=this.storage.data[t],i="IMG"===e.node.tagName?"src":"href";0===this.core.editor().find("[data-"+e.type+"]["+i+'="'+e.url+'"]').length?this.storage.status(e.url,!1):this.storage.status(e.url,!0)}return this.storage.data}}},toolbar:function(){return{build:function(){this.button.hideButtons(),this.button.hideButtonsOnMobile(),this.$toolbarBox=t("<div />").addClass("redactor-toolbar-box"),this.$toolbar=this.toolbar.createContainer(),this.$toolbarBox.append(this.$toolbar),this.toolbar.append(),this.button.$toolbar=this.$toolbar,this.button.setFormatting(),this.button.load(this.$toolbar),this.toolbar.setOverflow(),this.toolbar.setFixed()},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbarBox)):"textarea"===this.opts.type?this.$box.prepend(this.$toolbarBox):this.$element.before(this.$toolbarBox)},setOverflow:function(){this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},setFixed:function(){if(this.opts.toolbarFixed&&!this.opts.toolbarExternal){if(this.opts.toolbarFixedTarget!==document){var e=t(this.opts.toolbarFixedTarget);this.toolbar.toolbarOffsetTop=0===e.length?0:this.core.box().offset().top-e.offset().top}var i=0!==this.core.box().closest(".modal-body").length?1e3:0;setTimeout(t.proxy(function(){var e=this;this.toolbar.observeScroll(!1),this.detect.isDesktop()?t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){e.core.editor().height()<100||e.placeholder.isEditorEmpty()||e.toolbar.observeScroll()}):t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){e.core.editor().height()<100||e.placeholder.isEditorEmpty()||(e.core.toolbar().hide(),clearTimeout(t.data(this,"scrollCheck")),t.data(this,"scrollCheck",setTimeout(function(){e.core.toolbar().show(),e.toolbar.observeScroll()},250)))})},this),i)}},setUnfixed:function(){this.toolbar.observeScrollDisable()},getBoxTop:function(){return this.opts.toolbarFixedTarget===document?this.core.box().offset().top:this.toolbar.toolbarOffsetTop},observeScroll:function(e){var i=0;!1!==e&&(i=this.opts.toolbarFixedTarget===document?20:0);var n=t(this.opts.toolbarFixedTarget).scrollTop(),o=this.toolbar.getBoxTop();n!==o&&(n+this.opts.toolbarFixedTopOffset+i>o?this.toolbar.observeScrollEnable(n,o):this.toolbar.observeScrollDisable())},observeScrollResize:function(){this.$toolbar.css({width:this.core.box().innerWidth(),left:this.core.box().offset().left})},observeScrollEnable:function(e,i){if(void 0===this.fullscreen||!1!==this.fullscreen.isOpened){var n=i+this.core.box().outerHeight()-32,o=this.core.box().innerWidth(),r=this.detect.isDesktop()?"fixed":"absolute",s=this.detect.isDesktop()?this.opts.toolbarFixedTopOffset:t(this.opts.toolbarFixedTarget).scrollTop()-i+this.opts.toolbarFixedTopOffset,a=this.detect.isDesktop()?this.core.box().offset().left:0;this.opts.toolbarFixedTarget!==document&&(r="absolute",s=this.opts.toolbarFixedTopOffset+t(this.opts.toolbarFixedTarget).scrollTop()-i,a=0),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:r,width:o,top:s,left:a}),e>n&&t(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",e<n?"visible":"hidden"),t(window).on("resize.redactor-toolbar."+this.uuid,t.proxy(this.toolbar.observeScrollResize,this))}else this.toolbar.observeScrollDisable()},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box"),t(window).off("resize.redactor-toolbar."+this.uuid)},setDropdownsFixed:function(){var t=this.opts.toolbarFixedTarget===document&&this.detect.isDesktop()?"fixed":"absolute";this.toolbar.setDropdownPosition(t)},unsetDropdownsFixed:function(){this.toolbar.setDropdownPosition("absolute")},setDropdownPosition:function(e){var i=this;t(".redactor-dropdown-"+this.uuid).each(function(){var n=t(this),o=i.button.get(n.attr("rel")),r="fixed"===e?i.opts.toolbarFixedTopOffset:o.offset().top;n.css({position:e,top:o.innerHeight()+r+"px"})})}}},upload:function(){return{init:function(e,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload-label")),this.upload.$input=t('<input type="file" name="file" multiple />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t;for(var e=this.upload.$input[0].files.length,i=0;i<e;i++){var n=e-1-i;this.upload.traverseFile(this.upload.$input[0].files[n],t)}},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){var e=(t=t.originalEvent||t).dataTransfer.files;if(this.opts.multipleImageUpload)for(var i=e.length,n=0;n<i;n++)this.upload.traverseFile(e[n],t);else this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.uploads3.send(t,e);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var n="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,t)}!1!==this.core.callback("uploadStart",e,i)&&(this.progress.show(),this.upload.send(i,e))},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type=-1===this.opts.imageTypes.indexOf(t.type)?"file":"image",null===this.opts.imageUpload&&null!==this.opts.fileUpload&&(this.upload.type="file")},getHiddenFields:function(e,i){return!1===e||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)},this)),i)},send:function(e,i){"image"===this.upload.type?(e=this.utils.appendFields(this.opts.imageUploadFields,e),e=this.utils.appendForms(this.opts.imageUploadForms,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.utils.appendFields(this.opts.fileUploadFields,e),e=this.utils.appendForms(this.opts.fileUploadForms,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=t.proxy(function(){if(4===n.readyState){var t,e=n.responseText;e=(e=e.replace(/^\[/,"")).replace(/\]$/,"");try{t="string"==typeof e?JSON.parse(e):e}catch(e){t={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(t,this.upload.direct,i)}},this),!1!==this.core.callback("uploadBeforeSend",n)&&n.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]}}},uploads3:function(){return{send:function(e,i){this.uploads3.executeOnSignedUrl(e,t.proxy(function(t){this.uploads3.sendToS3(e,t,i)},this))},executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,n=-1===this.opts.s3.search(/\?/)?"?":"&";i.open("GET",this.opts.s3+n+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var o=this;i.onreadystatechange=function(t){4===this.readyState&&200===this.status&&(o.progress.show(),e(decodeURIComponent(this.responseText)))},i.send()},createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest).open(t,e):i=null,i},sendToS3:function(e,i,n){var o=this.uploads3.createCORSRequest("PUT",i);o&&(o.onload=t.proxy(function(){var t;if(this.progress.hide(),200!==o.status)return t={error:!0},void this.upload.callback(t,this.upload.direct,o);var e=i.split("?");if(!e[0])return!1;if(this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),t={url:e[0],id:e[0],s3:!0},"file"===this.upload.type){var r=e[0].split("/");t.name=r[r.length-1]}this.upload.callback(t,this.upload.direct,n)},this),o.onerror=function(){},o.upload.onprogress=function(t){},o.setRequestHeader("Content-Type",e.type),o.setRequestHeader("x-amz-acl","public-read"),o.send(e))}}},utils:function(){return{isEmpty:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=void 0===e?this.core.editor().html():e).replace(/[\u200B-\u200D\uFEFF]/g,"")).replace(/&nbsp;/gi,"")).replace(/<\/?br\s?\/?>/g,"")).replace(/\s/g,"")).replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,"")).replace(/<iframe(.*?[^>])>$/i,"iframe")).replace(/<source(.*?[^>])>$/i,"source")).replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")).replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),""===(e=t.trim(e))},isElement:function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},strpos:function(t,e,i){var n=t.indexOf(e,i);return n>=0&&n},dataURItoBlob:function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var i=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return new Blob([n],{type:i})},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},cloneAttributes:function(e,i){e=e[0]||e,i=t(i);for(var n=e.attributes,o=n.length;o--;){var r=n[o];i.attr(r.name,r.value)}return i},breakBlockTag:function(){var e=this.selection.block();if(!e)return!1;var i=this.utils.isEmpty(e.innerHTML),n=e.tagName.toLowerCase();if("pre"===n||"li"===n||"td"===n||"th"===n)return!1;if(!i&&this.utils.isStartOfElement(e))return{$block:t(e),$next:t(e).next(),type:"start"};if(!i&&this.utils.isEndOfElement(e))return{$block:t(e),$next:t(e).next(),type:"end"};var o=this.selection.extractEndOfNode(e),r=t("<"+n+" />").append(o);return r=this.utils.cloneAttributes(e,r),t(e).after(r),{$block:t(e),$next:r,type:"break"}},inBlocks:function(e){e=t.isArray(e)?e:[e];for(var i=this.selection.blocks(),n=i.length,o=!1,r=0;r<n;r++)if(!1!==i[r]){var s=i[r].tagName.toLowerCase();-1!==t.inArray(s,e)&&(o=!0)}return o},inInlines:function(e){e=t.isArray(e)?e:[e];for(var i=this.selection.inlines(),n=i.length,o=!1,r=0;r<n;r++){var s=i[r].tagName.toLowerCase();-1!==t.inArray(s,e)&&(o=!0)}return o},isTag:function(e,i){var n=t(e).closest(i,this.core.editor()[0]);return 1===n.length&&n[0]},isBlock:function(t){return null!==t&&((t=t[0]||t)&&this.utils.isBlockTag(t.tagName))},isBlockTag:function(t){return void 0!==t&&this.reIsBlock.test(t)},isInline:function(t){return(t=t[0]||t)&&this.utils.isInlineTag(t.tagName)},isInlineTag:function(t){return void 0!==t&&this.reIsInline.test(t)},isRedactorParent:function(e){return!!e&&(0!==t(e).parents(".redactor-in").length&&!t(e).hasClass("redactor-in")&&e)},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.parent(),n=this.selection.current();if(t.isArray(e)){var o=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(n,i,e)&&o++},this)),0!==o}return this.utils.isCurrentOrParentOne(n,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:!(!t||t.tagName!==i)&&t},isEditorRelative:function(){var e=this.core.editor().css("position");return-1!==t.inArray(["absolute","fixed","relative"],e)},setEditorRelative:function(){this.core.editor().addClass("redactor-relative")},getScrollTarget:function(){var e=t(this.opts.scrollTarget);return 0!==e.length?e:t(document)},freezeScroll:function(){this.freezeScrollTop=this.utils.getScrollTarget().scrollTop(),this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},unfreezeScroll:function(){void 0!==this.freezeScrollTop&&this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},saveScroll:function(){this.tmpScrollTop=this.utils.getScrollTarget().scrollTop()},restoreScroll:function(){void 0!==this.tmpScrollTop&&this.utils.getScrollTarget().scrollTop(this.tmpScrollTop)},isStartOfElement:function(t){return!(void 0===t&&!(t=this.selection.block()))&&0===this.offset.get(t)},isEndOfElement:function(e){if(void 0===e&&!(e=this.selection.block()))return!1;var i=t.trim(t(e).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,"");return this.offset.get(e)===i.length},removeEmptyAttr:function(e,i){var n=t(e);return void 0===n.attr(i)||""===n.attr(i)&&(n.removeAttr(i),!0)},replaceToTag:function(e,i){var n;return t(e).replaceWith(function(){n=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)n.attr(this.attributes[e].name,this.attributes[e].value);return n}),n},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},disableBodyScroll:function(){var e=t("html"),i=window.innerWidth;if(!i){var n=document.documentElement.getBoundingClientRect();i=n.right-Math.abs(n.left)}var o=document.body.clientWidth<i,r=this.utils.measureScrollbar();e.css("overflow","hidden"),o&&e.css("padding-right",r)},measureScrollbar:function(){var e=t("body"),i=document.createElement("div");i.className="redactor-scrollbar-measure",e.append(i);var n=i.offsetWidth-i.clientWidth;return e[0].removeChild(i),n},enableBodyScroll:function(){t("html").css({overflow:"","padding-right":""}),t("body").remove("redactor-scrollbar-measure")},appendFields:function(e,i){if(!e)return i;if("object"==typeof e)return t.each(e,function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)}),i;var n=t(e);if(0===n.length)return i;return n.each(function(){i.append(t(this).attr("name"),t(this).val())}),i},appendForms:function(e,i){if(!e)return i;var n=t(e);if(0===n.length)return i;var o=n.serializeArray();return t.each(o,function(t,e){i.append(e.name,e.value)}),i},isRgb:function(t){return 0===t.search(/^rgb/i)},rgb2hex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},isCollapsed:function(){return this.selection.isCollapsed()},isMobile:function(){return this.detect.isMobile()},isDesktop:function(){return this.detect.isDesktop()},isPad:function(){return this.detect.isIpad()}}},browser:function(){return{webkit:function(){return this.detect.isWebkit()},ff:function(){return this.detect.isFirefox()},ie:function(){return this.detect.isIe()}}}},t(window).on("load.tools.redactor",function(){t('[data-tools="redactor"]').redactor()}),i.prototype.init.prototype=i.prototype}(jQuery),function(t){function e(e,i,n,o){var r={duration:.5,iterate:1,delay:0,prefix:"redactor-",timing:"linear"};this.animation=i,this.slide="slideDown"===this.animation||"slideUp"===this.animation,this.$element=t(e),this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],"function"==typeof n?(o=n,this.opts=r):this.opts=t.extend(r,n),this.slide&&this.$element.height(this.$element.height()),this.init(o)}t.fn.redactorAnimation=function(t,i,n){return this.each(function(){new e(this,t,i,n)})},e.prototype={init:function(t){this.queue.push(this.animation),this.clean(),"show"===this.animation?(this.opts.timing="linear",this.$element.removeClass("hide").show(),"function"==typeof t&&t(this)):"hide"===this.animation?(this.opts.timing="linear",this.$element.hide(),"function"==typeof t&&t(this)):this.animate(t)},animate:function(e){this.$element.addClass("redactor-animated").css("display","").removeClass("hide"),this.$element.addClass(this.opts.prefix+this.queue[0]),this.set(this.opts.duration+"s",this.opts.delay+"s",this.opts.iterate,this.opts.timing);var i=this.queue.length>1?null:e;this.complete("AnimationEnd",t.proxy(function(){this.$element.hasClass(this.opts.prefix+this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate(e))},this),i)},set:function(t,e,i,n){for(var o=this.prefixes.length;o--;)this.$element.css(this.prefixes[o]+"animation-duration",t),this.$element.css(this.prefixes[o]+"animation-delay",e),this.$element.css(this.prefixes[o]+"animation-iteration-count",i),this.$element.css(this.prefixes[o]+"animation-timing-function",n)},clean:function(){this.$element.removeClass("redactor-animated"),this.$element.removeClass(this.opts.prefix+this.queue[0]),this.set("","","","")},complete:function(e,i,n){this.$element.one(e.toLowerCase()+" webkit"+e+" o"+e+" MS"+e,t.proxy(function(){"function"==typeof i&&i(),"function"==typeof n&&n(this);-1!==t.inArray(this.animation,["fadeOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"])&&this.$element.css("display","none"),this.slide&&this.$element.css("height","")},this))}}}(jQuery),function(t){t.Redactor.prototype.fullscreen=function(){return{langs:{en:{fullscreen:"Fullscreen"},es:{fullscreen:"Pantalla completa"}},init:function(){this.fullscreen.isOpen=!1;var t=this.button.add("fullscreen",this.lang.get("fullscreen"));this.button.setIcon(t,'<i class="re-icon-expand"></i>'),this.button.addCallback(t,this.fullscreen.toggle),this.opts.fullscreen&&this.fullscreen.toggle()},enable:function(){this.fullscreen.isOpened=!1,this.button.changeIcon("fullscreen","retract"),this.fullscreen.isOpen=!0,this.opts.fullscreen||this.selection.save(),this.opts.toolbarExternal&&(this.fullscreen.toolcss={},this.fullscreen.boxcss={},this.fullscreen.toolcss.width=this.$toolbar.css("width"),this.fullscreen.toolcss.top=this.$toolbar.css("top"),this.fullscreen.toolcss.position=this.$toolbar.css("position"),this.fullscreen.boxcss.top=this.$box.css("top")),this.fullscreen.height=this.core.editor().height(),this.opts.maxHeight&&this.core.editor().css("max-height",""),this.opts.minHeight&&this.core.editor().css("min-height",""),this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=t("<div/>")),this.opts.toolbarExternal&&t(this.opts.toolbarExternal).css({position:"absolute",top:0,left:0,width:"100%"}),this.$fullscreenPlaceholder.insertAfter(this.$box),this.core.box().appendTo(document.body),this.core.box().addClass("redactor-box-fullscreen"),t("body").addClass("redactor-body-fullscreen"),t("body, html").css("overflow","hidden"),this.fullscreen.resize(),this.opts.fullscreen||this.selection.restore(),this.toolbar.observeScrollDisable(),t(window).on("resize.redactor-plugin-fullscreen",t.proxy(this.fullscreen.resize,this)),t(document).scrollTop(0,0);var e=this;setTimeout(function(){e.fullscreen.isOpened=!0},10)},disable:function(){this.button.changeIcon("fullscreen","expand"),this.fullscreen.isOpened=void 0,this.fullscreen.isOpen=!1,this.selection.save(),t(window).off("resize.redactor-plugin-fullscreen"),t("body, html").css("overflow",""),this.core.box().insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.core.box().removeClass("redactor-box-fullscreen").css({width:"auto",height:"auto"}),this.core.box().removeClass("redactor-box-fullscreen"),this.opts.toolbarExternal&&(this.core.box().css("top",this.fullscreen.boxcss.top),t(this.opts.toolbarExternal).css({width:this.fullscreen.toolcss.width,top:this.fullscreen.toolcss.top,position:this.fullscreen.toolcss.position})),this.opts.minHeight&&this.core.editor().css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.core.editor().css("maxHeight",this.opts.maxHeight),this.core.editor().css("height","auto"),this.selection.restore()},toggle:function(){return this.fullscreen.isOpen?this.fullscreen.disable():this.fullscreen.enable()},resize:function(){if(this.fullscreen.isOpen){var e=this.button.toolbar().height(),i=parseInt(this.core.editor().css("padding-top"))+parseInt(this.core.editor().css("padding-bottom")),n=t(window).height()-e-i;this.core.box().width(t(window).width()).height(n),this.opts.toolbarExternal&&(this.core.toolbar().css({top:"0px",position:"absolute",width:"100%"}),this.core.box().css("top",e+"px")),this.core.editor().height(n)}}}}}(jQuery),function(t){t.Redactor.prototype.fontcolor=function(){return{langs:{en:{"text-color":"Text Color",text:"Text",highlight:"Highlight"},es:{"text-color":"Color de Texto",text:"Texto",highlight:"Fondo"}},init:function(){var e=["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],i=this.button.add("fontcolor",this.lang.get("text-color"));this.button.setIcon(i,'<i class="re-icon-fontcolor"></i>');var n=this.button.addDropdown(i);n.attr("rel","fontcolor"),n.width(242);var o=t('<div style="overflow: hidden; text-align: center;">'),r=t('<span rel="text" class="re-dropdown-box-selector-font" style="background: #eee; float: left; padding: 8px 0; cursor: pointer; font-size: 12px; width: 50%;">'+this.lang.get("text")+"</span>"),s=t('<span rel="back" class="re-dropdown-box-selector-font" style="float: left; padding: 8px 0; cursor: pointer; font-size: 12px; width: 50%;">'+this.lang.get("highlight")+"</span>");o.append(r),o.append(s),n.append(o),this.fontcolor.buildPicker(n,"textcolor",e),this.fontcolor.buildPicker(n,"backcolor",e),r.on("mousedown",function(e){e.preventDefault(),n.find(".re-dropdown-box-selector-font").css("background","none"),n.find(".re-dropdown-box-backcolor").hide(),n.find(".re-dropdown-box-textcolor").show(),t(this).css("background","#eee")}),s.on("mousedown",function(e){e.preventDefault(),n.find(".re-dropdown-box-selector-font").css("background","none"),n.find(".re-dropdown-box-textcolor").hide(),n.find(".re-dropdown-box-backcolor").show(),t(this).css("background","#eee")})},buildPicker:function(e,i,n){for(var o=t('<div class="re-dropdown-box-'+i+'">'),r="backcolor"==i?"background-color":"color",s=n.length,a=this,l=function(e){e.preventDefault(),a.fontcolor.set(t(this).data("rule"),t(this).attr("rel"))},c=0;c<s;c++){var h=n[c],d=t('<a rel="'+h+'" data-rule="'+r+'" href="#" style="float: left; box-sizing: border-box; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 22px; height: 22px;"></a>');d.css("background-color",h),d.on("mousedown",l),o.append(d)}var u=t('<a href="#" style="display: block; clear: both; padding: 8px 5px; box-sizing: border-box; font-size: 12px; line-height: 1;"></a>').html(this.lang.get("none"));u.on("mousedown",t.proxy(function(t){t.preventDefault(),this.fontcolor.remove(r)},this)),o.append(u),e.append(o),"backcolor"==i&&o.hide()},set:function(t,e){this.inline.format("span","style",t+": "+e+";"),this.dropdown.hide()},remove:function(t){this.inline.removeStyleRule(t),this.dropdown.hide()}}}}(jQuery),function(t){t.Redactor.prototype.fontsize=function(){return{init:function(){var e=this,i={};t.each([10,11,12,14,16,18,20,24,28,30],function(t,n){i["s"+t]={title:n+"px",func:function(){e.fontsize.set(n)}}}),i.remove={title:"Remove Font Size",func:e.fontsize.reset};var n=this.button.add("fontsize","Size");this.button.setIcon(n,'<i class="re-icon-fontsize"></i>'),this.button.addDropdown(n,i)},set:function(t){this.inline.format("span","style","font-size: "+t+"px;")},reset:function(){this.inline.removeStyleRule("font-size")}}}}(jQuery),function(t){t.Redactor.prototype.table=function(){return{langs:{en:{table:"Table","insert-table":"Insert table","insert-row-above":"Insert row above","insert-row-below":"Insert row below","insert-column-left":"Insert column left","insert-column-right":"Insert column right","add-head":"Add head","delete-head":"Delete head","delete-column":"Delete column","delete-row":"Delete row","delete-table":"Delete table"},es:{table:"Tabla","insert-table":"Insertar tabla","insert-row-above":"Insertar fila encima","insert-row-below":"Insertar fila debajo","insert-column-left":"Insertar columna a la derecha","insert-column-right":"Insertar columna a la izquierda","add-head":"Añadir cabecera","delete-head":"Eliminar cabecera","delete-column":"Eliminar columna","delete-row":"Eliminar fila","delete-table":"Eliminar tabla"}},init:function(){var t={};t.insert_table={title:this.lang.get("insert-table"),func:this.table.insert,observe:{element:"table",in:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.insert_row_above={title:this.lang.get("insert-row-above"),func:this.table.addRowAbove,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.insert_row_below={title:this.lang.get("insert-row-below"),func:this.table.addRowBelow,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.insert_column_left={title:this.lang.get("insert-column-left"),func:this.table.addColumnLeft,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.insert_column_right={title:this.lang.get("insert-column-right"),func:this.table.addColumnRight,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.add_head={title:this.lang.get("add-head"),func:this.table.addHead,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.delete_head={title:this.lang.get("delete-head"),func:this.table.deleteHead,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.delete_column={title:this.lang.get("delete-column"),func:this.table.deleteColumn,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.delete_row={title:this.lang.get("delete-row"),func:this.table.deleteRow,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}},t.delete_table={title:this.lang.get("delete-table"),func:this.table.deleteTable,observe:{element:"table",out:{attr:{class:"redactor-dropdown-link-inactive","aria-disabled":!0}}}};var e=this.button.addBefore("link","table",this.lang.get("table"));this.button.setIcon(e,'<i class="re-icon-table"></i>'),this.button.addDropdown(e,t)},insert:function(){if(!this.table.getTable()){this.placeholder.hide();for(var e=t("<div>"),i=t("<table />"),n=0;n<2;n++){for(var o=t("<tr>"),r=0;r<3;r++){var s=t("<td>"+this.opts.invisibleSpace+"</td>");0===n&&0===r&&s.append(this.marker.get()),t(o).append(s)}i.append(o)}e.append(i);var a=e.html();this.buffer.set();var l=this.selection.current();0!==t(l).closest("li",this.core.editor()[0]).length?t(l).closest("ul, ol").first().after(a):(this.air.collapsed(),this.insert.html(a)),this.selection.restore(),this.core.callback("insertedTable",i)}},getTable:function(){var e=t(this.selection.current()).closest("table");return!!this.utils.isRedactorParent(e)&&(0!==e.length&&e)},restoreAfterDelete:function(t){this.selection.restore(),t.find("span.redactor-selection-marker").remove()},deleteTable:function(){var t=this.table.getTable();if(t){this.buffer.set();var e=t.next();this.opts.linebreaks||0===e.length?this.caret.after(t):this.caret.start(e),t.remove()}},deleteRow:function(){var e=this.table.getTable();if(e){var i=t(this.selection.current());this.buffer.set();var n=i.closest("tr"),o=n.prev().length?n.prev():n.next();if(o.length){var r=o.children("td, th").first();r.length&&r.prepend(this.marker.get())}n.remove(),this.table.restoreAfterDelete(e)}},deleteColumn:function(){var e=this.table.getTable();if(e){this.buffer.set();var i=t(this.selection.current()).closest("td, th")[0].cellIndex;e.find("tr").each(t.proxy(function(e,n){var o=t(n),r=i-1<0?i+1:i-1;0===e&&o.find("td, th").eq(r).prepend(this.marker.get()),o.find("td, th").eq(i).remove()},this)),this.table.restoreAfterDelete(e)}},addHead:function(){var e=this.table.getTable();if(e)if(this.buffer.set(),0===e.find("thead").length){var i=e.find("tr").first().clone();i.find("td").replaceWith(t.proxy(function(){return t("<th>").html(this.opts.invisibleSpace)},this)),$thead=t("<thead></thead>").append(i),e.prepend($thead)}else this.table.deleteHead()},deleteHead:function(){var t=this.table.getTable();if(t){var e=t.find("thead");0!==e.length&&(this.buffer.set(),e.remove())}},addRowAbove:function(){this.table.addRow("before")},addRowBelow:function(){this.table.addRow("after")},addColumnLeft:function(){this.table.addColumn("before")},addColumnRight:function(){this.table.addColumn("after")},addRow:function(e){if(this.table.getTable()){this.buffer.set();var i=t(this.selection.current()).closest("tr"),n=i.clone();n.find("th").replaceWith(function(){var e=t("<td>");return e[0].attributes=this.attributes,e.append(t(this).contents())}),n.find("td").html(this.opts.invisibleSpace),"after"===e?i.after(n):i.before(n)}},addColumn:function(e){var i=this.table.getTable();if(i){var n=0,o=t(this.selection.current());this.buffer.set();var r=o.closest("tr"),s=o.closest("td, th");r.find("td, th").each(t.proxy(function(e,i){t(i)[0]===s[0]&&(n=e)},this)),i.find("tr").each(t.proxy(function(i,o){var r=t(o).find("td, th").eq(n),s=r.clone();s.html(this.opts.invisibleSpace),"after"===e?r.after(s):r.before(s)},this))}}}}}(jQuery),function(t){t.Redactor.prototype.video=function(){return{reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,langs:{en:{video:"Video","video-html-code":"Video Embed Code or Youtube/Vimeo Link"},es:{video:"Video","video-html-code":"Código de video para enlace de Youtube/Vimeo"}},getTemplate:function(){return String()+'<div class="modal-section" id="redactor-modal-video-insert"><section><label>'+this.lang.get("video-html-code")+'</label><textarea id="redactor-insert-video-area" style="height: 160px;"></textarea></section><section><button id="redactor-modal-button-action">Insert</button><button id="redactor-modal-button-cancel">Cancel</button></section></div>'},init:function(){var t=this.button.addAfter("image","video",this.lang.get("video"));this.button.setIcon(t,'<i class="re-icon-video"></i>'),this.button.addCallback(t,this.video.show)},show:function(){this.modal.addTemplate("video",this.video.getTemplate()),this.modal.load("video",this.lang.get("video"),700),this.modal.getActionButton().text(this.lang.get("insert")).on("click",this.video.insert),this.modal.show(),this.detect.isDesktop()&&setTimeout(function(){t("#redactor-insert-video-area").focus()},1)},insert:function(){var e=t("#redactor-insert-video-area").val(),i=e.match(/<iframe|<video/gi);if(i&&0!==i.length){var n=["iframe","video"];e=e.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,e){return-1===n.indexOf(e.toLowerCase())?"":t}),this.opts.videoContainerClass=void 0===this.opts.videoContainerClass?"video-container":this.opts.videoContainerClass;var o='<div class="'+this.opts.videoContainerClass+'"><iframe style="width: 500px; height: 281px;" src="',r='" frameborder="0" allowfullscreen></iframe></div>';e=e.match(this.video.reUrlYoutube)?e.replace(this.video.reUrlYoutube,o+"//www.youtube.com/embed/$1"+r):e.match(this.video.reUrlVimeo)?e.replace(this.video.reUrlVimeo,o+"//player.vimeo.com/video/$2"+r):'<div class="'+this.opts.videoContainerClass+'">'+e+"</div>"}this.modal.close(),this.placeholder.hide(),this.buffer.set(),this.air.collapsed(),this.insert.html(e)}}}}(jQuery),function(t){t.Redactor.prototype.source=function(){return{init:function(){var e=this.button.addFirst("html","HTML");this.button.setIcon(e,'<i class="re-icon-html"></i>'),this.button.addCallback(e,this.source.toggle);this.source.$textarea=t("<textarea />"),this.source.$textarea.css({width:"100%",margin:"0",background:"#1d1d1d","box-sizing":"border-box",color:"#ccc","font-size":"15px",outline:"none",padding:"20px","line-height":"24px","font-family":'Consolas, Menlo, Monaco, "Courier New", monospace'}).hide(),"textarea"===this.opts.type?this.core.box().append(this.source.$textarea):this.core.box().after(this.source.$textarea),this.core.element().on("destroy.callback.redactor",t.proxy(function(){this.source.$textarea.remove()},this))},toggle:function(){this.source.$textarea.hasClass("open")?this.source.hide():(this.source.show(),this.source.$textarea.on("keyup.redactor-source",t.proxy(function(){var t=this.source.$textarea.val();this.core.callback("change",t)},this)))},setCaretOnShow:function(){this.source.offset=this.offset.get();t(window).scrollTop(),this.core.editor().innerWidth(),this.core.editor().innerHeight();this.source.start=0,this.source.end=0;var e=t("<div/>").append(t.parseHTML(this.core.editor().html(),document,!0)),i=e.find("span.redactor-selection-marker");if(i.length>0){var n=e.html().replace(/&amp;/g,"&");1===i.length?(this.source.start=this.utils.strpos(n,e.find("#selection-marker-1").prop("outerHTML")),this.source.end=this.source.start):2===i.length&&(this.source.start=this.utils.strpos(n,e.find("#selection-marker-1").prop("outerHTML")),this.source.end=this.utils.strpos(n,e.find("#selection-marker-2").prop("outerHTML"))-e.find("#selection-marker-1").prop("outerHTML").toString().length)}},setCaretOnHide:function(t){if(this.source.start=this.source.$textarea.get(0).selectionStart,this.source.end=this.source.$textarea.get(0).selectionEnd,this.source.start>this.source.end&&this.source.end>0){var e=this.source.end,i=this.source.start;this.source.start=e,this.source.end=i}if(this.source.start=this.source.enlargeOffset(t,this.source.start),this.source.end=this.source.enlargeOffset(t,this.source.end),t=t.substr(0,this.source.start)+this.marker.html(1)+t.substr(this.source.start),this.source.end>this.source.start){var n=this.marker.html(1).toString().length;t=t.substr(0,this.source.end+n)+this.marker.html(2)+t.substr(this.source.end+n)}return t},hide:function(){this.source.$textarea.removeClass("open").hide(),this.source.$textarea.off(".redactor-source");var t=this.source.$textarea.val();t=this.paragraphize.load(t),t=(t=this.source.setCaretOnHide(t)).replace('&amp;<span id="selection-marker-1" class="redactor-selection-marker">​</span>','<span id="selection-marker-1" class="redactor-selection-marker">​</span>&amp;'),this.code.start(t),this.button.enableAll(),this.core.editor().show().focus(),this.selection.restore(),this.placeholder.enable(),this.core.callback("visual")},show:function(){this.selection.save(),this.source.setCaretOnShow();var e=this.core.editor().height(),i=this.code.get();i=this.core.callback("source",i),this.core.editor().hide(),this.button.disableAll("html"),this.source.$textarea.val(i).height(e).addClass("open").show(),this.source.$textarea.on("keyup.redactor-source",t.proxy(function(){"textarea"===this.opts.type&&this.core.textarea().val(this.source.$textarea.val())},this)),this.marker.remove(),t(window).scrollTop(scroll),this.source.$textarea[0].setSelectionRange&&this.source.$textarea[0].setSelectionRange(this.source.start,this.source.end),this.source.$textarea[0].scrollTop=0,setTimeout(t.proxy(function(){this.source.$textarea.focus()},this),0)},enlargeOffset:function(t,e){var i=t.length,n=0;if(">"===t[e])n++;else for(var o=e;o<=i&&(n++,">"!==t[o]);o++)if("<"===t[o]||o===i){n=0;break}return e+n}}}}(jQuery),jQuery.Redactor.prototype.alignment=function(){return{langs:{en:{align:"Align","align-left":"Align Left","align-center":"Align Center","align-right":"Align Right","align-justify":"Align Justify"},es:{align:"Alinear","align-left":"Alinear a la derecha","align-center":"Alinear al centro","align-right":"Alinear a la izquierda","align-justify":"Justificar"}},init:function(){var t={};t.left={title:this.lang.get("align-left"),func:this.alignment.setLeft},t.center={title:this.lang.get("align-center"),func:this.alignment.setCenter},t.right={title:this.lang.get("align-right"),func:this.alignment.setRight},t.justify={title:this.lang.get("align-justify"),func:this.alignment.setJustify};var e=this.button.add("alignment",this.lang.get("align"));this.button.setIcon(e,'<i class="re-icon-alignment"></i>'),this.button.addDropdown(e,t)},removeAlign:function(){this.block.removeClass("text-center"),this.block.removeClass("text-right"),this.block.removeClass("text-justify")},setLeft:function(){this.buffer.set(),this.alignment.removeAlign()},setCenter:function(){this.buffer.set(),this.alignment.removeAlign(),this.block.addClass("text-center"),this.core.editor().focus()},setRight:function(){this.buffer.set(),this.alignment.removeAlign(),this.block.addClass("text-right"),this.core.editor().focus()},setJustify:function(){this.buffer.set(),this.alignment.removeAlign(),this.block.addClass("text-justify"),this.core.editor().focus()}}},function(t){t.Redactor.prototype.counter=function(){return{init:function(){void 0!==this.opts.callbacks.counter&&this.core.editor().on("keyup.redactor-plugin-counter",t.proxy(this.counter.count,this))},count:function(){var e=0,i=0,n=0,o=this.code.get().replace(/<\/(.*?)>/gi," ");if(o=(o=(o=(o=(o=o.replace(/<(.*?)>/gi,"")).replace(/\t/gi,"")).replace(/\n/gi," ")).replace(/\r/gi," ")).replace(/\u200B/g,""),""!==(o=t.trim(o))){var r=o.split(/\s+/),s=o.match(/\s/g);e=r?r.length:0,n=s?s.length:0,i=o.length}this.core.callback("counter",{words:e,characters:i,spaces:n})}}}}(jQuery),function(t){var e={};try{if(!t&&module&&module.exports){t=require("jquery");var i=require("jsdom").jsdom;t=t(i().parentWindow)}}catch(t){}!function(t,e){"use strict";var i={};e.forbiddenSequences=["0123456789","abcdefghijklmnopqrstuvwxyz","qwertyuiop","asdfghjkl","zxcvbnm","!@#$%^&*()_+"],i.wordNotEmail=function(t,e,i){return e.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)?i:0},i.wordLength=function(t,e,i){var n=e.length,o=Math.pow(n,t.rules.raisePower);return n<t.common.minChar&&(o+=i),o},i.wordSimilarToUsername=function(e,i,n){var o=t(e.common.usernameField).val();return o&&i.toLowerCase().match(o.toLowerCase())?n:0},i.wordTwoCharacterClasses=function(t,e,i){return e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)||e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)||e.match(/(.[!,@,#,$,%,\^,&,*,?,_,~])/)&&e.match(/[a-zA-Z0-9_]/)?i:0},i.wordRepetitions=function(t,e,i){return e.match(/(.)\1\1/)?i:0},i.wordSequences=function(i,n,o){var r,s=!1;return n.length>2&&(t.each(e.forbiddenSequences,function(e,i){var o=[i,i.split("").reverse().join("")];t.each(o,function(t,e){for(r=0;r<n.length-2;r+=1)e.indexOf(n.toLowerCase().substring(r,r+3))>-1&&(s=!0)})}),s)?o:0},i.wordLowercase=function(t,e,i){return e.match(/[a-z]/)&&i},i.wordUppercase=function(t,e,i){return e.match(/[A-Z]/)&&i},i.wordOneNumber=function(t,e,i){return e.match(/\d+/)&&i},i.wordThreeNumbers=function(t,e,i){return e.match(/(.*[0-9].*[0-9].*[0-9])/)&&i},i.wordOneSpecialChar=function(t,e,i){return e.match(/[!,@,#,$,%,\^,&,*,?,_,~]/)&&i},i.wordTwoSpecialChar=function(t,e,i){return e.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/)&&i},i.wordUpperLowerCombo=function(t,e,i){return e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&i},i.wordLetterNumberCombo=function(t,e,i){return e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&i},i.wordLetterNumberCharCombo=function(t,e,i){return e.match(/([a-zA-Z0-9].*[!,@,#,$,%,\^,&,*,?,_,~])|([!,@,#,$,%,\^,&,*,?,_,~].*[a-zA-Z0-9])/)&&i},e.validation=i,e.executeRules=function(i,n){var o=0;return t.each(i.rules.activated,function(r,s){if(s){var a,l,c=i.rules.scores[r],h=e.validation[r];t.isFunction(h)||(h=i.rules.extra[r]),t.isFunction(h)&&((a=h(i,n,c))&&(o+=a),(a<0||!t.isNumeric(a)&&!a)&&(l=i.ui.spanError(i,r)).length>0&&i.instances.errors.push(l))}}),o}}(t,e);try{module&&module.exports&&(module.exports=e)}catch(t){}var n={common:{}};n.common.minChar=6,n.common.usernameField="#username",n.common.userInputs=[],n.common.onLoad=void 0,n.common.onKeyUp=void 0,n.common.zxcvbn=!1,n.common.zxcvbnTerms=[],n.common.debug=!1,n.rules={},n.rules.extra={},n.rules.scores={wordNotEmail:-100,wordLength:-50,wordSimilarToUsername:-100,wordSequences:-50,wordTwoCharacterClasses:2,wordRepetitions:-25,wordLowercase:1,wordUppercase:3,wordOneNumber:3,wordThreeNumbers:5,wordOneSpecialChar:3,wordTwoSpecialChar:5,wordUpperLowerCombo:2,wordLetterNumberCombo:2,wordLetterNumberCharCombo:2},n.rules.activated={wordNotEmail:!0,wordLength:!0,wordSimilarToUsername:!0,wordSequences:!0,wordTwoCharacterClasses:!1,wordRepetitions:!1,wordLowercase:!0,wordUppercase:!0,wordOneNumber:!0,wordThreeNumbers:!0,wordOneSpecialChar:!0,wordTwoSpecialChar:!0,wordUpperLowerCombo:!0,wordLetterNumberCombo:!0,wordLetterNumberCharCombo:!0},n.rules.raisePower=1.4,n.ui={},n.ui.bootstrap2=!1,n.ui.showProgressBar=!0,n.ui.showPopover=!1,n.ui.showStatus=!1,n.ui.spanError=function(t,e){"use strict";var i=t.ui.errorMessages[e];return i?'<span style="color: #d52929">'+i+"</span>":""},n.ui.popoverError=function(e){"use strict";var i="<div>Errors:<ul class='error-list' style='margin-bottom: 0;'>";return t.each(e,function(t,e){i+="<li>"+e+"</li>"}),i+="</ul></div>"},n.ui.errorMessages={wordLength:"Your password is too short",wordNotEmail:"Do not use your email as your password",wordSimilarToUsername:"Your password cannot contain your username",wordTwoCharacterClasses:"Use different character classes",wordRepetitions:"Too many repetitions",wordSequences:"Your password contains sequences"},n.ui.verdicts=["Weak","Normal","Medium","Strong","Very Strong"],n.ui.showVerdicts=!0,n.ui.showVerdictsInsideProgressBar=!1,n.ui.useVerdictCssClass=!1,n.ui.showErrors=!1,n.ui.container=void 0,n.ui.viewports={progress:void 0,verdict:void 0,errors:void 0},n.ui.scores=[14,26,38,50];var o={};!function(t,e){"use strict";var i=["danger","warning","success"],n=["error","warning","success"];e.getContainer=function(e,i){var n;return(n=t(e.ui.container))&&1===n.length||(n=i.parent()),n},e.findElement=function(t,e,i){return e?t.find(e).find(i):t.find(i)},e.getUIElements=function(t,i){var n,o;return t.instances.viewports?t.instances.viewports:(n=e.getContainer(t,i),(o={}).$progressbar=e.findElement(n,t.ui.viewports.progress,"div.progress"),t.ui.showVerdictsInsideProgressBar&&(o.$verdict=o.$progressbar.find("span.password-verdict")),t.ui.showPopover||(t.ui.showVerdictsInsideProgressBar||(o.$verdict=e.findElement(n,t.ui.viewports.verdict,"span.password-verdict")),o.$errors=e.findElement(n,t.ui.viewports.errors,"ul.error-list")),t.instances.viewports=o,o)},e.initProgressBar=function(i,n){var o=e.getContainer(i,n),r="<div class='progress'><div class='";i.ui.bootstrap2||(r+="progress-"),r+="bar'>",i.ui.showVerdictsInsideProgressBar&&(r+="<span class='password-verdict'></span>"),r+="</div></div>",i.ui.viewports.progress?o.find(i.ui.viewports.progress).append(r):t(r).insertAfter(n)},e.initHelper=function(i,n,o,r){var s=e.getContainer(i,n);r?s.find(r).append(o):t(o).insertAfter(n)},e.initVerdict=function(t,i){e.initHelper(t,i,"<span class='password-verdict'></span>",t.ui.viewports.verdict)},e.initErrorList=function(t,i){e.initHelper(t,i,"<ul class='error-list'></ul>",t.ui.viewports.errors)},e.initPopover=function(t,e){e.popover("destroy"),e.popover({html:!0,placement:"bottom",trigger:"manual",content:" "})},e.initUI=function(t,i){t.ui.showPopover?e.initPopover(t,i):(t.ui.showErrors&&e.initErrorList(t,i),t.ui.showVerdicts&&!t.ui.showVerdictsInsideProgressBar&&e.initVerdict(t,i)),t.ui.showProgressBar&&e.initProgressBar(t,i)},e.possibleProgressBarClasses=["danger","warning","success"],e.updateProgressBar=function(n,o,r,s){var a=e.getUIElements(n,o).$progressbar,l=a.find(".progress-bar"),c="progress-";n.ui.bootstrap2&&(l=a.find(".bar"),c=""),t.each(e.possibleProgressBarClasses,function(t,e){l.removeClass(c+"bar-"+e)}),l.addClass(c+"bar-"+i[r]),l.css("width",s+"%")},e.updateVerdict=function(t,n,o,r){var s=e.getUIElements(t,n).$verdict;s.removeClass(i.join(" ")),o>-1&&s.addClass(i[o]),s.html(r)},e.updateErrors=function(i,n){var o=e.getUIElements(i,n).$errors,r="";t.each(i.instances.errors,function(t,e){r+="<li>"+e+"</li>"}),o.html(r)},e.updatePopover=function(t,e,i){var n=e.data("bs.popover"),o="",r=!0;t.ui.showVerdicts&&!t.ui.showVerdictsInsideProgressBar&&i.length>0&&(o="<h5><span class='password-verdict'>"+i+"</span></h5>",r=!1),t.ui.showErrors&&(t.instances.errors.length>0&&(r=!1),o+=t.ui.popoverError(t.instances.errors)),r?e.popover("hide"):(t.ui.bootstrap2&&(n=e.data("popover")),n.$arrow&&n.$arrow.parents("body").length>0?e.find("+ .popover .popover-content").html(o):(n.options.content=o,e.popover("show")))},e.updateFieldStatus=function(e,i,o){var r=e.ui.bootstrap2?".control-group":".form-group",s=i.parents(r).first();t.each(n,function(t,i){e.ui.bootstrap2||(i="has-"+i),s.removeClass(i)}),o=n[o],e.ui.bootstrap2||(o="has-"+o),s.addClass(o)},e.percentage=function(t,e){var i=Math.floor(100*t/e);return i=(i=i<0?1:i)>100?100:i},e.getVerdictAndCssClass=function(t,e){var i,n,o;return e<=0?(i=0,o=-1,n=t.ui.verdicts[0]):e<t.ui.scores[0]?(i=0,o=0,n=t.ui.verdicts[0]):e<t.ui.scores[1]?(i=0,o=1,n=t.ui.verdicts[1]):e<t.ui.scores[2]?(i=1,o=2,n=t.ui.verdicts[2]):e<t.ui.scores[3]?(i=1,o=3,n=t.ui.verdicts[3]):(i=2,o=4,n=t.ui.verdicts[4]),[n,i,o]},e.updateUI=function(t,i,n){var o,r,s,a;o=e.getVerdictAndCssClass(t,n),s=0===n?"":o[0],o=o[1],a=t.ui.useVerdictCssClass?o:-1,t.ui.showProgressBar&&(r=e.percentage(n,t.ui.scores[3]),e.updateProgressBar(t,i,o,r),t.ui.showVerdictsInsideProgressBar&&e.updateVerdict(t,i,a,s)),t.ui.showStatus&&e.updateFieldStatus(t,i,o),t.ui.showPopover?e.updatePopover(t,i,s):(t.ui.showVerdicts&&!t.ui.showVerdictsInsideProgressBar&&e.updateVerdict(t,i,a,s),t.ui.showErrors&&e.updateErrors(t,i))}}(t,o);!function(t,i){"use strict";var r,s;r=function(i){var n,r,s,a,l=t(i.target),c=l.data("pwstrength-bootstrap"),h=l.val();void 0!==c&&(c.instances.errors=[],0===h.length?a=0:c.common.zxcvbn?(n=[],t.each(c.common.userInputs.concat([c.common.usernameField]),function(e,i){var o=t(i).val();o&&n.push(o)}),n=n.concat(c.common.zxcvbnTerms),a=zxcvbn(h,n).entropy):a=e.executeRules(c,h),o.updateUI(c,l,a),s=(r=o.getVerdictAndCssClass(c,a))[2],r=r[0],c.common.debug&&console.log(a+" - "+r),t.isFunction(c.common.onKeyUp)&&c.common.onKeyUp(i,{score:a,verdictText:r,verdictLevel:s}))},i.init=function(e){return this.each(function(i,s){var a=t.extend(!0,{},n),l=t.extend(!0,a,e),c=t(s);l.instances={},c.data("pwstrength-bootstrap",l),c.on("keyup",r),c.on("change",r),c.on("onpaste",r),o.initUI(l,c),t.trim(c.val())&&c.trigger("keyup"),t.isFunction(l.common.onLoad)&&l.common.onLoad()}),this},i.destroy=function(){this.each(function(e,i){var n=t(i),r=n.data("pwstrength-bootstrap"),s=o.getUIElements(r,n);s.$progressbar.remove(),s.$verdict.remove(),s.$errors.remove(),n.removeData("pwstrength-bootstrap")})},i.forceUpdate=function(){this.each(function(t,e){r({target:e})})},i.addRule=function(e,i,n,o){this.each(function(r,s){var a=t(s).data("pwstrength-bootstrap");a.rules.activated[e]=o,a.rules.scores[e]=n,a.rules.extra[e]=i})},s=function(e,i,n){this.each(function(o,r){t(r).data("pwstrength-bootstrap").rules[i][e]=n})},i.changeScore=function(t,e){s.call(this,t,"scores",e)},i.ruleActive=function(t,e){s.call(this,t,"activated",e)},t.fn.pwstrength=function(e){var n;return i[e]?n=i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.pwstrength-bootstrap"):n=i.init.apply(this,arguments),n}}(t,{})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(this.length){var i=t.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n,o;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),o=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),void 0!==o&&o)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n,o,r,s,a,l,c=this[0];if(e)switch(o=(n=t.data(c.form,"validator").settings).rules,r=t.validator.staticRules(c),e){case"add":t.extend(r,t.validator.normalizeRule(i)),delete r.messages,o[c.name]=r,i.messages&&(n.messages[c.name]=t.extend(n.messages[c.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),function(e,i){l[i]=r[i],delete r[i],"required"===i&&t(c).removeAttr("aria-required")}),l):(delete o[c.name],r)}return(s=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c)).required&&(a=s.required,delete s.required,s=t.extend({required:a},s),t(c).attr("aria-required","true")),s.remote&&(a=s.remote,delete s.remote,s=t.extend(s,{remote:a})),s}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e,i=this.groups={};function n(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,""),o=i.settings;o[n]&&!this.is(o.ignore)&&o[n].call(i,this[0],e)}t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),e=this.settings.rules,t.each(e,function(i,n){e[i]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",n).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",n),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),n=this.validationTargetFor(i),o=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=t(n),(o=!1!==this.check(n))?delete this.invalid[n.name]:this.invalid[n.name]=!0),t(e).attr("aria-invalid",!o),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),o},showErrors:function(e){if(e){for(var i in t.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n=t(e),o=e.type;return"radio"===o||"checkbox"===o?t("input[name='"+e.name+"']:checked").val():"number"===o&&void 0!==e.validity?!e.validity.badInput&&n.val():"string"==typeof(i=n.val())?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,o,r=t(e).rules(),s=t.map(r,function(t,e){return e}).length,a=!1,l=this.elementValue(e);for(n in r){o={method:n,parameters:r[n]};try{if("dependency-mismatch"===(i=t.validator.methods[n].call(this,l,e,o.parameters))&&1===s){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",t),t}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),o=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):o.test(n)&&(n=t.validator.format(n.replace(o,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e,method:i.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,o,r,s=this.errorsFor(e),a=this.idOrName(e),l=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(n=s=t("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+a+"']").length&&(r=s.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+r+"\\b"))||(l+=" "+r):l=r,t(e).attr("aria-describedby",l),(o=this.groups[e.name])&&t.each(this.groups,function(e,i){i===o&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e),n=t(e).attr("aria-describedby"),o="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(o=o+", #"+n.replace(/\s+/g,", #")),this.errors().filter(o)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,i){return!!t(e,i.form).length},function:function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,n,o={},r=t(e),s=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(""===(n=e.getAttribute(i))&&(n=!0),n=!!n):n=r.attr(i),/min|max/.test(i)&&(null===s||/number|range|text/.test(s))&&(n=Number(n)),n||0===n?o[i]=n:s===i&&"range"!==s&&(o[i]=!0);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(e){var i,n,o={},r=t(e);for(i in t.validator.methods)void 0!==(n=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(o[i]=n);return o},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,o){if(!1!==o){if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!t(o.depends,i.form).length;break;case"function":r=o.depends.call(i,i)}r?e[n]=void 0===o.param||o.param:delete e[n]}}else delete e[n]}),t.each(e,function(n,o){e[n]=t.isFunction(o)?o(i):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=t(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,o=0,r=0,s=!1;if((t=t.replace(/\D/g,"")).length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)n=t.charAt(i),r=parseInt(n,10),s&&(r*=2)>9&&(r-=9),o+=r,s=!s;return o%10==0},minlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||o>=n},maxlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||o<=n},rangelength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||o>=n[0]&&o<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var o=t(n);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===o.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var o,r,s=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===e?s.valid:(s.old=e,o=this,this.startRequest(i),(r={})[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,context:o.currentForm,success:function(n){var r,a,l,c=!0===n||"true"===n;o.settings.messages[i.name].remote=s.originalMessage,c?(l=o.formSubmitted,o.prepareElement(i),o.formSubmitted=l,o.successList.push(i),delete o.invalid[i.name],o.showErrors()):(r={},a=n||o.defaultMessage(i,"remote"),r[i.name]=s.message=t.isFunction(a)?a(e):a,o.invalid[i.name]=!0,o.showErrors(r)),s.valid=c,o.stopRequest(i,c)}},n)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,n){var o=t.port;"abort"===t.mode&&(i[o]&&i[o].abort(),i[o]=n)}):(e=t.ajax,t.ajax=function(n){var o=("mode"in n?n:t.ajaxSettings).mode,r=("port"in n?n:t.ajaxSettings).port;return"abort"===o?(i[r]&&i[r].abort(),i[r]=e.apply(this,arguments),i[r]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var o=t(i.target);if(o.is(e))return n.apply(o,arguments)})}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],t):t(jQuery)}(function(t){!function(){function e(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}t.validator.addMethod("maxWords",function(t,i,n){return this.optional(i)||e(t).match(/\b\w+\b/g).length<=n},t.validator.format("Please enter {0} words or less.")),t.validator.addMethod("minWords",function(t,i,n){return this.optional(i)||e(t).match(/\b\w+\b/g).length>=n},t.validator.format("Please enter at least {0} words.")),t.validator.addMethod("rangeWords",function(t,i,n){var o=e(t),r=/\b\w+\b/g;return this.optional(i)||o.match(r).length>=n[0]&&o.match(r).length<=n[1]},t.validator.format("Please enter between {0} and {1} words."))}(),t.validator.addMethod("accept",function(e,i,n){var o,r="string"==typeof n?n.replace(/\s/g,"").replace(/,/g,"|"):"image/*",s=this.optional(i);if(s)return s;if("file"===t(i).attr("type")&&(r=r.replace(/\*/g,".*"),i.files&&i.files.length))for(o=0;o<i.files.length;o++)if(!i.files[o].type.match(new RegExp(".?("+r+")$","i")))return!1;return!0},t.validator.format("Please enter a value with a valid mimetype.")),t.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),t.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;var i,n=t.replace(/ /g,""),o=0,r=n.length;for(i=0;i<r;i++)o+=(r-i)*n.substring(i,i+1);return o%11==0},"Please specify a valid bank account number"),t.validator.addMethod("bankorgiroaccountNL",function(e,i){return this.optional(i)||t.validator.methods.bankaccountNL.call(this,e,i)||t.validator.methods.giroaccountNL.call(this,e,i)},"Please specify a valid bank or giro account number"),t.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t)},"Please specify a valid BIC code"),t.validator.addMethod("cifES",function(t){"use strict";var e,i,n,o,r,s,a=[];if(!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(n=0;n<9;n++)a[n]=parseInt(t.charAt(n),10);for(i=a[2]+a[4]+a[6],o=1;o<8;o+=2)s=(r=(2*a[o]).toString()).charAt(1),i+=parseInt(r.charAt(0),10)+(""===s?0:parseInt(s,10));return!!/^[ABCDEFGHJNPQRSUVW]{1}/.test(t)&&(i+="",t+=e=10-parseInt(i.charAt(i.length-1),10),a[8].toString()===String.fromCharCode(64+e)||a[8].toString()===t.charAt(t.length-1))},"Please specify a valid CIF number."),t.validator.addMethod("creditcardtypes",function(t,e,i){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var n=0;return i.mastercard&&(n|=1),i.visa&&(n|=2),i.amex&&(n|=4),i.dinersclub&&(n|=8),i.enroute&&(n|=16),i.discover&&(n|=32),i.jcb&&(n|=64),i.unknown&&(n|=128),i.all&&(n=255),1&n&&/^(5[12345])/.test(t)?16===t.length:2&n&&/^(4)/.test(t)?16===t.length:4&n&&/^(3[47])/.test(t)?15===t.length:8&n&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&n&&/^(2(014|149))/.test(t)?15===t.length:32&n&&/^(6011)/.test(t)?16===t.length:64&n&&/^(3)/.test(t)?16===t.length:64&n&&/^(2131|1800)/.test(t)?15===t.length:!!(128&n)},"Please enter a valid credit card number."),t.validator.addMethod("currency",function(t,e,i){var n,o="string"==typeof i,r=o?i:i[0],s=!!o||i[1];return r=r.replace(/,/g,""),n="^["+(r=s?r+"]":r+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",n=new RegExp(n),this.optional(e)||n.test(t)},"Please specify a valid currency"),t.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},"Please enter a correct date"),t.validator.addMethod("dateITA",function(t,e){var i,n,o,r,s,a=!1;return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)?(i=t.split("/"),n=parseInt(i[0],10),o=parseInt(i[1],10),r=parseInt(i[2],10),a=(s=new Date(r,o-1,n,12,0,0,0)).getUTCFullYear()===r&&s.getUTCMonth()===o-1&&s.getUTCDate()===n):a=!1,this.optional(e)||a},"Please enter a correct date"),t.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},"Please enter a correct date"),t.validator.addMethod("extension",function(t,e,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+i+")$","i"))},t.validator.format("Please enter a value with a valid extension.")),t.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),t.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var i,n,o,r,s,a=t.replace(/ /g,"").toUpperCase(),l="",c=!0,h="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(a))return!1;if(void 0!==(o={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[a.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+o+"$","").test(a))return!1;for(i=a.substring(4,a.length)+a.substring(0,4),r=0;r<i.length;r++)"0"!==(n=i.charAt(r))&&(c=!1),c||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n));for(s=0;s<l.length;s++)h=(""+h+l.charAt(s))%97;return 1===h},"Please specify a valid IBAN"),t.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),t.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),t.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),t.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),t.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),t.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),t.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),t.validator.addMethod("nieES",function(t){"use strict";return!!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[T]{1}/.test(t)?t[8]===/^[T]{1}[A-Z0-9]{8}$/.test(t):!!/^[XYZ]{1}/.test(t)&&t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23))},"Please specify a valid NIE number."),t.validator.addMethod("nifES",function(t){"use strict";return!!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):!!/^[KLM]{1}/.test(t)&&t[8]===String.fromCharCode(64))},"Please specify a valid NIF number."),t.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),t.validator.addMethod("pattern",function(t,e,i){return!!this.optional(e)||("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(t))},"Invalid format."),t.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),t.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),t.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),t.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),t.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP válido."),t.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),t.validator.addMethod("require_from_group",function(e,i,n){var o=t(n[1],i.form),r=o.eq(0),s=r.data("valid_req_grp")?r.data("valid_req_grp"):t.extend({},this),a=o.filter(function(){return s.elementValue(this)}).length>=n[0];return r.data("valid_req_grp",s),t(i).data("being_validated")||(o.data("being_validated",!0),o.each(function(){s.element(this)}),o.data("being_validated",!1)),a},t.validator.format("Please fill at least {0} of these fields.")),t.validator.addMethod("skip_or_fill_minimum",function(e,i,n){var o=t(n[1],i.form),r=o.eq(0),s=r.data("valid_skip")?r.data("valid_skip"):t.extend({},this),a=o.filter(function(){return s.elementValue(this)}).length,l=0===a||a>=n[0];return r.data("valid_skip",s),t(i).data("being_validated")||(o.data("being_validated",!0),o.each(function(){s.element(this)}),o.data("being_validated",!1)),l},t.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(t,e,i){var n,o=void 0===i,r=!o&&void 0!==i.caseSensitive&&i.caseSensitive,s=!o&&void 0!==i.includeTerritories&&i.includeTerritories,a=!o&&void 0!==i.includeMilitary&&i.includeMilitary;return n=s||a?s&&a?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":s?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",n=r?new RegExp(n):new RegExp(n,"i"),this.optional(e)||n.test(t)},"Please specify a valid state"),t.validator.addMethod("strippedminlength",function(e,i,n){return t(e).text().length>=n},t.validator.format("Please enter at least {0} characters")),t.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),t.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),t.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},t.validator.messages.url),t.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,i,n,o,r,s,a=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],c=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],h=0;for(e=0;e<17;e++){if(o=c[e],n=t.slice(e,e+1),8===e&&(s=n),isNaN(n)){for(i=0;i<a.length;i++)if(n.toUpperCase()===a[i]){n=l[i],n*=o,isNaN(s)&&8===i&&(s=a[i]);break}}else n*=o;h+=n}return 10===(r=h%11)&&(r="X"),r===s},"The specified vehicle identification number (VIN) is invalid."),t.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),t.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")});var DateFormatter,hexcase=0,b64pad="",chrsz=8;function hex_md5(t){return binl2hex(core_md5(str2binl(t),t.length*chrsz))}function b64_md5(t){return binl2b64(core_md5(str2binl(t),t.length*chrsz))}function str_md5(t){return binl2str(core_md5(str2binl(t),t.length*chrsz))}function hex_hmac_md5(t,e){return binl2hex(core_hmac_md5(t,e))}function b64_hmac_md5(t,e){return binl2b64(core_hmac_md5(t,e))}function str_hmac_md5(t,e){return binl2str(core_hmac_md5(t,e))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,n=-271733879,o=-1732584194,r=271733878,s=0;s<t.length;s+=16){var a=i,l=n,c=o,h=r;i=md5_ff(i,n,o,r,t[s+0],7,-680876936),r=md5_ff(r,i,n,o,t[s+1],12,-389564586),o=md5_ff(o,r,i,n,t[s+2],17,606105819),n=md5_ff(n,o,r,i,t[s+3],22,-1044525330),i=md5_ff(i,n,o,r,t[s+4],7,-176418897),r=md5_ff(r,i,n,o,t[s+5],12,1200080426),o=md5_ff(o,r,i,n,t[s+6],17,-1473231341),n=md5_ff(n,o,r,i,t[s+7],22,-45705983),i=md5_ff(i,n,o,r,t[s+8],7,1770035416),r=md5_ff(r,i,n,o,t[s+9],12,-1958414417),o=md5_ff(o,r,i,n,t[s+10],17,-42063),n=md5_ff(n,o,r,i,t[s+11],22,-1990404162),i=md5_ff(i,n,o,r,t[s+12],7,1804603682),r=md5_ff(r,i,n,o,t[s+13],12,-40341101),o=md5_ff(o,r,i,n,t[s+14],17,-1502002290),i=md5_gg(i,n=md5_ff(n,o,r,i,t[s+15],22,1236535329),o,r,t[s+1],5,-165796510),r=md5_gg(r,i,n,o,t[s+6],9,-1069501632),o=md5_gg(o,r,i,n,t[s+11],14,643717713),n=md5_gg(n,o,r,i,t[s+0],20,-373897302),i=md5_gg(i,n,o,r,t[s+5],5,-701558691),r=md5_gg(r,i,n,o,t[s+10],9,38016083),o=md5_gg(o,r,i,n,t[s+15],14,-660478335),n=md5_gg(n,o,r,i,t[s+4],20,-405537848),i=md5_gg(i,n,o,r,t[s+9],5,568446438),r=md5_gg(r,i,n,o,t[s+14],9,-1019803690),o=md5_gg(o,r,i,n,t[s+3],14,-187363961),n=md5_gg(n,o,r,i,t[s+8],20,1163531501),i=md5_gg(i,n,o,r,t[s+13],5,-1444681467),r=md5_gg(r,i,n,o,t[s+2],9,-51403784),o=md5_gg(o,r,i,n,t[s+7],14,1735328473),i=md5_hh(i,n=md5_gg(n,o,r,i,t[s+12],20,-1926607734),o,r,t[s+5],4,-378558),r=md5_hh(r,i,n,o,t[s+8],11,-2022574463),o=md5_hh(o,r,i,n,t[s+11],16,1839030562),n=md5_hh(n,o,r,i,t[s+14],23,-35309556),i=md5_hh(i,n,o,r,t[s+1],4,-1530992060),r=md5_hh(r,i,n,o,t[s+4],11,1272893353),o=md5_hh(o,r,i,n,t[s+7],16,-155497632),n=md5_hh(n,o,r,i,t[s+10],23,-1094730640),i=md5_hh(i,n,o,r,t[s+13],4,681279174),r=md5_hh(r,i,n,o,t[s+0],11,-358537222),o=md5_hh(o,r,i,n,t[s+3],16,-722521979),n=md5_hh(n,o,r,i,t[s+6],23,76029189),i=md5_hh(i,n,o,r,t[s+9],4,-640364487),r=md5_hh(r,i,n,o,t[s+12],11,-421815835),o=md5_hh(o,r,i,n,t[s+15],16,530742520),i=md5_ii(i,n=md5_hh(n,o,r,i,t[s+2],23,-995338651),o,r,t[s+0],6,-198630844),r=md5_ii(r,i,n,o,t[s+7],10,1126891415),o=md5_ii(o,r,i,n,t[s+14],15,-1416354905),n=md5_ii(n,o,r,i,t[s+5],21,-57434055),i=md5_ii(i,n,o,r,t[s+12],6,1700485571),r=md5_ii(r,i,n,o,t[s+3],10,-1894986606),o=md5_ii(o,r,i,n,t[s+10],15,-1051523),n=md5_ii(n,o,r,i,t[s+1],21,-2054922799),i=md5_ii(i,n,o,r,t[s+8],6,1873313359),r=md5_ii(r,i,n,o,t[s+15],10,-30611744),o=md5_ii(o,r,i,n,t[s+6],15,-1560198380),n=md5_ii(n,o,r,i,t[s+13],21,1309151649),i=md5_ii(i,n,o,r,t[s+4],6,-145523070),r=md5_ii(r,i,n,o,t[s+11],10,-1120210379),o=md5_ii(o,r,i,n,t[s+2],15,718787259),n=md5_ii(n,o,r,i,t[s+9],21,-343485551),i=safe_add(i,a),n=safe_add(n,l),o=safe_add(o,c),r=safe_add(r,h)}return Array(i,n,o,r)}function md5_cmn(t,e,i,n,o,r){return safe_add(bit_rol(safe_add(safe_add(e,t),safe_add(n,r)),o),i)}function md5_ff(t,e,i,n,o,r,s){return md5_cmn(e&i|~e&n,t,e,o,r,s)}function md5_gg(t,e,i,n,o,r,s){return md5_cmn(e&n|i&~n,t,e,o,r,s)}function md5_hh(t,e,i,n,o,r,s){return md5_cmn(e^i^n,t,e,o,r,s)}function md5_ii(t,e,i,n,o,r,s){return md5_cmn(i^(e|~n),t,e,o,r,s)}function core_hmac_md5(t,e){var i=str2binl(t);i.length>16&&(i=core_md5(i,t.length*chrsz));for(var n=Array(16),o=Array(16),r=0;r<16;r++)n[r]=909522486^i[r],o[r]=1549556828^i[r];var s=core_md5(n.concat(str2binl(e)),512+e.length*chrsz);return core_md5(o.concat(s),640)}function safe_add(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function bit_rol(t,e){return t<<e|t>>>32-e}function str2binl(t){for(var e=Array(),i=(1<<chrsz)-1,n=0;n<t.length*chrsz;n+=chrsz)e[n>>5]|=(t.charCodeAt(n/chrsz)&i)<<n%32;return e}function binl2str(t){for(var e="",i=(1<<chrsz)-1,n=0;n<32*t.length;n+=chrsz)e+=String.fromCharCode(t[n>>5]>>>n%32&i);return e}function binl2hex(t){for(var e=hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return i}function binl2b64(t){for(var e="",i=0;i<4*t.length;i+=3)for(var n=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255,o=0;o<4;o++)8*i+6*o>32*t.length?e+=b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6*(3-o)&63);return e}!function(t){t.gravatar=function(e,i){var n=t.extend({size:"",rating:"",image:"",secure:!1,classes:""},i),o=n.secure?"https://secure.gravatar.com/avatar/":"http://www.gravatar.com/avatar/";return t('<img src="'+o+hex_md5(e)+".jpg?"+(n.size?"s="+n.size+"&":"")+(n.rating?"r="+n.rating+"&":"")+(n.image?"d="+encodeURIComponent(n.image):"")+'"'+(n.classes?' class="'+n.classes+'"':"")+" />").bind("error",function(){t(this).remove()})}}(jQuery),function(t,e,i){var n;n=function(i){"use strict";var n,o,r,s,a,l,c,h,d,u,p,f,g,m,v,b,y,w,x,_,C,S,D,k,T,E,R,I,M,A={},F=0;n=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:void 0,chartRangeMax:void 0,chartRangeMinX:void 0,chartRangeMaxX:void 0,tooltipFormat:new r('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:void 0,nullColor:void 0,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,colorMap:void 0,tooltipFormat:new r('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new r('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0,chartRangeClip:!1,tooltipFormat:new r("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:void 0,tooltipFormat:new r("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new r('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:void 0,targetColor:"#4a2",chartRangeMax:void 0,chartRangeMin:void 0,tooltipFormat:new r("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},o=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=i.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&((e=Array.prototype.slice.call(arguments,1,-1)).unshift(t.prototype),i.extend.apply(i,e))):t.prototype=arguments[0],t.prototype.cls=t,t},i.SPFormatClass=r=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var n,o,r,s,a,l=this,c=t;return this.format.replace(this.fre,function(){return o=arguments[1],r=arguments[3],(n=l.precre.exec(o))?(a=n[2],o=n[1]):a=!1,void 0===(s=c[o])?"":r&&e&&e[r]?e[r].get?e[r].get(s)||s:e[r][s]||s:(d(s)&&(s=i.get("numberFormatter")?i.get("numberFormatter")(s):g(s,a,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),s)})}}),i.spformat=function(t,e){return new r(t,e)},s=function(t,e,i){return t<e?e:t>i?i:t},a=function(t,i){var n;return 2===i?(n=e.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*i+i)/4)%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]:(n=(t.length*i+2)/4)%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]},l=function(t){var e;switch(t){case"undefined":t=void 0;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:t==(e=parseFloat(t))&&(t=e)}return t},c=function(t){var e,i=[];for(e=t.length;e--;)i[e]=l(t[e]);return i},h=function(t,e){var i,n,o=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&o.push(t[i]);return o},d=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=function(t,e,n,o,r){var s,a;for(t=(!1===e?parseFloat(t).toString():t.toFixed(e)).split(""),(s=(s=i.inArray(".",t))<0?t.length:s)<t.length&&(t[s]=r),a=s-n;a>0;a-=n)t.splice(a,0,o);return t.join("")},u=function(t,e,i){var n;for(n=e.length;n--;)if((!i||null!==e[n])&&e[n]!==t)return!1;return!0},f=function(t){return i.isArray(t)?t:[t]},p=function(e){var i;t.createStyleSheet?t.createStyleSheet().cssText=e:((i=t.createElement("style")).type="text/css",t.getElementsByTagName("head")[0].appendChild(i),i["string"==typeof t.body.style.WebkitAppearance?"innerText":"innerHTML"]=e)},i.fn.simpledraw=function(e,n,o,r){var s,a;if(o&&(s=this.data("_jqs_vcanvas")))return s;if(!1===i.fn.sparkline.canvas)return!1;if(void 0===i.fn.sparkline.canvas){var l=t.createElement("canvas");if(l.getContext&&l.getContext("2d"))i.fn.sparkline.canvas=function(t,e,i,n){return new R(t,e,i,n)};else{if(!t.namespaces||t.namespaces.v)return i.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),i.fn.sparkline.canvas=function(t,e,i,n){return new I(t,e,i)}}}return void 0===e&&(e=i(this).innerWidth()),void 0===n&&(n=i(this).innerHeight()),s=i.fn.sparkline.canvas(e,n,this,r),(a=i(this).data("_jqs_mhandler"))&&a.registerCanvas(s),s},i.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},i.RangeMapClass=m=o({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&((i=e.split(":"))[0]=0===i[0].length?-1/0:parseFloat(i[0]),i[1]=0===i[1].length?1/0:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e,i,n,o=this.rangelist;if(void 0!==(n=this.map[t]))return n;if(o)for(e=o.length;e--;)if((i=o[e])[0]<=t&&i[1]>=t)return i[2]}}),i.range_map=function(t){return new m(t)},v=o({init:function(t,e){var n=i(t);this.$el=n,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=i(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(i.proxy(this.mouseenter,this)),e.mouseleave(i.proxy(this.mouseleave,this)),e.click(i.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=void 0)},mouseclick:function(t){var e=i.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){i(t.body).unbind("mousemove.jqs"),i(t.body).bind("mousemove.jqs",i.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new b(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){i(t.body).unbind("mousemove.jqs");var e,n=this.splist,o=n.length,r=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),e=0;e<o;e++)n[e].clearRegionHighlight()&&(r=!0);r&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,n,o,r=this.splist,s=r.length,a=!1,l=this.$canvas.offset(),c=this.currentPageX-l.left,h=this.currentPageY-l.top;if(this.over){for(e=0;e<s;e++)(n=r[e].setRegionHighlight(this.currentEl,c,h))&&(a=!0);if(a){if((o=i.Event("sparklineRegionChange")).sparklines=this.splist,this.$el.trigger(o),this.tooltip){for(t="",e=0;e<s;e++)t+=r[e].getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===n&&this.mouseleave()}}}),b=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var n,o=e.get("tooltipClassname","jqstooltip"),r=this.sizeStyle;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),i("#jqssizetip").remove(),i("#jqstooltip").remove(),this.sizetip=i("<div/>",{id:"jqssizetip",style:r,class:o}),this.tooltip=i("<div/>",{id:"jqstooltip",class:o}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,i(window).unbind("resize.jqs scroll.jqs"),i(window).bind("resize.jqs scroll.jqs",i.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=i(window).scrollTop(),this.scrollLeft=i(window).scrollLeft(),this.scrollRight=this.scrollLeft+i(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t)return this.tooltip.css("visibility","hidden"),void(this.hidden=!0);this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(void 0===t){if(void 0===this.mousex)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=void 0,i(window).unbind("resize.jqs scroll.jqs")}}),i(function(){p('.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}')}),M=[],i.fn.sparkline=function(e,n){return this.each(function(){var o,r,s=new i.fn.sparkline.options(this,n),a=i(this);if(o=function(){var n,o,r,l,c,h,d;"html"===e||void 0===e?(null==(d=this.getAttribute(s.get("tagValuesAttribute")))&&(d=a.html()),n=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):n=e,o="auto"===s.get("width")?n.length*s.get("defaultPixelsPerValue"):s.get("width"),"auto"===s.get("height")?s.get("composite")&&i.data(this,"_jqs_vcanvas")||((l=t.createElement("span")).innerHTML="a",a.html(l),r=i(l).innerHeight()||i(l).height(),i(l).remove(),l=null):r=s.get("height"),s.get("disableInteraction")?c=!1:(c=i.data(this,"_jqs_mhandler"))?s.get("composite")||c.reset():(c=new v(this,s),i.data(this,"_jqs_mhandler",c)),!s.get("composite")||i.data(this,"_jqs_vcanvas")?((h=new(i.fn.sparkline[s.get("type")])(this,n,s,o,r)).render(),c&&c.registerSparkline(h)):i.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),i.data(this,"_jqs_errnotify",!0))},i(this).html()&&!s.get("disableHiddenCheck")&&i(this).is(":hidden")||!i(this).parents("body").length){if(!s.get("composite")&&i.data(this,"_jqs_pending"))for(r=M.length;r;r--)M[r-1][0]==this&&M.splice(r-1,1);M.push([this,o]),i.data(this,"_jqs_pending",!0)}else o.call(this)})},i.fn.sparkline.defaults=n(),i.sparkline_display_visible=function(){var t,e,n,o=[];for(e=0,n=M.length;e<n;e++)t=M[e][0],i(t).is(":visible")&&!i(t).parents().is(":hidden")?(M[e][1].call(t),i.data(M[e][0],"_jqs_pending",!1),o.push(e)):i(t).closest("html").length||i.data(t,"_jqs_pending")||(i.data(M[e][0],"_jqs_pending",!1),o.push(e));for(e=o.length;e;e--)M.splice(o[e-1],1)},i.fn.sparkline.options=o({init:function(t,e){var n,o,r,s;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=(o=i.fn.sparkline.defaults).common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||r.tagOptionsPrefix),n=(s=this.getTagSetting("type"))===A?o[e.type||r.type]:o[s],this.mergedOptions=i.extend({},r,n,e)},getTagSetting:function(t){var e,i,n,o,r=this.tagOptionsPrefix;if(!1===r||void 0===r)return A;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(null==(e=this.tag.getAttribute(r+t)))e=A;else if("["===e.substr(0,1))for(i=(e=e.substr(1,e.length-2).split(",")).length;i--;)e[i]=l(e[i].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(n=e.substr(1,e.length-2).split(","),e={},i=n.length;i--;)e[(o=n[i].split(":",2))[0].replace(/(^\s*)|(\s*$)/g,"")]=l(o[1].replace(/(^\s*)|(\s*$)/g,""));else e=l(e);this.tagValCache.key=e}return e},get:function(t,e){var i,n=this.getTagSetting(t);return n!==A?n:void 0===(i=this.mergedOptions[t])?e:i}}),i.fn.sparkline._base=o({disabled:!1,init:function(t,e,n,o,r){this.el=t,this.$el=i(t),this.values=e,this.options=n,this.width=o,this.height=r,this.currentRegion=void 0},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(t,e){},setRegionHighlight:function(t,e,i){var n,o=this.currentRegion,r=!this.options.get("disableHighlight");return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:o!==(n=this.getRegion(t,e,i))&&(void 0!==o&&r&&this.removeHighlight(),this.currentRegion=n,void 0!==n&&r&&this.renderHighlight(),!0)},clearRegionHighlight:function(){return void 0!==this.currentRegion&&(this.removeHighlight(),this.currentRegion=void 0,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t,e,n,o,s,a,l,c,h,d,u,p,f,g,m=this.options,v="",b=[];if(void 0===this.currentRegion)return"";if(t=this.getCurrentRegionFields(),u=m.get("tooltipFormatter"))return u(this,m,t);if(m.get("tooltipChartTitle")&&(v+='<div class="jqs jqstitle">'+m.get("tooltipChartTitle")+"</div>\n"),!(e=this.options.get("tooltipFormat")))return"";if(i.isArray(e)||(e=[e]),i.isArray(t)||(t=[t]),l=this.options.get("tooltipFormatFieldlist"),c=this.options.get("tooltipFormatFieldlistKey"),l&&c){for(h=[],a=t.length;a--;)d=t[a][c],-1!=(g=i.inArray(d,l))&&(h[g]=t[a]);t=h}for(n=e.length,f=t.length,a=0;a<n;a++)for("string"==typeof(p=e[a])&&(p=new r(p)),o=p.fclass||"jqsfield",g=0;g<f;g++)t[g].isNull&&m.get("tooltipSkipNull")||(i.extend(t[g],{prefix:m.get("tooltipPrefix"),suffix:m.get("tooltipSuffix")}),s=p.render(t[g],m.get("tooltipValueLookups"),m),b.push('<div class="'+o+'">'+s+"</div>"));return b.length?v+b.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var n,o,r,a,l=i.get("highlightColor"),c=i.get("highlightLighten");if(l)return l;if(c&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(r=[],o=4===t.length?16:1,a=0;a<3;a++)r[a]=s(e.round(parseInt(n[a+1],16)*o*c),0,255);return"rgb("+r.join(",")+")"}return t}}),y={changeHighlight:function(t){var e,n=this.currentRegion,o=this.target,r=this.regionShapes[n];r&&(e=this.renderRegion(n,t),i.isArray(e)||i.isArray(r)?(o.replaceWithShapes(r,e),this.regionShapes[n]=i.map(e,function(t){return t.id})):(o.replaceWithShape(r,e),this.regionShapes[n]=e.id))},render:function(){var t,e,n,o,r=this.values,s=this.target,a=this.regionShapes;if(this.cls._super.render.call(this)){for(n=r.length;n--;)if(t=this.renderRegion(n))if(i.isArray(t)){for(e=[],o=t.length;o--;)t[o].append(),e.push(t[o].id);a[n]=e}else t.append(),a[n]=t.id;else a[n]=null;s.render()}}},i.fn.sparkline.line=w=o(i.fn.sparkline._base,{type:"line",init:function(t,e,i,n,o){w._super.init.call(this,t,e,i,n,o),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,i){var n,o=this.regionMap;for(n=o.length;n--;)if(null!==o[n]&&e>=o[n][0]&&e<=o[n][1])return o[n][2]},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,i=this.currentRegion,n=this.target,o=this.vertices[i],r=this.options,s=r.get("spotRadius"),a=r.get("highlightSpotColor"),l=r.get("highlightLineColor");o&&(s&&a&&(t=n.drawCircle(o[0],o[1],s,void 0,a),this.highlightSpotId=t.id,n.insertAfterShape(this.lastShapeId,t)),l&&(e=n.drawLine(o[0],this.canvasTop,o[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=e.id,n.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,i,n,o,r,s=this.values,a=s.length,l=this.xvalues,c=this.yvalues,h=this.yminmax;for(t=0;t<a;t++)i=s[t],n="string"==typeof s[t],o="object"==typeof s[t]&&s[t]instanceof Array,r=n&&s[t].split(":"),n&&2===r.length?(l.push(Number(r[0])),c.push(Number(r[1])),h.push(Number(r[1]))):o?(l.push(i[0]),c.push(i[1]),h.push(i[1])):(l.push(t),null===s[t]||"null"===s[t]?c.push(null):(c.push(Number(i)),h.push(Number(i))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,h),this.miny=this.minyorg=e.min.apply(e,h),this.maxx=e.max.apply(e,l),this.minx=e.min.apply(e,l),this.xvalues=l,this.yvalues=c,this.yminmax=h},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");void 0!==e&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),void 0!==t.get("chartRangeMin")&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),void 0!==t.get("chartRangeMax")&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),void 0!==t.get("chartRangeMinX")&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),void 0!==t.get("chartRangeMaxX")&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,i,n,o,r){var s=this.options.get("normalRangeMin"),a=this.options.get("normalRangeMax"),l=i+e.round(n-n*((a-this.miny)/r)),c=e.round(n*(a-s)/r);this.target.drawRect(t,l,o,c,void 0,this.options.get("normalRangeColor")).append()},render:function(){var t,n,o,r,s,a,l,c,h,d,u,p,f,g,v,b,y,x,_,C,S,D,k,T,E=this.options,R=this.target,I=this.canvasWidth,M=this.canvasHeight,A=this.vertices,F=E.get("spotRadius"),O=this.regionMap;if(w._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),D=this.xvalues,k=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(r=s=0,t=this.maxx-this.minx==0?1:this.maxx-this.minx,n=this.maxy-this.miny==0?1:this.maxy-this.miny,o=this.yvalues.length-1,F&&(I<4*F||M<4*F)&&(F=0),F&&(((C=E.get("highlightSpotColor")&&!E.get("disableInteraction"))||E.get("minSpotColor")||E.get("spotColor")&&k[o]===this.miny)&&(M-=e.ceil(F)),(C||E.get("maxSpotColor")||E.get("spotColor")&&k[o]===this.maxy)&&(M-=e.ceil(F),r+=e.ceil(F)),(C||(E.get("minSpotColor")||E.get("maxSpotColor"))&&(k[0]===this.miny||k[0]===this.maxy))&&(s+=e.ceil(F),I-=e.ceil(F)),(C||E.get("spotColor")||E.get("minSpotColor")||E.get("maxSpotColor")&&(k[o]===this.miny||k[o]===this.maxy))&&(I-=e.ceil(F))),M--,void 0===E.get("normalRangeMin")||E.get("drawNormalOnTop")||this.drawNormalRange(s,r,M,I,n),c=[l=[]],f=g=null,v=k.length,T=0;T<v;T++)h=D[T],u=D[T+1],d=k[T],g=(p=s+e.round((h-this.minx)*(I/t)))+((T<v-1?s+e.round((u-this.minx)*(I/t)):I)-p)/2,O[T]=[f||0,g,T],f=g,null===d?T&&(null!==k[T-1]&&(l=[],c.push(l)),A.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),l.length||l.push([p,r+M]),a=[p,r+e.round(M-M*((d-this.miny)/n))],l.push(a),A.push(a));for(b=[],y=[],x=c.length,T=0;T<x;T++)(l=c[T]).length&&(E.get("fillColor")&&(l.push([l[l.length-1][0],r+M]),y.push(l.slice(0)),l.pop()),l.length>2&&(l[0]=[l[0][0],l[1][1]]),b.push(l));for(x=y.length,T=0;T<x;T++)R.drawShape(y[T],E.get("fillColor"),E.get("fillColor")).append();for(void 0!==E.get("normalRangeMin")&&E.get("drawNormalOnTop")&&this.drawNormalRange(s,r,M,I,n),x=b.length,T=0;T<x;T++)R.drawShape(b[T],E.get("lineColor"),void 0,E.get("lineWidth")).append();if(F&&E.get("valueSpots"))for(void 0===(_=E.get("valueSpots")).get&&(_=new m(_)),T=0;T<v;T++)(S=_.get(k[T]))&&R.drawCircle(s+e.round((D[T]-this.minx)*(I/t)),r+e.round(M-M*((k[T]-this.miny)/n)),F,void 0,S).append();F&&E.get("spotColor")&&null!==k[o]&&R.drawCircle(s+e.round((D[D.length-1]-this.minx)*(I/t)),r+e.round(M-M*((k[o]-this.miny)/n)),F,void 0,E.get("spotColor")).append(),this.maxy!==this.minyorg&&(F&&E.get("minSpotColor")&&(h=D[i.inArray(this.minyorg,k)],R.drawCircle(s+e.round((h-this.minx)*(I/t)),r+e.round(M-M*((this.minyorg-this.miny)/n)),F,void 0,E.get("minSpotColor")).append()),F&&E.get("maxSpotColor")&&(h=D[i.inArray(this.maxyorg,k)],R.drawCircle(s+e.round((h-this.minx)*(I/t)),r+e.round(M-M*((this.maxyorg-this.miny)/n)),F,void 0,E.get("maxSpotColor")).append())),this.lastShapeId=R.getLastShapeId(),this.canvasTop=r,R.render()}}}),i.fn.sparkline.bar=x=o(i.fn.sparkline._base,y,{type:"bar",init:function(t,n,o,r,a){var d,u,p,f,g,v,b,y,w,_,C,S,D,k,T,E,R,I,M,A,F,O=parseInt(o.get("barWidth"),10),P=parseInt(o.get("barSpacing"),10),N=o.get("chartRangeMin"),H=o.get("chartRangeMax"),L=o.get("chartRangeClip"),z=1/0,B=-1/0;for(x._super.init.call(this,t,n,o,r,a),v=0,b=n.length;v<b;v++)((d="string"==typeof(A=n[v])&&A.indexOf(":")>-1)||i.isArray(A))&&(T=!0,d&&(A=n[v]=c(A.split(":"))),A=h(A,null),(u=e.min.apply(e,A))<z&&(z=u),(p=e.max.apply(e,A))>B&&(B=p));this.stacked=T,this.regionShapes={},this.barWidth=O,this.barSpacing=P,this.totalBarWidth=O+P,this.width=r=n.length*O+(n.length-1)*P,this.initTarget(),L&&(D=void 0===N?-1/0:N,k=void 0===H?1/0:H),g=[],f=T?[]:g;var $=[],U=[];for(v=0,b=n.length;v<b;v++)if(T)for(E=n[v],n[v]=M=[],$[v]=0,f[v]=U[v]=0,R=0,I=E.length;R<I;R++)null!==(A=M[R]=L?s(E[R],D,k):E[R])&&(A>0&&($[v]+=A),z<0&&B>0?A<0?U[v]+=e.abs(A):f[v]+=A:f[v]+=e.abs(A-(A<0?B:z)),g.push(A));else A=L?s(n[v],D,k):n[v],null!==(A=n[v]=l(A))&&g.push(A);this.max=S=e.max.apply(e,g),this.min=C=e.min.apply(e,g),this.stackMax=B=T?e.max.apply(e,$):S,this.stackMin=z=T?e.min.apply(e,g):C,void 0!==o.get("chartRangeMin")&&(o.get("chartRangeClip")||o.get("chartRangeMin")<C)&&(C=o.get("chartRangeMin")),void 0!==o.get("chartRangeMax")&&(o.get("chartRangeClip")||o.get("chartRangeMax")>S)&&(S=o.get("chartRangeMax")),this.zeroAxis=w=o.get("zeroAxis",!0),_=C<=0&&S>=0&&w?0:0==w?C:C>0?C:S,this.xaxisOffset=_,y=T?e.max.apply(e,f)+e.max.apply(e,U):S-C,this.canvasHeightEf=w&&C<0?this.canvasHeight-2:this.canvasHeight-1,C<_?(F=((T&&S>=0?B:S)-_)/y*this.canvasHeight)!==e.ceil(F)&&(this.canvasHeightEf-=2,F=e.ceil(F)):F=this.canvasHeight,this.yoffset=F,i.isArray(o.get("colorMap"))?(this.colorMapByIndex=o.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=o.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new m(this.colorMapByValue))),this.range=y},getRegion:function(t,i,n){var o=e.floor(i/this.totalBarWidth);return o<0||o>=this.values.length?void 0:o},getCurrentRegionFields:function(){var t,e,i=this.currentRegion,n=f(this.values[i]),o=[];for(e=n.length;e--;)t=n[e],o.push({isNull:null===t,value:t,color:this.calcColor(e,t,i),offset:i});return o},calcColor:function(t,e,n){var o,r,s=this.colorMapByIndex,a=this.colorMapByValue,l=this.options;return o=this.stacked?l.get("stackedBarColor"):e<0?l.get("negBarColor"):l.get("barColor"),0===e&&void 0!==l.get("zeroColor")&&(o=l.get("zeroColor")),a&&(r=a.get(e))?o=r:s&&s.length>n&&(o=s[n]),i.isArray(o)?o[t%o.length]:o},renderRegion:function(t,n){var o,r,s,a,l,c,h,d,p,f,g=this.values[t],m=this.options,v=this.xaxisOffset,b=[],y=this.range,w=this.stacked,x=this.target,_=t*this.totalBarWidth,C=this.canvasHeightEf,S=this.yoffset;if(h=(g=i.isArray(g)?g:[g]).length,d=g[0],a=u(null,g),f=u(v,g,!0),a)return m.get("nullColor")?(s=n?m.get("nullColor"):this.calcHighlightColor(m.get("nullColor"),m),o=S>0?S-1:S,x.drawRect(_,o,this.barWidth-1,0,s,s)):void 0;for(l=S,c=0;c<h;c++){if(d=g[c],w&&d===v){if(!f||p)continue;p=!0}r=y>0?e.floor(C*(e.abs(d-v)/y))+1:1,d<v||d===v&&0===S?(o=l,l+=r):(o=S-r,S-=r),s=this.calcColor(c,d,t),n&&(s=this.calcHighlightColor(s,m)),b.push(x.drawRect(_,o,this.barWidth-1,r-1,s,s))}return 1===b.length?b[0]:b}}),i.fn.sparkline.tristate=_=o(i.fn.sparkline._base,y,{type:"tristate",init:function(t,e,n,o,r){var s=parseInt(n.get("barWidth"),10),a=parseInt(n.get("barSpacing"),10);_._super.init.call(this,t,e,n,o,r),this.regionShapes={},this.barWidth=s,this.barSpacing=a,this.totalBarWidth=s+a,this.values=i.map(e,Number),this.width=o=e.length*s+(e.length-1)*a,i.isArray(n.get("colorMap"))?(this.colorMapByIndex=n.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=n.get("colorMap"),this.colorMapByValue&&void 0===this.colorMapByValue.get&&(this.colorMapByValue=new m(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i,n){return e.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i,n=this.values,o=this.options,r=this.colorMapByIndex,s=this.colorMapByValue;return s&&(i=s.get(t))?i:r&&r.length>e?r[e]:n[e]<0?o.get("negBarColor"):n[e]>0?o.get("posBarColor"):o.get("zeroBarColor")},renderRegion:function(t,i){var n,o,r,s,a,l,c=this.values,h=this.options,d=this.target;if(n=d.pixelHeight,r=e.round(n/2),s=t*this.totalBarWidth,c[t]<0?(a=r,o=r-1):c[t]>0?(a=0,o=r-1):(a=r-1,o=2),null!==(l=this.calcColor(c[t],t)))return i&&(l=this.calcHighlightColor(l,h)),d.drawRect(s,a,this.barWidth-1,o-1,l,l)}}),i.fn.sparkline.discrete=C=o(i.fn.sparkline._base,y,{type:"discrete",init:function(t,n,o,r,s){C._super.init.call(this,t,n,o,r,s),this.regionShapes={},this.values=n=i.map(n,Number),this.min=e.min.apply(e,n),this.max=e.max.apply(e,n),this.range=this.max-this.min,this.width=r="auto"===o.get("width")?2*n.length:this.width,this.interval=e.floor(r/n.length),this.itemWidth=r/n.length,void 0!==o.get("chartRangeMin")&&(o.get("chartRangeClip")||o.get("chartRangeMin")<this.min)&&(this.min=o.get("chartRangeMin")),void 0!==o.get("chartRangeMax")&&(o.get("chartRangeClip")||o.get("chartRangeMax")>this.max)&&(this.max=o.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===o.get("lineHeight")?e.round(.3*this.canvasHeight):o.get("lineHeight"))},getRegion:function(t,i,n){return e.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],offset:t}},renderRegion:function(t,i){var n,o,r,a,l=this.values,c=this.options,h=this.min,d=this.max,u=this.range,p=this.interval,f=this.target,g=this.canvasHeight,m=this.lineHeight,v=g-m;return o=s(l[t],h,d),a=t*p,n=e.round(v-v*((o-h)/u)),r=c.get("thresholdColor")&&o<c.get("thresholdValue")?c.get("thresholdColor"):c.get("lineColor"),i&&(r=this.calcHighlightColor(r,c)),f.drawLine(a,n,a,n+m,r)}}),i.fn.sparkline.bullet=S=o(i.fn.sparkline._base,{type:"bullet",init:function(t,i,n,o,r){var s,a,l;S._super.init.call(this,t,i,n,o,r),this.values=i=c(i),(l=i.slice())[0]=null===l[0]?l[2]:l[0],l[1]=null===i[1]?l[2]:l[1],s=e.min.apply(e,i),a=e.max.apply(e,i),s=void 0===n.get("base")?s<0?s:0:n.get("base"),this.min=s,this.max=a,this.range=a-s,this.shapes={},this.valueShapes={},this.regiondata={},this.width=o="auto"===n.get("width")?"4.0em":o,this.target=this.$el.simpledraw(o,r,n.get("composite")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return void 0!==n&&void 0!==this.shapes[n]?this.shapes[n]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,i=this.currentRegion,n=this.valueShapes[i];switch(delete this.shapes[n],i.substr(0,1)){case"r":e=this.renderRange(i.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[i]=e.id,this.shapes[e.id]=i,this.target.replaceWithShape(n,e)},renderRange:function(t,i){var n=this.values[t],o=e.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[t-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,o-1,this.canvasHeight-1,r,r)},renderPerformance:function(t){var i=this.values[1],n=e.round(this.canvasWidth*((i-this.min)/this.range)),o=this.options.get("performanceColor");return t&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(0,e.round(.3*this.canvasHeight),n-1,e.round(.4*this.canvasHeight)-1,o,o)},renderTarget:function(t){var i=this.values[0],n=e.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),o=e.round(.1*this.canvasHeight),r=this.canvasHeight-2*o,s=this.options.get("targetColor");return t&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(n,o,this.options.get("targetWidth")-1,r-1,s,s)},render:function(){var t,e,i=this.values.length,n=this.target;if(S._super.render.call(this)){for(t=2;t<i;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),n.render()}}}),i.fn.sparkline.pie=D=o(i.fn.sparkline._base,{type:"pie",init:function(t,n,o,r,s){var a,l=0;if(D._super.init.call(this,t,n,o,r,s),this.shapes={},this.valueShapes={},this.values=n=i.map(n,Number),"auto"===o.get("width")&&(this.width=this.height),n.length>0)for(a=n.length;a--;)l+=n[a];this.total=l,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return void 0!==n&&void 0!==this.shapes[n]?this.shapes[n]:void 0},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:void 0===this.values[t],value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,i){var n,o,r,s,a,l=this.target,c=this.options,h=this.radius,d=c.get("borderWidth"),u=c.get("offset"),p=2*e.PI,f=this.values,g=this.total,m=u?2*e.PI*(u/360):0;for(s=f.length,r=0;r<s;r++){if(n=m,o=m,g>0&&(o=m+p*(f[r]/g)),t===r)return a=c.get("sliceColors")[r%c.get("sliceColors").length],i&&(a=this.calcHighlightColor(a,c)),l.drawPieSlice(h,h,h-d,n,o,void 0,a);m=o}},render:function(){var t,i,n=this.target,o=this.values,r=this.options,s=this.radius,a=r.get("borderWidth");if(D._super.render.call(this)){for(a&&n.drawCircle(s,s,e.floor(s-a/2),r.get("borderColor"),void 0,a).append(),i=o.length;i--;)o[i]&&(t=this.renderSlice(i).append(),this.valueShapes[i]=t.id,this.shapes[t.id]=i);n.render()}}}),i.fn.sparkline.box=k=o(i.fn.sparkline._base,{type:"box",init:function(t,e,n,o,r){k._super.init.call(this,t,e,n,o,r),this.values=i.map(e,Number),this.width="auto"===n.get("width")?"4.0em":o,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return void 0!==this.loutlier&&t.push({field:"lo",value:this.loutlier}),void 0!==this.routlier&&t.push({field:"ro",value:this.routlier}),void 0!==this.lwhisker&&t.push({field:"lw",value:this.lwhisker}),void 0!==this.rwhisker&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,i,n,o,r,s,l,c,h,d,u,p=this.target,f=this.values,g=f.length,m=this.options,v=this.canvasWidth,b=this.canvasHeight,y=void 0===m.get("chartRangeMin")?e.min.apply(e,f):m.get("chartRangeMin"),w=void 0===m.get("chartRangeMax")?e.max.apply(e,f):m.get("chartRangeMax"),x=0;if(k._super.render.call(this)){if(m.get("raw"))m.get("showOutliers")&&f.length>5?(i=f[0],t=f[1],o=f[2],r=f[3],s=f[4],l=f[5],c=f[6]):(t=f[0],o=f[1],r=f[2],s=f[3],l=f[4]);else if(f.sort(function(t,e){return t-e}),o=a(f,1),r=a(f,2),n=(s=a(f,3))-o,m.get("showOutliers")){for(t=l=void 0,h=0;h<g;h++)void 0===t&&f[h]>o-n*m.get("outlierIQR")&&(t=f[h]),f[h]<s+n*m.get("outlierIQR")&&(l=f[h]);i=f[0],c=f[g-1]}else t=f[0],l=f[g-1];this.quartiles=[o,r,s],this.lwhisker=t,this.rwhisker=l,this.loutlier=i,this.routlier=c,u=v/(w-y+1),m.get("showOutliers")&&(x=e.ceil(m.get("spotRadius")),u=(v-=2*e.ceil(m.get("spotRadius")))/(w-y+1),i<t&&p.drawCircle((i-y)*u+x,b/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append(),c>l&&p.drawCircle((c-y)*u+x,b/2,m.get("spotRadius"),m.get("outlierLineColor"),m.get("outlierFillColor")).append()),p.drawRect(e.round((o-y)*u+x),e.round(.1*b),e.round((s-o)*u),e.round(.8*b),m.get("boxLineColor"),m.get("boxFillColor")).append(),p.drawLine(e.round((t-y)*u+x),e.round(b/2),e.round((o-y)*u+x),e.round(b/2),m.get("lineColor")).append(),p.drawLine(e.round((t-y)*u+x),e.round(b/4),e.round((t-y)*u+x),e.round(b-b/4),m.get("whiskerColor")).append(),p.drawLine(e.round((l-y)*u+x),e.round(b/2),e.round((s-y)*u+x),e.round(b/2),m.get("lineColor")).append(),p.drawLine(e.round((l-y)*u+x),e.round(b/4),e.round((l-y)*u+x),e.round(b-b/4),m.get("whiskerColor")).append(),p.drawLine(e.round((r-y)*u+x),e.round(.1*b),e.round((r-y)*u+x),e.round(.9*b),m.get("medianColor")).append(),m.get("target")&&(d=e.ceil(m.get("spotRadius")),p.drawLine(e.round((m.get("target")-y)*u+x),e.round(b/2-d),e.round((m.get("target")-y)*u+x),e.round(b/2+d),m.get("targetColor")).append(),p.drawLine(e.round((m.get("target")-y)*u+x-d),e.round(b/2),e.round((m.get("target")-y)*u+x+d),e.round(b/2),m.get("targetColor")).append()),p.render()}}}),T=o({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),E=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,n){t&&(this.width=t,this.height=e,this.target=n,this.lastShapeId=null,n[0]&&(n=n[0]),i.data(n,"_jqs_vcanvas",this))},drawLine:function(t,e,i,n,o,r){return this.drawShape([[t,e],[i,n]],o,r)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,o,r){return this._genShape("Circle",[t,e,i,n,o,r])},drawPieSlice:function(t,e,i,n,o,r,s){return this._genShape("PieSlice",[t,e,i,n,o,r,s])},drawRect:function(t,e,i,n,o,r){return this._genShape("Rect",[t,e,i,n,o,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){i(e).html(t)},_calculatePixelDims:function(t,e,n){var o;o=this._pxregex.exec(e),this.pixelHeight=o?o[1]:i(n).height(),o=this._pxregex.exec(t),this.pixelWidth=o?o[1]:i(n).width()},_genShape:function(t,e){var i=F++;return e.unshift(i),new T(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),R=o(E,{init:function(e,n,o,r){R._super.init.call(this,e,n,o),this.canvas=t.createElement("canvas"),o[0]&&(o=o[0]),i.data(o,"_jqs_vcanvas",this),i(this.canvas).css({display:"inline-block",width:e,height:n,verticalAlign:"top"}),this._insert(this.canvas,o),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=r,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0,i(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var n=this.canvas.getContext("2d");return void 0!==t&&(n.strokeStyle=t),n.lineWidth=void 0===i?1:i,void 0!==e&&(n.fillStyle=e),n},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=void 0},_drawShape:function(t,e,i,n,o){var r,s,a=this._getContext(i,n,o);for(a.beginPath(),a.moveTo(e[0][0]+.5,e[0][1]+.5),r=1,s=e.length;r<s;r++)a.lineTo(e[r][0]+.5,e[r][1]+.5);void 0!==i&&a.stroke(),void 0!==n&&a.fill(),void 0!==this.targetX&&void 0!==this.targetY&&a.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,i,n,o,r,s,a){var l=this._getContext(r,s,a);l.beginPath(),l.arc(i,n,o,0,2*e.PI,!1),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),void 0!==r&&l.stroke(),void 0!==s&&l.fill()},_drawPieSlice:function(t,e,i,n,o,r,s,a){var l=this._getContext(s,a);l.beginPath(),l.moveTo(e,i),l.arc(e,i,n,o,r,!1),l.lineTo(e,i),l.closePath(),void 0!==s&&l.stroke(),a&&l.fill(),void 0!==this.targetX&&void 0!==this.targetY&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,o,r,s){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+o],[e,i+o],[e,i]],r,s)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i,n=this.shapeseq;for(this.shapes[e.id]=e,i=n.length;i--;)n[i]==t&&(n[i]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i,n,o,r=this.shapeseq,s={};for(n=t.length;n--;)s[t[n]]=!0;for(n=r.length;n--;)s[i=r[n]]&&(r.splice(n,1),delete this.shapes[i],o=n);for(n=e.length;n--;)r.splice(o,0,e[n].id),this.shapes[e[n].id]=e[n]},insertAfterShape:function(t,e){var i,n=this.shapeseq;for(i=n.length;i--;)if(n[i]===t)return n.splice(i+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,i=this.shapeseq;for(e=i.length;e--;)if(i[e]===t){i.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t,e,i=this.shapeseq,n=this.shapes,o=i.length;for(this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight),e=0;e<o;e++)this["_draw"+(t=n[i[e]]).type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}}),I=o(E,{init:function(e,n,o){var r;I._super.init.call(this,e,n,o),o[0]&&(o=o[0]),i.data(o,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),i(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:n,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,o),this._calculatePixelDims(e,n,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=i(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,n,o){var r,s,a,l,c,h,d=[];for(h=0,c=e.length;h<c;h++)d[h]=e[h][0]+","+e[h][1];return r=d.splice(0,1),o=void 0===o?1:o,s=void 0===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+i+'" ',a=void 0===n?' filled="false"':' fillColor="'+n+'" filled="true" ',l=d[0]===d[d.length-1]?"x ":"",'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+s+a+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+r+" l "+d.join(", ")+" "+l+'e"> </v:shape>'},_drawCircle:function(t,e,i,n,o,r,s){return'<v:oval  id="jqsshape'+t+'" '+(void 0===o?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+o+'" ')+(void 0===r?' filled="false"':' fillColor="'+r+'" filled="true" ')+' style="position:absolute;top:'+(i-=n)+"px; left:"+(e-=n)+"px; width:"+2*n+"px; height:"+2*n+'px"></v:oval>'},_drawPieSlice:function(t,i,n,o,r,s,a,l){var c,h,d,u,p,f,g;if(r===s)return"";if(s-r==2*e.PI&&(r=0,s=2*e.PI),h=i+e.round(e.cos(r)*o),d=n+e.round(e.sin(r)*o),u=i+e.round(e.cos(s)*o),p=n+e.round(e.sin(s)*o),h===u&&d===p){if(s-r<e.PI)return"";h=u=i+o,d=p=n}return h===u&&d===p&&s-r<e.PI?"":(c=[i-o,n-o,i+o,n+o,h,d,u,p],f=void 0===a?' stroked="false" ':' strokeWeight="1px" strokeColor="'+a+'" ',g=void 0===l?' filled="false"':' fillColor="'+l+'" filled="true" ','<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+f+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+n+" wa "+c.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,i,n,o,r,s){return this._drawShape(t,[[e,i],[e,i+o],[e+n,i+o],[e+n,i],[e,i]],r,s)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var n=i("#jqsshape"+t),o=this["_draw"+e.type].apply(this,e.args);n[0].outerHTML=o},replaceWithShapes:function(t,e){var n,o=i("#jqsshape"+t[0]),r="",s=e.length;for(n=0;n<s;n++)r+=this["_draw"+e[n].type].apply(this,e[n].args);for(o[0].outerHTML=r,n=1;n<t.length;n++)i("#jqsshape"+t[n]).remove()},insertAfterShape:function(t,e){var n=i("#jqsshape"+t),o=this["_draw"+e.type].apply(this,e.args);n[0].insertAdjacentHTML("afterEnd",o)},removeShapeId:function(t){var e=i("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,i){return t.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})},"function"==typeof define&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.sparkline&&n(jQuery)}(document,Math),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e,i,n,o;function r(e,i){var n,o,r,a=e.nodeName.toLowerCase();return"area"===a?(o=(n=e.parentNode).name,!(!e.href||!o||"map"!==n.nodeName.toLowerCase())&&(!!(r=t("img[usemap='#"+o+"']")[0])&&s(r))):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a&&e.href||i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)},uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return r(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),n=isNaN(i);return(n||i>=0)&&r(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function s(e,i,o,r){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,o&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=(i=t.fn.removeData,function(e){return arguments.length?i.call(this,t.camelCase(e)):i.call(this)})),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:(o=t.fn.focus,function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):o.apply(this,arguments)}),disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(n+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,o=t(this[0]);o.length&&o[0]!==document;){if(("absolute"===(i=o.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var o,r=t.ui[e].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(t,e,i,n){var o,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)t.options[r[o][0]]&&r[o][1].apply(t.element,i)}};var a=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{(n=t._data(o,"events"))&&n.remove&&t(o).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var o,r,s,a,l={},c=e.split(".")[0];return e=e.split(".")[1],o=c+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},r=t[c][e],s=t[c][e]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(a=new i).options=t.widget.extend({},a.options),t.each(n,function(e,n){var o,r;t.isFunction(n)?l[e]=(o=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)},function(){var t,e=this._super,i=this._superApply;return this._super=o,this._superApply=r,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}):l[e]=n}),s.prototype=t.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,n,o=l.call(arguments,1),r=0,s=o.length;r<s;r++)for(i in o[r])n=o[r][i],o[r].hasOwnProperty(i)&&void 0!==n&&(t.isPlainObject(n)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):e[i]=n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,s=l.call(arguments,1),a=this;return r?this.each(function(){var i,r=t.data(this,n);return"instance"===o?(a=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,s))!==r&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,o,r,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(o=s[e]=t.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(e=n.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=o=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),t.each(n,function(n,s){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,h=l[2];h?o.delegate(h,c,a):i.bind(c,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var o,r,s=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?!0===o||"number"==typeof o?i:o.effect||i:e;"number"==typeof(o=o||{})&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&t.effects&&t.effects.effect[a]?n[e](o):a!==e&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}});t.widget;var c=!1;t(document).mouseup(function(){c=!1});t.widget("ui.mouse",{version:"1.11.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),c=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return n=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(o=!0)}),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(o=(n=this.items[i]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||t.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,h=this.offset.click.left,d="x"===this.options.axis||n+c>a&&n+c<l,u="y"===this.options.axis||e+h>r&&e+h<s,p=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!n&&(this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,o,r,s=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(n=(o=t(l[i],this.document[0])).length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function c(){s.push(this)}for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,h=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(n=(o=t(u[i],this.document[0])).length-1;n>=0;n--)(r=t.data(o[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(d.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=d.length-1;i>=0;i--)for(s=d[i][1],n=0,c=(a=d[i][0]).length;n<c;n++)(l=t(a[n])).data(this.widgetName+"-item",s),h.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var i,n,o,r;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",e.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(t,o){i&&!n.forcePlaceholderSize||(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var i,n,o,r,s,a,l,c,h,d,u=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(u&&t.contains(this.containers[i].element[0],u.element[0]))continue;u=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,s=(h=u.floating||this._isFloating(this.currentItem))?"left":"top",a=h?"width":"height",d=h?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,e[d]-l>this.items[n][a]/2&&(c=!0),Math.abs(e[d]-l)<o&&(o=Math.abs(e[d]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],i=t(o.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(e){var i,n,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function o(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}});var h,d="ui-button ui-widget ui-state-default ui-corner-all",u="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},f=function(e){var i=e.name,n=e.form,o=t([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?t(n).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),o};t.widget("ui.button",{version:"1.11.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,n="checkbox"===this.type||"radio"===this.type,o=n?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(d).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===h&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||t(this).removeClass(o)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),n&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];f(n).not(n).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled)return!1;t(this).addClass("ui-state-active"),h=this,e.document.one("mouseup",function(){h=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(i.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(d+" ui-state-active "+u).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?f(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(u),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.11.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});t.ui.button}),function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,i=t.ui.mouse.prototype,n=i._mouseInit,o=i._mouseDestroy;i._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,r(t,"mouseover"),r(t,"mousemove"),r(t,"mousedown"))},i._touchMove=function(t){e&&(this._touchMoved=!0,r(t,"mousemove"))},i._touchEnd=function(t){e&&(r(t,"mouseup"),r(t,"mouseout"),this._touchMoved||r(t,"click"),e=!1)},i._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),n.call(this)},i._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),o.call(this)}}function r(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}}(jQuery),function(t,e){var i=t(window);function n(){return new Date(Date.UTC.apply(Date,arguments))}function o(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t){return function(){return this[t].apply(this,arguments)}}var s,a=(s={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;i<n;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new a;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,s),e}),l=function(e,i){this.dates=new a,this.viewDate=o(),this.focusDate=null,this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(f.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today, tfoot th.clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};l.prototype={constructor:l,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(p[n]||(n=n.split("-")[0],p[n]||(n=d.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),!0!==i.multidate&&(i.multidate=Number(i.multidate)||!1,!1!==i.multidate?i.multidate=Math.max(0,i.multidate):i.multidate=1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=f.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=f.parseDate(i.startDate,o,i.language):i.startDate=-1/0),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=f.parseDate(i.endDate,o,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var r=String(i.orientation).toLowerCase().split(/\s+/g),s=i.orientation.toLowerCase();if(r=t.grep(r,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},s&&"auto"!==s)if(1===r.length)switch(r[0]){case"top":case"bottom":i.orientation.y=r[0];break;case"left":case"right":i.orientation.x=r[0]}else s=t.grep(r,function(t){return/^left|right$/.test(t)}),i.orientation.x=s[0]||"auto",s=t.grep(r,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=s[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,n,o=0;o<t.length;o++)e=t[o][0],2===t[o].length?(i=void 0,n=t[o][1]):3===t[o].length&&(i=t[o][1],n=t[o][2]),e.on(n,i)},_unapplyEvents:function(t){for(var e,i,n,o=0;o<t.length;o++)e=t[o][0],2===t[o].length?(n=void 0,i=t[o][1]):3===t[o].length&&(n=t[o][1],i=t[o][2]),e.off(i,n)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.dates.get(-1),o=this._utc_to_local(n);this.element.trigger({type:e,date:o,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return f.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(e){void 0===e&&(e=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return f.formatDate(t,e,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),n=this.picker.outerHeight(),o=i.width(),r=i.height(),s=i.scrollTop(),a=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&a.push(parseInt(e))});var l=Math.max.apply(Math,a)+10,c=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=c.left,p=c.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=e-d)):(this.picker.addClass("datepicker-orient-left"),c.left<0?u-=c.left-10:c.left+e>o&&(u=o-e-10));var f,g,m=this.o.orientation.y;"auto"===m&&(f=-s+c.top-n,g=s+r-(c.top+h+n),m=Math.max(f,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+m),"top"===m?p+=h:p-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:u,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],n=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),n=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return f.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+p[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+p[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<o?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>o)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===r.getFullYear()&&e.getUTCMonth()===r.getMonth()&&e.getUTCDate()===r.getDate()&&i.push("today"),-1!==this.dates.contains(e)&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var e,i=new Date(this.viewDate),o=i.getUTCFullYear(),r=i.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=p[this.o.language].today||p.en.today||"",d=p[this.o.language].clear||p.en.clear||"";if(!isNaN(o)&&!isNaN(r)){this.picker.find(".datepicker-days thead th.datepicker-switch").text(p[this.o.language].months[r]+" "+o),this.picker.find("tfoot th.today").text(h).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot th.clear").text(d).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var u=n(o,r-1,28),g=f.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(g),u.setUTCDate(g-(u.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(u);m.setUTCDate(m.getUTCDate()+42),m=m.valueOf();for(var v,b=[];u.valueOf()<m;){if(u.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var y=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),w=new Date(Number(y)+(11-y.getUTCDay())%7*864e5),x=new Date(Number(x=n(w.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),_=(w-x)/864e5/7+1;b.push('<td class="cw">'+_+"</td>")}if((v=this.getClassNames(u)).push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(u));void 0===C?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),!1===C.enabled&&v.push("disabled"),C.classes&&(v=v.concat(C.classes.split(/\s+/))),C.tooltip&&(e=C.tooltip)}v=t.unique(v),b.push('<td class="'+v.join(" ")+'"'+(e?' title="'+e+'"':"")+">"+u.getUTCDate()+"</td>"),e=null,u.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var S=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===o&&S.eq(e.getUTCMonth()).addClass("active")}),(o<s||o>l)&&S.addClass("disabled"),o===s&&S.slice(0,a).addClass("disabled"),o===l&&S.slice(c+1).addClass("disabled"),b="",o=10*parseInt(o/10,10);var D=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var k,T=t.map(this.dates,function(t){return t.getUTCFullYear()}),E=-1;E<11;E++)k=["year"],-1===E?k.push("old"):10===E&&k.push("new"),-1!==t.inArray(o,T)&&k.push("active"),(o<s||o>l)&&k.push("disabled"),b+='<span class="'+k.join(" ")+'">'+o+"</span>",o+=1;D.html(b)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var i,o,r,s=t(e.target).closest("span, td, th");if(1===s.length)switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=f.modes[this.viewMode].navStep*("prev"===s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":s.is(".disabled")||(this.viewDate.setUTCDate(1),s.is(".month")?(r=1,o=s.parent().find("span").index(s),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(o),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,o,r))):(r=1,o=0,i=parseInt(s.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,o,r))),this.showMode(-1),this.fill());break;case"td":s.is(".day")&&!s.is(".disabled")&&(r=parseInt(s.text(),10)||1,i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s.is(".old")?0===o?(o=11,i-=1):o-=1:s.is(".new")&&(11===o?(o=0,i+=1):o+=1),this._setDate(n(i,o,r)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),1===this.o.multidate&&0===e||(-1!==e?this.dates.remove(e):this.dates.push(t)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){var i;e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate"),this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,e){if(t){if(!e)return t;var i,n,o=new Date(t.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1===a)n=-1===e?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==i},i=s+e,o.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<a;l++)o=this.moveMonth(o,e);i=o.getUTCMonth(),o.setUTCDate(r),n=function(){return i!==o.getUTCMonth()}}for(;n();)o.setUTCDate(--r),o.setUTCMonth(i);return o}},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))27===t.keyCode&&this.show();else{var e,i,n,r,s=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||o(),e),n=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||o(),e),n=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):((i=new Date(this.dates.get(-1)||o())).setUTCDate(i.getUTCDate()+e),(n=new Date(a)).setUTCDate(a.getUTCDate()+e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||o(),e),n=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||o(),e),n=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):((i=new Date(this.dates.get(-1)||o())).setUTCDate(i.getUTCDate()+7*e),(n=new Date(a)).setUTCDate(a.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(a),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s)this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker").getUTCDate(),n=t.inArray(e.target,this.inputs),o=this.inputs.length;if(-1!==n){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[n])for(;n>=0&&i<this.dates[n];)this.pickers[n--].setUTCDate(i);else if(i>this.dates[n])for(;n<o&&i>this.dates[n];)this.pickers[n++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var h=t.fn.datepicker;t.fn.datepicker=function(e){var i,n=Array.apply(null,arguments);return n.shift(),this.each(function(){var o=t(this),r=o.data("datepicker"),s="object"==typeof e&&e;if(!r){var a=function(e,i){var n=t(e).data(),o={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])");function s(t,e){return e.toLowerCase()}for(var a in i=new RegExp("^"+i.toLowerCase()),n)i.test(a)&&(o[a.replace(r,s)]=n[a]);return o}(this,"date"),h=function(e){var i={};if(p[e]||(e=e.split("-")[0],p[e])){var n=p[e];return t.each(u,function(t,e){e in n&&(i[e]=n[e])}),i}}(t.extend({},d,a,s).language),f=t.extend({},d,h,a,s);if(o.is(".input-daterange")||f.inputs){var g={inputs:f.inputs||o.find("input").toArray()};o.data("datepicker",r=new c(this,t.extend(f,g)))}else o.data("datepicker",r=new l(this,f))}if("string"==typeof e&&"function"==typeof r[e]&&void 0!==(i=r[e].apply(r,n)))return!1}),void 0!==i?i:this};var d=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},u=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=l;var p=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},f={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,f.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(e,i,o){if(e){if(e instanceof Date)return e;"string"==typeof i&&(i=f.parseFormat(i));var r,s,a,c=/([\-+]\d+)([dmwy])/,h=e.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,a=0;a<h.length;a++)switch(r=c.exec(h[a]),s=parseInt(r[1]),r[2]){case"d":e.setUTCDate(e.getUTCDate()+s);break;case"m":e=l.prototype.moveMonth.call(l.prototype,e,s);break;case"w":e.setUTCDate(e.getUTCDate()+7*s);break;case"y":e=l.prototype.moveYear.call(l.prototype,e,s)}return n(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}h=e&&e.match(this.nonpunctuation)||[],e=new Date;var d,u,g={},m=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,e=n(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);var b=i.parts.slice();if(h.length!==b.length&&(b=t(b).filter(function(e,i){return-1!==t.inArray(i,m)}).toArray()),h.length===b.length){var y,w,x;for(a=0,y=b.length;a<y;a++){if(d=parseInt(h[a],10),r=b[a],isNaN(d))switch(r){case"MM":u=t(p[o].months).filter(_),d=t.inArray(u[0],p[o].months)+1;break;case"M":u=t(p[o].monthsShort).filter(_),d=t.inArray(u[0],p[o].monthsShort)+1}g[r]=d}for(a=0;a<m.length;a++)(x=m[a])in g&&!isNaN(g[x])&&(w=new Date(e),v[x](w,g[x]),isNaN(w)||(e=w))}return e}function _(){var t=this.slice(0,h[a].length);return t===h[a].slice(0,t.length)}},formatDate:function(e,i,n){if(!e)return"";"string"==typeof i&&(i=f.parseFormat(i));var o={d:e.getUTCDate(),D:p[n].daysShort[e.getUTCDay()],DD:p[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:p[n].monthsShort[e.getUTCMonth()],MM:p[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var r=t.extend([],i.separators),s=0,a=i.parts.length;s<=a;s++)r.length&&e.push(r.shift()),e.push(o[i.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};f.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=f,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(t){void 0===t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),n=-1,o=this.length;++n<o&&(i.context=i[0]=this[n])&&!1!==e.call(i[0],n,i););return this}})}(jQuery),function(t,e){"use strict";if(window.Select2===e){var i,n,o,r,s,a,l,c,h={x:0,y:0},d={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case d.LEFT:case d.RIGHT:case d.UP:case d.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case d.SHIFT:case d.CTRL:case d.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&t<=123}},u="<div class='select2-measure-scrollbar'></div>",p={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};a=t(document),c=1,r=function(){return c++},i=A(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,o;this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t(document.body),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(I(i.containerCss,this.opts.element)),this.container.addClass(I(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",_),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(I(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",_),this.results=n=this.container.find(".select2-results"),this.search=o=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",_),this.results.on("mousemove",function(i){var n=h;n!==e&&n.x===i.pageX&&n.y===i.pageY||t(i.target).trigger("mousemove-filtered",i)}),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(t,e){var i=x(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){m(t.target,e.get())>=0&&i(t)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&n.mousewheel(function(t,e,i,o){var r=n.scrollTop();o>0&&r-o<=0?(n.scrollTop(0),_(t)):o<0&&n.get(0).scrollHeight-n.scrollTop()+o<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),_(t))}),w(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.lastSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var s=i.element.prop("disabled");s===e&&(s=!1),this.enable(!s);var a=i.element.prop("readonly");a===e&&(a=!1),this.readonly(a),l=l||function(){var e=t(u);e.appendTo(document.body);var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&n._sync&&t.each(function(){n._sync&&this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeData("select2").off(".select2"),t.is("input[type='hidden']")?t.css("display",""):(t.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())),M.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:v(t.attr("locked"),"locked")||v(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var n,o,s,a,l=this;if("select"===(n=i.element).get(0).tagName.toLowerCase()&&(this.select=o=i.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i.debug=i.debug||t.fn.select2.defaults.debug,i.debug&&console&&console.warn&&(null!=i.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=i.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=i.ajax&&null!=i.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=i.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=i.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=i.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=i.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=i.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=i.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),i.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=i.element.data("tags")){var c=i.element.data("tags");t.isArray(c)||(c=[]),i.element.data("select2Tags",c)}if(null!=i.sorter&&(i.sortResults=i.sorter),null!=i.selectOnClose&&(i.selectOnBlur=i.selectOnClose),null!=i.ajax&&t.isFunction(i.ajax.processResults)&&(i.ajax.results=i.ajax.processResults),null!=i.language){var h=i.language;t.isFunction(h.noMatches)&&(i.formatNoMatches=h.noMatches),t.isFunction(h.searching)&&(i.formatSearching=h.searching),t.isFunction(h.inputTooShort)&&(i.formatInputTooShort=h.inputTooShort),t.isFunction(h.inputTooLong)&&(i.formatInputTooLong=h.inputTooLong),t.isFunction(h.loadingMore)&&(i.formatLoading=h.loadingMore),t.isFunction(h.maximumSelected)&&(i.formatSelectionTooBig=h.maximumSelected)}if("function"!=typeof(i=t.extend({},{populateResults:function(n,o,s){var a,c=this.opts.id,h=this.liveRegion;(a=function(n,o,d){var u,p,f,g,m,v,b,y,w,x,_=[];for(u=0,p=(n=i.sortResults(n,o,s)).length;u<p;u+=1)g=!(m=!0===(f=n[u]).disabled)&&c(f)!==e,v=f.children&&f.children.length>0,(b=t("<li></li>")).addClass("select2-results-dept-"+d),b.addClass("select2-result"),b.addClass(g?"select2-result-selectable":"select2-result-unselectable"),m&&b.addClass("select2-disabled"),v&&b.addClass("select2-result-with-children"),b.addClass(l.opts.formatResultCssClass(f)),b.attr("role","presentation"),(y=t(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+r()),y.attr("role","option"),(x=i.formatResult(f,y,s,l.opts.escapeMarkup))!==e&&(y.html(x),b.append(y)),v&&((w=t("<ul></ul>")).addClass("select2-result-sub"),a(f.children,w,d+1),b.append(w)),b.data("select2-data",f),_.push(b[0]);o.append(_),h.text(i.formatMatches(n.length))})(o,n,0)}},t.fn.select2.defaults,i)).id&&(s=i.id,i.id=function(t){return t[s]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(t){var i,o,r,s={results:[],more:!1},a=t.term;r=function(e,i){var n;e.is("option")?t.matcher(a,e.text(),e)&&i.push(l.optionToData(e)):e.is("optgroup")&&(n=l.optionToData(e),e.children().each2(function(t,e){r(e,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==e&&i.length>0&&(o=this.getPlaceholderOption())&&(i=i.not(o)),i.each2(function(t,e){r(e,s.results)}),t.callback(s)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?((a=i.element.data("ajax-url"))&&a.length>0&&(i.ajax.url=a),i.query=k.call(i.element,i.ajax)):"data"in i?i.query=T(i.data):"tags"in i&&(i.query=E(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,n){var o=[];t(b(e.val(),i.separator,i.transformVal)).each(function(){var e={id:this,text:this},n=i.tags;t.isFunction(n)&&(n=n()),t(n).each(function(){if(v(this.id,e.id))return e=this,!1}),o.push(e)}),n(o)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,n=this.opts.element,o=this;n.on("change.select2",this.bind(function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),this.container&&(C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(I(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(I(this.opts.dropdownCssClass,this.opts.element)))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",o._sync)}),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,o._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,n,o,r,s=this.dropdown,a=this.container,c=a.offset(),h=a.outerHeight(!1),d=a.outerWidth(!1),u=s.outerHeight(!1),p=t(window),f=p.width(),g=p.height(),m=p.scrollLeft()+f,v=p.scrollTop()+g,b=c.top+h,y=c.left,w=b+u<=v,x=c.top-u>=p.scrollTop(),_=s.outerWidth(!1);s.hasClass("select2-drop-above")?(i=!0,!x&&w&&(n=!0,i=!1)):(i=!1,!w&&x&&(n=!0,i=!0)),n&&(s.hide(),c=this.container.offset(),h=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=s.outerHeight(!1),m=p.scrollLeft()+f,v=p.scrollTop()+g,b=c.top+h,y=c.left,_=s.outerWidth(!1),s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),(_=s.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=_:_=d,u=s.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b-=(e=this.body.offset()).top,y-=e.left),!(y+_<=m)&&c.left+m+a.outerWidth(!1)>_&&(y=c.left+this.container.outerWidth(!1)-_),o={left:y,width:d},i?(this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above"),u=s.outerHeight(!1),o.top=c.top-u,o.bottom="auto"):(o.top=b,o.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),o=t.extend(o,I(this.opts.dropdownCss,this.opts.element)),s.css(o)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",function(t){h.x=t.pageX,h.y=t.pageY}),!0)},opening:function(){var e,i=this.containerEventName,n="scroll."+i,o="resize."+i,r="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(i){f(e);var n,o=t("#select2-drop");o.length>0&&((n=o.data("select2")).opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){t(this).on(o+" "+n+" "+r,function(t){s.opened()&&s.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,n="resize."+e,o="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(n).off(o)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var t=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return t!==e&&(this.search.val(t),this.search.select(),!0)},getMaximumSelectionSize:function(){return I(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,n,o,r,s,a,l,c=this.results;(i=this.highlight())<0||(0!=i?(e=this.findHighlightableChoices().find(".select2-result-label"),o=(l=((n=t(e[i])).offset()||{}).top||0)+n.outerHeight(!0),i===e.length-1&&(a=c.find("li.select2-more-results")).length>0&&(o=a.offset().top+a.outerHeight(!0)),o>(r=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(o-r)),(s=l-c.offset().top)<0&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+s)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){var o=t(i[n+=e]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(e){var i,n,o=this.findHighlightableChoices();if(0===arguments.length)return m(o.filter(".select2-highlighted")[0],o.get());e>=o.length&&(e=o.length-1),e<0&&(e=0),this.removeHighlight(),(i=t(o[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),(n=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,o=this.search.val(),r=this.context;0!==e.length&&e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(s){n.opened()&&(n.opts.populateResults.call(this,t,s.results,{term:o,page:i,context:r}),n.postprocessResults(s,!1,!1),!0===s.more?(e.detach().appendTo(t).html(n.opts.escapeMarkup(I(n.opts.formatLoadMore,n.opts.element,i+1))),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):e.remove(),n.positionDropdown(),n.resultsPage=i,n.context=s.context,this.opts.element.trigger({type:"select2-loaded",items:s}))})}))},tokenize:function(){},updateResults:function(i){var n,o,r,s=this.search,a=this.results,l=this.opts,c=this,h=s.val(),d=t.data(this.container,"select2-last-term");if((!0===i||!d||!v(h,d))&&(t.data(this.container,"select2-last-term",h),!0===i||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var u=this.getMaximumSelectionSize();if(!(u>=1&&(n=this.data(),t.isArray(n)&&n.length>=u&&R(l.formatSelectionTooBig,"formatSelectionTooBig"))))return s.val().length<l.minimumInputLength?(R(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+I(l.formatInputTooShort,l.element,s.val(),l.minimumInputLength)+"</li>"):f(""),void(i&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&s.val().length>l.maximumInputLength?R(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+I(l.formatInputTooLong,l.element,s.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+I(l.formatSearching,l.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(o=this.tokenize())!=e&&null!=o&&s.val(o),this.resultsPage=1,l.query({element:l.element,term:s.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(n){var o;if(r==this.queryCount)if(this.opened())if(n.hasError!==e&&R(l.formatAjaxError,"formatAjaxError"))f("<li class='select2-ajax-error'>"+I(l.formatAjaxError,l.element,n.jqXHR,n.textStatus,n.errorThrown)+"</li>");else{if(this.context=n.context===e?null:n.context,this.opts.createSearchChoice&&""!==s.val()&&(o=this.opts.createSearchChoice.call(c,s.val(),n.results))!==e&&null!==o&&c.id(o)!==e&&null!==c.id(o)&&0===t(n.results).filter(function(){return v(c.id(this),c.id(o))}).length&&this.opts.createSearchChoicePosition(n.results,o),0===n.results.length&&R(l.formatNoMatches,"formatNoMatches"))return f("<li class='select2-no-results'>"+I(l.formatNoMatches,l.element,s.val())+"</li>"),void(this.showSearch&&this.showSearch(s.val()));a.empty(),c.opts.populateResults.call(this,a,n.results,{term:s.val(),page:this.resultsPage,context:null}),!0===n.more&&R(l.formatLoadMore,"formatLoadMore")&&(a.append("<li class='select2-more-results'>"+l.escapeMarkup(I(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout(function(){c.loadMoreIfNeeded()},10)),this.postprocessResults(n,i),p(),this.opts.element.trigger({type:"select2-loaded",items:n})}else this.search.removeClass("select2-active")})})));f("<li class='select2-selection-limit'>"+I(l.formatSelectionTooBig,l.element,u)+"</li>")}function p(){s.removeClass("select2-active"),c.positionDropdown(),a.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(a.text()):c.liveRegion.text(c.opts.formatMatches(a.find('.select2-result-selectable:not(".select2-selected")').length))}function f(t){a.html(t),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var t;(t=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],n=t.val().length;t.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&((e=i.createTextRange()).collapse(!1),e.select()))},0)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){var e=function(){var e,i,n,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(e=this.opts.element.attr("style")))for(o=0,r=(i=e.split(";")).length;o<r;o+=1)if(null!==(n=i[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&n.length>=1)return n[1];return"resolve"===this.opts.width?(e=this.opts.element.css("width")).indexOf("%")>0?e:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==e&&this.container.css("width",e)}}),n=A(i,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var e,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(e=this.search.get(0)).createTextRange?((i=e.createTextRange()).collapse(!1),i.select()):e.setSelectionRange&&(n=this.search.val().length,e.setSelectionRange(n,n))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"selection","focusser")},initContainer:function(){var e,i,n=this.container,o=this.dropdown,s=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),i=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which!==d.PAGE_UP&&t.which!==d.PAGE_DOWN)switch(t.which){case d.UP:case d.DOWN:return this.moveHighlight(t.which===d.UP?-1:1),void _(t);case d.ENTER:return this.selectHighlighted(),void _(t);case d.TAB:return void this.selectHighlighted({noFocus:!0});case d.ESC:return this.cancel(t),void _(t)}else _(t)})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==d.TAB&&!d.isControl(t)&&!d.isFunctionKey(t)&&t.which!==d.ESC){if(!1!==this.opts.openOnEnter||t.which!==d.ENTER){if(t.which==d.DOWN||t.which==d.UP||t.which==d.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void _(t)}return t.which==d.DELETE||t.which==d.BACKSPACE?(this.opts.allowClear&&this.clear(),void _(t)):void 0}_(t)}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){var e;this.isInterfaceEnabled()&&(this.clear(),(e=t).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(i){f(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),_(i)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){_(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var n=t.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.lastSearchTerm=t.search.val())})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(n))}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=i.val(),r=null;e.query({matcher:function(t,i,n){var s=v(o,e.id(n));return s&&(r=n),s},callback:t.isFunction(n)?function(){n(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,i,n){var o=0,r=this;if(this.findHighlightableChoices().each2(function(t,e){if(v(r.id(e.data("select2-data")),r.opts.element.val()))return o=t,!1}),!1!==n&&(!0===i&&o>=0?this.highlight(o):this.highlight(0)),!0===i){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(function e(i){var n=0;return t.each(i,function(t,i){i.children?n+=e(i.children):n++}),n}(e.results)>=s)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),v(i,this.id(t))||this.triggerChange({added:t,removed:n})}},updateSelection:function(t){var i,n,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),o.empty(),null!==t&&(i=this.opts.formatSelection(t,o,this.opts.escapeMarkup)),i!==e&&o.append(i),(n=this.opts.formatSelectionCssClass(t,o))!==e&&o.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,n=null,o=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return n=o.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:r});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){o.opts.element.val(t?o.id(t):""),o.updateSelection(t),o.setPlaceholder(),i&&o.triggerChange({added:t,removed:r})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,n=!1;if(0===arguments.length)return(i=this.selection.data("select2-data"))==e&&(i=null),i;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(n=arguments[1]),t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:i})):this.clear(n)}}),o=A(i,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var n=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var o=b(i.val(),e.separator,e.transformVal),r=[];e.query({matcher:function(i,n,s){var a=t.grep(o,function(t){return v(t,e.id(s))}).length;return a&&r.push(s),a},callback:t.isFunction(n)?function(){for(var t=[],i=0;i<o.length;i++)for(var s=o[i],a=0;a<r.length;a++){var l=r[a];if(v(s,e.id(l))){t.push(l),r.splice(a,1);break}}n(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),M.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var n=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){n.search[0].focus(),n.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(i){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),o=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),s=function(e){var i=0,n=0;if("selectionStart"in(e=t(e)[0]))i=e.selectionStart,n=e.selectionEnd-i;else if("selection"in document){e.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-e.value.length),i=o.text.length-n}return{offset:i,length:n}}(this.search);if(n.length&&(i.which==d.LEFT||i.which==d.RIGHT||i.which==d.BACKSPACE||i.which==d.DELETE||i.which==d.ENTER)){var a=n;return i.which==d.LEFT&&o.length?a=o:i.which==d.RIGHT?a=r.length?r:null:i.which===d.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),a=o.length?o:r):i.which==d.DELETE?this.unselect(n.first())&&(this.search.width(10),a=r.length?r:null):i.which==d.ENTER&&(a=null),this.selectChoice(a),_(i),void(a&&a.length||this.open())}if((i.which===d.BACKSPACE&&1==this.keydowns||i.which==d.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void _(i);if(this.selectChoice(null),this.opened())switch(i.which){case d.UP:case d.DOWN:return this.moveHighlight(i.which===d.UP?-1:1),void _(i);case d.ENTER:return this.selectHighlighted(),void _(i);case d.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case d.ESC:return this.cancel(i),void _(i)}if(i.which!==d.TAB&&!d.isControl(i)&&!d.isFunctionKey(i)&&i.which!==d.BACKSPACE&&i.which!==d.ESC){if(i.which===d.ENTER){if(!1===this.opts.openOnEnter)return;if(i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)return}this.open(),i.which!==d.PAGE_UP&&i.which!==d.PAGE_DOWN||_(i),i.which===d.ENTER&&_(i)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i={},n=[],o=this;t(e).each(function(){o.id(this)in i||(i[o.id(this)]=0,n.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(n),o.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(e){var i=this.getVal(),n=this;t(e).each(function(){i.push(n.createChoice(this))}),this.setVal(i)},createChoice:function(i){var n,o,r=!i.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?s:a,c=this.id(i);return(n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith(t("<div></div>").html(n)),(o=this.opts.formatSelectionCssClass(i,l.find("div")))!=e&&l.addClass(o),r&&l.find(".select2-search-choice-close").on("mousedown",_).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),_(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),c},unselect:function(e){var i,n,o=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var r=t.Event("select2-removing");if(r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(n=m(this.id(i),o))>=0;)o.splice(n,1),this.setVal(o),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var n=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),s=this;o.each2(function(t,e){m(s.id(e.data("select2-data")),n)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&s.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&R(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+I(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,i,n,o,r=y(this.search);e=function(e){if(!s){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);(s=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t(document.body).append(s)}return s.text(e.val()),s.width()}(this.search)+10,i=this.search.offset().left,(o=(n=this.selection.width())-(i-this.selection.offset().left)-r)<e&&(o=n-r),o<40&&(o=n-r),o<=0&&(o=e),this.search.width(Math.floor(o))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:b(t=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(e){if(this.select)this.select.val(e);else{var i=[],n={};t(e).each(function(){this in n||(i.push(this),n[this]=0)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator))}},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(v(this.opts.id(e[i]),this.opts.id(t[n]))){e.splice(i,1),i--,t.splice(n,1);break}return{added:e,removed:t}},val:function(i,n){var o,r=this;if(0===arguments.length)return this.getVal();if((o=this.data()).length||(o=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:o}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,r.id);r.setVal(i),r.updateSelection(e),r.clearSearch(),n&&r.triggerChange(r.buildChangeDetails(o,r.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var n,o,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get();o=this.data(),e||(e=[]),n=t.map(e,function(t){return r.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(o,this.data()))}}),t.fn.select2=function(){var i,n,o,r,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],h=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===a.length||"object"==typeof a[0])(i=0===a.length?{}:t.extend({},a[0])).element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.prop("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),(n=s?new window.Select2.class.multi:new window.Select2.class.single).init(i);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(m(a[0],l)<0)throw"Unknown method: "+a[0];if(r=e,(n=t(this).data("select2"))===e)return;if("container"===(o=a[0])?r=n.container:"dropdown"===o?r=n.dropdown:(d[o]&&(o=d[o]),r=n[o].apply(n,a.slice(1))),m(a[0],c)>=0||m(a[0],h)>=0&&1==a.length)return!1}}),r===e?this:r},t.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,n){var o=[];return S(this.text(t),i.term,o,n),o.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,i,n){return t?n(this.text(t)):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return g(""+e).toUpperCase().indexOf(g(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,i,n,o){var r,s,a,l,c,h=t,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return e;for(;;){for(s=-1,a=0,l=o.tokenSeparators.length;a<l&&(c=o.tokenSeparators[a],!((s=t.indexOf(c))>=0));a++);if(s<0)break;if(r=t.substring(0,s),t=t.substring(s+c.length),r.length>0&&(r=o.createSearchChoice.call(this,r,i))!==e&&null!==r&&o.id(r)!==e&&null!==o.id(r)){for(d=!1,a=0,l=i.length;a<l;a++)if(v(o.id(r),o.id(i[a]))){d=!0;break}d||n(r)}}return h!==t?t:void 0},escapeMarkup:D,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:k,local:T,tags:E},util:{debounce:x,markMatch:S,escapeMarkup:D,stripDiacritics:g},class:{abstract:i,single:n,multi:o}}}function f(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function g(t){return t.replace(/[^\u0000-\u007E]/g,function(t){return p[t]||t})}function m(t,e){for(var i=0,n=e.length;i<n;i+=1)if(v(t,e[i]))return i;return-1}function v(t,i){return t===i||t!==e&&i!==e&&(null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+""))}function b(t,e,i){var n,o,r;if(null===t||t.length<1)return[];for(o=0,r=(n=t.split(e)).length;o<r;o+=1)n[o]=i(n[o]);return n}function y(t){return t.outerWidth(!1)-t.width()}function w(i){var n="keyup-change-value";i.on("keydown",function(){t.data(i,n)===e&&t.data(i,n,i.val())}),i.on("keyup",function(){var o=t.data(i,n);o!==e&&i.val()!==o&&(t.removeData(i,n),i.trigger("keyup-change"))})}function x(t,i,n){var o;return n=n||e,function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,e)},t)}}function _(t){t.preventDefault(),t.stopPropagation()}function C(e,i,n){var o,r,s=[];(o=t.trim(e.attr("class")))&&t((o=""+o).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&s.push(this)}),(o=t.trim(i.attr("class")))&&t((o=""+o).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(r=n(this))&&s.push(r)}),e.attr("class",s.join(" "))}function S(t,e,i,n){var o=g(t.toUpperCase()).indexOf(g(e.toUpperCase())),r=e.length;o<0?i.push(n(t)):(i.push(n(t.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(t.substring(o,o+r))),i.push("</span>"),i.push(n(t.substring(o+r,t.length))))}function D(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function k(i){var n,o=null,r=i.quietMillis||100,s=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,r=s,c=i.transport||t.fn.select2.ajaxDefaults.transport,h={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},d=t.extend({},t.fn.select2.ajaxDefaults.params,h);n=n?n.call(a,l.term,l.page,l.context):null,r="function"==typeof r?r.call(a,l.term,l.page,l.context):r,o&&"function"==typeof o.abort&&o.abort(),i.params&&(t.isFunction(i.params)?t.extend(d,i.params.call(a)):t.extend(d,i.params)),t.extend(d,{url:r,dataType:i.dataType,data:n,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var n={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(n)}}),o=c.call(a,d)},r)}}function T(e){var i,n,o=e,r=function(t){return""+t.text};t.isArray(o)&&(o={results:n=o}),!1===t.isFunction(o)&&(n=o,o=function(){return n});var s=o();return s.text&&(r=s.text,t.isFunction(r)||(i=s.text,r=function(t){return t[i]})),function(e){var i,n=e.term,s={results:[]};""!==n?(i=function(o,s){var a,l;if((o=o[0]).children){for(l in a={},o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],t(o.children).each2(function(t,e){i(e,a.children)}),(a.children.length||e.matcher(n,r(a),o))&&s.push(a)}else e.matcher(n,r(o),o)&&s.push(o)},t(o().results).each2(function(t,e){i(e,s.results)}),e.callback(s)):e.callback(o())}}function E(i){var n=t.isFunction(i);return function(o){var r=o.term,s={results:[]},a=n?i(o):i;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,i=t?this.text:this;(""===r||o.matcher(r,i))&&s.results.push(t?this:{id:this,text:this})}),o.callback(s))}}function R(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function I(e,i){if(t.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return e.apply(i,n)}return e}function M(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function A(e,i){var n=function(){};return(n.prototype=new e).constructor=n,n.prototype.parent=e.prototype,n.prototype=t.extend(n.prototype,i),n}}(jQuery),function(t,e,i,n){var o="ontouchstart"in i,r=function(){var t=i.createElement("div"),n=i.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",n.appendChild(t);var o=e.getComputedStyle&&"auto"===e.getComputedStyle(t,"").pointerEvents;return n.removeChild(t),!!o}(),s={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button">Expand</button>',collapseBtnHTML:'<button data-action="collapse" type="button">Collapse</button>',group:0,maxDepth:5,threshold:20};function a(e,n){this.w=t(i),this.el=t(e),this.options=t.extend({},s,n),this.init()}a.prototype={init:function(){var i=this;i.reset(),i.el.data("nestable-group",this.options.group),i.placeEl=t('<div class="'+i.options.placeClass+'"/>'),t.each(this.el.find(i.options.itemNodeName),function(e,n){i.setParent(t(n))}),i.el.on("click","button",function(e){if(!i.dragEl){var n=t(e.currentTarget),o=n.data("action"),r=n.parent(i.options.itemNodeName);"collapse"===o&&i.collapseItem(r),"expand"===o&&i.expandItem(r)}});var n=function(e){var n=t(e.target);if(!n.hasClass(i.options.handleClass)){if(n.closest("."+i.options.noDragClass).length)return;n=n.closest("."+i.options.handleClass)}n.length&&!i.dragEl&&(i.isTouch=/^touch/.test(e.type),i.isTouch&&1!==e.touches.length||(e.preventDefault(),i.dragStart(e.touches?e.touches[0]:e)))},r=function(t){i.dragEl&&(t.preventDefault(),i.dragMove(t.touches?t.touches[0]:t))},s=function(t){i.dragEl&&(t.preventDefault(),i.dragStop(t.touches?t.touches[0]:t))};o&&(i.el[0].addEventListener("touchstart",n,!1),e.addEventListener("touchmove",r,!1),e.addEventListener("touchend",s,!1),e.addEventListener("touchcancel",s,!1)),i.el.on("mousedown",n),i.w.on("mousemove",r),i.w.on("mouseup",s)},serialize:function(){var e=this;return step=function(i,n){var o=[];return i.children(e.options.itemNodeName).each(function(){var i=t(this),r=t.extend({},i.data()),s=i.children(e.options.listNodeName);s.length&&(r.children=step(s,n+1)),o.push(r)}),o},step(e.el.find(e.options.listNodeName).first(),0)},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(t){t.removeClass(this.options.collapsedClass),t.children('[data-action="expand"]').hide(),t.children('[data-action="collapse"]').show(),t.children(this.options.listNodeName).show()},collapseItem:function(t){t.children(this.options.listNodeName).length&&(t.addClass(this.options.collapsedClass),t.children('[data-action="collapse"]').hide(),t.children('[data-action="expand"]').show(),t.children(this.options.listNodeName).hide())},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.expandItem(t(this))})},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.collapseItem(t(this))})},setParent:function(e){e.children(this.options.listNodeName).length&&(e.prepend(t(this.options.expandBtnHTML)),e.prepend(t(this.options.collapseBtnHTML))),e.children('[data-action="expand"]').hide()},unsetParent:function(t){t.removeClass(this.options.collapsedClass),t.children("[data-action]").remove(),t.children(this.options.listNodeName).remove()},dragStart:function(e){var n=this.mouse,o=t(e.target),r=o.closest(this.options.itemNodeName);this.placeEl.css("height",r.height()),n.offsetX=void 0!==e.offsetX?e.offsetX:e.pageX-o.offset().left,n.offsetY=void 0!==e.offsetY?e.offsetY:e.pageY-o.offset().top,n.startX=n.lastX=e.pageX,n.startY=n.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=t(i.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",r.width()),r.after(this.placeEl),r[0].parentNode.removeChild(r[0]),r.appendTo(this.dragEl),t(i.body).append(this.dragEl),this.dragEl.css({left:e.pageX-n.offsetX,top:e.pageY-n.offsetY});var s,a,l=this.dragEl.find(this.options.itemNodeName);for(s=0;s<l.length;s++)(a=t(l[s]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=a)},dragStop:function(t){var e=this.dragEl.children(this.options.itemNodeName).first();e[0].parentNode.removeChild(e[0]),this.placeEl.replaceWith(e),this.dragEl.remove(),this.el.trigger("change"),this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset()},dragMove:function(n){var o,s,a,l=this.options,c=this.mouse;this.dragEl.css({left:n.pageX-c.offsetX,top:n.pageY-c.offsetY}),c.lastX=c.nowX,c.lastY=c.nowY,c.nowX=n.pageX,c.nowY=n.pageY,c.distX=c.nowX-c.lastX,c.distY=c.nowY-c.lastY,c.lastDirX=c.dirX,c.lastDirY=c.dirY,c.dirX=0===c.distX?0:c.distX>0?1:-1,c.dirY=0===c.distY?0:c.distY>0?1:-1;var h=Math.abs(c.distX)>Math.abs(c.distY)?1:0;if(!c.moving)return c.dirAx=h,void(c.moving=!0);c.dirAx!==h?(c.distAxX=0,c.distAxY=0):(c.distAxX+=Math.abs(c.distX),0!==c.dirX&&c.dirX!==c.lastDirX&&(c.distAxX=0),c.distAxY+=Math.abs(c.distY),0!==c.dirY&&c.dirY!==c.lastDirY&&(c.distAxY=0)),c.dirAx=h,c.dirAx&&c.distAxX>=l.threshold&&(c.distAxX=0,a=this.placeEl.prev(l.itemNodeName),c.distX>0&&a.length&&!a.hasClass(l.collapsedClass)&&(o=a.find(l.listNodeName).last(),this.placeEl.parents(l.listNodeName).length+this.dragDepth<=l.maxDepth&&(o.length?(o=a.children(l.listNodeName).last()).append(this.placeEl):((o=t("<"+l.listNodeName+"/>").addClass(l.listClass)).append(this.placeEl),a.append(o),this.setParent(a)))),c.distX<0&&(this.placeEl.next(l.itemNodeName).length||(s=this.placeEl.parent(),this.placeEl.closest(l.itemNodeName).after(this.placeEl),s.children().length||this.unsetParent(s.parent()))));var d=!1;if(r||(this.dragEl[0].style.visibility="hidden"),this.pointEl=t(i.elementFromPoint(n.pageX-i.body.scrollLeft,n.pageY-(e.pageYOffset||i.documentElement.scrollTop))),r||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(l.handleClass)&&(this.pointEl=this.pointEl.parent(l.itemNodeName)),this.pointEl.hasClass(l.emptyClass))d=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(l.itemClass))return;var u=this.pointEl.closest("."+l.rootClass),p=this.dragRootEl.data("nestable-id")!==u.data("nestable-id");if(!c.dirAx||p||d){if(p&&l.group!==u.data("nestable-group"))return;if(this.dragDepth-1+this.pointEl.parents(l.listNodeName).length>l.maxDepth)return;var f=n.pageY<this.pointEl.offset().top+this.pointEl.height()/2;s=this.placeEl.parent(),d?((o=t(i.createElement(l.listNodeName)).addClass(l.listClass)).append(this.placeEl),this.pointEl.replaceWith(o)):f?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),s.children().length||this.unsetParent(s.parent()),this.dragRootEl.find(l.itemNodeName).length||this.dragRootEl.append('<div class="'+l.emptyClass+'"/>'),p&&(this.dragRootEl=u,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},t.fn.nestable=function(e){var i=this;return this.each(function(){var n=t(this).data("nestable");n?"string"==typeof e&&"function"==typeof n[e]&&(i=n[e]()):(t(this).data("nestable",new a(this,e)),t(this).data("nestable-id",(new Date).getTime()))}),i||this}}(window.jQuery||window.Zepto,window,document),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function i(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)c(e,i)&&(t[i]=e[i]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,i,n){return Te(t,e,i,n,!0).utc()}function u(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var i=u(t),n=e.call(i.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&i.overflow<0&&!i.empty&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&n);if(t._strict&&(o=o&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function f(t){var e=d(NaN);return null!=t?h(u(e),t):u(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var g=i.momentProperties=[];function m(t,e){var i,n,o;if(r(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),r(e._i)||(t._i=e._i),r(e._f)||(t._f=e._f),r(e._l)||(t._l=e._l),r(e._strict)||(t._strict=e._strict),r(e._tzm)||(t._tzm=e._tzm),r(e._isUTC)||(t._isUTC=e._isUTC),r(e._offset)||(t._offset=e._offset),r(e._pf)||(t._pf=u(e)),r(e._locale)||(t._locale=e._locale),g.length>0)for(i=0;i<g.length;i++)r(o=e[n=g[i]])||(t[n]=o);return t}var v=!1;function b(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,i.updateOffset(this),v=!1)}function y(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function x(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=w(e)),i}function _(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&x(t[n])!==x(e[n]))&&s++;return s+r}function C(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,e){var n=!0;return h(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){for(var o,r=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){for(var a in o+="\n["+s+"] ",arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];r.push(o)}C(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)},e)}var D,k={};function T(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),k[t]||(C(e),k[t]=!0)}function E(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function R(t,e){var i,n=h({},t);for(i in e)c(e,i)&&(o(t[i])&&o(e[i])?(n[i]={},h(n[i],t[i]),h(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)c(t,i)&&!c(e,i)&&o(t[i])&&(n[i]=h({},n[i]));return n}function I(t){null!=t&&this.set(t)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,D=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)c(t,e)&&i.push(e);return i};var M={};function A(t,e){var i=t.toLowerCase();M[i]=M[i+"s"]=M[e]=t}function F(t){return"string"==typeof t?M[t]||M[t.toLowerCase()]:void 0}function O(t){var e,i,n={};for(i in t)c(t,i)&&(e=F(i))&&(n[e]=t[i]);return n}var P={};function N(t,e){P[t]=e}function H(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,B={},$={};function U(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&($[t]=o),e&&($[e[0]]=function(){return H(o.apply(this,arguments),e[1],e[2])}),i&&($[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function j(t,e){return t.isValid()?(e=W(e,t.localeData()),B[e]=B[e]||function(t){var e,i,n,o=t.match(L);for(e=0,i=o.length;e<i;e++)$[o[e]]?o[e]=$[o[e]]:o[e]=(n=o[e]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(e){var n,r="";for(n=0;n<i;n++)r+=E(o[n])?o[n].call(e,t):o[n];return r}}(e),B[e](t)):t.localeData().invalidDate()}function W(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(z.lastIndex=0;i>=0&&z.test(t);)t=t.replace(z,n),z.lastIndex=0,i-=1;return t}var Y=/\d/,V=/\d\d/,q=/\d{3}/,G=/\d{4}/,X=/[+-]?\d{6}/,Z=/\d\d?/,J=/\d\d\d\d?/,K=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,it=/\d+/,nt=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,rt=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,at={};function lt(t,e,i){at[t]=E(e)?e:function(t,n){return t&&i?i:e}}function ct(t,e){return c(at,t)?at[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var dt={};function ut(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),s(e)&&(n=function(t,i){i[e]=x(t)}),i=0;i<t.length;i++)dt[t[i]]=n}function pt(t,e){ut(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function ft(t,e,i){null!=e&&c(dt,t)&&dt[t](e,i._a,i,t)}var gt=0,mt=1,vt=2,bt=3,yt=4,wt=5,xt=6,_t=7,Ct=8;function St(t){return Dt(t)?366:365}function Dt(t){return t%4==0&&t%100!=0||t%400==0}U("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),A("year","y"),N("year",1),lt("Y",nt),lt("YY",Z,V),lt("YYYY",tt,G),lt("YYYYY",et,X),lt("YYYYYY",et,X),ut(["YYYYY","YYYYYY"],gt),ut("YYYY",function(t,e){e[gt]=2===t.length?i.parseTwoDigitYear(t):x(t)}),ut("YY",function(t,e){e[gt]=i.parseTwoDigitYear(t)}),ut("Y",function(t,e){e[gt]=parseInt(t,10)}),i.parseTwoDigitYear=function(t){return x(t)+(x(t)>68?1900:2e3)};var kt,Tt=Et("FullYear",!0);function Et(t,e){return function(n){return null!=n?(It(this,t,n),i.updateOffset(this,e),this):Rt(this,t)}}function Rt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function It(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&Dt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),Mt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function Mt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i,n=(e%(i=12)+i)%i;return t+=(e-n)/12,1===n?Dt(t)?29:28:31-n%7%2}kt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),U("MMMM",0,0,function(t){return this.localeData().months(this,t)}),A("month","M"),N("month",8),lt("M",Z),lt("MM",Z,V),lt("MMM",function(t,e){return e.monthsShortRegex(t)}),lt("MMMM",function(t,e){return e.monthsRegex(t)}),ut(["M","MM"],function(t,e){e[mt]=x(t)-1}),ut(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[mt]=o:u(i).invalidMonth=t});var At=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ft="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Pt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=x(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),Mt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function Nt(t){return null!=t?(Pt(this,t),i.updateOffset(this,!0),this):Rt(this,"Month")}var Ht=st;var Lt=st;function zt(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],r=[];for(e=0;e<12;e++)i=d([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),r.sort(t),e=0;e<12;e++)n[e]=ht(n[e]),o[e]=ht(o[e]);for(e=0;e<24;e++)r[e]=ht(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Bt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function $t(t,e,i){var n=7+e-i;return-((7+Bt(t,0,n).getUTCDay()-e)%7)+n-1}function Ut(t,e,i,n,o){var r,s,a=1+7*(e-1)+(7+i-n)%7+$t(t,n,o);return a<=0?s=St(r=t-1)+a:a>St(t)?(r=t+1,s=a-St(t)):(r=t,s=a),{year:r,dayOfYear:s}}function jt(t,e,i){var n,o,r=$t(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return s<1?n=s+Wt(o=t.year()-1,e,i):s>Wt(t.year(),e,i)?(n=s-Wt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function Wt(t,e,i){var n=$t(t,e,i),o=$t(t+1,e,i);return(St(t)-n+o)/7}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),N("week",5),N("isoWeek",5),lt("w",Z),lt("ww",Z,V),lt("W",Z),lt("WW",Z,V),pt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=x(t)});U("d",0,"do","day"),U("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),U("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),U("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),lt("d",Z),lt("e",Z),lt("E",Z),lt("dd",function(t,e){return e.weekdaysMinRegex(t)}),lt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),lt("dddd",function(t,e){return e.weekdaysRegex(t)}),pt(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:u(i).invalidWeekday=t}),pt(["d","e","E"],function(t,e,i,n){e[n]=x(t)});var Yt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Vt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var qt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Gt=st;var Xt=st;var Zt=st;function Jt(){function t(t,e){return e.length-t.length}var e,i,n,o,r,s=[],a=[],l=[],c=[];for(e=0;e<7;e++)i=d([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),r=this.weekdays(i,""),s.push(n),a.push(o),l.push(r),c.push(n),c.push(o),c.push(r);for(s.sort(t),a.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)a[e]=ht(a[e]),l[e]=ht(l[e]),c[e]=ht(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Qt(t,e){U(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function te(t,e){return e._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Kt),U("k",["kk",2],0,function(){return this.hours()||24}),U("hmm",0,0,function(){return""+Kt.apply(this)+H(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Kt.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),Qt("a",!0),Qt("A",!1),A("hour","h"),N("hour",13),lt("a",te),lt("A",te),lt("H",Z),lt("h",Z),lt("k",Z),lt("HH",Z,V),lt("hh",Z,V),lt("kk",Z,V),lt("hmm",J),lt("hmmss",K),lt("Hmm",J),lt("Hmmss",K),ut(["H","HH"],bt),ut(["k","kk"],function(t,e,i){var n=x(t);e[bt]=24===n?0:n}),ut(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),ut(["h","hh"],function(t,e,i){e[bt]=x(t),u(i).bigHour=!0}),ut("hmm",function(t,e,i){var n=t.length-2;e[bt]=x(t.substr(0,n)),e[yt]=x(t.substr(n)),u(i).bigHour=!0}),ut("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[bt]=x(t.substr(0,n)),e[yt]=x(t.substr(n,2)),e[wt]=x(t.substr(o)),u(i).bigHour=!0}),ut("Hmm",function(t,e,i){var n=t.length-2;e[bt]=x(t.substr(0,n)),e[yt]=x(t.substr(n))}),ut("Hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[bt]=x(t.substr(0,n)),e[yt]=x(t.substr(n,2)),e[wt]=x(t.substr(o))});var ee,ie=Et("Hours",!0),ne={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ft,monthsShort:Ot,week:{dow:0,doy:6},weekdays:Yt,weekdaysMin:qt,weekdaysShort:Vt,meridiemParse:/[ap]\.?m?\.?/i},oe={},re={};function se(t){return t?t.toLowerCase().replace("_","-"):t}function ae(t){var e=null;if(!oe[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ee._abbr,require("./locale/"+t),le(e)}catch(t){}return oe[t]}function le(t,e){var i;return t&&((i=r(e)?he(t):ce(t,e))?ee=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ee._abbr}function ce(t,e){if(null!==e){var i,n=ne;if(e.abbr=t,null!=oe[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=oe[t]._config;else if(null!=e.parentLocale)if(null!=oe[e.parentLocale])n=oe[e.parentLocale]._config;else{if(null==(i=ae(e.parentLocale)))return re[e.parentLocale]||(re[e.parentLocale]=[]),re[e.parentLocale].push({name:t,config:e}),null;n=i._config}return oe[t]=new I(R(n,e)),re[t]&&re[t].forEach(function(t){ce(t.name,t.config)}),le(t),oe[t]}return delete oe[t],null}function he(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ee;if(!n(t)){if(e=ae(t))return e;t=[t]}return function(t){for(var e,i,n,o,r=0;r<t.length;){for(e=(o=se(t[r]).split("-")).length,i=(i=se(t[r+1]))?i.split("-"):null;e>0;){if(n=ae(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&_(o,i,!0)>=e-1)break;e--}r++}return ee}(t)}function de(t){var e,i=t._a;return i&&-2===u(t).overflow&&(e=i[mt]<0||i[mt]>11?mt:i[vt]<1||i[vt]>Mt(i[gt],i[mt])?vt:i[bt]<0||i[bt]>24||24===i[bt]&&(0!==i[yt]||0!==i[wt]||0!==i[xt])?bt:i[yt]<0||i[yt]>59?yt:i[wt]<0||i[wt]>59?wt:i[xt]<0||i[xt]>999?xt:-1,u(t)._overflowDayOfYear&&(e<gt||e>vt)&&(e=vt),u(t)._overflowWeeks&&-1===e&&(e=_t),u(t)._overflowWeekday&&-1===e&&(e=Ct),u(t).overflow=e),t}function ue(t,e,i){return null!=t?t:null!=e?e:i}function pe(t){var e,n,o,r,s,a=[];if(!t._d){for(o=function(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[vt]&&null==t._a[mt]&&function(t){var e,i,n,o,r,s,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)r=1,s=4,i=ue(e.GG,t._a[gt],jt(Ee(),1,4).year),n=ue(e.W,1),((o=ue(e.E,1))<1||o>7)&&(l=!0);else{r=t._locale._week.dow,s=t._locale._week.doy;var c=jt(Ee(),r,s);i=ue(e.gg,t._a[gt],c.year),n=ue(e.w,c.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r}n<1||n>Wt(i,r,s)?u(t)._overflowWeeks=!0:null!=l?u(t)._overflowWeekday=!0:(a=Ut(i,n,o,r,s),t._a[gt]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=ue(t._a[gt],o[gt]),(t._dayOfYear>St(s)||0===t._dayOfYear)&&(u(t)._overflowDayOfYear=!0),n=Bt(s,0,t._dayOfYear),t._a[mt]=n.getUTCMonth(),t._a[vt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=o[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[bt]&&0===t._a[yt]&&0===t._a[wt]&&0===t._a[xt]&&(t._nextDay=!0,t._a[bt]=0),t._d=(t._useUTC?Bt:function(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}).apply(null,a),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[bt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(u(t).weekdayMismatch=!0)}}var fe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ge=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((\-?\d+)/i;function we(t){var e,i,n,o,r,s,a=t._i,l=fe.exec(a)||ge.exec(a);if(l){for(u(t).iso=!0,e=0,i=ve.length;e<i;e++)if(ve[e][1].exec(l[1])){o=ve[e][0],n=!1!==ve[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=be.length;e<i;e++)if(be[e][1].exec(l[3])){r=(l[2]||" ")+be[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!me.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=o+(r||"")+(s||""),De(t)}else t._isValid=!1}var xe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function _e(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Ce={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Se(t){var e,i,n,o,r,s,a,l=xe.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(l){var c=(e=l[4],i=l[3],n=l[2],o=l[5],r=l[6],s=l[7],a=[_e(e),Ot.indexOf(i),parseInt(n,10),parseInt(o,10),parseInt(r,10)],s&&a.push(parseInt(s,10)),a);if(!function(t,e,i){return!t||Vt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(u(i).weekdayMismatch=!0,i._isValid=!1,!1)}(l[1],c,t))return;t._a=c,t._tzm=function(t,e,i){if(t)return Ce[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(l[8],l[9],l[10]),t._d=Bt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),u(t).rfc2822=!0}else t._isValid=!1}function De(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],u(t).empty=!0;var e,n,o,r,s,a=""+t._i,l=a.length,c=0;for(o=W(t._f,t._locale).match(L)||[],e=0;e<o.length;e++)r=o[e],(n=(a.match(ct(r,t))||[])[0])&&((s=a.substr(0,a.indexOf(n))).length>0&&u(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),$[r]?(n?u(t).empty=!1:u(t).unusedTokens.push(r),ft(r,n,t)):t._strict&&!n&&u(t).unusedTokens.push(r);u(t).charsLeftOver=l-c,a.length>0&&u(t).unusedInput.push(a),t._a[bt]<=12&&!0===u(t).bigHour&&t._a[bt]>0&&(u(t).bigHour=void 0),u(t).parsedDateParts=t._a.slice(0),u(t).meridiem=t._meridiem,t._a[bt]=function(t,e,i){var n;if(null==i)return e;return null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}(t._locale,t._a[bt],t._meridiem),pe(t),de(t)}else Se(t);else we(t)}function ke(t){var e=t._i,c=t._f;return t._locale=t._locale||he(t._l),null===e||void 0===c&&""===e?f({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new b(de(e)):(a(e)?t._d=e:n(c)?function(t){var e,i,n,o,r;if(0===t._f.length)return u(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)r=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],De(e),p(e)&&(r+=u(e).charsLeftOver,r+=10*u(e).unusedTokens.length,u(e).score=r,(null==n||r<n)&&(n=r,i=e));h(t,i||e)}(t):c?De(t):function(t){var e=t._i;r(e)?t._d=new Date(i.now()):a(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=ye.exec(t._i);null===e?(we(t),!1===t._isValid&&(delete t._isValid,Se(t),!1===t._isValid&&(delete t._isValid,i.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):n(e)?(t._a=l(e.slice(0),function(t){return parseInt(t,10)}),pe(t)):o(e)?function(t){if(!t._d){var e=O(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),pe(t)}}(t):s(e)?t._d=new Date(e):i.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function Te(t,e,i,r,s){var a,l={};return!0!==i&&!1!==i||(r=i,i=void 0),(o(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||n(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=i,l._i=t,l._f=e,l._strict=r,(a=new b(de(ke(l))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function Ee(t,e,i,n){return Te(t,e,i,n,!1)}i.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var Re=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()}),Ie=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()});function Me(t,e){var i,o;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ee();for(i=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](i)||(i=e[o]);return i}var Ae=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fe(t){var e=O(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===kt.call(Ae,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Ae.length;++n)if(t[Ae[n]]){if(i)return!1;parseFloat(t[Ae[n]])!==x(t[Ae[n]])&&(i=!0)}return!0}(e),this._milliseconds=+h+1e3*c+6e4*l+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=he(),this._bubble()}function Oe(t){return t instanceof Fe}function Pe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ne(t,e){U(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+H(~~(t/60),2)+e+H(~~t%60,2)})}Ne("Z",":"),Ne("ZZ",""),lt("Z",rt),lt("ZZ",rt),ut(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Le(rt,t)});var He=/([\+\-]|\d\d)/gi;function Le(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(He)||["-",0,0],o=60*n[1]+x(n[2]);return 0===o?0:"+"===n[0]?o:-o}function ze(t,e){var n,o;return e._isUTC?(n=e.clone(),o=(y(t)||a(t)?t.valueOf():Ee(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),i.updateOffset(n,!1),n):Ee(t).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function $e(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}i.updateOffset=function(){};var Ue=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,je=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function We(t,e){var i,n,o,r=t,a=null;return Oe(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(r={},e?r[e]=t:r.milliseconds=t):(a=Ue.exec(t))?(i="-"===a[1]?-1:1,r={y:0,d:x(a[vt])*i,h:x(a[bt])*i,m:x(a[yt])*i,s:x(a[wt])*i,ms:x(Pe(1e3*a[xt]))*i}):(a=je.exec(t))?(i="-"===a[1]?-1:(a[1],1),r={y:Ye(a[2],i),M:Ye(a[3],i),w:Ye(a[4],i),d:Ye(a[5],i),h:Ye(a[6],i),m:Ye(a[7],i),s:Ye(a[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=function(t,e){var i;if(!t.isValid()||!e.isValid())return{milliseconds:0,months:0};e=ze(e,t),t.isBefore(e)?i=Ve(t,e):((i=Ve(e,t)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(Ee(r.from),Ee(r.to)),(r={}).ms=o.milliseconds,r.M=o.months),n=new Fe(r),Oe(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Ye(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Ve(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function qe(t,e){return function(i,n){var o;return null===n||isNaN(+n)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=i,i=n,n=o),Ge(this,We(i="string"==typeof i?+i:i,n),t),this}}function Ge(t,e,n,o){var r=e._milliseconds,s=Pe(e._days),a=Pe(e._months);t.isValid()&&(o=null==o||o,a&&Pt(t,Rt(t,"Month")+a*n),s&&It(t,"Date",Rt(t,"Date")+s*n),r&&t._d.setTime(t._d.valueOf()+r*n),o&&i.updateOffset(t,s||a))}We.fn=Fe.prototype,We.invalid=function(){return We(NaN)};var Xe=qe(1,"add"),Ze=qe(-1,"subtract");function Je(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function Ke(t){var e;return void 0===t?this._locale._abbr:(null!=(e=he(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qe=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function ti(){return this._locale}function ei(t,e){U(0,[t,t.length],0,e)}function ii(t,e,i,n,o){var r;return null==t?jt(this,n,o).year:(e>(r=Wt(t,n,o))&&(e=r),function(t,e,i,n,o){var r=Ut(t,e,i,n,o),s=Bt(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e,i,n,o))}U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ei("gggg","weekYear"),ei("ggggg","weekYear"),ei("GGGG","isoWeekYear"),ei("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),lt("G",nt),lt("g",nt),lt("GG",Z,V),lt("gg",Z,V),lt("GGGG",tt,G),lt("gggg",tt,G),lt("GGGGG",et,X),lt("ggggg",et,X),pt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=x(t)}),pt(["gg","GG"],function(t,e,n,o){e[o]=i.parseTwoDigitYear(t)}),U("Q",0,"Qo","quarter"),A("quarter","Q"),N("quarter",7),lt("Q",Y),ut("Q",function(t,e){e[mt]=3*(x(t)-1)}),U("D",["DD",2],"Do","date"),A("date","D"),N("date",9),lt("D",Z),lt("DD",Z,V),lt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),ut(["D","DD"],vt),ut("Do",function(t,e){e[vt]=x(t.match(Z)[0])});var ni=Et("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),N("dayOfYear",4),lt("DDD",Q),lt("DDDD",q),ut(["DDD","DDDD"],function(t,e,i){i._dayOfYear=x(t)}),U("m",["mm",2],0,"minute"),A("minute","m"),N("minute",14),lt("m",Z),lt("mm",Z,V),ut(["m","mm"],yt);var oi=Et("Minutes",!1);U("s",["ss",2],0,"second"),A("second","s"),N("second",15),lt("s",Z),lt("ss",Z,V),ut(["s","ss"],wt);var ri,si=Et("Seconds",!1);for(U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),N("millisecond",16),lt("S",Q,Y),lt("SS",Q,V),lt("SSS",Q,q),ri="SSSS";ri.length<=9;ri+="S")lt(ri,it);function ai(t,e){e[xt]=x(1e3*("0."+t))}for(ri="S";ri.length<=9;ri+="S")ut(ri,ai);var li=Et("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ci=b.prototype;function hi(t){return t}ci.add=Xe,ci.calendar=function(t,e){var n=t||Ee(),o=ze(n,this).startOf("day"),r=i.calendarFormat(this,o)||"sameElse",s=e&&(E(e[r])?e[r].call(this,n):e[r]);return this.format(s||this.localeData().calendar(r,this,Ee(n)))},ci.clone=function(){return new b(this)},ci.diff=function(t,e,i){var n,o,r;if(!this.isValid())return NaN;if(!(n=ze(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=F(e)){case"year":r=Je(this,n)/12;break;case"month":r=Je(this,n);break;case"quarter":r=Je(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:w(r)},ci.endOf=function(t){return void 0===(t=F(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},ci.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=j(this,t);return this.localeData().postformat(e)},ci.from=function(t,e){return this.isValid()&&(y(t)&&t.isValid()||Ee(t).isValid())?We({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ci.fromNow=function(t){return this.from(Ee(),t)},ci.to=function(t,e){return this.isValid()&&(y(t)&&t.isValid()||Ee(t).isValid())?We({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},ci.toNow=function(t){return this.to(Ee(),t)},ci.get=function(t){return E(this[t=F(t)])?this[t]():this},ci.invalidAt=function(){return u(this).overflow},ci.isAfter=function(t,e){var i=y(t)?t:Ee(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=F(r(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())},ci.isBefore=function(t,e){var i=y(t)?t:Ee(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=F(r(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())},ci.isBetween=function(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))},ci.isSame=function(t,e){var i,n=y(t)?t:Ee(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))},ci.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},ci.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},ci.isValid=function(){return p(this)},ci.lang=Qe,ci.locale=Ke,ci.localeData=ti,ci.max=Ie,ci.min=Re,ci.parsingFlags=function(){return h({},u(this))},ci.set=function(t,e){if("object"==typeof t)for(var i=function(t){var e=[];for(var i in t)e.push({unit:i,priority:P[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=O(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(E(this[t=F(t)]))return this[t](e);return this},ci.startOf=function(t){switch(t=F(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},ci.subtract=Ze,ci.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},ci.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},ci.toDate=function(){return new Date(this.valueOf())},ci.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?j(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(i,"Z")):j(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ci.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)},ci.toJSON=function(){return this.isValid()?this.toISOString():null},ci.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ci.unix=function(){return Math.floor(this.valueOf()/1e3)},ci.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ci.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ci.year=Tt,ci.isLeapYear=function(){return Dt(this.year())},ci.weekYear=function(t){return ii.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ci.isoWeekYear=function(t){return ii.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},ci.quarter=ci.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},ci.month=Nt,ci.daysInMonth=function(){return Mt(this.year(),this.month())},ci.week=ci.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},ci.isoWeek=ci.isoWeeks=function(t){var e=jt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},ci.weeksInYear=function(){var t=this.localeData()._week;return Wt(this.year(),t.dow,t.doy)},ci.isoWeeksInYear=function(){return Wt(this.year(),1,4)},ci.date=ni,ci.day=ci.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},ci.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},ci.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},ci.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},ci.hour=ci.hours=ie,ci.minute=ci.minutes=oi,ci.second=ci.seconds=si,ci.millisecond=ci.milliseconds=li,ci.utcOffset=function(t,e,n){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Le(rt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(o=Be(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?Ge(this,We(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Be(this)},ci.utc=function(t){return this.utcOffset(0,t)},ci.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this},ci.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Le(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},ci.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ee(t).utcOffset():0,(this.utcOffset()-t)%60==0)},ci.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ci.isLocal=function(){return!!this.isValid()&&!this._isUTC},ci.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ci.isUtc=$e,ci.isUTC=$e,ci.zoneAbbr=function(){return this._isUTC?"UTC":""},ci.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ci.dates=S("dates accessor is deprecated. Use date instead.",ni),ci.months=S("months accessor is deprecated. Use month instead",Nt),ci.years=S("years accessor is deprecated. Use year instead",Tt),ci.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),ci.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=ke(t))._a){var e=t._isUTC?d(t._a):Ee(t._a);this._isDSTShifted=this.isValid()&&_(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var di=I.prototype;function ui(t,e,i,n){var o=he(),r=d().set(n,e);return o[i](r,t)}function pi(t,e,i){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return ui(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=ui(t,n,i,"month");return o}function fi(t,e,i,n){"boolean"==typeof t?(s(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,s(e)&&(i=e,e=void 0),e=e||"");var o,r=he(),a=t?r._week.dow:0;if(null!=i)return ui(e,(i+a)%7,n,"day");var l=[];for(o=0;o<7;o++)l[o]=ui(e,(o+a)%7,n,"day");return l}di.calendar=function(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return E(n)?n.call(e,i):n},di.longDateFormat=function(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},di.invalidDate=function(){return this._invalidDate},di.ordinal=function(t){return this._ordinal.replace("%d",t)},di.preparse=hi,di.postformat=hi,di.relativeTime=function(t,e,i,n){var o=this._relativeTime[i];return E(o)?o(t,e,i,n):o.replace(/%d/i,t)},di.pastFuture=function(t,e){var i=this._relativeTime[t>0?"future":"past"];return E(i)?i(e):i.replace(/%s/i,e)},di.set=function(t){var e,i;for(i in t)E(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},di.months=function(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||At).test(e)?"format":"standalone"][t.month()]:n(this._months)?this._months:this._months.standalone},di.monthsShort=function(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[At.test(e)?"format":"standalone"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},di.monthsParse=function(t,e,i){var n,o,r;if(this._monthsParseExact)return function(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(o=kt.call(this._shortMonthsParse,s))?o:null:-1!==(o=kt.call(this._longMonthsParse,s))?o:null:"MMM"===e?-1!==(o=kt.call(this._shortMonthsParse,s))?o:-1!==(o=kt.call(this._longMonthsParse,s))?o:null:-1!==(o=kt.call(this._longMonthsParse,s))?o:-1!==(o=kt.call(this._shortMonthsParse,s))?o:null}.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=d([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},di.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Lt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},di.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Ht),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},di.week=function(t){return jt(t,this._week.dow,this._week.doy).week},di.firstDayOfYear=function(){return this._week.doy},di.firstDayOfWeek=function(){return this._week.dow},di.weekdays=function(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone},di.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},di.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},di.weekdaysParse=function(t,e,i){var n,o,r;if(this._weekdaysParseExact)return function(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(o=kt.call(this._weekdaysParse,s))?o:null:"ddd"===e?-1!==(o=kt.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=kt.call(this._minWeekdaysParse,s))?o:null:"dddd"===e?-1!==(o=kt.call(this._weekdaysParse,s))?o:-1!==(o=kt.call(this._shortWeekdaysParse,s))?o:-1!==(o=kt.call(this._minWeekdaysParse,s))?o:null:"ddd"===e?-1!==(o=kt.call(this._shortWeekdaysParse,s))?o:-1!==(o=kt.call(this._weekdaysParse,s))?o:-1!==(o=kt.call(this._minWeekdaysParse,s))?o:null:-1!==(o=kt.call(this._minWeekdaysParse,s))?o:-1!==(o=kt.call(this._weekdaysParse,s))?o:-1!==(o=kt.call(this._shortWeekdaysParse,s))?o:null}.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=d([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}},di.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Jt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Gt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},di.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Jt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},di.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Jt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Zt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},di.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},di.meridiem=function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},le("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===x(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=S("moment.lang is deprecated. Use moment.locale instead.",le),i.langData=S("moment.langData is deprecated. Use moment.localeData instead.",he);var gi=Math.abs;function mi(t,e,i,n){var o=We(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function vi(t){return t<0?Math.floor(t):Math.ceil(t)}function bi(t){return 4800*t/146097}function yi(t){return 146097*t/4800}function wi(t){return function(){return this.as(t)}}var xi=wi("ms"),_i=wi("s"),Ci=wi("m"),Si=wi("h"),Di=wi("d"),ki=wi("w"),Ti=wi("M"),Ei=wi("y");function Ri(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ii=Ri("milliseconds"),Mi=Ri("seconds"),Ai=Ri("minutes"),Fi=Ri("hours"),Oi=Ri("days"),Pi=Ri("months"),Ni=Ri("years");var Hi=Math.round,Li={ss:44,s:45,m:45,h:22,d:26,M:11};var zi=Math.abs;function Bi(t){return(t>0)-(t<0)||+t}function $i(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=zi(this._milliseconds)/1e3,n=zi(this._days),o=zi(this._months);t=w(i/60),e=w(t/60),i%=60,t%=60;var r=w(o/12),s=o%=12,a=n,l=e,c=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var u=d<0?"-":"",p=Bi(this._months)!==Bi(d)?"-":"",f=Bi(this._days)!==Bi(d)?"-":"",g=Bi(this._milliseconds)!==Bi(d)?"-":"";return u+"P"+(r?p+r+"Y":"")+(s?p+s+"M":"")+(a?f+a+"D":"")+(l||c||h?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(h?g+h+"S":"")}var Ui=Fe.prototype;return Ui.isValid=function(){return this._isValid},Ui.abs=function(){var t=this._data;return this._milliseconds=gi(this._milliseconds),this._days=gi(this._days),this._months=gi(this._months),t.milliseconds=gi(t.milliseconds),t.seconds=gi(t.seconds),t.minutes=gi(t.minutes),t.hours=gi(t.hours),t.months=gi(t.months),t.years=gi(t.years),this},Ui.add=function(t,e){return mi(this,t,e,1)},Ui.subtract=function(t,e){return mi(this,t,e,-1)},Ui.as=function(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=F(t))||"year"===t)return e=this._days+n/864e5,i=this._months+bi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(yi(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},Ui.asMilliseconds=xi,Ui.asSeconds=_i,Ui.asMinutes=Ci,Ui.asHours=Si,Ui.asDays=Di,Ui.asWeeks=ki,Ui.asMonths=Ti,Ui.asYears=Ei,Ui.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},Ui._bubble=function(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*vi(yi(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=w(r/1e3),l.seconds=t%60,e=w(t/60),l.minutes=e%60,i=w(e/60),l.hours=i%24,s+=w(i/24),a+=o=w(bi(s)),s-=vi(yi(o)),n=w(a/12),a%=12,l.days=s,l.months=a,l.years=n,this},Ui.clone=function(){return We(this)},Ui.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},Ui.milliseconds=Ii,Ui.seconds=Mi,Ui.minutes=Ai,Ui.hours=Fi,Ui.days=Oi,Ui.weeks=function(){return w(this.days()/7)},Ui.months=Pi,Ui.years=Ni,Ui.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=function(t,e,i){var n=We(t).abs(),o=Hi(n.as("s")),r=Hi(n.as("m")),s=Hi(n.as("h")),a=Hi(n.as("d")),l=Hi(n.as("M")),c=Hi(n.as("y")),h=o<=Li.ss&&["s",o]||o<Li.s&&["ss",o]||r<=1&&["m"]||r<Li.m&&["mm",r]||s<=1&&["h"]||s<Li.h&&["hh",s]||a<=1&&["d"]||a<Li.d&&["dd",a]||l<=1&&["M"]||l<Li.M&&["MM",l]||c<=1&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=i,function(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}.apply(null,h)}(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)},Ui.toISOString=$i,Ui.toString=$i,Ui.toJSON=$i,Ui.locale=Ke,Ui.localeData=ti,Ui.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$i),Ui.lang=Qe,U("X",0,0,"unix"),U("x",0,0,"valueOf"),lt("x",nt),lt("X",/[+-]?\d+(\.\d{1,3})?/),ut("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),ut("x",function(t,e,i){i._d=new Date(x(t))}),i.version="2.22.0",t=Ee,i.fn=ci,i.min=function(){return Me("isBefore",[].slice.call(arguments,0))},i.max=function(){return Me("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=d,i.unix=function(t){return Ee(1e3*t)},i.months=function(t,e){return pi(t,e,"months")},i.isDate=a,i.locale=le,i.invalid=f,i.duration=We,i.isMoment=y,i.weekdays=function(t,e,i){return fi(t,e,i,"weekdays")},i.parseZone=function(){return Ee.apply(null,arguments).parseZone()},i.localeData=he,i.isDuration=Oe,i.monthsShort=function(t,e){return pi(t,e,"monthsShort")},i.weekdaysMin=function(t,e,i){return fi(t,e,i,"weekdaysMin")},i.defineLocale=ce,i.updateLocale=function(t,e){if(null!=e){var i,n,o=ne;null!=(n=ae(t))&&(o=n._config),(i=new I(e=R(o,e))).parentLocale=oe[t],oe[t]=i,le(t)}else null!=oe[t]&&(null!=oe[t].parentLocale?oe[t]=oe[t].parentLocale:null!=oe[t]&&delete oe[t]);return oe[t]},i.locales=function(){return D(oe)},i.weekdaysShort=function(t,e,i){return fi(t,e,i,"weekdaysShort")},i.normalizeUnits=F,i.relativeTimeRounding=function(t){return void 0===t?Hi:"function"==typeof t&&(Hi=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==Li[t]&&(void 0===e?Li[t]:(Li[t]=e,"s"===t&&(Li.ss=e-1),!0))},i.calendarFormat=function(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},i.prototype=ci,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},i}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment"),require("jquery")):"function"==typeof define&&define.amd?define(["moment","jquery"],e):"object"==typeof exports?exports.FullCalendar=e(require("moment"),require("jquery")):t.FullCalendar=e(t.moment,t.jQuery)}("undefined"!=typeof self?self:this,function(t,e){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=236)}([function(e,i){e.exports=t},,function(t,e){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};e.__extends=function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,i){t.exports=e},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(3);function r(t){t.height("")}function s(t){var e,i=t[0].offsetWidth-t[0].clientWidth,n=t[0].offsetHeight-t[0].clientHeight;return i=a(i),e={left:0,right:0,top:0,bottom:n=a(n)},!function(){null===l&&(t=o("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),e=t.children().offset().left>t.offset().left,t.remove(),l=e);var t,e;return l}()||"rtl"!==t.css("direction")?e.right=i:e.left=i,e}function a(t){return t=Math.max(0,t),t=Math.round(t)}e.compensateScroll=function(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})},e.uncompensateScroll=function(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})},e.disableCursor=function(){o("body").addClass("fc-not-allowed")},e.enableCursor=function(){o("body").removeClass("fc-not-allowed")},e.distributeHeight=function(t,e,i){var n=Math.floor(e/t.length),s=Math.floor(e-n*(t.length-1)),a=[],l=[],c=[],h=0;r(t),t.each(function(e,i){var r=e===t.length-1?s:n,d=o(i).outerHeight(!0);d<r?(a.push(i),l.push(d),c.push(o(i).height())):h+=d}),i&&(e-=h,n=Math.floor(e/a.length),s=Math.floor(e-n*(a.length-1))),o(a).each(function(t,e){var i=t===a.length-1?s:n,r=l[t],h=i-(r-c[t]);r<i&&o(e).height(h)})},e.undistributeHeight=r,e.matchCellWidths=function(t){var e=0;return t.find("> *").each(function(t,i){var n=o(i).outerWidth();n>e&&(e=n)}),e++,t.width(e),e},e.subtractInnerElHeight=function(t,e){var i,n=t.add(e);return n.css({position:"relative",left:-1}),i=t.outerHeight()-e.outerHeight(),n.css({position:"",left:""}),i},e.getScrollParent=function(t){var e=t.css("position"),i=t.parents().filter(function(){var t=o(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&i.length?i:o(t[0].ownerDocument||document)},e.getOuterRect=function(t,e){var i=t.offset(),n=i.left-(e?e.left:0),o=i.top-(e?e.top:0);return{left:n,right:n+t.outerWidth(),top:o,bottom:o+t.outerHeight()}},e.getClientRect=function(t,e){var i=t.offset(),n=s(t),o=i.left+c(t,"border-left-width")+n.left-(e?e.left:0),r=i.top+c(t,"border-top-width")+n.top-(e?e.top:0);return{left:o,right:o+t[0].clientWidth,top:r,bottom:r+t[0].clientHeight}},e.getContentRect=function(t,e){var i=t.offset(),n=i.left+c(t,"border-left-width")+c(t,"padding-left")-(e?e.left:0),o=i.top+c(t,"border-top-width")+c(t,"padding-top")-(e?e.top:0);return{left:n,right:n+t.width(),top:o,bottom:o+t.height()}},e.getScrollbarWidths=s;var l=null;function c(t,e){return parseFloat(t.css(e))||0}function h(t){t.preventDefault()}function d(t,e,i,n,o){if(i.func)return i.func(t,e);var r=t[i.field],s=e[i.field];return null==r&&n&&(r=n[i.field]),null==s&&o&&(s=o[i.field]),u(r,s)*(i.order||1)}function u(t,e){return t||e?null==e?-1:null==t?1:"string"===o.type(t)||"string"===o.type(e)?String(t).localeCompare(String(e)):t-e:0}function p(t,i){var n,o,r;for(n=0;n<e.unitsDesc.length&&!((r=f(o=e.unitsDesc[n],t,i))>=1&&w(r));n++);return o}function f(t,e,i){return null!=i?i.diff(e,t,!0):n.isDuration(e)?e.as(t):e.end.diff(e.start,t,!0)}function g(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=window.console;if(i&&i.log)return i.log.apply(i,t)}e.isPrimaryMouseButton=function(t){return 1===t.which&&!t.ctrlKey},e.getEvX=function(t){var e=t.originalEvent.touches;return e&&e.length?e[0].pageX:t.pageX},e.getEvY=function(t){var e=t.originalEvent.touches;return e&&e.length?e[0].pageY:t.pageY},e.getEvIsTouch=function(t){return/^touch/.test(t.type)},e.preventSelection=function(t){t.addClass("fc-unselectable").on("selectstart",h)},e.allowSelection=function(t){t.removeClass("fc-unselectable").off("selectstart",h)},e.preventDefault=h,e.intersectRects=function(t,e){var i={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return i.left<i.right&&i.top<i.bottom&&i},e.constrainPoint=function(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}},e.getRectCenter=function(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}},e.diffPoints=function(t,e){return{left:t.left-e.left,top:t.top-e.top}},e.parseFieldSpecs=function(t){var e,i,n=[],r=[];for("string"==typeof t?r=t.split(/\s*,\s*/):"function"==typeof t?r=[t]:o.isArray(t)&&(r=t),e=0;e<r.length;e++)"string"==typeof(i=r[e])?n.push("-"===i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&n.push({func:i});return n},e.compareByFieldSpecs=function(t,e,i,n,o){var r,s;for(r=0;r<i.length;r++)if(s=d(t,e,i[r],n,o))return s;return 0},e.compareByFieldSpec=d,e.flexibleCompare=u,e.dayIDs=["sun","mon","tue","wed","thu","fri","sat"],e.unitsDesc=["year","month","week","day","hour","minute","second","millisecond"],e.diffDayTime=function(t,e){return n.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days"),ms:t.time()-e.time()})},e.diffDay=function(t,e){return n.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days")})},e.diffByUnit=function(t,e,i){return n.duration(Math.round(t.diff(e,i,!0)),i)},e.computeGreatestUnit=p,e.computeDurationGreatestUnit=function(t,e){var i=p(t);return"week"===i&&"object"==typeof e&&e.days&&(i="day"),i},e.divideRangeByDuration=function(t,e,i){var n;return g(i)?(e-t)/i:(n=i.asMonths(),Math.abs(n)>=1&&w(n)?e.diff(t,"months",!0)/n:e.diff(t,"days",!0)/i.asDays())},e.divideDurationByDuration=function(t,e){var i,n;return g(t)||g(e)?t/e:(i=t.asMonths(),n=e.asMonths(),Math.abs(i)>=1&&w(i)&&Math.abs(n)>=1&&w(n)?i/n:t.asDays()/e.asDays())},e.multiplyDuration=function(t,e){var i;return g(t)?n.duration(t*e):(i=t.asMonths(),Math.abs(i)>=1&&w(i)?n.duration({months:i*e}):n.duration({days:t.asDays()*e}))},e.durationHasTime=g,e.isNativeDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date},e.isTimeString=function(t){return"string"==typeof t&&/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)},e.log=m,e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=window.console;return i&&i.warn?i.warn.apply(i,t):m.apply(null,t)};var v={}.hasOwnProperty;function b(t,e){return v.call(t,e)}function y(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function w(t){return t%1==0}e.mergeProps=function t(e,i){var n,o,r,s,a,l,c={};if(i)for(n=0;n<i.length;n++){for(o=i[n],r=[],s=e.length-1;s>=0;s--)if("object"==typeof(a=e[s][o]))r.unshift(a);else if(void 0!==a){c[o]=a;break}r.length&&(c[o]=t(r))}for(n=e.length-1;n>=0;n--)for(o in l=e[n])o in c||(c[o]=l[o]);return c},e.copyOwnProps=function(t,e){for(var i in t)b(t,i)&&(e[i]=t[i])},e.hasOwnProp=b,e.applyAll=function(t,e,i){if(o.isFunction(t)&&(t=[t]),t){var n=void 0,r=void 0;for(n=0;n<t.length;n++)r=t[n].apply(e,i)||r;return r}},e.removeMatching=function(t,e){for(var i=0,n=0;n<t.length;)e(t[n])?(t.splice(n,1),i++):n++;return i},e.removeExact=function(t,e){for(var i=0,n=0;n<t.length;)t[n]===e?(t.splice(n,1),i++):n++;return i},e.isArraysEqual=function(t,e){var i,n=t.length;if(null==n||n!==e.length)return!1;for(i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0},e.firstDefined=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0;i<t.length;i++)if(void 0!==t[i])return t[i]},e.htmlEscape=y,e.stripHtmlEntities=function(t){return t.replace(/&.*?;/g,"")},e.cssToStr=function(t){var e=[];return o.each(t,function(t,i){null!=i&&e.push(t+":"+i)}),e.join(";")},e.attrsToStr=function(t){var e=[];return o.each(t,function(t,i){null!=i&&e.push(t+'="'+y(i)+'"')}),e.join(" ")},e.capitaliseFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.compareNumbers=function(t,e){return t-e},e.isInt=w,e.proxy=function(t,e){var i=t[e];return function(){return i.apply(t,arguments)}},e.debounce=function(t,e,i){var n,o,r,s,a;void 0===i&&(i=!1);var l=function(){var c=+new Date-s;c<e?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(r,o),r=o=null))};return function(){r=this,o=arguments,s=+new Date;var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(r,o),r=o=null),a}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(10),r=function(){function t(t,e){this.isStart=!0,this.isEnd=!0,n.isMoment(t)&&(t=t.clone().stripZone()),n.isMoment(e)&&(e=e.clone().stripZone()),t&&(this.startMs=t.valueOf()),e&&(this.endMs=e.valueOf())}return t.invertRanges=function(e,i){var n,o,r=[],a=i.startMs;for(e.sort(s),n=0;n<e.length;n++)(o=e[n]).startMs>a&&r.push(new t(a,o.startMs)),o.endMs>a&&(a=o.endMs);return a<i.endMs&&r.push(new t(a,i.endMs)),r},t.prototype.intersect=function(e){var i=this.startMs,n=this.endMs,o=null;return null!=e.startMs&&(i=null==i?e.startMs:Math.max(i,e.startMs)),null!=e.endMs&&(n=null==n?e.endMs:Math.min(n,e.endMs)),(null==i||null==n||i<n)&&((o=new t(i,n)).isStart=this.isStart&&i===this.startMs,o.isEnd=this.isEnd&&n===this.endMs),o},t.prototype.intersectsWith=function(t){return(null==this.endMs||null==t.startMs||this.endMs>t.startMs)&&(null==this.startMs||null==t.endMs||this.startMs<t.endMs)},t.prototype.containsRange=function(t){return(null==this.startMs||null!=t.startMs&&t.startMs>=this.startMs)&&(null==this.endMs||null!=t.endMs&&t.endMs<=this.endMs)},t.prototype.containsDate=function(t){var e=t.valueOf();return(null==this.startMs||e>=this.startMs)&&(null==this.endMs||e<this.endMs)},t.prototype.constrainDate=function(t){var e=t.valueOf();return null!=this.startMs&&e<this.startMs&&(e=this.startMs),null!=this.endMs&&e>=this.endMs&&(e=this.endMs-1),e},t.prototype.equals=function(t){return this.startMs===t.startMs&&this.endMs===t.endMs},t.prototype.clone=function(){var e=new t(this.startMs,this.endMs);return e.isStart=this.isStart,e.isEnd=this.isEnd,e},t.prototype.getStart=function(){return null!=this.startMs?o.default.utc(this.startMs).stripZone():null},t.prototype.getEnd=function(){return null!=this.endMs?o.default.utc(this.endMs).stripZone():null},t.prototype.as=function(t){return n.utc(this.endMs).diff(n.utc(this.startMs),t,!0)},t}();function s(t,e){return t.startMs-e.startMs}e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(208),s=i(33),a=i(49),l=function(t){function e(i){var n=t.call(this)||this;return n.calendar=i,n.className=[],n.uid=String(e.uuid++),n}return n.__extends(e,t),e.parse=function(t,e){var i=new this(e);return!("object"!=typeof t||!i.applyProps(t))&&i},e.normalizeId=function(t){return t?String(t):null},e.prototype.fetch=function(t,e,i){},e.prototype.removeEventDefsById=function(t){},e.prototype.removeAllEventDefs=function(){},e.prototype.getPrimitive=function(t){},e.prototype.parseEventDefs=function(t){var e,i,n=[];for(e=0;e<t.length;e++)(i=this.parseEventDef(t[e]))&&n.push(i);return n},e.prototype.parseEventDef=function(t){var e=this.calendar.opt("eventDataTransform"),i=this.eventDataTransform;return e&&(t=e(t,this.calendar)),i&&(t=i(t,this.calendar)),a.default.parse(t,this)},e.prototype.applyManualStandardProps=function(t){return null!=t.id&&(this.id=e.normalizeId(t.id)),o.isArray(t.className)?this.className=t.className:"string"==typeof t.className&&(this.className=t.className.split(/\s+/)),!0},e.uuid=0,e.defineStandardProps=r.default.defineStandardProps,e.copyVerbatimStandardProps=r.default.copyVerbatimStandardProps,e}(s.default);e.default=l,r.default.mixInto(l),l.defineStandardProps({id:!1,className:!1,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0,editable:!0,startEditable:!0,durationEditable:!0,rendering:!0,overlap:!0,constraint:!0,allDayDefault:!0,eventDataTransform:!0})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(14),s=0,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.listenTo=function(t,e,i){if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&this.listenTo(t,n,e[n]);else"string"==typeof e&&t.on(e+"."+this.getListenerNamespace(),o.proxy(i,this))},e.prototype.stopListeningTo=function(t,e){t.off((e||"")+"."+this.getListenerNamespace())},e.prototype.getListenerNamespace=function(){return null==this.listenerId&&(this.listenerId=s++),"_listener"+this.listenerId},e}(r.default);e.default=a},,,function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(3),r=i(4),s=/^\s*\d{4}-\d\d$/,a=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,l=n.fn;e.newMomentProto=l;var c=o.extend({},l);e.oldMomentProto=c;var h=n.momentProperties;h.push("_fullCalendar"),h.push("_ambigTime"),h.push("_ambigZone"),e.oldMomentFormat=function(t,e){return c.format.call(t,e)};var d=function(){return u(arguments)};function u(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var l,c,h,d,u=t[0],p=1===t.length&&"string"==typeof u;return n.isMoment(u)||r.isNativeDate(u)||void 0===u?d=n.apply(null,t):(l=!1,c=!1,p?s.test(u)?(t=[u+="-01"],l=!0,c=!0):(h=a.exec(u))&&(l=!h[5],c=!0):o.isArray(u)&&(c=!0),d=e||l?n.utc.apply(n,t):n.apply(null,t),l?(d._ambigTime=!0,d._ambigZone=!0):i&&(c?d._ambigZone=!0:p&&d.utcOffset(u))),d._fullCalendar=!0,d}e.default=d,d.utc=function(){var t=u(arguments,!0);return t.hasTime()&&t.utc(),t},d.parseZone=function(){return u(arguments,!0,!0)},l.week=l.weeks=function(t){var e=this._locale._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?c.isoWeek.apply(this,arguments):c.week.apply(this,arguments)},l.time=function(t){if(!this._fullCalendar)return c.time.apply(this,arguments);if(null==t)return n.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,n.isDuration(t)||n.isMoment(t)||(t=n.duration(t));var e=0;return n.isDuration(t)&&(e=24*Math.floor(t.asDays())),this.hours(e+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},l.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},l.hasTime=function(){return!this._ambigTime},l.stripZone=function(){var t;return this._ambigZone||(t=this._ambigTime,this.utc(!0),this._ambigTime=t||!1,this._ambigZone=!0),this},l.hasZone=function(){return!this._ambigZone},l.local=function(t){return c.local.call(this,this._ambigZone||t),this._ambigTime=!1,this._ambigZone=!1,this},l.utc=function(t){return c.utc.call(this,t),this._ambigTime=!1,this._ambigZone=!1,this},l.utcOffset=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),c.utcOffset.apply(this,arguments)}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.on=function(t,e){return o(this).on(t,this._prepareIntercept(e)),this},e.prototype.one=function(t,e){return o(this).one(t,this._prepareIntercept(e)),this},e.prototype._prepareIntercept=function(t){var e=function(e,i){return t.apply(i.context||this,i.args||[])};return t.guid||(t.guid=o.guid++),e.guid=t.guid,e},e.prototype.off=function(t,e){return o(this).off(t,e),this},e.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return o(this).triggerHandler(t,{args:e}),this},e.prototype.triggerWith=function(t,e,i){return o(this).triggerHandler(t,{context:e,args:i}),this},e.prototype.hasHandlers=function(t){var e=o._data(this,"events");return e&&e[t]&&e[t].length>0},e}(i(14).default);e.default=r},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.isAllDay=!1,this.unzonedRange=t,this.isAllDay=e}return t.prototype.toLegacy=function(t){return{start:t.msToMoment(this.unzonedRange.startMs,this.isAllDay),end:t.msToMoment(this.unzonedRange.endMs,this.isAllDay)}},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(34),r=i(209),s=i(17),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.buildInstances=function(){return[this.buildInstance()]},e.prototype.buildInstance=function(){return new r.default(this,this.dateProfile)},e.prototype.isAllDay=function(){return this.dateProfile.isAllDay()},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.dateProfile=this.dateProfile,e},e.prototype.rezone=function(){var t=this.source.calendar,e=this.dateProfile;this.dateProfile=new s.default(t.moment(e.start),e.end?t.moment(e.end):null,t)},e.prototype.applyManualStandardProps=function(e){var i=t.prototype.applyManualStandardProps.call(this,e),n=s.default.parse(e,this.source);return!!n&&(this.dateProfile=n,null!=e.date&&(this.miscProps.date=e.date),i)},e}(o.default);e.default=a,a.defineStandardProps({start:!1,date:!1,end:!1,allDay:!1})},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.mixInto=function(t){var e=this;Object.getOwnPropertyNames(this.prototype).forEach(function(i){t.prototype[i]||(t.prototype[i]=e.prototype[i])})},t.mixOver=function(t){var e=this;Object.getOwnPropertyNames(this.prototype).forEach(function(i){t.prototype[i]=e.prototype[i]})},t}();e.default=i},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.view=t._getView(),this.component=t}return t.prototype.opt=function(t){return this.view.opt(t)},t.prototype.end=function(){},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.version="3.9.0",e.internalApiVersion=12;var n=i(4);e.applyAll=n.applyAll,e.debounce=n.debounce,e.isInt=n.isInt,e.htmlEscape=n.htmlEscape,e.cssToStr=n.cssToStr,e.proxy=n.proxy,e.capitaliseFirstLetter=n.capitaliseFirstLetter,e.getOuterRect=n.getOuterRect,e.getClientRect=n.getClientRect,e.getContentRect=n.getContentRect,e.getScrollbarWidths=n.getScrollbarWidths,e.preventDefault=n.preventDefault,e.parseFieldSpecs=n.parseFieldSpecs,e.compareByFieldSpecs=n.compareByFieldSpecs,e.compareByFieldSpec=n.compareByFieldSpec,e.flexibleCompare=n.flexibleCompare,e.computeGreatestUnit=n.computeGreatestUnit,e.divideRangeByDuration=n.divideRangeByDuration,e.divideDurationByDuration=n.divideDurationByDuration,e.multiplyDuration=n.multiplyDuration,e.durationHasTime=n.durationHasTime,e.log=n.log,e.warn=n.warn,e.removeExact=n.removeExact,e.intersectRects=n.intersectRects;var o=i(47);e.formatDate=o.formatDate,e.formatRange=o.formatRange,e.queryMostGranularFormatUnit=o.queryMostGranularFormatUnit;var r=i(31);e.datepickerLocale=r.datepickerLocale,e.locale=r.locale;var s=i(10);e.moment=s.default;var a=i(11);e.EmitterMixin=a.default;var l=i(7);e.ListenerMixin=l.default;var c=i(48);e.Model=c.default;var h=i(207);e.Constraints=h.default;var d=i(5);e.UnzonedRange=d.default;var u=i(12);e.ComponentFootprint=u.default;var p=i(212);e.BusinessHourGenerator=p.default;var f=i(34);e.EventDef=f.default;var g=i(37);e.EventDefMutation=g.default;var m=i(38);e.EventSourceParser=m.default;var v=i(6);e.EventSource=v.default;var b=i(51);e.defineThemeSystem=b.defineThemeSystem;var y=i(18);e.EventInstanceGroup=y.default;var w=i(52);e.ArrayEventSource=w.default;var x=i(215);e.FuncEventSource=x.default;var _=i(216);e.JsonFeedEventSource=_.default;var C=i(36);e.EventFootprint=C.default;var S=i(33);e.Class=S.default;var D=i(14);e.Mixin=D.default;var k=i(53);e.CoordCache=k.default;var T=i(54);e.DragListener=T.default;var E=i(20);e.Promise=E.default;var R=i(217);e.TaskQueue=R.default;var I=i(218);e.RenderQueue=I.default;var M=i(39);e.Scroller=M.default;var A=i(19);e.Theme=A.default;var F=i(219);e.DateComponent=F.default;var O=i(40);e.InteractiveDateComponent=O.default;var P=i(220);e.Calendar=P.default;var N=i(41);e.View=N.default;var H=i(22);e.defineView=H.defineView,e.getViewConfig=H.getViewConfig;var L=i(55);e.DayTableMixin=L.default;var z=i(56);e.BusinessHourRenderer=z.default;var B=i(42);e.EventRenderer=B.default;var $=i(57);e.FillRenderer=$.default;var U=i(58);e.HelperRenderer=U.default;var j=i(222);e.ExternalDropping=j.default;var W=i(223);e.EventResizing=W.default;var Y=i(59);e.EventPointing=Y.default;var V=i(224);e.EventDragging=V.default;var q=i(225);e.DateSelecting=q.default;var G=i(60);e.StandardInteractionsMixin=G.default;var X=i(226);e.AgendaView=X.default;var Z=i(227);e.TimeGrid=Z.default;var J=i(61);e.DayGrid=J.default;var K=i(62);e.BasicView=K.default;var Q=i(229);e.MonthView=Q.default;var tt=i(230);e.ListView=tt.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=function(){function t(t,e,i){this.start=t,this.end=e||null,this.unzonedRange=this.buildUnzonedRange(i)}return t.parse=function(e,i){var n=e.start||e.date,o=e.end;if(!n)return!1;var r=i.calendar,s=r.moment(n),a=o?r.moment(o):null,l=e.allDay,c=r.opt("forceEventDuration");return!!s.isValid()&&(!a||a.isValid()&&a.isAfter(s)||(a=null),null==l&&null==(l=i.allDayDefault)&&(l=r.opt("allDayDefault")),!0===l?(s.stripTime(),a&&a.stripTime()):!1===l&&(s.hasTime()||s.time(0),a&&!a.hasTime()&&a.time(0)),!a&&c&&(a=r.getDefaultEventEnd(!s.hasTime(),s)),new t(s,a,r))},t.isStandardProp=function(t){return"start"===t||"date"===t||"end"===t||"allDay"===t},t.prototype.isAllDay=function(){return!(this.start.hasTime()||this.end&&this.end.hasTime())},t.prototype.buildUnzonedRange=function(t){var e=this.start.clone().stripZone().valueOf(),i=this.getEnd(t).stripZone().valueOf();return new n.default(e,i)},t.prototype.getEnd=function(t){return this.end?this.end.clone():t.getDefaultEventEnd(this.isAllDay(),this.start)},t}();e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=i(35),r=i(211),s=function(){function t(t){this.eventInstances=t||[]}return t.prototype.getAllEventRanges=function(t){return t?this.sliceNormalRenderRanges(t):this.eventInstances.map(o.eventInstanceToEventRange)},t.prototype.sliceRenderRanges=function(t){return this.isInverse()?this.sliceInverseRenderRanges(t):this.sliceNormalRenderRanges(t)},t.prototype.sliceNormalRenderRanges=function(t){var e,i,n,o=this.eventInstances,s=[];for(e=0;e<o.length;e++)(n=(i=o[e]).dateProfile.unzonedRange.intersect(t))&&s.push(new r.default(n,i.def,i));return s},t.prototype.sliceInverseRenderRanges=function(t){var e=this.eventInstances.map(o.eventInstanceToUnzonedRange),i=this.getEventDef();return(e=n.default.invertRanges(e,t)).map(function(t){return new r.default(t,i)})},t.prototype.isInverse=function(){return this.getEventDef().hasInverseRendering()},t.prototype.getEventDef=function(){return this.explicitEventDef||this.eventInstances[0].def},t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=function(){function t(t){this.optionsManager=t,this.processIconOverride()}return t.prototype.processIconOverride=function(){this.iconOverrideOption&&this.setIconOverride(this.optionsManager.get(this.iconOverrideOption))},t.prototype.setIconOverride=function(t){var e,i;if(n.isPlainObject(t)){for(i in e=n.extend({},this.iconClasses),t)e[i]=this.applyIconOverridePrefix(t[i]);this.iconClasses=e}else!1===t&&(this.iconClasses={})},t.prototype.applyIconOverridePrefix=function(t){var e=this.iconOverridePrefix;return e&&0!==t.indexOf(e)&&(t=e+t),t},t.prototype.getClass=function(t){return this.classes[t]||""},t.prototype.getIconClass=function(t){var e=this.iconClasses[t];return e?this.baseIconClass+" "+e:""},t.prototype.getCustomButtonIconClass=function(t){var e;return this.iconOverrideCustomButtonOption&&(e=t[this.iconOverrideCustomButtonOption])?this.baseIconClass+" "+this.applyIconOverridePrefix(e):""},t}();e.default=o,o.prototype.classes={},o.prototype.iconClasses={},o.prototype.baseIconClass="",o.prototype.iconOverridePrefix=""},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o={construct:function(t){var e=n.Deferred(),i=e.promise();return"function"==typeof t&&t(function(t){e.resolve(t),r(i,t)},function(){e.reject(),s(i)}),i},resolve:function(t){var e=n.Deferred().resolve(t).promise();return r(e,t),e},reject:function(){var t=n.Deferred().reject().promise();return s(t),t}};function r(t,e){t.then=function(i){return"function"==typeof i?o.resolve(i(e)):t}}function s(t){t.then=function(e,i){return"function"==typeof i&&i(),t}}e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(16),r=i(11),s=i(7);o.touchMouseIgnoreWait=500;var a=null,l=0,c=function(){function t(){this.isTouching=!1,this.mouseIgnoreDepth=0}return t.get=function(){return a||(a=new t).bind(),a},t.needed=function(){t.get(),l++},t.unneeded=function(){--l||(a.unbind(),a=null)},t.prototype.bind=function(){var t=this;this.listenTo(n(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu}),window.addEventListener("touchmove",this.handleTouchMoveProxy=function(e){t.handleTouchMove(n.Event(e))},{passive:!1}),window.addEventListener("scroll",this.handleScrollProxy=function(e){t.handleScroll(n.Event(e))},!0)},t.prototype.unbind=function(){this.stopListeningTo(n(document)),window.removeEventListener("touchmove",this.handleTouchMoveProxy),window.removeEventListener("scroll",this.handleScrollProxy,!0)},t.prototype.handleTouchStart=function(t){this.stopTouch(t,!0),this.isTouching=!0,this.trigger("touchstart",t)},t.prototype.handleTouchMove=function(t){this.isTouching&&this.trigger("touchmove",t)},t.prototype.handleTouchCancel=function(t){this.isTouching&&(this.trigger("touchcancel",t),this.stopTouch(t))},t.prototype.handleTouchEnd=function(t){this.stopTouch(t)},t.prototype.handleMouseDown=function(t){this.shouldIgnoreMouse()||this.trigger("mousedown",t)},t.prototype.handleMouseMove=function(t){this.shouldIgnoreMouse()||this.trigger("mousemove",t)},t.prototype.handleMouseUp=function(t){this.shouldIgnoreMouse()||this.trigger("mouseup",t)},t.prototype.handleClick=function(t){this.shouldIgnoreMouse()||this.trigger("click",t)},t.prototype.handleSelectStart=function(t){this.trigger("selectstart",t)},t.prototype.handleContextMenu=function(t){this.trigger("contextmenu",t)},t.prototype.handleScroll=function(t){this.trigger("scroll",t)},t.prototype.stopTouch=function(t,e){void 0===e&&(e=!1),this.isTouching&&(this.isTouching=!1,this.trigger("touchend",t),e||this.startTouchMouseIgnore())},t.prototype.startTouchMouseIgnore=function(){var t=this,e=o.touchMouseIgnoreWait;e&&(this.mouseIgnoreDepth++,setTimeout(function(){t.mouseIgnoreDepth--},e))},t.prototype.shouldIgnoreMouse=function(){return this.isTouching||Boolean(this.mouseIgnoreDepth)},t}();e.default=c,s.default.mixInto(c),r.default.mixInto(c)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(16);e.viewHash={},n.views=e.viewHash,e.defineView=function(t,i){e.viewHash[t]=i},e.getViewConfig=function(t){return e.viewHash[t]}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(t){function e(e,i){var n=t.call(this,i)||this;return n.component=e,n}return n.__extends(e,t),e.prototype.handleInteractionStart=function(e){var i,n,r,s=this.subjectEl;this.component.hitsNeeded(),this.computeScrollBounds(),e?(r=n={left:o.getEvX(e),top:o.getEvY(e)},s&&(i=o.getOuterRect(s),r=o.constrainPoint(r,i)),this.origHit=this.queryHit(r.left,r.top),s&&this.options.subjectCenter&&(this.origHit&&(i=o.intersectRects(this.origHit,i)||i),r=o.getRectCenter(i)),this.coordAdjust=o.diffPoints(r,n)):(this.origHit=null,this.coordAdjust=null),t.prototype.handleInteractionStart.call(this,e)},e.prototype.handleDragStart=function(e){var i;t.prototype.handleDragStart.call(this,e),(i=this.queryHit(o.getEvX(e),o.getEvY(e)))&&this.handleHitOver(i)},e.prototype.handleDrag=function(e,i,n){var r;t.prototype.handleDrag.call(this,e,i,n),s(r=this.queryHit(o.getEvX(n),o.getEvY(n)),this.hit)||(this.hit&&this.handleHitOut(),r&&this.handleHitOver(r))},e.prototype.handleDragEnd=function(e){this.handleHitDone(),t.prototype.handleDragEnd.call(this,e)},e.prototype.handleHitOver=function(t){var e=s(t,this.origHit);this.hit=t,this.trigger("hitOver",this.hit,e,this.origHit)},e.prototype.handleHitOut=function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},e.prototype.handleHitDone=function(){this.hit&&this.trigger("hitDone",this.hit)},e.prototype.handleInteractionEnd=function(e,i){t.prototype.handleInteractionEnd.call(this,e,i),this.origHit=null,this.hit=null,this.component.hitsNotNeeded()},e.prototype.handleScrollEnd=function(){t.prototype.handleScrollEnd.call(this),this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},e.prototype.queryHit=function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.component.queryHit(t,e)},e}(i(54).default);function s(t,e){return!t&&!e||!(!t||!e)&&(t.component===e.component&&a(t,e)&&a(e,t))}function a(t,e){for(var i in t)if(!/^(component|left|right|top|bottom)$/.test(i)&&t[i]!==e[i])return!1;return!0}e.default=r},,,,,,,,function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(0),r=i(16),s=i(32),a=i(4);e.localeOptionHash={},r.locales=e.localeOptionHash;var l={buttonText:function(t){return{prev:a.stripHtmlEntities(t.prevText),next:a.stripHtmlEntities(t.nextText),today:a.stripHtmlEntities(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},c={dayOfMonthFormat:function(t,e){var i=t.longDateFormat("l");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?i+=" ddd":i="ddd "+i,i},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},h={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};function d(t,i){var o,r;o=e.localeOptionHash[t]||(e.localeOptionHash[t]={}),i&&(o=e.localeOptionHash[t]=s.mergeOptions([o,i])),r=u(t),n.each(c,function(t,e){null==o[t]&&(o[t]=e(r,o))}),s.globalDefaults.locale=t}function u(t){return o.localeData(t)||o.localeData("en")}e.populateInstanceComputableOptions=function(t){n.each(h,function(e,i){null==t[e]&&(t[e]=i(t))})},e.datepickerLocale=function(t,i,o){var r=e.localeOptionHash[t]||(e.localeOptionHash[t]={});r.isRTL=o.isRTL,r.weekNumberTitle=o.weekHeader,n.each(l,function(t,e){r[t]=e(o)});var s=n.datepicker;s&&(s.regional[i]=s.regional[t]=o,s.regional.en=s.regional[""],s.setDefaults(o))},e.locale=d,e.getMomentLocaleData=u,d("en",s.englishDefaults)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(4);e.globalDefaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",columnHeader:!0,defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,locale:null,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},allDayText:"all-day",agendaEventMinHeight:0,theme:!1,dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},e.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},e.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var o=["header","footer","buttonText","buttonIcons","themeButtonIcons"];e.mergeOptions=function(t){return n.mergeProps(t,o)}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(){function t(){}return t.extend=function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(this);return o.copyOwnProps(t,e.prototype),e},t.mixin=function(t){o.copyOwnProps(t,this.prototype)},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(208),r=function(){function t(t){this.source=t,this.className=[],this.miscProps={}}return t.parse=function(t,e){var i=new this(e);return!!i.applyProps(t)&&i},t.normalizeId=function(t){return String(t)},t.generateId=function(){return"_fc"+t.uuid++},t.prototype.clone=function(){var e=new this.constructor(this.source);return e.id=this.id,e.rawId=this.rawId,e.uid=this.uid,t.copyVerbatimStandardProps(this,e),e.className=this.className.slice(),e.miscProps=n.extend({},this.miscProps),e},t.prototype.hasInverseRendering=function(){return"inverse-background"===this.getRendering()},t.prototype.hasBgRendering=function(){var t=this.getRendering();return"inverse-background"===t||"background"===t},t.prototype.getRendering=function(){return null!=this.rendering?this.rendering:this.source.rendering},t.prototype.getConstraint=function(){return null!=this.constraint?this.constraint:null!=this.source.constraint?this.source.constraint:this.source.calendar.opt("eventConstraint")},t.prototype.getOverlap=function(){return null!=this.overlap?this.overlap:null!=this.source.overlap?this.source.overlap:this.source.calendar.opt("eventOverlap")},t.prototype.isStartExplicitlyEditable=function(){return null!=this.startEditable?this.startEditable:this.source.startEditable},t.prototype.isDurationExplicitlyEditable=function(){return null!=this.durationEditable?this.durationEditable:this.source.durationEditable},t.prototype.isExplicitlyEditable=function(){return null!=this.editable?this.editable:this.source.editable},t.prototype.toLegacy=function(){var e=n.extend({},this.miscProps);return e._id=this.uid,e.source=this.source,e.className=this.className.slice(),e.allDay=this.isAllDay(),null!=this.rawId&&(e.id=this.rawId),t.copyVerbatimStandardProps(this,e),e},t.prototype.applyManualStandardProps=function(e){return null!=e.id?this.id=t.normalizeId(this.rawId=e.id):this.id=t.generateId(),null!=e._id?this.uid=String(e._id):this.uid=t.generateId(),n.isArray(e.className)&&(this.className=e.className),"string"==typeof e.className&&(this.className=e.className.split(/\s+/)),!0},t.prototype.applyMiscProps=function(t){n.extend(this.miscProps,t)},t.uuid=0,t.defineStandardProps=o.default.defineStandardProps,t.copyVerbatimStandardProps=o.default.copyVerbatimStandardProps,t}();e.default=r,o.default.mixInto(r),r.defineStandardProps({_id:!1,id:!1,className:!1,source:!1,title:!0,url:!0,rendering:!0,constraint:!0,overlap:!0,editable:!0,startEditable:!0,durationEditable:!0,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(211),o=i(36),r=i(12);e.eventDefsToEventInstances=function(t,e){var i,n=[];for(i=0;i<t.length;i++)n.push.apply(n,t[i].buildInstances(e));return n},e.eventInstanceToEventRange=function(t){return new n.default(t.dateProfile.unzonedRange,t.def,t)},e.eventRangeToEventFootprint=function(t){return new o.default(new r.default(t.unzonedRange,t.eventDef.isAllDay()),t.eventDef,t.eventInstance)},e.eventInstanceToUnzonedRange=function(t){return t.dateProfile.unzonedRange},e.eventFootprintToComponentFootprint=function(t){return t.componentFootprint}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i){this.componentFootprint=t,this.eventDef=e,i&&(this.eventInstance=i)}return t.prototype.getEventLegacy=function(){return(this.eventInstance||this.eventDef).toLegacy()},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(17),r=i(34),s=i(50),a=i(13),l=function(){function t(){}return t.createFromRawProps=function(e,i,a){var l,c,h,d,u=e.def,p={},f={},g={},m={},v=null,b=null;for(l in i)o.default.isStandardProp(l)?p[l]=i[l]:u.isStandardProp(l)?f[l]=i[l]:u.miscProps[l]!==i[l]&&(g[l]=i[l]);return(c=o.default.parse(p,u.source))&&(h=s.default.createFromDiff(e.dateProfile,c,a)),f.id!==u.id&&(v=f.id),n.isArraysEqual(f.className,u.className)||(b=f.className),r.default.copyVerbatimStandardProps(f,m),(d=new t).eventDefId=v,d.className=b,d.verbatimStandardProps=m,d.miscProps=g,h&&(d.dateMutation=h),d},t.prototype.mutateSingle=function(t){var e;return this.dateMutation&&(e=t.dateProfile,t.dateProfile=this.dateMutation.buildNewDateProfile(e,t.source.calendar)),null!=this.eventDefId&&(t.id=r.default.normalizeId(t.rawId=this.eventDefId)),this.className&&(t.className=this.className),this.verbatimStandardProps&&a.default.copyVerbatimStandardProps(this.verbatimStandardProps,t),this.miscProps&&t.applyMiscProps(this.miscProps),e?function(){t.dateProfile=e}:function(){}},t.prototype.setDateMutation=function(t){t&&!t.isEmpty()?this.dateMutation=t:this.dateMutation=null},t.prototype.isEmpty=function(){return!this.dateMutation},t}();e.default=l},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={sourceClasses:[],registerClass:function(t){this.sourceClasses.unshift(t)},parse:function(t,e){var i,n,o=this.sourceClasses;for(i=0;i<o.length;i++)if(n=o[i].parse(t,e))return n}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=function(t){function e(e){var i=t.call(this)||this;return e=e||{},i.overflowX=e.overflowX||e.overflow||"auto",i.overflowY=e.overflowY||e.overflow||"auto",i}return n.__extends(e,t),e.prototype.render=function(){this.el=this.renderEl(),this.applyOverflow()},e.prototype.renderEl=function(){return this.scrollEl=o('<div class="fc-scroller"></div>')},e.prototype.clear=function(){this.setHeight("auto"),this.applyOverflow()},e.prototype.destroy=function(){this.el.remove()},e.prototype.applyOverflow=function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},e.prototype.lockOverflow=function(t){var e=this.overflowX,i=this.overflowY;t=t||this.getScrollbarWidths(),"auto"===e&&(e=t.top||t.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===i&&(i=t.left||t.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":e,"overflow-y":i})},e.prototype.setHeight=function(t){this.scrollEl.height(t)},e.prototype.getScrollTop=function(){return this.scrollEl.scrollTop()},e.prototype.setScrollTop=function(t){this.scrollEl.scrollTop(t)},e.prototype.getClientWidth=function(){return this.scrollEl[0].clientWidth},e.prototype.getClientHeight=function(){return this.scrollEl[0].clientHeight},e.prototype.getScrollbarWidths=function(){return r.getScrollbarWidths(this.scrollEl)},e}(i(33).default);e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(219),a=i(21),l=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.segSelector=".fc-event-container > *",n.dateSelectingClass&&(n.dateClicking=new n.dateClickingClass(n)),n.dateSelectingClass&&(n.dateSelecting=new n.dateSelectingClass(n)),n.eventPointingClass&&(n.eventPointing=new n.eventPointingClass(n)),n.eventDraggingClass&&n.eventPointing&&(n.eventDragging=new n.eventDraggingClass(n,n.eventPointing)),n.eventResizingClass&&n.eventPointing&&(n.eventResizing=new n.eventResizingClass(n,n.eventPointing)),n.externalDroppingClass&&(n.externalDropping=new n.externalDroppingClass(n)),n}return n.__extends(e,t),e.prototype.setElement=function(e){t.prototype.setElement.call(this,e),this.dateClicking&&this.dateClicking.bindToEl(e),this.dateSelecting&&this.dateSelecting.bindToEl(e),this.bindAllSegHandlersToEl(e)},e.prototype.removeElement=function(){this.endInteractions(),t.prototype.removeElement.call(this)},e.prototype.executeEventUnrender=function(){this.endInteractions(),t.prototype.executeEventUnrender.call(this)},e.prototype.bindGlobalHandlers=function(){t.prototype.bindGlobalHandlers.call(this),this.externalDropping&&this.externalDropping.bindToDocument()},e.prototype.unbindGlobalHandlers=function(){t.prototype.unbindGlobalHandlers.call(this),this.externalDropping&&this.externalDropping.unbindFromDocument()},e.prototype.bindDateHandlerToEl=function(t,e,i){var n=this;this.el.on(e,function(t){if(!o(t.target).is(n.segSelector+":not(.fc-helper),"+n.segSelector+":not(.fc-helper) *,.fc-more,a[data-goto]"))return i.call(n,t)})},e.prototype.bindAllSegHandlersToEl=function(t){[this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(e){e&&e.bindToEl(t)})},e.prototype.bindSegHandlerToEl=function(t,e,i){var n=this;t.on(e,this.segSelector,function(t){var e=o(t.currentTarget);if(!e.is(".fc-helper")){var r=e.data("fc-seg");if(r&&!n.shouldIgnoreEventPointing())return i.call(n,r,t)}})},e.prototype.shouldIgnoreMouse=function(){return a.default.get().shouldIgnoreMouse()},e.prototype.shouldIgnoreTouch=function(){var t=this._getView();return t.isSelected||t.selectedEvent},e.prototype.shouldIgnoreEventPointing=function(){return this.eventDragging&&this.eventDragging.isDragging||this.eventResizing&&this.eventResizing.isResizing},e.prototype.canStartSelection=function(t,e){return r.getEvIsTouch(e)&&!this.canStartResize(t,e)&&(this.isEventDefDraggable(t.footprint.eventDef)||this.isEventDefResizable(t.footprint.eventDef))},e.prototype.canStartDrag=function(t,e){return!this.canStartResize(t,e)&&this.isEventDefDraggable(t.footprint.eventDef)},e.prototype.canStartResize=function(t,e){var i=this._getView(),n=t.footprint.eventDef;return(!r.getEvIsTouch(e)||i.isEventDefSelected(n))&&this.isEventDefResizable(n)&&o(e.target).is(".fc-resizer")},e.prototype.endInteractions=function(){[this.dateClicking,this.dateSelecting,this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(t){t&&t.end()})},e.prototype.isEventDefDraggable=function(t){return this.isEventDefStartEditable(t)},e.prototype.isEventDefStartEditable=function(t){var e=t.isStartExplicitlyEditable();return null==e&&null==(e=this.opt("eventStartEditable"))&&(e=this.isEventDefGenerallyEditable(t)),e},e.prototype.isEventDefGenerallyEditable=function(t){var e=t.isExplicitlyEditable();return null==e&&(e=this.opt("editable")),e},e.prototype.isEventDefResizableFromStart=function(t){return this.opt("eventResizableFromStart")&&this.isEventDefResizable(t)},e.prototype.isEventDefResizableFromEnd=function(t){return this.isEventDefResizable(t)},e.prototype.isEventDefResizable=function(t){var e=t.isDurationExplicitlyEditable();return null==e&&null==(e=this.opt("eventDurationEditable"))&&(e=this.isEventDefGenerallyEditable(t)),e},e.prototype.diffDates=function(t,e){return this.largeUnit?r.diffByUnit(t,e,this.largeUnit):r.diffDayTime(t,e)},e.prototype.isEventInstanceGroupAllowed=function(t){var e,i=this._getView(),n=this.dateProfile,o=this.eventRangesToEventFootprints(t.getAllEventRanges());for(e=0;e<o.length;e++)if(!n.validUnzonedRange.containsRange(o[e].componentFootprint.unzonedRange))return!1;return i.calendar.constraints.isEventInstanceGroupAllowed(t)},e.prototype.isExternalInstanceGroupAllowed=function(t){var e,i=this._getView(),n=this.dateProfile,o=this.eventRangesToEventFootprints(t.getAllEventRanges());for(e=0;e<o.length;e++)if(!n.validUnzonedRange.containsRange(o[e].componentFootprint.unzonedRange))return!1;for(e=0;e<o.length;e++)if(!i.calendar.constraints.isSelectionFootprintAllowed(o[e].componentFootprint))return!1;return!0},e}(s.default);e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(0),s=i(4),a=i(218),l=i(221),c=i(40),h=i(21),d=i(5),u=function(t){function e(e,i){var n=t.call(this,null,i.options)||this;return n.batchRenderDepth=0,n.isSelected=!1,n.calendar=e,n.viewSpec=i,n.type=i.type,n.name=n.type,n.initRenderQueue(),n.initHiddenDays(),n.dateProfileGenerator=new n.dateProfileGeneratorClass(n),n.bindBaseRenderHandlers(),n.eventOrderSpecs=s.parseFieldSpecs(n.opt("eventOrder")),n.initialize&&n.initialize(),n}return n.__extends(e,t),e.prototype._getView=function(){return this},e.prototype.opt=function(t){return this.options[t]},e.prototype.initRenderQueue=function(){this.renderQueue=new a.default({event:this.opt("eventRenderWait")}),this.renderQueue.on("start",this.onRenderQueueStart.bind(this)),this.renderQueue.on("stop",this.onRenderQueueStop.bind(this)),this.on("before:change",this.startBatchRender),this.on("change",this.stopBatchRender)},e.prototype.onRenderQueueStart=function(){this.calendar.freezeContentHeight(),this.addScroll(this.queryScroll())},e.prototype.onRenderQueueStop=function(){this.calendar.updateViewSize()&&this.popScroll(),this.calendar.thawContentHeight()},e.prototype.startBatchRender=function(){this.batchRenderDepth++||this.renderQueue.pause()},e.prototype.stopBatchRender=function(){--this.batchRenderDepth||this.renderQueue.resume()},e.prototype.requestRender=function(t,e,i){this.renderQueue.queue(t,e,i)},e.prototype.whenSizeUpdated=function(t){this.renderQueue.isRunning?this.renderQueue.one("stop",t.bind(this)):t.call(this)},e.prototype.computeTitle=function(t){var e;return e=/^(year|month)$/.test(t.currentRangeUnit)?t.currentUnzonedRange:t.activeUnzonedRange,this.formatRange({start:this.calendar.msToMoment(e.startMs,t.isRangeAllDay),end:this.calendar.msToMoment(e.endMs,t.isRangeAllDay)},t.isRangeAllDay,this.opt("titleFormat")||this.computeTitleFormat(t),this.opt("titleRangeSeparator"))},e.prototype.computeTitleFormat=function(t){var e=t.currentRangeUnit;return"year"===e?"YYYY":"month"===e?this.opt("monthYearFormat"):t.currentUnzonedRange.as("days")>1?"ll":"LL"},e.prototype.setDate=function(t){var e=this.get("dateProfile"),i=this.dateProfileGenerator.build(t,void 0,!0);e&&e.activeUnzonedRange.equals(i.activeUnzonedRange)||this.set("dateProfile",i)},e.prototype.unsetDate=function(){this.unset("dateProfile")},e.prototype.fetchInitialEvents=function(t){var e=this.calendar,i=t.isRangeAllDay&&!this.usesMinMaxTime;return e.requestEvents(e.msToMoment(t.activeUnzonedRange.startMs,i),e.msToMoment(t.activeUnzonedRange.endMs,i))},e.prototype.bindEventChanges=function(){this.listenTo(this.calendar,"eventsReset",this.resetEvents)},e.prototype.unbindEventChanges=function(){this.stopListeningTo(this.calendar,"eventsReset")},e.prototype.setEvents=function(t){this.set("currentEvents",t),this.set("hasEvents",!0)},e.prototype.unsetEvents=function(){this.unset("currentEvents"),this.unset("hasEvents")},e.prototype.resetEvents=function(t){this.startBatchRender(),this.unsetEvents(),this.setEvents(t),this.stopBatchRender()},e.prototype.requestDateRender=function(t){var e=this;this.requestRender(function(){e.executeDateRender(t)},"date","init")},e.prototype.requestDateUnrender=function(){var t=this;this.requestRender(function(){t.executeDateUnrender()},"date","destroy")},e.prototype.executeDateRender=function(e){t.prototype.executeDateRender.call(this,e),this.render&&this.render(),this.trigger("datesRendered"),this.addScroll({isDateInit:!0}),this.startNowIndicator()},e.prototype.executeDateUnrender=function(){this.unselect(),this.stopNowIndicator(),this.trigger("before:datesUnrendered"),this.destroy&&this.destroy(),t.prototype.executeDateUnrender.call(this)},e.prototype.bindBaseRenderHandlers=function(){var t=this;this.on("datesRendered",function(){t.whenSizeUpdated(t.triggerViewRender)}),this.on("before:datesUnrendered",function(){t.triggerViewDestroy()})},e.prototype.triggerViewRender=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})},e.prototype.triggerViewDestroy=function(){this.publiclyTrigger("viewDestroy",{context:this,args:[this,this.el]})},e.prototype.requestEventsRender=function(t){var e=this;this.requestRender(function(){e.executeEventRender(t),e.whenSizeUpdated(e.triggerAfterEventsRendered)},"event","init")},e.prototype.requestEventsUnrender=function(){var t=this;this.requestRender(function(){t.triggerBeforeEventsDestroyed(),t.executeEventUnrender()},"event","destroy")},e.prototype.requestBusinessHoursRender=function(t){var e=this;this.requestRender(function(){e.renderBusinessHours(t)},"businessHours","init")},e.prototype.requestBusinessHoursUnrender=function(){var t=this;this.requestRender(function(){t.unrenderBusinessHours()},"businessHours","destroy")},e.prototype.bindGlobalHandlers=function(){t.prototype.bindGlobalHandlers.call(this),this.listenTo(h.default.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},e.prototype.unbindGlobalHandlers=function(){t.prototype.unbindGlobalHandlers.call(this),this.stopListeningTo(h.default.get())},e.prototype.startNowIndicator=function(){var t,e,i,n=this;this.opt("nowIndicator")&&(t=this.getNowIndicatorUnit())&&(e=s.proxy(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=(new Date).valueOf(),i=this.initialNowDate.clone().startOf(t).add(1,t).valueOf()-this.initialNowDate.valueOf(),this.nowIndicatorTimeoutID=setTimeout(function(){n.nowIndicatorTimeoutID=null,e(),i=+r.duration(1,t),i=Math.max(100,i),n.nowIndicatorIntervalID=setInterval(e,i)},i))},e.prototype.updateNowIndicator=function(){this.isDatesRendered&&this.initialNowDate&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add((new Date).valueOf()-this.initialNowQueriedMs)),this.isNowIndicatorRendered=!0)},e.prototype.stopNowIndicator=function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearInterval(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},e.prototype.updateSize=function(e,i,n){this.setHeight?this.setHeight(e,i):t.prototype.updateSize.call(this,e,i,n),this.updateNowIndicator()},e.prototype.addScroll=function(t){var e=this.queuedScroll||(this.queuedScroll={});o.extend(e,t)},e.prototype.popScroll=function(){this.applyQueuedScroll(),this.queuedScroll=null},e.prototype.applyQueuedScroll=function(){this.queuedScroll&&this.applyScroll(this.queuedScroll)},e.prototype.queryScroll=function(){var t={};return this.isDatesRendered&&o.extend(t,this.queryDateScroll()),t},e.prototype.applyScroll=function(t){t.isDateInit&&this.isDatesRendered&&o.extend(t,this.computeInitialDateScroll()),this.isDatesRendered&&this.applyDateScroll(t)},e.prototype.computeInitialDateScroll=function(){return{}},e.prototype.queryDateScroll=function(){return{}},e.prototype.applyDateScroll=function(t){},e.prototype.reportEventDrop=function(t,e,i,n){var o=this.calendar.eventManager.mutateEventsWithId(t.def.id,e),s=e.dateMutation;s&&(t.dateProfile=s.buildNewDateProfile(t.dateProfile,this.calendar)),this.triggerEventDrop(t,s&&s.dateDelta||r.duration(),o,i,n)},e.prototype.triggerEventDrop=function(t,e,i,n,o){this.publiclyTrigger("eventDrop",{context:n[0],args:[t.toLegacy(),e,i,o,{},this]})},e.prototype.reportExternalDrop=function(t,e,i,n,o,r){e&&this.calendar.eventManager.addEventDef(t,i),this.triggerExternalDrop(t,e,n,o,r)},e.prototype.triggerExternalDrop=function(t,e,i,n,o){this.publiclyTrigger("drop",{context:i[0],args:[t.dateProfile.start.clone(),n,o,this]}),e&&this.publiclyTrigger("eventReceive",{context:this,args:[t.buildInstance().toLegacy(),this]})},e.prototype.reportEventResize=function(t,e,i,n){var o=this.calendar.eventManager.mutateEventsWithId(t.def.id,e);t.dateProfile=e.dateMutation.buildNewDateProfile(t.dateProfile,this.calendar),this.triggerEventResize(t,e.dateMutation.endDelta,o,i,n)},e.prototype.triggerEventResize=function(t,e,i,n,o){this.publiclyTrigger("eventResize",{context:n[0],args:[t.toLegacy(),e,i,o,{},this]})},e.prototype.select=function(t,e){this.unselect(e),this.renderSelectionFootprint(t),this.reportSelection(t,e)},e.prototype.renderSelectionFootprint=function(e){this.renderSelection?this.renderSelection(e.toLegacy(this.calendar)):t.prototype.renderSelectionFootprint.call(this,e)},e.prototype.reportSelection=function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},e.prototype.triggerSelect=function(t,e){var i=this.calendar.footprintToDateProfile(t);this.publiclyTrigger("select",{context:this,args:[i.start,i.end,e,this]})},e.prototype.unselect=function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",{context:this,args:[t,this]}))},e.prototype.selectEventInstance=function(t){this.selectedEventInstance&&this.selectedEventInstance===t||(this.unselectEventInstance(),this.getEventSegs().forEach(function(e){e.footprint.eventInstance===t&&e.el&&e.el.addClass("fc-selected")}),this.selectedEventInstance=t)},e.prototype.unselectEventInstance=function(){this.selectedEventInstance&&(this.getEventSegs().forEach(function(t){t.el&&t.el.removeClass("fc-selected")}),this.selectedEventInstance=null)},e.prototype.isEventDefSelected=function(t){return this.selectedEventInstance&&this.selectedEventInstance.def.id===t.id},e.prototype.handleDocumentMousedown=function(t){s.isPrimaryMouseButton(t)&&this.processUnselect(t)},e.prototype.processUnselect=function(t){this.processRangeUnselect(t),this.processEventUnselect(t)},e.prototype.processRangeUnselect=function(t){var e;this.isSelected&&this.opt("unselectAuto")&&((e=this.opt("unselectCancel"))&&o(t.target).closest(e).length||this.unselect(t))},e.prototype.processEventUnselect=function(t){this.selectedEventInstance&&(o(t.target).closest(".fc-selected").length||this.unselectEventInstance())},e.prototype.triggerBaseRendered=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})},e.prototype.triggerBaseUnrendered=function(){this.publiclyTrigger("viewDestroy",{context:this,args:[this,this.el]})},e.prototype.triggerDayClick=function(t,e,i){var n=this.calendar.footprintToDateProfile(t);this.publiclyTrigger("dayClick",{context:e,args:[n.start,i,this]})},e.prototype.isDateInOtherMonth=function(t,e){return!1},e.prototype.getUnzonedRangeOption=function(t){var e=this.opt(t);if("function"==typeof e&&(e=e.apply(null,Array.prototype.slice.call(arguments,1))),e)return this.calendar.parseUnzonedRange(e)},e.prototype.initHiddenDays=function(){var t,e=this.opt("hiddenDays")||[],i=[],n=0;for(!1===this.opt("weekends")&&e.push(0,6),t=0;t<7;t++)(i[t]=-1!==o.inArray(t,e))||n++;if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=i},e.prototype.trimHiddenDays=function(t){var e=t.getStart(),i=t.getEnd();return e&&(e=this.skipHiddenDays(e)),i&&(i=this.skipHiddenDays(i,-1,!0)),null===e||null===i||e<i?new d.default(e,i):null},e.prototype.isHiddenDay=function(t){return r.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},e.prototype.skipHiddenDays=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var n=t.clone();this.isHiddenDayHash[(n.day()+(i?e:0)+7)%7];)n.add(e,"days");return n},e}(c.default);e.default=u,u.prototype.usesMinMaxTime=!1,u.prototype.dateProfileGeneratorClass=l.default,u.watch("displayingDates",["isInDom","dateProfile"],function(t){this.requestDateRender(t.dateProfile)},function(){this.requestDateUnrender()}),u.watch("displayingBusinessHours",["displayingDates","businessHourGenerator"],function(t){this.requestBusinessHoursRender(t.businessHourGenerator)},function(){this.requestBusinessHoursUnrender()}),u.watch("initialEvents",["dateProfile"],function(t){return this.fetchInitialEvents(t.dateProfile)}),u.watch("bindingEvents",["initialEvents"],function(t){this.setEvents(t.initialEvents),this.bindEventChanges()},function(){this.unbindEventChanges(),this.unsetEvents()}),u.watch("displayingEvents",["displayingDates","hasEvents"],function(){this.requestEventsRender(this.get("currentEvents"))},function(){this.requestEventsUnrender()}),u.watch("title",["dateProfile"],function(t){return this.title=this.computeTitle(t.dateProfile)}),u.watch("legacyDateProps",["dateProfile"],function(t){var e=this.calendar,i=t.dateProfile;this.start=e.msToMoment(i.activeUnzonedRange.startMs,i.isRangeAllDay),this.end=e.msToMoment(i.activeUnzonedRange.endMs,i.isRangeAllDay),this.intervalStart=e.msToMoment(i.currentUnzonedRange.startMs,i.isRangeAllDay),this.intervalEnd=e.msToMoment(i.currentUnzonedRange.endMs,i.isRangeAllDay)})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=function(){function t(t,e){this.view=t._getView(),this.component=t,this.fillRenderer=e}return t.prototype.opt=function(t){return this.view.opt(t)},t.prototype.rangeUpdated=function(){var t,e;this.eventTimeFormat=this.opt("eventTimeFormat")||this.opt("timeFormat")||this.computeEventTimeFormat(),null==(t=this.opt("displayEventTime"))&&(t=this.computeDisplayEventTime()),null==(e=this.opt("displayEventEnd"))&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},t.prototype.render=function(t){var e,i,n,o=this.component._getDateProfile(),r=[],s=[];for(e in t)n=(i=t[e]).sliceRenderRanges(o.activeUnzonedRange),i.getEventDef().hasBgRendering()?r.push.apply(r,n):s.push.apply(s,n);this.renderBgRanges(r),this.renderFgRanges(s)},t.prototype.unrender=function(){this.unrenderBgRanges(),this.unrenderFgRanges()},t.prototype.renderFgRanges=function(t){var e=this.component.eventRangesToEventFootprints(t),i=this.component.eventFootprintsToSegs(e);i=this.renderFgSegEls(i),!1!==this.renderFgSegs(i)&&(this.fgSegs=i)},t.prototype.unrenderFgRanges=function(){this.unrenderFgSegs(this.fgSegs||[]),this.fgSegs=null},t.prototype.renderBgRanges=function(t){var e=this.component.eventRangesToEventFootprints(t),i=this.component.eventFootprintsToSegs(e);!1!==this.renderBgSegs(i)&&(this.bgSegs=i)},t.prototype.unrenderBgRanges=function(){this.unrenderBgSegs(),this.bgSegs=null},t.prototype.getSegs=function(){return(this.bgSegs||[]).concat(this.fgSegs||[])},t.prototype.renderFgSegs=function(t){return!1},t.prototype.unrenderFgSegs=function(t){},t.prototype.renderBgSegs=function(t){var e=this;if(!this.fillRenderer)return!1;this.fillRenderer.renderSegs("bgEvent",t,{getClasses:function(t){return e.getBgClasses(t.footprint.eventDef)},getCss:function(t){return{"background-color":e.getBgColor(t.footprint.eventDef)}},filterEl:function(t,i){return e.filterEventRenderEl(t.footprint,i)}})},t.prototype.unrenderBgSegs=function(){this.fillRenderer&&this.fillRenderer.unrender("bgEvent")},t.prototype.renderFgSegEls=function(t,e){var i=this;void 0===e&&(e=!1);var o,r=this.view.hasPublicHandlers("eventRender"),s="",a=[];if(t.length){for(o=0;o<t.length;o++)this.beforeFgSegHtml(t[o]),s+=this.fgSegHtml(t[o],e);n(s).each(function(e,o){var s=t[e],l=n(o);r&&(l=i.filterEventRenderEl(s.footprint,l)),l&&(l.data("fc-seg",s),s.el=l,a.push(s))})}return a},t.prototype.beforeFgSegHtml=function(t){},t.prototype.fgSegHtml=function(t,e){},t.prototype.getSegClasses=function(t,e,i){var n=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(this.getClasses(t.footprint.eventDef));return e&&n.push("fc-draggable"),i&&n.push("fc-resizable"),this.view.isEventDefSelected(t.footprint.eventDef)&&n.push("fc-selected"),n},t.prototype.filterEventRenderEl=function(t,e){var i=t.getEventLegacy(),o=this.view.publiclyTrigger("eventRender",{context:i,args:[i,e,this.view]});return!1===o?e=null:o&&!0!==o&&(e=n(o)),e},t.prototype.getTimeText=function(t,e,i){return this._getTimeText(t.eventInstance.dateProfile.start,t.eventInstance.dateProfile.end,t.componentFootprint.isAllDay,e,i)},t.prototype._getTimeText=function(t,e,i,n,o){return null==n&&(n=this.eventTimeFormat),null==o&&(o=this.displayEventEnd),this.displayEventTime&&!i?o&&e?this.view.formatRange({start:t,end:e},!1,n):t.format(n):""},t.prototype.computeEventTimeFormat=function(){return this.opt("smallTimeFormat")},t.prototype.computeDisplayEventTime=function(){return!0},t.prototype.computeDisplayEventEnd=function(){return!0},t.prototype.getBgClasses=function(t){var e=this.getClasses(t);return e.push("fc-bgevent"),e},t.prototype.getClasses=function(t){var e,i=this.getStylingObjs(t),n=[];for(e=0;e<i.length;e++)n.push.apply(n,i[e].eventClassName||i[e].className||[]);return n},t.prototype.getSkinCss=function(t){return{"background-color":this.getBgColor(t),"border-color":this.getBorderColor(t),color:this.getTextColor(t)}},t.prototype.getBgColor=function(t){var e,i,n=this.getStylingObjs(t);for(e=0;e<n.length&&!i;e++)i=n[e].eventBackgroundColor||n[e].eventColor||n[e].backgroundColor||n[e].color;return i||(i=this.opt("eventBackgroundColor")||this.opt("eventColor")),i},t.prototype.getBorderColor=function(t){var e,i,n=this.getStylingObjs(t);for(e=0;e<n.length&&!i;e++)i=n[e].eventBorderColor||n[e].eventColor||n[e].borderColor||n[e].color;return i||(i=this.opt("eventBorderColor")||this.opt("eventColor")),i},t.prototype.getTextColor=function(t){var e,i,n=this.getStylingObjs(t);for(e=0;e<n.length&&!i;e++)i=n[e].eventTextColor||n[e].textColor;return i||(i=this.opt("eventTextColor")),i},t.prototype.getStylingObjs=function(t){var e=this.getFallbackStylingObjs(t);return e.unshift(t),e},t.prototype.getFallbackStylingObjs=function(t){return[t.source]},t.prototype.sortEventSegs=function(t){t.sort(o.proxy(this,"compareEventSegs"))},t.prototype.compareEventSegs=function(t,e){var i=t.footprint,n=e.footprint,r=i.componentFootprint,s=n.componentFootprint,a=r.unzonedRange,l=s.unzonedRange;return a.startMs-l.startMs||l.endMs-l.startMs-(a.endMs-a.startMs)||s.isAllDay-r.isAllDay||o.compareByFieldSpecs(i.eventDef,n.eventDef,this.view.eventOrderSpecs,i.eventDef.miscProps,n.eventDef.miscProps)},t}();e.default=r},,,,,function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(10);function o(t){return"en"!==t.locale()?t.clone().locale("en"):t}n.newMomentProto.format=function(){return this._fullCalendar&&arguments[0]?d(this,arguments[0]):this._ambigTime?n.oldMomentFormat(o(this),"YYYY-MM-DD"):this._ambigZone?n.oldMomentFormat(o(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?n.oldMomentFormat(o(this)):n.oldMomentProto.format.apply(this,arguments)},n.newMomentProto.toISOString=function(){return this._ambigTime?n.oldMomentFormat(o(this),"YYYY-MM-DD"):this._ambigZone?n.oldMomentFormat(o(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?n.oldMomentProto.toISOString.apply(o(this),arguments):n.oldMomentProto.toISOString.apply(this,arguments)};var r="\v",s="",a="",l=new RegExp(a+"([^"+a+"]*)"+a,"g"),c={t:function(t){return n.oldMomentFormat(t,"a").charAt(0)},T:function(t){return n.oldMomentFormat(t,"A").charAt(0)}},h={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}};function d(t,e){return function(t,e){return y(b(t,e).join(""))}(p(e).fakeFormatString,t)}e.formatDate=d,e.formatRange=function(t,e,i,o,r){return t=n.default.parseZone(t),e=n.default.parseZone(e),function(t,e,i,n,o){var r,s,a,l=t.sameUnits,c=e.clone().stripZone(),h=i.clone().stripZone(),d=b(t.fakeFormatString,e),u=b(t.fakeFormatString,i),p="",f="",g="",m="",v="";for(r=0;r<l.length&&(!l[r]||c.isSame(h,l[r]));r++)p+=d[r];for(s=l.length-1;s>r&&(!l[s]||c.isSame(h,l[s]))&&(s-1!==r||"."!==d[s]);s--)f=d[s]+f;for(a=r;a<=s;a++)g+=d[a],m+=u[a];return(g||m)&&(v=o?m+n+g:g+n+m),y(p+v+f)}(p(i=t.localeData().longDateFormat(i)||i),t,e,o||" - ",r)};var u={};function p(t){return u[t]||(u[t]=function(t){var e=f(t);return{fakeFormatString:m(e),sameUnits:v(e)}}(t))}function f(t){for(var e,i=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=n.exec(t);)e[1]?i.push.apply(i,g(e[1])):e[2]?i.push({maybe:f(e[2])}):e[3]?i.push({token:e[3]}):e[5]&&i.push.apply(i,g(e[5]));return i}function g(t){return". "===t?["."," "]:[t]}function m(t){var e,i,n=[];for(e=0;e<t.length;e++)"string"==typeof(i=t[e])?n.push("["+i+"]"):i.token?i.token in c?n.push(s+"["+i.token+"]"):n.push(i.token):i.maybe&&n.push(a+m(i.maybe)+a);return n.join(r)}function v(t){var e,i,n,o=[];for(e=0;e<t.length;e++)(i=t[e]).token?(n=h[i.token.charAt(0)],o.push(n?n.unit:"second")):i.maybe?o.push.apply(o,v(i.maybe)):o.push(null);return o}function b(t,e){var i,o,a=[],l=n.oldMomentFormat(e,t).split(r);for(i=0;i<l.length;i++)(o=l[i]).charAt(0)===s?a.push(c[o.substring(1)](e)):a.push(o);return a}function y(t){return t.replace(l,function(t,e){return e.match(/[1-9]/)?e:""})}e.queryMostGranularFormatUnit=function(t){var e,i,n,o,r=f(t);for(e=0;e<r.length;e++)(i=r[e]).token&&(n=h[i.token.charAt(0)])&&(!o||n.value>o.value)&&(o=n);return o?o.unit:null}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(33),r=i(11),s=i(7),a=function(t){function e(){var e=t.call(this)||this;return e._watchers={},e._props={},e.applyGlobalWatchers(),e.constructed(),e}return n.__extends(e,t),e.watch=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.prototype.hasOwnProperty("_globalWatchArgs")||(this.prototype._globalWatchArgs=Object.create(this.prototype._globalWatchArgs)),this.prototype._globalWatchArgs[t]=e},e.prototype.constructed=function(){},e.prototype.applyGlobalWatchers=function(){var t,e=this._globalWatchArgs;for(t in e)this.watch.apply(this,[t].concat(e[t]))},e.prototype.has=function(t){return t in this._props},e.prototype.get=function(t){return void 0===t?this._props:this._props[t]},e.prototype.set=function(t,e){var i;"string"==typeof t?(i={})[t]=void 0===e?null:e:i=t,this.setProps(i)},e.prototype.reset=function(t){var e,i=this._props,n={};for(e in i)n[e]=void 0;for(e in t)n[e]=t[e];this.setProps(n)},e.prototype.unset=function(t){var e,i,n={};for(e="string"==typeof t?[t]:t,i=0;i<e.length;i++)n[e[i]]=void 0;this.setProps(n)},e.prototype.setProps=function(t){var e,i,n={},o=0;for(e in t)"object"!=typeof(i=t[e])&&i===this._props[e]||(n[e]=i,o++);if(o){for(e in this.trigger("before:batchChange",n),n)i=n[e],this.trigger("before:change",e,i),this.trigger("before:change:"+e,i);for(e in n)void 0===(i=n[e])?delete this._props[e]:this._props[e]=i,this.trigger("change:"+e,i),this.trigger("change",e,i);this.trigger("batchChange",n)}},e.prototype.watch=function(t,e,i,n){var o=this;this.unwatch(t),this._watchers[t]=this._watchDeps(e,function(e){var n=i.call(o,e);n&&n.then?(o.unset(t),n.then(function(e){o.set(t,e)})):o.set(t,n)},function(e){o.unset(t),n&&n.call(o,e)})},e.prototype.unwatch=function(t){var e=this._watchers[t];e&&(delete this._watchers[t],e.teardown())},e.prototype._watchDeps=function(t,e,i){var n=this,o=0,r=t.length,s=0,a={},l=[],c=!1,h=function(t,e){n.on(t,e),l.push([t,e])};return t.forEach(function(t){var n=!1;"?"===t.charAt(0)&&(t=t.substring(1),n=!0),h("before:change:"+t,function(t){1==++o&&s===r&&(c=!0,i(a),c=!1)}),h("change:"+t,function(i){!function(t,i,n){void 0===i?(n||void 0===a[t]||s--,delete a[t]):(n||void 0!==a[t]||s++,a[t]=i),--o||s===r&&(c||e(a))}(t,i,n)})}),t.forEach(function(t){var e=!1;"?"===t.charAt(0)&&(t=t.substring(1),e=!0),n.has(t)?(a[t]=n.get(t),s++):e&&s++}),s===r&&e(a),{teardown:function(){for(var t=0;t<l.length;t++)n.off(l[t][0],l[t][1]);l=null,s===r&&i()},flash:function(){s===r&&(i(),e(a))}}},e.prototype.flash=function(t){var e=this._watchers[t];e&&e.flash()},e}(o.default);e.default=a,a.prototype._globalWatchArgs={},r.default.mixInto(a),s.default.mixInto(a)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(4),r=i(13),s=i(210);e.default={parse:function(t,e){return o.isTimeString(t.start)||n.isDuration(t.start)||o.isTimeString(t.end)||n.isDuration(t.end)?s.default.parse(t,e):r.default.parse(t,e)}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(17),r=function(){function t(){this.clearEnd=!1,this.forceTimed=!1,this.forceAllDay=!1}return t.createFromDiff=function(e,i,o){var r,s,a,l=e.end&&!i.end,c=e.isAllDay()&&!i.isAllDay(),h=!e.isAllDay()&&i.isAllDay();function d(t,e){return o?n.diffByUnit(t,e,o):i.isAllDay()?n.diffDay(t,e):n.diffDayTime(t,e)}return r=d(i.start,e.start),i.end&&(s=d(i.unzonedRange.getEnd(),e.unzonedRange.getEnd()).subtract(r)),(a=new t).clearEnd=l,a.forceTimed=c,a.forceAllDay=h,a.setDateDelta(r),a.setEndDelta(s),a},t.prototype.buildNewDateProfile=function(t,e){var i=t.start.clone(),n=null,r=!1;return t.end&&!this.clearEnd?n=t.end.clone():this.endDelta&&!n&&(n=e.getDefaultEventEnd(t.isAllDay(),i)),this.forceTimed?(r=!0,i.hasTime()||i.time(0),n&&!n.hasTime()&&n.time(0)):this.forceAllDay&&(i.hasTime()&&i.stripTime(),n&&n.hasTime()&&n.stripTime()),this.dateDelta&&(r=!0,i.add(this.dateDelta),n&&n.add(this.dateDelta)),this.endDelta&&(r=!0,n.add(this.endDelta)),this.startDelta&&(r=!0,i.add(this.startDelta)),r&&(i=e.applyTimezone(i),n&&(n=e.applyTimezone(n))),!n&&e.opt("forceEventDuration")&&(n=e.getDefaultEventEnd(t.isAllDay(),i)),new o.default(i,n,e)},t.prototype.setDateDelta=function(t){t&&t.valueOf()?this.dateDelta=t:this.dateDelta=null},t.prototype.setStartDelta=function(t){t&&t.valueOf()?this.startDelta=t:this.startDelta=null},t.prototype.setEndDelta=function(t){t&&t.valueOf()?this.endDelta=t:this.endDelta=null},t.prototype.isEmpty=function(){return!(this.clearEnd||this.forceTimed||this.forceAllDay||this.dateDelta||this.startDelta||this.endDelta)},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(213),o=i(214),r={};e.defineThemeSystem=function(t,e){r[t]=e},e.getThemeSystemClass=function(t){return t?!0===t?o.default:r[t]:n.default}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(20),a=i(6),l=i(13),c=function(t){function e(e){var i=t.call(this,e)||this;return i.eventDefs=[],i}return n.__extends(e,t),e.parse=function(t,e){var i;return o.isArray(t.events)?i=t:o.isArray(t)&&(i={events:t}),!!i&&a.default.parse.call(this,i,e)},e.prototype.setRawEventDefs=function(t){this.rawEventDefs=t,this.eventDefs=this.parseEventDefs(t)},e.prototype.fetch=function(t,e,i){var n,o=this.eventDefs;if(null!=this.currentTimezone&&this.currentTimezone!==i)for(n=0;n<o.length;n++)o[n]instanceof l.default&&o[n].rezone();return this.currentTimezone=i,s.default.resolve(o)},e.prototype.addEventDef=function(t){this.eventDefs.push(t)},e.prototype.removeEventDefsById=function(t){return r.removeMatching(this.eventDefs,function(e){return e.id===t})},e.prototype.removeAllEventDefs=function(){this.eventDefs=[]},e.prototype.getPrimitive=function(){return this.rawEventDefs},e.prototype.applyManualStandardProps=function(e){var i=t.prototype.applyManualStandardProps.call(this,e);return this.setRawEventDefs(e.events),i},e}(a.default);e.default=c,c.defineStandardProps({events:!1})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=function(){function t(t){this.isHorizontal=!1,this.isVertical=!1,this.els=n(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?n(t.offsetParent):null}return t.prototype.build=function(){var t=this.forcedOffsetParentEl;!t&&this.els.length>0&&(t=this.els.eq(0).offsetParent()),this.origin=t?t.offset():null,this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},t.prototype.clear=function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},t.prototype.ensureBuilt=function(){this.origin||this.build()},t.prototype.buildElHorizontals=function(){var t=[],e=[];this.els.each(function(i,o){var r=n(o),s=r.offset().left,a=r.outerWidth();t.push(s),e.push(s+a)}),this.lefts=t,this.rights=e},t.prototype.buildElVerticals=function(){var t=[],e=[];this.els.each(function(i,o){var r=n(o),s=r.offset().top,a=r.outerHeight();t.push(s),e.push(s+a)}),this.tops=t,this.bottoms=e},t.prototype.getHorizontalIndex=function(t){this.ensureBuilt();var e,i=this.lefts,n=this.rights,o=i.length;for(e=0;e<o;e++)if(t>=i[e]&&t<n[e])return e},t.prototype.getVerticalIndex=function(t){this.ensureBuilt();var e,i=this.tops,n=this.bottoms,o=i.length;for(e=0;e<o;e++)if(t>=i[e]&&t<n[e])return e},t.prototype.getLeftOffset=function(t){return this.ensureBuilt(),this.lefts[t]},t.prototype.getLeftPosition=function(t){return this.ensureBuilt(),this.lefts[t]-this.origin.left},t.prototype.getRightOffset=function(t){return this.ensureBuilt(),this.rights[t]},t.prototype.getRightPosition=function(t){return this.ensureBuilt(),this.rights[t]-this.origin.left},t.prototype.getWidth=function(t){return this.ensureBuilt(),this.rights[t]-this.lefts[t]},t.prototype.getTopOffset=function(t){return this.ensureBuilt(),this.tops[t]},t.prototype.getTopPosition=function(t){return this.ensureBuilt(),this.tops[t]-this.origin.top},t.prototype.getBottomOffset=function(t){return this.ensureBuilt(),this.bottoms[t]},t.prototype.getBottomPosition=function(t){return this.ensureBuilt(),this.bottoms[t]-this.origin.top},t.prototype.getHeight=function(t){return this.ensureBuilt(),this.bottoms[t]-this.tops[t]},t.prototype.queryBoundingRect=function(){var t;return this.els.length>0&&!(t=o.getScrollParent(this.els.eq(0))).is(document)?o.getClientRect(t):null},t.prototype.isPointInBounds=function(t,e){return this.isLeftInBounds(t)&&this.isTopInBounds(e)},t.prototype.isLeftInBounds=function(t){return!this.boundingRect||t>=this.boundingRect.left&&t<this.boundingRect.right},t.prototype.isTopInBounds=function(t){return!this.boundingRect||t>=this.boundingRect.top&&t<this.boundingRect.bottom},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=i(7),s=i(21),a=function(){function t(t){this.isInteracting=!1,this.isDistanceSurpassed=!1,this.isDelayEnded=!1,this.isDragging=!1,this.isTouch=!1,this.isGeneric=!1,this.shouldCancelTouchScroll=!0,this.scrollAlwaysKills=!1,this.isAutoScroll=!1,this.scrollSensitivity=30,this.scrollSpeed=200,this.scrollIntervalMs=50,this.options=t||{}}return t.prototype.startInteraction=function(t,e){if(void 0===e&&(e={}),"mousedown"===t.type){if(s.default.get().shouldIgnoreMouse())return;if(!o.isPrimaryMouseButton(t))return;t.preventDefault()}this.isInteracting||(this.delay=o.firstDefined(e.delay,this.options.delay,0),this.minDistance=o.firstDefined(e.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,o.preventSelection(n("body")),this.isInteracting=!0,this.isTouch=o.getEvIsTouch(t),this.isGeneric="dragstart"===t.type,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=o.getEvX(t),this.originY=o.getEvY(t),this.scrollEl=o.getScrollParent(n(t.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(t),this.startDelay(t),this.minDistance||this.handleDistanceSurpassed(t))},t.prototype.handleInteractionStart=function(t){this.trigger("interactionStart",t)},t.prototype.endInteraction=function(t,e){this.isInteracting&&(this.endDrag(t),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(t,e),o.allowSelection(n("body")))},t.prototype.handleInteractionEnd=function(t,e){this.trigger("interactionEnd",t,e||!1)},t.prototype.bindHandlers=function(){var t=s.default.get();this.isGeneric?this.listenTo(n(document),{drag:this.handleMove,dragstop:this.endInteraction}):this.isTouch?this.listenTo(t,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(t,{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(t,{selectstart:o.preventDefault,contextmenu:o.preventDefault})},t.prototype.unbindHandlers=function(){this.stopListeningTo(s.default.get()),this.stopListeningTo(n(document))},t.prototype.startDrag=function(t,e){this.startInteraction(t,e),this.isDragging||(this.isDragging=!0,this.handleDragStart(t))},t.prototype.handleDragStart=function(t){this.trigger("dragStart",t)},t.prototype.handleMove=function(t){var e=o.getEvX(t)-this.originX,i=o.getEvY(t)-this.originY,n=this.minDistance;this.isDistanceSurpassed||e*e+i*i>=n*n&&this.handleDistanceSurpassed(t),this.isDragging&&this.handleDrag(e,i,t)},t.prototype.handleDrag=function(t,e,i){this.trigger("drag",t,e,i),this.updateAutoScroll(i)},t.prototype.endDrag=function(t){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(t))},t.prototype.handleDragEnd=function(t){this.trigger("dragEnd",t)},t.prototype.startDelay=function(t){var e=this;this.delay?this.delayTimeoutId=setTimeout(function(){e.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},t.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(t)},t.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(t)},t.prototype.handleTouchMove=function(t){this.isDragging&&this.shouldCancelTouchScroll&&t.preventDefault(),this.handleMove(t)},t.prototype.handleMouseMove=function(t){this.handleMove(t)},t.prototype.handleTouchScroll=function(t){this.isDragging&&!this.scrollAlwaysKills||this.endInteraction(t,!0)},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.options[t]&&this.options[t].apply(this,e),this["_"+t]&&this["_"+t].apply(this,e)},t.prototype.initAutoScroll=function(){var t=this.scrollEl;this.isAutoScroll=this.options.scroll&&t&&!t.is(window)&&!t.is(document),this.isAutoScroll&&this.listenTo(t,"scroll",o.debounce(this.handleDebouncedScroll,100))},t.prototype.destroyAutoScroll=function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},t.prototype.computeScrollBounds=function(){this.isAutoScroll&&(this.scrollBounds=o.getOuterRect(this.scrollEl))},t.prototype.updateAutoScroll=function(t){var e,i,n,r,s=this.scrollSensitivity,a=this.scrollBounds,l=0,c=0;a&&(e=(s-(o.getEvY(t)-a.top))/s,i=(s-(a.bottom-o.getEvY(t)))/s,n=(s-(o.getEvX(t)-a.left))/s,r=(s-(a.right-o.getEvX(t)))/s,e>=0&&e<=1?l=e*this.scrollSpeed*-1:i>=0&&i<=1&&(l=i*this.scrollSpeed),n>=0&&n<=1?c=n*this.scrollSpeed*-1:r>=0&&r<=1&&(c=r*this.scrollSpeed)),this.setScrollVel(l,c)},t.prototype.setScrollVel=function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(o.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},t.prototype.constrainScrollVel=function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},t.prototype.scrollIntervalFunc=function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},t.prototype.endAutoScroll=function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},t.prototype.handleDebouncedScroll=function(){this.scrollIntervalId||this.handleScrollEnd()},t.prototype.handleScrollEnd=function(){},t}();e.default=a,r.default.mixInto(a)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.updateDayTable=function(){for(var t,e,i,n=this,o=n.view,r=o.calendar,s=r.msToUtcMoment(n.dateProfile.renderUnzonedRange.startMs,!0),a=r.msToUtcMoment(n.dateProfile.renderUnzonedRange.endMs,!0),l=-1,c=[],h=[];s.isBefore(a);)o.isHiddenDay(s)?c.push(l+.5):(l++,c.push(l),h.push(s.clone())),s.add(1,"days");if(this.breakOnWeeks){for(e=h[0].day(),t=1;t<h.length&&h[t].day()!==e;t++);i=Math.ceil(h.length/t)}else i=1,t=h.length;this.dayDates=h,this.dayIndices=c,this.daysPerRow=t,this.rowCnt=i,this.updateDayTableCols()},e.prototype.updateDayTableCols=function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.opt("columnHeaderFormat")||this.opt("columnFormat")||this.computeColHeadFormat()},e.prototype.computeColCnt=function(){return this.daysPerRow},e.prototype.getCellDate=function(t,e){return this.dayDates[this.getCellDayIndex(t,e)].clone()},e.prototype.getCellRange=function(t,e){var i=this.getCellDate(t,e),n=i.clone().add(1,"days");return{start:i,end:n}},e.prototype.getCellDayIndex=function(t,e){return t*this.daysPerRow+this.getColDayIndex(e)},e.prototype.getColDayIndex=function(t){return this.isRTL?this.colCnt-1-t:t},e.prototype.getDateDayIndex=function(t){var e=this.dayIndices,i=t.diff(this.dayDates[0],"days");return i<0?e[0]-1:i>=e.length?e[e.length-1]+1:e[i]},e.prototype.computeColHeadFormat=function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.opt("dayOfMonthFormat"):"dddd"},e.prototype.sliceRangeByRow=function(t){var e,i,n,o,r,s=this.daysPerRow,a=this.view.computeDayRange(t),l=this.getDateDayIndex(a.start),c=this.getDateDayIndex(a.end.clone().subtract(1,"days")),h=[];for(e=0;e<this.rowCnt;e++)n=(i=e*s)+s-1,o=Math.max(l,i),r=Math.min(c,n),(o=Math.ceil(o))<=(r=Math.floor(r))&&h.push({row:e,firstRowDayIndex:o-i,lastRowDayIndex:r-i,isStart:o===l,isEnd:r===c});return h},e.prototype.sliceRangeByDay=function(t){var e,i,n,o,r,s,a=this.daysPerRow,l=this.view.computeDayRange(t),c=this.getDateDayIndex(l.start),h=this.getDateDayIndex(l.end.clone().subtract(1,"days")),d=[];for(e=0;e<this.rowCnt;e++)for(n=(i=e*a)+a-1,o=i;o<=n;o++)r=Math.max(c,o),s=Math.min(h,o),(r=Math.ceil(r))<=(s=Math.floor(s))&&d.push({row:e,firstRowDayIndex:r-i,lastRowDayIndex:s-i,isStart:r===c,isEnd:s===h});return d},e.prototype.renderHeadHtml=function(){var t=this.view.calendar.theme;return'<div class="fc-row '+t.getClass("headerRow")+'"><table class="'+t.getClass("tableGrid")+'"><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},e.prototype.renderHeadIntroHtml=function(){return this.renderIntroHtml()},e.prototype.renderHeadTrHtml=function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},e.prototype.renderHeadDateCellsHtml=function(){var t,e,i=[];for(t=0;t<this.colCnt;t++)e=this.getCellDate(0,t),i.push(this.renderHeadDateCellHtml(e));return i.join("")},e.prototype.renderHeadDateCellHtml=function(t,e,i){var n,r=this,s=r.view,a=r.dateProfile.activeUnzonedRange.containsDate(t),l=["fc-day-header",s.calendar.theme.getClass("widgetHeader")];return n="function"==typeof r.opt("columnHeaderHtml")?r.opt("columnHeaderHtml")(t):"function"==typeof r.opt("columnHeaderText")?o.htmlEscape(r.opt("columnHeaderText")(t)):o.htmlEscape(t.format(r.colHeadFormat)),1===r.rowCnt?l=l.concat(r.getDayClasses(t,!0)):l.push("fc-"+o.dayIDs[t.day()]),'<th class="'+l.join(" ")+'"'+(1===(a&&r.rowCnt)?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(e>1?' colspan="'+e+'"':"")+(i?" "+i:"")+">"+(a?s.buildGotoAnchorHtml({date:t,forceOff:r.rowCnt>1||1===r.colCnt},n):n)+"</th>"},e.prototype.renderBgTrHtml=function(t){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(t))+this.renderBgCellsHtml(t)+(this.isRTL?this.renderBgIntroHtml(t):"")+"</tr>"},e.prototype.renderBgIntroHtml=function(t){return this.renderIntroHtml()},e.prototype.renderBgCellsHtml=function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderBgCellHtml(i));return n.join("")},e.prototype.renderBgCellHtml=function(t,e){var i=this,n=i.view,o=i.dateProfile.activeUnzonedRange.containsDate(t),r=i.getDayClasses(t);return r.unshift("fc-day",n.calendar.theme.getClass("widgetContent")),'<td class="'+r.join(" ")+'"'+(o?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(e?" "+e:"")+"></td>"},e.prototype.renderIntroHtml=function(){},e.prototype.bookendCells=function(t){var e=this.renderIntroHtml();e&&(this.isRTL?t.append(e):t.prepend(e))},e}(i(14).default);e.default=r},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.component=t,this.fillRenderer=e}return t.prototype.render=function(t){var e=this.component,i=e._getDateProfile().activeUnzonedRange,n=t.buildEventInstanceGroup(e.hasAllDayBusinessHours,i),o=n?e.eventRangesToEventFootprints(n.sliceRenderRanges(i)):[];this.renderEventFootprints(o)},t.prototype.renderEventFootprints=function(t){var e=this.component.eventFootprintsToSegs(t);this.renderSegs(e),this.segs=e},t.prototype.renderSegs=function(t){this.fillRenderer&&this.fillRenderer.renderSegs("businessHours",t,{getClasses:function(t){return["fc-nonbusiness","fc-bgevent"]}})},t.prototype.unrender=function(){this.fillRenderer&&this.fillRenderer.unrender("businessHours"),this.segs=null},t.prototype.getSegs=function(){return this.segs||[]},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=function(){function t(t){this.fillSegTag="div",this.component=t,this.elsByFill={}}return t.prototype.renderFootprint=function(t,e,i){this.renderSegs(t,this.component.componentFootprintToSegs(e),i)},t.prototype.renderSegs=function(t,e,i){var n;return e=this.buildSegEls(t,e,i),(n=this.attachSegEls(t,e))&&this.reportEls(t,n),e},t.prototype.unrender=function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},t.prototype.buildSegEls=function(t,e,i){var o,r=this,s="",a=[];if(e.length){for(o=0;o<e.length;o++)s+=this.buildSegHtml(t,e[o],i);n(s).each(function(t,o){var s=e[t],l=n(o);i.filterEl&&(l=i.filterEl(s,l)),l&&(l=n(l)).is(r.fillSegTag)&&(s.el=l,a.push(s))})}return a},t.prototype.buildSegHtml=function(t,e,i){var n=i.getClasses?i.getClasses(e):[],r=o.cssToStr(i.getCss?i.getCss(e):{});return"<"+this.fillSegTag+(n.length?' class="'+n.join(" ")+'"':"")+(r?' style="'+r+'"':"")+" />"},t.prototype.attachSegEls=function(t,e){},t.prototype.reportEls=function(t,e){this.elsByFill[t]?this.elsByFill[t]=this.elsByFill[t].add(e):this.elsByFill[t]=n(e)},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),o=i(36),r=i(6),s=function(){function t(t,e){this.view=t._getView(),this.component=t,this.eventRenderer=e}return t.prototype.renderComponentFootprint=function(t){this.renderEventFootprints([this.fabricateEventFootprint(t)])},t.prototype.renderEventDraggingFootprints=function(t,e,i){this.renderEventFootprints(t,e,"fc-dragging",i?null:this.view.opt("dragOpacity"))},t.prototype.renderEventResizingFootprints=function(t,e,i){this.renderEventFootprints(t,e,"fc-resizing")},t.prototype.renderEventFootprints=function(t,e,i,n){var o,r=this.component.eventFootprintsToSegs(t),s="fc-helper "+(i||"");for(r=this.eventRenderer.renderFgSegEls(r),o=0;o<r.length;o++)r[o].el.addClass(s);if(null!=n)for(o=0;o<r.length;o++)r[o].el.css("opacity",n);this.helperEls=this.renderSegs(r,e)},t.prototype.renderSegs=function(t,e){},t.prototype.unrender=function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},t.prototype.fabricateEventFootprint=function(t){var e,i=this.view.calendar,s=i.footprintToDateProfile(t),a=new n.default(new r.default(i));return a.dateProfile=s,e=a.buildInstance(),new o.default(t,a,e)},t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(21),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.bindToEl=function(t){var e=this.component;e.bindSegHandlerToEl(t,"click",this.handleClick.bind(this)),e.bindSegHandlerToEl(t,"mouseenter",this.handleMouseover.bind(this)),e.bindSegHandlerToEl(t,"mouseleave",this.handleMouseout.bind(this))},e.prototype.handleClick=function(t,e){!1===this.component.publiclyTrigger("eventClick",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,this.view]})&&e.preventDefault()},e.prototype.handleMouseover=function(t,e){o.default.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=t,this.view.isEventDefResizable(t.footprint.eventDef)&&t.el.addClass("fc-allow-mouse-resize"),this.component.publiclyTrigger("eventMouseover",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,this.view]}))},e.prototype.handleMouseout=function(t,e){this.mousedOverSeg&&(this.mousedOverSeg=null,this.view.isEventDefResizable(t.footprint.eventDef)&&t.el.removeClass("fc-allow-mouse-resize"),this.component.publiclyTrigger("eventMouseout",{context:t.el[0],args:[t.footprint.getEventLegacy(),e||{},this.view]}))},e.prototype.end=function(){this.mousedOverSeg&&this.handleMouseout(this.mousedOverSeg)},e}(i(15).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(14),r=i(245),s=i(225),a=i(59),l=i(224),c=i(223),h=i(222),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(o.default);e.default=d,d.prototype.dateClickingClass=r.default,d.prototype.dateSelectingClass=s.default,d.prototype.eventPointingClass=a.default,d.prototype.eventDraggingClass=l.default,d.prototype.eventResizingClass=c.default,d.prototype.externalDroppingClass=h.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(53),a=i(249),l=i(5),c=i(12),h=i(36),d=i(56),u=i(60),p=i(40),f=i(55),g=i(250),m=i(251),v=i(252),b=function(t){function e(e){var i=t.call(this,e)||this;return i.cellWeekNumbersVisible=!1,i.bottomCoordPadding=0,i.isRigid=!1,i.hasAllDayBusinessHours=!0,i}return n.__extends(e,t),e.prototype.componentFootprintToSegs=function(t){var e,i,n=this.sliceRangeByRow(t.unzonedRange);for(e=0;e<n.length;e++)i=n[e],this.isRTL?(i.leftCol=this.daysPerRow-1-i.lastRowDayIndex,i.rightCol=this.daysPerRow-1-i.firstRowDayIndex):(i.leftCol=i.firstRowDayIndex,i.rightCol=i.lastRowDayIndex);return n},e.prototype.renderDates=function(t){this.dateProfile=t,this.updateDayTable(),this.renderGrid()},e.prototype.unrenderDates=function(){this.removeSegPopover()},e.prototype.renderGrid=function(){var t,e,i=this.view,n=this.rowCnt,o=this.colCnt,r="";for(this.headContainerEl&&this.headContainerEl.html(this.renderHeadHtml()),t=0;t<n;t++)r+=this.renderDayRowHtml(t,this.isRigid);for(this.el.html(r),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day, .fc-disabled-day"),this.rowCoordCache=new s.default({els:this.rowEls,isVertical:!0}),this.colCoordCache=new s.default({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),t=0;t<n;t++)for(e=0;e<o;e++)this.publiclyTrigger("dayRender",{context:i,args:[this.getCellDate(t,e),this.getCellEl(t,e),i]})},e.prototype.renderDayRowHtml=function(t,e){var i=this.view.calendar.theme,n=["fc-row","fc-week",i.getClass("dayRow")];return e&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table class="'+i.getClass("tableGrid")+'">'+this.renderBgTrHtml(t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},e.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.cellWeekNumbersVisible},e.prototype.getIsDayNumbersVisible=function(){return this.rowCnt>1},e.prototype.renderNumberTrHtml=function(t){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(t))+this.renderNumberCellsHtml(t)+(this.isRTL?this.renderNumberIntroHtml(t):"")+"</tr>"},e.prototype.renderNumberIntroHtml=function(t){return this.renderIntroHtml()},e.prototype.renderNumberCellsHtml=function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderNumberCellHtml(i));return n.join("")},e.prototype.renderNumberCellHtml=function(t){var e,i,n=this.view,o="",r=this.dateProfile.activeUnzonedRange.containsDate(t),s=this.getIsDayNumbersVisible()&&r;return s||this.cellWeekNumbersVisible?((e=this.getDayClasses(t)).unshift("fc-day-top"),this.cellWeekNumbersVisible&&(i="ISO"===t._locale._fullCalendar_weekCalc?1:t._locale.firstDayOfWeek()),o+='<td class="'+e.join(" ")+'"'+(r?' data-date="'+t.format()+'"':"")+">",this.cellWeekNumbersVisible&&t.day()===i&&(o+=n.buildGotoAnchorHtml({date:t,type:"week"},{class:"fc-week-number"},t.format("w"))),s&&(o+=n.buildGotoAnchorHtml(t,{class:"fc-day-number"},t.format("D"))),o+="</td>"):"<td/>"},e.prototype.prepareHits=function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},e.prototype.releaseHits=function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},e.prototype.queryHit=function(t,e){if(this.colCoordCache.isLeftInBounds(t)&&this.rowCoordCache.isTopInBounds(e)){var i=this.colCoordCache.getHorizontalIndex(t),n=this.rowCoordCache.getVerticalIndex(e);if(null!=n&&null!=i)return this.getCellHit(n,i)}},e.prototype.getHitFootprint=function(t){var e=this.getCellRange(t.row,t.col);return new c.default(new l.default(e.start,e.end),!0)},e.prototype.getHitEl=function(t){return this.getCellEl(t.row,t.col)},e.prototype.getCellHit=function(t,e){return{row:t,col:e,component:this,left:this.colCoordCache.getLeftOffset(e),right:this.colCoordCache.getRightOffset(e),top:this.rowCoordCache.getTopOffset(t),bottom:this.rowCoordCache.getBottomOffset(t)}},e.prototype.getCellEl=function(t,e){return this.cellEls.eq(t*this.colCnt+e)},e.prototype.executeEventUnrender=function(){this.removeSegPopover(),t.prototype.executeEventUnrender.call(this)},e.prototype.getOwnEventSegs=function(){return t.prototype.getOwnEventSegs.call(this).concat(this.popoverSegs||[])},e.prototype.renderDrag=function(t,e,i){var n;for(n=0;n<t.length;n++)this.renderHighlight(t[n].componentFootprint);if(t.length&&e&&e.component!==this)return this.helperRenderer.renderEventDraggingFootprints(t,e,i),!0},e.prototype.unrenderDrag=function(){this.unrenderHighlight(),this.helperRenderer.unrender()},e.prototype.renderEventResize=function(t,e,i){var n;for(n=0;n<t.length;n++)this.renderHighlight(t[n].componentFootprint);this.helperRenderer.renderEventResizingFootprints(t,e,i)},e.prototype.unrenderEventResize=function(){this.unrenderHighlight(),this.helperRenderer.unrender()},e.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},e.prototype.limitRows=function(t){var e,i,n=this.eventRenderer.rowStructs||[];for(e=0;e<n.length;e++)this.unlimitRow(e),!1!==(i=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)))&&this.limitRow(e,i)},e.prototype.computeRowLevelLimit=function(t){var e,i,n,r=this.rowEls.eq(t).height(),s=this.eventRenderer.rowStructs[t].tbodyEl.children();function a(t,e){n=Math.max(n,o(e).outerHeight())}for(e=0;e<s.length;e++)if(i=s.eq(e).removeClass("fc-limited"),n=0,i.find("> td > :first-child").each(a),i.position().top+n>r)return e;return!1},e.prototype.limitRow=function(t,e){var i,n,r,s,a,l,c,h,d,u,p,f,g,m,v,b=this,y=this.eventRenderer.rowStructs[t],w=[],x=0,_=function(i){for(;x<i;)(l=b.getCellSegs(t,x,e)).length&&(d=n[e-1][x],v=b.renderMoreLink(t,x,l),m=o("<div/>").append(v),d.append(m),w.push(m[0])),x++};if(e&&e<y.segLevels.length){for(i=y.segLevels[e-1],n=y.cellMatrix,r=y.tbodyEl.children().slice(e).addClass("fc-limited").get(),s=0;s<i.length;s++){for(_((a=i[s]).leftCol),h=[],c=0;x<=a.rightCol;)l=this.getCellSegs(t,x,e),h.push(l),c+=l.length,x++;if(c){for(u=(d=n[e-1][a.leftCol]).attr("rowspan")||1,p=[],f=0;f<h.length;f++)g=o('<td class="fc-more-cell"/>').attr("rowspan",u),l=h[f],v=this.renderMoreLink(t,a.leftCol+f,[a].concat(l)),m=o("<div/>").append(v),g.append(m),p.push(g[0]),w.push(g[0]);d.addClass("fc-limited").after(o(p)),r.push(d[0])}}_(this.colCnt),y.moreEls=o(w),y.limitedEls=o(r)}},e.prototype.unlimitRow=function(t){var e=this.eventRenderer.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},e.prototype.renderMoreLink=function(t,e,i){var n=this,r=this.view;return o('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click",function(s){var a=n.opt("eventLimitClick"),l=n.getCellDate(t,e),c=o(s.currentTarget),h=n.getCellEl(t,e),d=n.getCellSegs(t,e),u=n.resliceDaySegs(d,l),p=n.resliceDaySegs(i,l);"function"==typeof a&&(a=n.publiclyTrigger("eventLimitClick",{context:r,args:[{date:l.clone(),dayEl:h,moreEl:c,segs:u,hiddenSegs:p},s,r]})),"popover"===a?n.showSegPopover(t,e,c,u):"string"==typeof a&&r.calendar.zoomTo(l,a)})},e.prototype.showSegPopover=function(t,e,i,n){var o,r,s=this,l=this.view,c=i.parent();o=1===this.rowCnt?l.el:this.rowEls.eq(t),r={className:"fc-more-popover "+l.calendar.theme.getClass("popover"),content:this.renderSegPopoverContent(t,e,n),parentEl:l.el,top:o.offset().top,autoHide:!0,viewportConstrain:this.opt("popoverViewportConstrain"),hide:function(){s.popoverSegs&&s.triggerBeforeEventSegsDestroyed(s.popoverSegs),s.segPopover.removeElement(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?r.right=c.offset().left+c.outerWidth()+1:r.left=c.offset().left-1,this.segPopover=new a.default(r),this.segPopover.show(),this.bindAllSegHandlersToEl(this.segPopover.el),this.triggerAfterEventSegsRendered(n)},e.prototype.renderSegPopoverContent=function(t,e,i){var n,s=this.view.calendar.theme,a=this.getCellDate(t,e).format(this.opt("dayPopoverFormat")),l=o('<div class="fc-header '+s.getClass("popoverHeader")+'"><span class="fc-close '+s.getIconClass("close")+'"></span><span class="fc-title">'+r.htmlEscape(a)+'</span><div class="fc-clear"/></div><div class="fc-body '+s.getClass("popoverContent")+'"><div class="fc-event-container"></div></div>'),c=l.find(".fc-event-container");for(i=this.eventRenderer.renderFgSegEls(i,!0),this.popoverSegs=i,n=0;n<i.length;n++)this.hitsNeeded(),i[n].hit=this.getCellHit(t,e),this.hitsNotNeeded(),c.append(i[n].el);return l},e.prototype.resliceDaySegs=function(t,e){var i,n,r,s=e.clone(),a=s.clone().add(1,"days"),d=new l.default(s,a),u=[];for(i=0;i<t.length;i++)(r=(n=t[i]).footprint.componentFootprint.unzonedRange.intersect(d))&&u.push(o.extend({},n,{footprint:new h.default(new c.default(r,n.footprint.componentFootprint.isAllDay),n.footprint.eventDef,n.footprint.eventInstance),isStart:n.isStart&&r.isStart,isEnd:n.isEnd&&r.isEnd}));return this.eventRenderer.sortEventSegs(u),u},e.prototype.getMoreLinkText=function(t){var e=this.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},e.prototype.getCellSegs=function(t,e,i){for(var n,o=this.eventRenderer.rowStructs[t].segMatrix,r=i||0,s=[];r<o.length;)(n=o[r][e])&&s.push(n),r++;return s},e}(p.default);e.default=b,b.prototype.eventRendererClass=g.default,b.prototype.businessHourRendererClass=d.default,b.prototype.helperRendererClass=m.default,b.prototype.fillRendererClass=v.default,u.default.mixInto(b),f.default.mixInto(b)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(39),a=i(41),l=i(228),c=i(61),h=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.dayGrid=n.instantiateDayGrid(),n.dayGrid.isRigid=n.hasRigidRows(),n.opt("weekNumbers")&&(n.opt("weekNumbersWithinDays")?(n.dayGrid.cellWeekNumbersVisible=!0,n.dayGrid.colWeekNumbersVisible=!1):(n.dayGrid.cellWeekNumbersVisible=!1,n.dayGrid.colWeekNumbersVisible=!0)),n.addChild(n.dayGrid),n.scroller=new s.default({overflowX:"hidden",overflowY:"auto"}),n}return n.__extends(e,t),e.prototype.instantiateDayGrid=function(){return new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colWeekNumbersVisible=!1,e}return n.__extends(e,t),e.prototype.renderHeadIntroHtml=function(){var t=this.view;return this.colWeekNumbersVisible?'<th class="fc-week-number '+t.calendar.theme.getClass("widgetHeader")+'" '+t.weekNumberStyleAttr()+"><span>"+r.htmlEscape(this.opt("weekNumberTitle"))+"</span></th>":""},e.prototype.renderNumberIntroHtml=function(t){var e=this.view,i=this.getCellDate(t,0);return this.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+">"+e.buildGotoAnchorHtml({date:i,type:"week",forceOff:1===this.colCnt},i.format("w"))+"</td>":""},e.prototype.renderBgIntroHtml=function(){var t=this.view;return this.colWeekNumbersVisible?'<td class="fc-week-number '+t.calendar.theme.getClass("widgetContent")+'" '+t.weekNumberStyleAttr()+"></td>":""},e.prototype.renderIntroHtml=function(){var t=this.view;return this.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""},e.prototype.getIsNumbersVisible=function(){return c.default.prototype.getIsNumbersVisible.apply(this,arguments)||this.colWeekNumbersVisible},e}(this.dayGridClass))(this)},e.prototype.executeDateRender=function(e){this.dayGrid.breakOnWeeks=/year|month|week/.test(e.currentRangeUnit),t.prototype.executeDateRender.call(this,e)},e.prototype.renderSkeleton=function(){var t,e;this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.scroller.render(),t=this.scroller.el.addClass("fc-day-grid-container"),e=o('<div class="fc-day-grid" />').appendTo(t),this.el.find(".fc-body > tr > td").append(t),this.dayGrid.headContainerEl=this.el.find(".fc-head-container"),this.dayGrid.setElement(e)},e.prototype.unrenderSkeleton=function(){this.dayGrid.removeElement(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var t=this.calendar.theme;return'<table class="'+t.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+t.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+t.getClass("widgetContent")+'"></td></tr></tbody></table>'},e.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},e.prototype.hasRigidRows=function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},e.prototype.updateSize=function(e,i,n){var o,s,a=this.opt("eventLimit"),l=this.dayGrid.headContainerEl.find(".fc-row");this.dayGrid.rowEls?(t.prototype.updateSize.call(this,e,i,n),this.dayGrid.colWeekNumbersVisible&&(this.weekNumberWidth=r.matchCellWidths(this.el.find(".fc-week-number"))),this.scroller.clear(),r.uncompensateScroll(l),this.dayGrid.removeSegPopover(),a&&"number"==typeof a&&this.dayGrid.limitRows(a),o=this.computeScrollerHeight(e),this.setGridHeight(o,i),a&&"number"!=typeof a&&this.dayGrid.limitRows(a),i||(this.scroller.setHeight(o),((s=this.scroller.getScrollbarWidths()).left||s.right)&&(r.compensateScroll(l,s),o=this.computeScrollerHeight(e),this.scroller.setHeight(o)),this.scroller.lockOverflow(s))):i||(o=this.computeScrollerHeight(e),this.scroller.setHeight(o))},e.prototype.computeScrollerHeight=function(t){return t-r.subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.setGridHeight=function(t,e){e?r.undistributeHeight(this.dayGrid.rowEls):r.distributeHeight(this.dayGrid.rowEls,t,!0)},e.prototype.computeInitialDateScroll=function(){return{top:0}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(t){void 0!==t.top&&this.scroller.setScrollTop(t.top)},e}(a.default);e.default=h,h.prototype.dateProfileGeneratorClass=l.default,h.prototype.dayGridClass=c.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),o=i(12),r=i(49),s=i(6),a=i(35),l=function(){function t(t,e){this.eventManager=t,this._calendar=e}return t.prototype.opt=function(t){return this._calendar.opt(t)},t.prototype.isEventInstanceGroupAllowed=function(t){var e,i=t.getEventDef(),n=this.eventRangesToEventFootprints(t.getAllEventRanges()),o=this.getPeerEventInstances(i).map(a.eventInstanceToEventRange),r=this.eventRangesToEventFootprints(o),s=i.getConstraint(),l=i.getOverlap(),c=this.opt("eventAllow");for(e=0;e<n.length;e++)if(!this.isFootprintAllowed(n[e].componentFootprint,r,s,l,n[e].eventInstance))return!1;if(c)for(e=0;e<n.length;e++)if(!1===c(n[e].componentFootprint.toLegacy(this._calendar),n[e].getEventLegacy()))return!1;return!0},t.prototype.getPeerEventInstances=function(t){return this.eventManager.getEventInstancesWithoutId(t.id)},t.prototype.isSelectionFootprintAllowed=function(t){var e,i=this.eventManager.getEventInstances().map(a.eventInstanceToEventRange),n=this.eventRangesToEventFootprints(i);return!!this.isFootprintAllowed(t,n,this.opt("selectConstraint"),this.opt("selectOverlap"))&&(!(e=this.opt("selectAllow"))||!1!==e(t.toLegacy(this._calendar)))},t.prototype.isFootprintAllowed=function(t,e,i,n,o){var r,s;if(null!=i&&(r=this.constraintValToFootprints(i,t.isAllDay),!this.isFootprintWithinConstraints(t,r)))return!1;if(s=this.collectOverlapEventFootprints(e,t),!1===n){if(s.length)return!1}else if("function"==typeof n&&!function(t,e,i){var n;for(n=0;n<t.length;n++)if(!e(t[n].eventInstance.toLegacy(),i?i.toLegacy():null))return!1;return!0}(s,n,o))return!1;return!(o&&!function(t,e){var i,n,o,r,s=e.toLegacy();for(i=0;i<t.length;i++){if(n=t[i].eventInstance,o=n.def,!1===(r=o.getOverlap()))return!1;if("function"==typeof r&&!r(n.toLegacy(),s))return!1}return!0}(s,o))},t.prototype.isFootprintWithinConstraints=function(t,e){var i;for(i=0;i<e.length;i++)if(this.footprintContainsFootprint(e[i],t))return!0;return!1},t.prototype.constraintValToFootprints=function(t,e){var i;return"businessHours"===t?this.buildCurrentBusinessFootprints(e):"object"==typeof t?(i=this.parseEventDefToInstances(t))?this.eventInstancesToFootprints(i):this.parseFootprints(t):null!=t?(i=this.eventManager.getEventInstancesWithId(t),this.eventInstancesToFootprints(i)):void 0},t.prototype.buildCurrentBusinessFootprints=function(t){var e=this._calendar.view,i=e.get("businessHourGenerator"),n=e.dateProfile.activeUnzonedRange,o=i.buildEventInstanceGroup(t,n);return o?this.eventInstancesToFootprints(o.eventInstances):[]},t.prototype.eventInstancesToFootprints=function(t){var e=t.map(a.eventInstanceToEventRange);return this.eventRangesToEventFootprints(e).map(a.eventFootprintToComponentFootprint)},t.prototype.collectOverlapEventFootprints=function(t,e){var i,n=[];for(i=0;i<t.length;i++)this.footprintsIntersect(e,t[i].componentFootprint)&&n.push(t[i]);return n},t.prototype.parseEventDefToInstances=function(t){var e=this.eventManager,i=r.default.parse(t,new s.default(this._calendar));return!!i&&i.buildInstances(e.currentPeriod.unzonedRange)},t.prototype.eventRangesToEventFootprints=function(t){var e,i=[];for(e=0;e<t.length;e++)i.push.apply(i,this.eventRangeToEventFootprints(t[e]));return i},t.prototype.eventRangeToEventFootprints=function(t){return[a.eventRangeToEventFootprint(t)]},t.prototype.parseFootprints=function(t){var e,i;return t.start&&((e=this._calendar.moment(t.start)).isValid()||(e=null)),t.end&&((i=this._calendar.moment(t.end)).isValid()||(i=null)),[new o.default(new n.default(e,i),e&&!e.hasTime()||i&&!i.hasTime())]},t.prototype.footprintContainsFootprint=function(t,e){return t.unzonedRange.containsRange(e.unzonedRange)},t.prototype.footprintsIntersect=function(t,e){return t.unzonedRange.intersectsWith(e.unzonedRange)},t}();e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.defineStandardProps=function(t){var e=this.prototype;e.hasOwnProperty("standardPropMap")||(e.standardPropMap=Object.create(e.standardPropMap)),o.copyOwnProps(t,e.standardPropMap)},e.copyVerbatimStandardProps=function(t,e){var i,n=this.prototype.standardPropMap;for(i in n)null!=t[i]&&!0===n[i]&&(e[i]=t[i])},e.prototype.applyProps=function(t){var e,i=this.standardPropMap,n={},o={};for(e in t)!0===i[e]?this[e]=t[e]:!1===i[e]?n[e]=t[e]:o[e]=t[e];return this.applyMiscProps(o),this.applyManualStandardProps(n)},e.prototype.applyManualStandardProps=function(t){return!0},e.prototype.applyMiscProps=function(t){},e.prototype.isStandardProp=function(t){return t in this.standardPropMap},e}(i(14).default);e.default=r,r.prototype.standardPropMap={}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.def=t,this.dateProfile=e}return t.prototype.toLegacy=function(){var t=this.dateProfile,e=this.def.toLegacy();return e.start=t.start.clone(),e.end=t.end?t.end.clone():null,e},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(0),s=i(34),a=i(209),l=i(17),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.isAllDay=function(){return!this.startTime&&!this.endTime},e.prototype.buildInstances=function(t){for(var e,i,n,o=this.source.calendar,r=t.getStart(),s=t.getEnd(),c=[];r.isBefore(s);)this.dowHash&&!this.dowHash[r.day()]||(i=(e=o.applyTimezone(r)).clone(),n=null,this.startTime?i.time(this.startTime):i.stripTime(),this.endTime&&(n=e.clone().time(this.endTime)),c.push(new a.default(this,new l.default(i,n,o)))),r.add(1,"days");return c},e.prototype.setDow=function(t){this.dowHash||(this.dowHash={});for(var e=0;e<t.length;e++)this.dowHash[t[e]]=!0},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.startTime&&(e.startTime=r.duration(this.startTime)),e.endTime&&(e.endTime=r.duration(this.endTime)),this.dowHash&&(e.dowHash=o.extend({},this.dowHash)),e},e}(s.default);e.default=c,c.prototype.applyProps=function(t){var e=s.default.prototype.applyProps.call(this,t);return t.start&&(this.startTime=r.duration(t.start)),t.end&&(this.endTime=r.duration(t.end)),t.dow&&this.setDow(t.dow),e},c.defineStandardProps({start:!1,end:!1,dow:!1})},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e,i){this.unzonedRange=t,this.eventDef=e,i&&(this.eventInstance=i)}}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(35),r=i(18),s=i(210),a=i(6),l={start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},c=function(){function t(t,e){this.rawComplexDef=t,this.calendar=e}return t.prototype.buildEventInstanceGroup=function(t,e){var i,n=this.buildEventDefs(t);if(n.length)return(i=new r.default(o.eventDefsToEventInstances(n,e))).explicitEventDef=n[0],i},t.prototype.buildEventDefs=function(t){var e,i=this.rawComplexDef,o=[],r=!1,s=[];for(!0===i?o=[{}]:n.isPlainObject(i)?o=[i]:n.isArray(i)&&(o=i,r=!0),e=0;e<o.length;e++)r&&!o[e].dow||s.push(this.buildEventDef(t,o[e]));return s},t.prototype.buildEventDef=function(t,e){var i=n.extend({},l,e);return t&&(i.start=null,i.end=null),s.default.parse(i,new a.default(this.calendar))},t}();e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(i(19).default);e.default=o,o.prototype.classes={widget:"fc-unthemed",widgetHeader:"fc-widget-header",widgetContent:"fc-widget-content",buttonGroup:"fc-button-group",button:"fc-button",cornerLeft:"fc-corner-left",cornerRight:"fc-corner-right",stateDefault:"fc-state-default",stateActive:"fc-state-active",stateDisabled:"fc-state-disabled",stateHover:"fc-state-hover",stateDown:"fc-state-down",popoverHeader:"fc-widget-header",popoverContent:"fc-widget-content",headerRow:"fc-widget-header",dayRow:"fc-widget-content",listView:"fc-widget-content"},o.prototype.baseIconClass="fc-icon",o.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-left-single-arrow",next:"fc-icon-right-single-arrow",prevYear:"fc-icon-left-double-arrow",nextYear:"fc-icon-right-double-arrow"},o.prototype.iconOverrideOption="buttonIcons",o.prototype.iconOverrideCustomButtonOption="icon",o.prototype.iconOverridePrefix="fc-icon-"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(i(19).default);e.default=o,o.prototype.classes={widget:"ui-widget",widgetHeader:"ui-widget-header",widgetContent:"ui-widget-content",buttonGroup:"fc-button-group",button:"ui-button",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",stateDefault:"ui-state-default",stateActive:"ui-state-active",stateDisabled:"ui-state-disabled",stateHover:"ui-state-hover",stateDown:"ui-state-down",today:"ui-state-highlight",popoverHeader:"ui-widget-header",popoverContent:"ui-widget-content",headerRow:"ui-widget-header",dayRow:"ui-widget-content",listView:"ui-widget-content"},o.prototype.baseIconClass="ui-icon",o.prototype.iconClasses={close:"ui-icon-closethick",prev:"ui-icon-circle-triangle-w",next:"ui-icon-circle-triangle-e",prevYear:"ui-icon-seek-prev",nextYear:"ui-icon-seek-next"},o.prototype.iconOverrideOption="themeButtonIcons",o.prototype.iconOverrideCustomButtonOption="themeIcon",o.prototype.iconOverridePrefix="ui-icon-"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(20),s=i(6),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.parse=function(t,e){var i;return o.isFunction(t.events)?i=t:o.isFunction(t)&&(i={events:t}),!!i&&s.default.parse.call(this,i,e)},e.prototype.fetch=function(t,e,i){var n=this;return this.calendar.pushLoading(),r.default.construct(function(o){n.func.call(n.calendar,t.clone(),e.clone(),i,function(t){n.calendar.popLoading(),o(n.parseEventDefs(t))})})},e.prototype.getPrimitive=function(){return this.func},e.prototype.applyManualStandardProps=function(e){var i=t.prototype.applyManualStandardProps.call(this,e);return this.func=e.events,i},e}(s.default);e.default=a,a.defineStandardProps({events:!1})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(20),a=i(6),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.parse=function(t,e){var i;return"string"==typeof t.url?i=t:"string"==typeof t&&(i={url:t}),!!i&&a.default.parse.call(this,i,e)},e.prototype.fetch=function(t,i,n){var a=this,l=this.ajaxSettings,c=l.success,h=l.error,d=this.buildRequestParams(t,i,n);return this.calendar.pushLoading(),s.default.construct(function(t,i){o.ajax(o.extend({},e.AJAX_DEFAULTS,l,{url:a.url,data:d,success:function(e,n,s){var l;a.calendar.popLoading(),e?(l=r.applyAll(c,a,[e,n,s]),o.isArray(l)&&(e=l),t(a.parseEventDefs(e))):i()},error:function(t,e,n){a.calendar.popLoading(),r.applyAll(h,a,[t,e,n]),i()}}))})},e.prototype.buildRequestParams=function(t,e,i){var n,r,s,a,l=this.calendar,c=this.ajaxSettings,h={};return null==(n=this.startParam)&&(n=l.opt("startParam")),null==(r=this.endParam)&&(r=l.opt("endParam")),null==(s=this.timezoneParam)&&(s=l.opt("timezoneParam")),a=o.isFunction(c.data)?c.data():c.data||{},o.extend(h,a),h[n]=t.format(),h[r]=e.format(),i&&"local"!==i&&(h[s]=i),h},e.prototype.getPrimitive=function(){return this.url},e.prototype.applyMiscProps=function(t){this.ajaxSettings=t},e.AJAX_DEFAULTS={dataType:"json",cache:!1},e}(a.default);e.default=l,l.defineStandardProps({url:!0,startParam:!0,endParam:!0,timezoneParam:!0})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=function(){function t(){this.q=[],this.isPaused=!1,this.isRunning=!1}return t.prototype.queue=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.q.push.apply(this.q,t),this.tryStart()},t.prototype.pause=function(){this.isPaused=!0},t.prototype.resume=function(){this.isPaused=!1,this.tryStart()},t.prototype.getIsIdle=function(){return!this.isRunning&&!this.isPaused},t.prototype.tryStart=function(){!this.isRunning&&this.canRunNext()&&(this.isRunning=!0,this.trigger("start"),this.runRemaining())},t.prototype.canRunNext=function(){return!this.isPaused&&this.q.length},t.prototype.runRemaining=function(){var t,e,i=this;do{if(t=this.q.shift(),(e=this.runTask(t))&&e.then)return void e.then(function(){i.canRunNext()&&i.runRemaining()})}while(this.canRunNext());this.trigger("stop"),this.isRunning=!1,this.tryStart()},t.prototype.runTask=function(t){return t()},t}();e.default=o,n.default.mixInto(o)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(e){var i=t.call(this)||this;return i.waitsByNamespace=e||{},i}return n.__extends(e,t),e.prototype.queue=function(t,e,i){var n,o={func:t,namespace:e,type:i};e&&(n=this.waitsByNamespace[e]),this.waitNamespace&&(e===this.waitNamespace&&null!=n?this.delayWait(n):(this.clearWait(),this.tryStart())),this.compoundTask(o)&&(this.waitNamespace||null==n?this.tryStart():this.startWait(e,n))},e.prototype.startWait=function(t,e){this.waitNamespace=t,this.spawnWait(e)},e.prototype.delayWait=function(t){clearTimeout(this.waitId),this.spawnWait(t)},e.prototype.spawnWait=function(t){var e=this;this.waitId=setTimeout(function(){e.waitNamespace=null,e.tryStart()},t)},e.prototype.clearWait=function(){this.waitNamespace&&(clearTimeout(this.waitId),this.waitId=null,this.waitNamespace=null)},e.prototype.canRunNext=function(){if(!t.prototype.canRunNext.call(this))return!1;if(this.waitNamespace){for(var e=this.q,i=0;i<e.length;i++)if(e[i].namespace!==this.waitNamespace)return!0;return!1}return!0},e.prototype.runTask=function(t){t.func()},e.prototype.compoundTask=function(t){var e,i=this.q,n=!0;if(t.namespace&&"destroy"===t.type)for(e=i.length-1;e>=0;e--)switch(i[e].type){case"init":n=!1;case"add":case"remove":i.splice(e,1)}return n&&i.push(t),n},e}(i(217).default);e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(0),s=i(4),a=i(10),l=i(47),c=i(237),h=i(35),d=function(t){function e(i,n){var o=t.call(this)||this;return o.isRTL=!1,o.hitsNeededDepth=0,o.hasAllDayBusinessHours=!1,o.isDatesRendered=!1,i&&(o.view=i),n&&(o.options=n),o.uid=String(e.guid++),o.childrenByUid={},o.nextDayThreshold=r.duration(o.opt("nextDayThreshold")),o.isRTL=o.opt("isRTL"),o.fillRendererClass&&(o.fillRenderer=new o.fillRendererClass(o)),o.eventRendererClass&&(o.eventRenderer=new o.eventRendererClass(o,o.fillRenderer)),o.helperRendererClass&&o.eventRenderer&&(o.helperRenderer=new o.helperRendererClass(o,o.eventRenderer)),o.businessHourRendererClass&&o.fillRenderer&&(o.businessHourRenderer=new o.businessHourRendererClass(o,o.fillRenderer)),o}return n.__extends(e,t),e.prototype.addChild=function(t){return!this.childrenByUid[t.uid]&&(this.childrenByUid[t.uid]=t,!0)},e.prototype.removeChild=function(t){return!!this.childrenByUid[t.uid]&&(delete this.childrenByUid[t.uid],!0)},e.prototype.updateSize=function(t,e,i){this.callChildren("updateSize",arguments)},e.prototype.opt=function(t){return this._getView().opt(t)},e.prototype.publiclyTrigger=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this._getCalendar();return i.publiclyTrigger.apply(i,t)},e.prototype.hasPublicHandlers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this._getCalendar();return i.hasPublicHandlers.apply(i,t)},e.prototype.executeDateRender=function(t){this.dateProfile=t,this.renderDates(t),this.isDatesRendered=!0,this.callChildren("executeDateRender",arguments)},e.prototype.executeDateUnrender=function(){this.callChildren("executeDateUnrender",arguments),this.dateProfile=null,this.unrenderDates(),this.isDatesRendered=!1},e.prototype.renderDates=function(t){},e.prototype.unrenderDates=function(){},e.prototype.getNowIndicatorUnit=function(){},e.prototype.renderNowIndicator=function(t){this.callChildren("renderNowIndicator",arguments)},e.prototype.unrenderNowIndicator=function(){this.callChildren("unrenderNowIndicator",arguments)},e.prototype.renderBusinessHours=function(t){this.businessHourRenderer&&this.businessHourRenderer.render(t),this.callChildren("renderBusinessHours",arguments)},e.prototype.unrenderBusinessHours=function(){this.callChildren("unrenderBusinessHours",arguments),this.businessHourRenderer&&this.businessHourRenderer.unrender()},e.prototype.executeEventRender=function(t){this.eventRenderer?(this.eventRenderer.rangeUpdated(),this.eventRenderer.render(t)):this.renderEvents&&this.renderEvents(function(t){var e,i,n,o=[];for(e in t)for(i=t[e].eventInstances,n=0;n<i.length;n++)o.push(i[n].toLegacy());return o}(t)),this.callChildren("executeEventRender",arguments)},e.prototype.executeEventUnrender=function(){this.callChildren("executeEventUnrender",arguments),this.eventRenderer?this.eventRenderer.unrender():this.destroyEvents&&this.destroyEvents()},e.prototype.getBusinessHourSegs=function(){var t=this.getOwnBusinessHourSegs();return this.iterChildren(function(e){t.push.apply(t,e.getBusinessHourSegs())}),t},e.prototype.getOwnBusinessHourSegs=function(){return this.businessHourRenderer?this.businessHourRenderer.getSegs():[]},e.prototype.getEventSegs=function(){var t=this.getOwnEventSegs();return this.iterChildren(function(e){t.push.apply(t,e.getEventSegs())}),t},e.prototype.getOwnEventSegs=function(){return this.eventRenderer?this.eventRenderer.getSegs():[]},e.prototype.triggerAfterEventsRendered=function(){this.triggerAfterEventSegsRendered(this.getEventSegs()),this.publiclyTrigger("eventAfterAllRender",{context:this,args:[this]})},e.prototype.triggerAfterEventSegsRendered=function(t){var e=this;this.hasPublicHandlers("eventAfterRender")&&t.forEach(function(t){var i;t.el&&(i=t.footprint.getEventLegacy(),e.publiclyTrigger("eventAfterRender",{context:i,args:[i,t.el,e]}))})},e.prototype.triggerBeforeEventsDestroyed=function(){this.triggerBeforeEventSegsDestroyed(this.getEventSegs())},e.prototype.triggerBeforeEventSegsDestroyed=function(t){var e=this;this.hasPublicHandlers("eventDestroy")&&t.forEach(function(t){var i;t.el&&(i=t.footprint.getEventLegacy(),e.publiclyTrigger("eventDestroy",{context:i,args:[i,t.el,e]}))})},e.prototype.showEventsWithId=function(t){this.getEventSegs().forEach(function(e){e.footprint.eventDef.id===t&&e.el&&e.el.css("visibility","")}),this.callChildren("showEventsWithId",arguments)},e.prototype.hideEventsWithId=function(t){this.getEventSegs().forEach(function(e){e.footprint.eventDef.id===t&&e.el&&e.el.css("visibility","hidden")}),this.callChildren("hideEventsWithId",arguments)},e.prototype.renderDrag=function(t,e,i){var n=!1;return this.iterChildren(function(o){o.renderDrag(t,e,i)&&(n=!0)}),n},e.prototype.unrenderDrag=function(){this.callChildren("unrenderDrag",arguments)},e.prototype.renderEventResize=function(t,e,i){this.callChildren("renderEventResize",arguments)},e.prototype.unrenderEventResize=function(){this.callChildren("unrenderEventResize",arguments)},e.prototype.renderSelectionFootprint=function(t){this.renderHighlight(t),this.callChildren("renderSelectionFootprint",arguments)},e.prototype.unrenderSelection=function(){this.unrenderHighlight(),this.callChildren("unrenderSelection",arguments)},e.prototype.renderHighlight=function(t){this.fillRenderer&&this.fillRenderer.renderFootprint("highlight",t,{getClasses:function(){return["fc-highlight"]}}),this.callChildren("renderHighlight",arguments)},e.prototype.unrenderHighlight=function(){this.fillRenderer&&this.fillRenderer.unrender("highlight"),this.callChildren("unrenderHighlight",arguments)},e.prototype.hitsNeeded=function(){this.hitsNeededDepth++||this.prepareHits(),this.callChildren("hitsNeeded",arguments)},e.prototype.hitsNotNeeded=function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits(),this.callChildren("hitsNotNeeded",arguments)},e.prototype.prepareHits=function(){},e.prototype.releaseHits=function(){},e.prototype.queryHit=function(t,e){var i,n,o=this.childrenByUid;for(i in o)if(n=o[i].queryHit(t,e))break;return n},e.prototype.getSafeHitFootprint=function(t){var e=this.getHitFootprint(t);return this.dateProfile.activeUnzonedRange.containsRange(e.unzonedRange)?e:null},e.prototype.getHitFootprint=function(t){},e.prototype.getHitEl=function(t){},e.prototype.eventRangesToEventFootprints=function(t){var e,i=[];for(e=0;e<t.length;e++)i.push.apply(i,this.eventRangeToEventFootprints(t[e]));return i},e.prototype.eventRangeToEventFootprints=function(t){return[h.eventRangeToEventFootprint(t)]},e.prototype.eventFootprintsToSegs=function(t){var e,i=[];for(e=0;e<t.length;e++)i.push.apply(i,this.eventFootprintToSegs(t[e]));return i},e.prototype.eventFootprintToSegs=function(t){var e,i,n,o=t.componentFootprint.unzonedRange;for(e=this.componentFootprintToSegs(t.componentFootprint),i=0;i<e.length;i++)n=e[i],o.isStart||(n.isStart=!1),o.isEnd||(n.isEnd=!1),n.footprint=t;return e},e.prototype.componentFootprintToSegs=function(t){return[]},e.prototype.callChildren=function(t,e){this.iterChildren(function(i){i[t].apply(i,e)})},e.prototype.iterChildren=function(t){var e,i=this.childrenByUid;for(e in i)t(i[e])},e.prototype._getCalendar=function(){return this.calendar||this.view.calendar},e.prototype._getView=function(){return this.view},e.prototype._getDateProfile=function(){return this._getView().get("dateProfile")},e.prototype.buildGotoAnchorHtml=function(t,e,i){var n,r,l,c;return o.isPlainObject(t)?(n=t.date,r=t.type,l=t.forceOff):n=t,c={date:(n=a.default(n)).format("YYYY-MM-DD"),type:r||"day"},"string"==typeof e&&(i=e,e=null),e=e?" "+s.attrsToStr(e):"",i=i||"",!l&&this.opt("navLinks")?"<a"+e+' data-goto="'+s.htmlEscape(JSON.stringify(c))+'">'+i+"</a>":"<span"+e+">"+i+"</span>"},e.prototype.getAllDayHtml=function(){return this.opt("allDayHtml")||s.htmlEscape(this.opt("allDayText"))},e.prototype.getDayClasses=function(t,e){var i,n=this._getView(),o=[];return this.dateProfile.activeUnzonedRange.containsDate(t)?(o.push("fc-"+s.dayIDs[t.day()]),n.isDateInOtherMonth(t,this.dateProfile)&&o.push("fc-other-month"),i=n.calendar.getNow(),t.isSame(i,"day")?(o.push("fc-today"),!0!==e&&o.push(n.calendar.theme.getClass("today"))):t<i?o.push("fc-past"):o.push("fc-future")):o.push("fc-disabled-day"),o},e.prototype.formatRange=function(t,e,i,n){var o=t.end;return e&&(o=o.clone().subtract(1)),l.formatRange(t.start,o,i,n,this.isRTL)},e.prototype.currentRangeAs=function(t){return this._getDateProfile().currentUnzonedRange.as(t)},e.prototype.computeDayRange=function(t){var e=this._getCalendar(),i=e.msToUtcMoment(t.startMs,!0),n=e.msToUtcMoment(t.endMs),o=+n.time(),r=n.clone().stripTime();return o&&o>=this.nextDayThreshold&&r.add(1,"days"),r<=i&&(r=i.clone().add(1,"days")),{start:i,end:r}},e.prototype.isMultiDayRange=function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1},e.guid=0,e}(c.default);e.default=d},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(0),r=i(4),s=i(32),a=i(238),l=i(21),c=i(11),h=i(7),d=i(239),u=i(240),p=i(241),f=i(207),g=i(31),m=i(10),v=i(5),b=i(12),y=i(17),w=i(242),x=i(212),_=i(38),C=i(49),S=i(13),D=i(37),k=i(6),T=i(51),E=function(){function t(t,e){this.loadingLevel=0,this.ignoreUpdateViewSize=0,this.freezeContentHeightDepth=0,l.default.needed(),this.el=t,this.viewsByType={},this.optionsManager=new u.default(this,e),this.viewSpecManager=new p.default(this.optionsManager,this),this.initMomentInternals(),this.initCurrentDate(),this.initEventManager(),this.constraints=new f.default(this.eventManager,this),this.constructed()}return t.prototype.constructed=function(){},t.prototype.getView=function(){return this.view},t.prototype.publiclyTrigger=function(t,e){var i,o,r=this.opt(t);if(n.isPlainObject(e)?(i=e.context,o=e.args):n.isArray(e)&&(o=e),null==i&&(i=this.el[0]),o||(o=[]),this.triggerWith(t,i,o),r)return r.apply(i,o)},t.prototype.hasPublicHandlers=function(t){return this.hasHandlers(t)||this.opt(t)},t.prototype.option=function(t,e){var i;if("string"==typeof t){if(void 0===e)return this.optionsManager.get(t);(i={})[t]=e,this.optionsManager.add(i)}else"object"==typeof t&&this.optionsManager.add(t)},t.prototype.opt=function(t){return this.optionsManager.get(t)},t.prototype.instantiateView=function(t){var e=this.viewSpecManager.getViewSpec(t);if(!e)throw new Error('View type "'+t+'" is not valid');return new e.class(this,e)},t.prototype.isValidViewType=function(t){return Boolean(this.viewSpecManager.getViewSpec(t))},t.prototype.changeView=function(t,e){e&&(e.start&&e.end?this.optionsManager.recordOverrides({visibleRange:e}):this.currentDate=this.moment(e).stripZone()),this.renderView(t)},t.prototype.zoomTo=function(t,e){var i;e=e||"day",i=this.viewSpecManager.getViewSpec(e)||this.viewSpecManager.getUnitViewSpec(e),this.currentDate=t.clone(),this.renderView(i?i.type:null)},t.prototype.initCurrentDate=function(){var t=this.opt("defaultDate");this.currentDate=null!=t?this.moment(t).stripZone():this.getNow()},t.prototype.prev=function(){var t=this.view,e=t.dateProfileGenerator.buildPrev(t.get("dateProfile"));e.isValid&&(this.currentDate=e.date,this.renderView())},t.prototype.next=function(){var t=this.view,e=t.dateProfileGenerator.buildNext(t.get("dateProfile"));e.isValid&&(this.currentDate=e.date,this.renderView())},t.prototype.prevYear=function(){this.currentDate.add(-1,"years"),this.renderView()},t.prototype.nextYear=function(){this.currentDate.add(1,"years"),this.renderView()},t.prototype.today=function(){this.currentDate=this.getNow(),this.renderView()},t.prototype.gotoDate=function(t){this.currentDate=this.moment(t).stripZone(),this.renderView()},t.prototype.incrementDate=function(t){this.currentDate.add(o.duration(t)),this.renderView()},t.prototype.getDate=function(){return this.applyTimezone(this.currentDate)},t.prototype.pushLoading=function(){this.loadingLevel++||this.publiclyTrigger("loading",[!0,this.view])},t.prototype.popLoading=function(){--this.loadingLevel||this.publiclyTrigger("loading",[!1,this.view])},t.prototype.render=function(){this.contentEl?this.elementVisible()&&(this.calcSize(),this.updateViewSize()):this.initialRender()},t.prototype.initialRender=function(){var t=this,e=this.el;e.addClass("fc"),e.on("click.fc","a[data-goto]",function(e){var i=n(e.currentTarget).data("goto"),o=t.moment(i.date),s=i.type,a=t.view.opt("navLink"+r.capitaliseFirstLetter(s)+"Click");"function"==typeof a?a(o,e):("string"==typeof a&&(s=a),t.zoomTo(o,s))}),this.optionsManager.watch("settingTheme",["?theme","?themeSystem"],function(i){var n=new(T.getThemeSystemClass(i.themeSystem||i.theme))(t.optionsManager),o=n.getClass("widget");t.theme=n,o&&e.addClass(o)},function(){var i=t.theme.getClass("widget");t.theme=null,i&&e.removeClass(i)}),this.optionsManager.watch("settingBusinessHourGenerator",["?businessHours"],function(e){t.businessHourGenerator=new x.default(e.businessHours,t),t.view&&t.view.set("businessHourGenerator",t.businessHourGenerator)},function(){t.businessHourGenerator=null}),this.optionsManager.watch("applyingDirClasses",["?isRTL","?locale"],function(t){e.toggleClass("fc-ltr",!t.isRTL),e.toggleClass("fc-rtl",t.isRTL)}),this.contentEl=n("<div class='fc-view-container'/>").prependTo(e),this.initToolbars(),this.renderHeader(),this.renderFooter(),this.renderView(this.opt("defaultView")),this.opt("handleWindowResize")&&n(window).resize(this.windowResizeProxy=r.debounce(this.windowResize.bind(this),this.opt("windowResizeDelay")))},t.prototype.destroy=function(){this.view&&this.clearView(),this.toolbarsManager.proxyCall("removeElement"),this.contentEl.remove(),this.el.removeClass("fc fc-ltr fc-rtl"),this.optionsManager.unwatch("settingTheme"),this.optionsManager.unwatch("settingBusinessHourGenerator"),this.el.off(".fc"),this.windowResizeProxy&&(n(window).unbind("resize",this.windowResizeProxy),this.windowResizeProxy=null),l.default.unneeded()},t.prototype.elementVisible=function(){return this.el.is(":visible")},t.prototype.bindViewHandlers=function(t){var e=this;t.watch("titleForCalendar",["title"],function(i){t===e.view&&e.setToolbarsTitle(i.title)}),t.watch("dateProfileForCalendar",["dateProfile"],function(i){t===e.view&&(e.currentDate=i.dateProfile.date,e.updateToolbarButtons(i.dateProfile))})},t.prototype.unbindViewHandlers=function(t){t.unwatch("titleForCalendar"),t.unwatch("dateProfileForCalendar")},t.prototype.renderView=function(t){var e,i=this.view;this.freezeContentHeight(),i&&t&&i.type!==t&&this.clearView(),!this.view&&t&&(e=this.view=this.viewsByType[t]||(this.viewsByType[t]=this.instantiateView(t)),this.bindViewHandlers(e),e.startBatchRender(),e.setElement(n("<div class='fc-view fc-"+t+"-view' />").appendTo(this.contentEl)),this.toolbarsManager.proxyCall("activateButton",t)),this.view&&(this.view.get("businessHourGenerator")!==this.businessHourGenerator&&this.view.set("businessHourGenerator",this.businessHourGenerator),this.view.setDate(this.currentDate),e&&e.stopBatchRender()),this.thawContentHeight()},t.prototype.clearView=function(){var t=this.view;this.toolbarsManager.proxyCall("deactivateButton",t.type),this.unbindViewHandlers(t),t.removeElement(),t.unsetDate(),this.view=null},t.prototype.reinitView=function(){var t=this.view,e=t.queryScroll();this.freezeContentHeight(),this.clearView(),this.calcSize(),this.renderView(t.type),this.view.applyScroll(e),this.thawContentHeight()},t.prototype.getSuggestedViewHeight=function(){return null==this.suggestedViewHeight&&this.calcSize(),this.suggestedViewHeight},t.prototype.isHeightAuto=function(){return"auto"===this.opt("contentHeight")||"auto"===this.opt("height")},t.prototype.updateViewSize=function(t){void 0===t&&(t=!1);var e,i=this.view;if(!this.ignoreUpdateViewSize&&i)return t&&(this.calcSize(),e=i.queryScroll()),this.ignoreUpdateViewSize++,i.updateSize(this.getSuggestedViewHeight(),this.isHeightAuto(),t),this.ignoreUpdateViewSize--,t&&i.applyScroll(e),!0},t.prototype.calcSize=function(){this.elementVisible()&&this._calcSize()},t.prototype._calcSize=function(){var t=this.opt("contentHeight"),e=this.opt("height");this.suggestedViewHeight="number"==typeof t?t:"function"==typeof t?t():"number"==typeof e?e-this.queryToolbarsHeight():"function"==typeof e?e()-this.queryToolbarsHeight():"parent"===e?this.el.parent().height()-this.queryToolbarsHeight():Math.round(this.contentEl.width()/Math.max(this.opt("aspectRatio"),.5))},t.prototype.windowResize=function(t){t.target===window&&this.view&&this.view.isDatesRendered&&this.updateViewSize(!0)&&this.publiclyTrigger("windowResize",[this.view])},t.prototype.freezeContentHeight=function(){this.freezeContentHeightDepth++||this.forceFreezeContentHeight()},t.prototype.forceFreezeContentHeight=function(){this.contentEl.css({width:"100%",height:this.contentEl.height(),overflow:"hidden"})},t.prototype.thawContentHeight=function(){this.freezeContentHeightDepth--,this.contentEl.css({width:"",height:"",overflow:""}),this.freezeContentHeightDepth&&this.forceFreezeContentHeight()},t.prototype.initToolbars=function(){this.header=new d.default(this,this.computeHeaderOptions()),this.footer=new d.default(this,this.computeFooterOptions()),this.toolbarsManager=new a.default([this.header,this.footer])},t.prototype.computeHeaderOptions=function(){return{extraClasses:"fc-header-toolbar",layout:this.opt("header")}},t.prototype.computeFooterOptions=function(){return{extraClasses:"fc-footer-toolbar",layout:this.opt("footer")}},t.prototype.renderHeader=function(){var t=this.header;t.setToolbarOptions(this.computeHeaderOptions()),t.render(),t.el&&this.el.prepend(t.el)},t.prototype.renderFooter=function(){var t=this.footer;t.setToolbarOptions(this.computeFooterOptions()),t.render(),t.el&&this.el.append(t.el)},t.prototype.setToolbarsTitle=function(t){this.toolbarsManager.proxyCall("updateTitle",t)},t.prototype.updateToolbarButtons=function(t){var e=this.getNow(),i=this.view,n=i.dateProfileGenerator.build(e),o=i.dateProfileGenerator.buildPrev(i.get("dateProfile")),r=i.dateProfileGenerator.buildNext(i.get("dateProfile"));this.toolbarsManager.proxyCall(n.isValid&&!t.currentUnzonedRange.containsDate(e)?"enableButton":"disableButton","today"),this.toolbarsManager.proxyCall(o.isValid?"enableButton":"disableButton","prev"),this.toolbarsManager.proxyCall(r.isValid?"enableButton":"disableButton","next")},t.prototype.queryToolbarsHeight=function(){return this.toolbarsManager.items.reduce(function(t,e){return t+(e.el?e.el.outerHeight(!0):0)},0)},t.prototype.select=function(t,e){this.view.select(this.buildSelectFootprint.apply(this,arguments))},t.prototype.unselect=function(){this.view&&this.view.unselect()},t.prototype.buildSelectFootprint=function(t,e){var i,n=this.moment(t).stripZone();return i=e?this.moment(e).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration),new b.default(new v.default(n,i),!n.hasTime())},t.prototype.initMomentInternals=function(){var t=this;this.defaultAllDayEventDuration=o.duration(this.opt("defaultAllDayEventDuration")),this.defaultTimedEventDuration=o.duration(this.opt("defaultTimedEventDuration")),this.optionsManager.watch("buildingMomentLocale",["?locale","?monthNames","?monthNamesShort","?dayNames","?dayNamesShort","?firstDay","?weekNumberCalculation"],function(e){var i,n=e.weekNumberCalculation,o=e.firstDay;"iso"===n&&(n="ISO");var r=Object.create(g.getMomentLocaleData(e.locale));e.monthNames&&(r._months=e.monthNames),e.monthNamesShort&&(r._monthsShort=e.monthNamesShort),e.dayNames&&(r._weekdays=e.dayNames),e.dayNamesShort&&(r._weekdaysShort=e.dayNamesShort),null==o&&"ISO"===n&&(o=1),null!=o&&((i=Object.create(r._week)).dow=o,r._week=i),"ISO"!==n&&"local"!==n&&"function"!=typeof n||(r._fullCalendar_weekCalc=n),t.localeData=r,t.currentDate&&t.localizeMoment(t.currentDate)})},t.prototype.moment=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return"local"===this.opt("timezone")?(t=m.default.apply(null,e)).hasTime()&&t.local():t="UTC"===this.opt("timezone")?m.default.utc.apply(null,e):m.default.parseZone.apply(null,e),this.localizeMoment(t),t},t.prototype.msToMoment=function(t,e){var i=m.default.utc(t);return e?i.stripTime():i=this.applyTimezone(i),this.localizeMoment(i),i},t.prototype.msToUtcMoment=function(t,e){var i=m.default.utc(t);return e&&i.stripTime(),this.localizeMoment(i),i},t.prototype.localizeMoment=function(t){t._locale=this.localeData},t.prototype.getIsAmbigTimezone=function(){return"local"!==this.opt("timezone")&&"UTC"!==this.opt("timezone")},t.prototype.applyTimezone=function(t){if(!t.hasTime())return t.clone();var e,i=this.moment(t.toArray()),n=t.time().asMilliseconds()-i.time().asMilliseconds();return n&&(e=i.clone().add(n),t.time().asMilliseconds()-e.time().asMilliseconds()==0&&(i=e)),i},t.prototype.footprintToDateProfile=function(t,e){void 0===e&&(e=!1);var i,n=m.default.utc(t.unzonedRange.startMs);return e||(i=m.default.utc(t.unzonedRange.endMs)),t.isAllDay?(n.stripTime(),i&&i.stripTime()):(n=this.applyTimezone(n),i&&(i=this.applyTimezone(i))),new y.default(n,i,this)},t.prototype.getNow=function(){var t=this.opt("now");return"function"==typeof t&&(t=t()),this.moment(t).stripZone()},t.prototype.humanizeDuration=function(t){return t.locale(this.opt("locale")).humanize()},t.prototype.parseUnzonedRange=function(t){var e=null,i=null;return t.start&&(e=this.moment(t.start).stripZone()),t.end&&(i=this.moment(t.end).stripZone()),e||i?e&&i&&i.isBefore(e)?null:new v.default(e,i):null},t.prototype.initEventManager=function(){var t=this,e=new w.default(this),i=this.opt("eventSources")||[],n=this.opt("events");this.eventManager=e,n&&i.unshift(n),e.on("release",function(e){t.trigger("eventsReset",e)}),e.freeze(),i.forEach(function(i){var n=_.default.parse(i,t);n&&e.addSource(n)}),e.thaw()},t.prototype.requestEvents=function(t,e){return this.eventManager.requestEvents(t,e,this.opt("timezone"),!this.opt("lazyFetching"))},t.prototype.getEventEnd=function(t){return t.end?t.end.clone():this.getDefaultEventEnd(t.allDay,t.start)},t.prototype.getDefaultEventEnd=function(t,e){var i=e.clone();return t?i.stripTime().add(this.defaultAllDayEventDuration):i.add(this.defaultTimedEventDuration),this.getIsAmbigTimezone()&&i.stripZone(),i},t.prototype.rerenderEvents=function(){this.view.flash("displayingEvents")},t.prototype.refetchEvents=function(){this.eventManager.refetchAllSources()},t.prototype.renderEvents=function(t,e){this.eventManager.freeze();for(var i=0;i<t.length;i++)this.renderEvent(t[i],e);this.eventManager.thaw()},t.prototype.renderEvent=function(t,e){void 0===e&&(e=!1);var i=this.eventManager,n=C.default.parse(t,t.source||i.stickySource);n&&i.addEventDef(n,e)},t.prototype.removeEvents=function(t){var e,i=this.eventManager,n=[],o={};if(null==t)i.removeAllEventDefs();else{for(i.getEventInstances().forEach(function(t){n.push(t.toLegacy())}),n=R(n,t),e=0;e<n.length;e++)o[this.eventManager.getEventDefByUid(n[e]._id).id]=!0;for(e in i.freeze(),o)i.removeEventDefsById(e);i.thaw()}},t.prototype.clientEvents=function(t){var e=[];return this.eventManager.getEventInstances().forEach(function(t){e.push(t.toLegacy())}),R(e,t)},t.prototype.updateEvents=function(t){this.eventManager.freeze();for(var e=0;e<t.length;e++)this.updateEvent(t[e]);this.eventManager.thaw()},t.prototype.updateEvent=function(t){var e,i,n=this.eventManager.getEventDefByUid(t._id);n instanceof S.default&&(e=n.buildInstance(),i=D.default.createFromRawProps(e,t,null),this.eventManager.mutateEventsWithId(n.id,i))},t.prototype.getEventSources=function(){return this.eventManager.otherSources.slice()},t.prototype.getEventSourceById=function(t){return this.eventManager.getSourceById(k.default.normalizeId(t))},t.prototype.addEventSource=function(t){var e=_.default.parse(t,this);e&&this.eventManager.addSource(e)},t.prototype.removeEventSources=function(t){var e,i,n=this.eventManager;if(null==t)this.eventManager.removeAllSources();else{for(e=n.multiQuerySources(t),n.freeze(),i=0;i<e.length;i++)n.removeSource(e[i]);n.thaw()}},t.prototype.removeEventSource=function(t){var e,i=this.eventManager,n=i.querySources(t);for(i.freeze(),e=0;e<n.length;e++)i.removeSource(n[e]);i.thaw()},t.prototype.refetchEventSources=function(t){var e,i=this.eventManager,n=i.multiQuerySources(t);for(i.freeze(),e=0;e<n.length;e++)i.refetchSource(n[e]);i.thaw()},t.defaults=s.globalDefaults,t.englishDefaults=s.englishDefaults,t.rtlDefaults=s.rtlDefaults,t}();function R(t,e){return null==e?t:n.isFunction(e)?t.filter(e):(e+="",t.filter(function(t){return t.id==e||t._id===e}))}e.default=E,c.default.mixInto(E),h.default.mixInto(E)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(4),r=i(5),s=function(){function t(t){this._view=t}return t.prototype.opt=function(t){return this._view.opt(t)},t.prototype.trimHiddenDays=function(t){return this._view.trimHiddenDays(t)},t.prototype.msToUtcMoment=function(t,e){return this._view.calendar.msToUtcMoment(t,e)},t.prototype.buildPrev=function(t){var e=t.date.clone().startOf(t.currentRangeUnit).subtract(t.dateIncrement);return this.build(e,-1)},t.prototype.buildNext=function(t){var e=t.date.clone().startOf(t.currentRangeUnit).add(t.dateIncrement);return this.build(e,1)},t.prototype.build=function(t,e,i){void 0===i&&(i=!1);var o,r,s,a,l,c,h,d,u=!t.hasTime();return o=this.buildValidRange(),o=this.trimHiddenDays(o),i&&(t=this.msToUtcMoment(o.constrainDate(t),u)),a=this.buildCurrentRangeInfo(t,e),l=/^(year|month|week|day)$/.test(a.unit),c=this.buildRenderRange(this.trimHiddenDays(a.unzonedRange),a.unit,l),h=(c=this.trimHiddenDays(c)).clone(),this.opt("showNonCurrentDates")||(h=h.intersect(a.unzonedRange)),r=n.duration(this.opt("minTime")),s=n.duration(this.opt("maxTime")),(h=(h=this.adjustActiveRange(h,r,s)).intersect(o))&&(t=this.msToUtcMoment(h.constrainDate(t),u)),d=a.unzonedRange.intersectsWith(o),{validUnzonedRange:o,currentUnzonedRange:a.unzonedRange,currentRangeUnit:a.unit,isRangeAllDay:l,activeUnzonedRange:h,renderUnzonedRange:c,minTime:r,maxTime:s,isValid:d,date:t,dateIncrement:this.buildDateIncrement(a.duration)}},t.prototype.buildValidRange=function(){return this._view.getUnzonedRangeOption("validRange",this._view.calendar.getNow())||new r.default},t.prototype.buildCurrentRangeInfo=function(t,e){var i,n=this._view.viewSpec,r=null,s=null,a=null;return n.duration?(r=n.duration,s=n.durationUnit,a=this.buildRangeFromDuration(t,e,r,s)):(i=this.opt("dayCount"))?(s="day",a=this.buildRangeFromDayCount(t,e,i)):(a=this.buildCustomVisibleRange(t))?s=o.computeGreatestUnit(a.getStart(),a.getEnd()):(r=this.getFallbackDuration(),s=o.computeGreatestUnit(r),a=this.buildRangeFromDuration(t,e,r,s)),{duration:r,unit:s,unzonedRange:a}},t.prototype.getFallbackDuration=function(){return n.duration({days:1})},t.prototype.adjustActiveRange=function(t,e,i){var n=t.getStart(),o=t.getEnd();return this._view.usesMinMaxTime&&(e<0&&n.time(0).add(e),i>864e5&&o.time(i-864e5)),new r.default(n,o)},t.prototype.buildRangeFromDuration=function(t,e,i,s){var a,l,c,h,d,u=this.opt("dateAlignment");function p(){c=t.clone().startOf(u),h=c.clone().add(i),d=new r.default(c,h)}return u||((a=this.opt("dateIncrement"))?(l=n.duration(a),u=l<i?o.computeDurationGreatestUnit(l,a):s):u=s),i.as("days")<=1&&this._view.isHiddenDay(c)&&(c=this._view.skipHiddenDays(c,e)).startOf("day"),p(),this.trimHiddenDays(d)||(t=this._view.skipHiddenDays(t,e),p()),d},t.prototype.buildRangeFromDayCount=function(t,e,i){var n,o=this.opt("dateAlignment"),s=0,a=t.clone();o&&a.startOf(o),a.startOf("day"),n=(a=this._view.skipHiddenDays(a,e)).clone();do{n.add(1,"day"),this._view.isHiddenDay(n)||s++}while(s<i);return new r.default(a,n)},t.prototype.buildCustomVisibleRange=function(t){var e=this._view.getUnzonedRangeOption("visibleRange",this._view.calendar.applyTimezone(t));return!e||null!=e.startMs&&null!=e.endMs?e:null},t.prototype.buildRenderRange=function(t,e,i){return t.clone()},t.prototype.buildDateIncrement=function(t){var e,i=this.opt("dateIncrement");return i?n.duration(i):(e=this.opt("dateAlignment"))?n.duration(1,e):t||n.duration({days:1})},t}();e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(0),s=i(16),a=i(4),l=i(10),c=i(7),h=i(23),d=i(13),u=i(18),p=i(6),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return n.__extends(e,t),e.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},e.prototype.bindToDocument=function(){this.listenTo(o(document),{dragstart:this.handleDragStart,sortstart:this.handleDragStart})},e.prototype.unbindFromDocument=function(){this.stopListeningTo(o(document))},e.prototype.handleDragStart=function(t,e){var i,n;this.opt("droppable")&&(i=o((e?e.item:null)||t.target),n=this.opt("dropAccept"),(o.isFunction(n)?n.call(i[0],i):i.is(n))&&(this.isDragging||this.listenToExternalDrag(i,t,e)))},e.prototype.listenToExternalDrag=function(t,e,i){var n,l=this,c=this.component,d=this.view,p=function(t){var e,i,n,a,l=s.dataAttrPrefix;l&&(l+="-");(e=t.data(l+"event")||null)&&(e="object"==typeof e?o.extend({},e):{},null==(i=e.start)&&(i=e.time),n=e.duration,a=e.stick,delete e.start,delete e.time,delete e.duration,delete e.stick);null==i&&(i=t.data(l+"start"));null==i&&(i=t.data(l+"time"));null==n&&(n=t.data(l+"duration"));null==a&&(a=t.data(l+"stick"));return i=null!=i?r.duration(i):null,n=null!=n?r.duration(n):null,a=Boolean(a),{eventProps:e,startTime:i,duration:n,stick:a}}(t);(this.dragListener=new h.default(c,{interactionStart:function(){l.isDragging=!0},hitOver:function(t){var e,i=!0,o=t.component.getSafeHitFootprint(t);o&&(n=l.computeExternalDrop(o,p))?(e=new u.default(n.buildInstances()),i=p.eventProps?c.isEventInstanceGroupAllowed(e):c.isExternalInstanceGroupAllowed(e)):i=!1,i||(n=null,a.disableCursor()),n&&c.renderDrag(c.eventRangesToEventFootprints(e.sliceRenderRanges(c.dateProfile.renderUnzonedRange,d.calendar)))},hitOut:function(){n=null},hitDone:function(){a.enableCursor(),c.unrenderDrag()},interactionEnd:function(e){n&&d.reportExternalDrop(n,Boolean(p.eventProps),Boolean(p.stick),t,e,i),l.isDragging=!1,l.dragListener=null}})).startDrag(e)},e.prototype.computeExternalDrop=function(t,e){var i,n=this.view.calendar,r=l.default.utc(t.unzonedRange.startMs).stripZone();return t.isAllDay&&(e.startTime?r.time(e.startTime):r.stripTime()),e.duration&&(i=r.clone().add(e.duration)),r=n.applyTimezone(r),i&&(i=n.applyTimezone(i)),d.default.parse(o.extend({},e.eventProps,{start:r,end:i}),new p.default(n))},e}(i(15).default);e.default=f,c.default.mixInto(f),s.dataAttrPrefix=""},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(37),a=i(50),l=i(23),c=function(t){function e(e,i){var n=t.call(this,e)||this;return n.isResizing=!1,n.eventPointing=i,n}return n.__extends(e,t),e.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},e.prototype.bindToEl=function(t){var e=this.component;e.bindSegHandlerToEl(t,"mousedown",this.handleMouseDown.bind(this)),e.bindSegHandlerToEl(t,"touchstart",this.handleTouchStart.bind(this))},e.prototype.handleMouseDown=function(t,e){this.component.canStartResize(t,e)&&this.buildDragListener(t,o(e.target).is(".fc-start-resizer")).startInteraction(e,{distance:5})},e.prototype.handleTouchStart=function(t,e){this.component.canStartResize(t,e)&&this.buildDragListener(t,o(e.target).is(".fc-start-resizer")).startInteraction(e)},e.prototype.buildDragListener=function(t,e){var i,n,o=this,s=this.component,a=this.view,c=a.calendar,h=c.eventManager,d=t.el,u=t.footprint.eventDef,p=t.footprint.eventInstance;return this.dragListener=new l.default(s,{scroll:this.opt("dragScroll"),subjectEl:d,interactionStart:function(){i=!1},dragStart:function(e){i=!0,o.eventPointing.handleMouseout(t,e),o.segResizeStart(t,e)},hitOver:function(i,l,d){var p,f=!0,g=s.getSafeHitFootprint(d),m=s.getSafeHitFootprint(i);g&&m&&(n=e?o.computeEventStartResizeMutation(g,m,t.footprint):o.computeEventEndResizeMutation(g,m,t.footprint))?(p=h.buildMutatedEventInstanceGroup(u.id,n),f=s.isEventInstanceGroupAllowed(p)):f=!1,f?n.isEmpty()&&(n=null):(n=null,r.disableCursor()),n&&(a.hideEventsWithId(t.footprint.eventDef.id),a.renderEventResize(s.eventRangesToEventFootprints(p.sliceRenderRanges(s.dateProfile.renderUnzonedRange,c)),t))},hitOut:function(){n=null},hitDone:function(){a.unrenderEventResize(t),a.showEventsWithId(t.footprint.eventDef.id),r.enableCursor()},interactionEnd:function(e){i&&o.segResizeStop(t,e),n&&a.reportEventResize(p,n,d,e),o.dragListener=null}})},e.prototype.segResizeStart=function(t,e){this.isResizing=!0,this.component.publiclyTrigger("eventResizeStart",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,{},this.view]})},e.prototype.segResizeStop=function(t,e){this.isResizing=!1,this.component.publiclyTrigger("eventResizeStop",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,{},this.view]})},e.prototype.computeEventStartResizeMutation=function(t,e,i){var n,o,r=i.componentFootprint.unzonedRange,l=this.component.diffDates(e.unzonedRange.getStart(),t.unzonedRange.getStart());return r.getStart().add(l)<r.getEnd()&&((n=new a.default).setStartDelta(l),(o=new s.default).setDateMutation(n),o)},e.prototype.computeEventEndResizeMutation=function(t,e,i){var n,o,r=i.componentFootprint.unzonedRange,l=this.component.diffDates(e.unzonedRange.getEnd(),t.unzonedRange.getEnd());return r.getEnd().add(l)>r.getStart()&&((n=new a.default).setEndDelta(l),(o=new s.default).setDateMutation(n),o)},e}(i(15).default);e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=i(37),s=i(50),a=i(54),l=i(23),c=i(244),h=function(t){function e(e,i){var n=t.call(this,e)||this;return n.isDragging=!1,n.eventPointing=i,n}return n.__extends(e,t),e.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},e.prototype.getSelectionDelay=function(){var t=this.opt("eventLongPressDelay");return null==t&&(t=this.opt("longPressDelay")),t},e.prototype.bindToEl=function(t){var e=this.component;e.bindSegHandlerToEl(t,"mousedown",this.handleMousedown.bind(this)),e.bindSegHandlerToEl(t,"touchstart",this.handleTouchStart.bind(this))},e.prototype.handleMousedown=function(t,e){!this.component.shouldIgnoreMouse()&&this.component.canStartDrag(t,e)&&this.buildDragListener(t).startInteraction(e,{distance:5})},e.prototype.handleTouchStart=function(t,e){var i=this.component,n={delay:this.view.isEventDefSelected(t.footprint.eventDef)?0:this.getSelectionDelay()};i.canStartDrag(t,e)?this.buildDragListener(t).startInteraction(e,n):i.canStartSelection(t,e)&&this.buildSelectListener(t).startInteraction(e,n)},e.prototype.buildSelectListener=function(t){var e=this,i=this.view,n=t.footprint.eventDef,o=t.footprint.eventInstance;if(this.dragListener)return this.dragListener;var r=this.dragListener=new a.default({dragStart:function(t){r.isTouch&&!i.isEventDefSelected(n)&&o&&i.selectEventInstance(o)},interactionEnd:function(t){e.dragListener=null}});return r},e.prototype.buildDragListener=function(t){var e,i,n,r=this,s=this.component,a=this.view,h=a.calendar,d=h.eventManager,u=t.el,p=t.footprint.eventDef,f=t.footprint.eventInstance;if(this.dragListener)return this.dragListener;var g=this.dragListener=new l.default(a,{scroll:this.opt("dragScroll"),subjectEl:u,subjectCenter:!0,interactionStart:function(n){t.component=s,e=!1,(i=new c.default(t.el,{additionalClass:"fc-dragging",parentEl:a.el,opacity:g.isTouch?null:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2})).hide(),i.start(n)},dragStart:function(i){g.isTouch&&!a.isEventDefSelected(p)&&f&&a.selectEventInstance(f),e=!0,r.eventPointing.handleMouseout(t,i),r.segDragStart(t,i),a.hideEventsWithId(t.footprint.eventDef.id)},hitOver:function(e,l,c){var u,f,m,v=!0;t.hit&&(c=t.hit),u=c.component.getSafeHitFootprint(c),f=e.component.getSafeHitFootprint(e),u&&f&&(n=r.computeEventDropMutation(u,f,p))?(m=d.buildMutatedEventInstanceGroup(p.id,n),v=s.isEventInstanceGroupAllowed(m)):v=!1,v||(n=null,o.disableCursor()),n&&a.renderDrag(s.eventRangesToEventFootprints(m.sliceRenderRanges(s.dateProfile.renderUnzonedRange,h)),t,g.isTouch)?i.hide():i.show(),l&&(n=null)},hitOut:function(){a.unrenderDrag(t),i.show(),n=null},hitDone:function(){o.enableCursor()},interactionEnd:function(o){delete t.component,i.stop(!n,function(){e&&(a.unrenderDrag(t),r.segDragStop(t,o)),a.showEventsWithId(t.footprint.eventDef.id),n&&a.reportEventDrop(f,n,u,o)}),r.dragListener=null}});return g},e.prototype.segDragStart=function(t,e){this.isDragging=!0,this.component.publiclyTrigger("eventDragStart",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,{},this.view]})},e.prototype.segDragStop=function(t,e){this.isDragging=!1,this.component.publiclyTrigger("eventDragStop",{context:t.el[0],args:[t.footprint.getEventLegacy(),e,{},this.view]})},e.prototype.computeEventDropMutation=function(t,e,i){var n=new r.default;return n.setDateMutation(this.computeEventDateMutation(t,e)),n},e.prototype.computeEventDateMutation=function(t,e){var i,n,o=t.unzonedRange.getStart(),r=e.unzonedRange.getStart(),a=!1,l=!1,c=!1;return t.isAllDay!==e.isAllDay&&(a=!0,e.isAllDay?(c=!0,o.stripTime()):l=!0),i=this.component.diffDates(r,o),(n=new s.default).clearEnd=a,n.forceTimed=l,n.forceAllDay=c,n.setDateDelta(i),n},e}(i(15).default);e.default=h},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=i(23),s=i(12),a=i(5),l=function(t){function e(e){var i=t.call(this,e)||this;return i.dragListener=i.buildDragListener(),i}return n.__extends(e,t),e.prototype.end=function(){this.dragListener.endInteraction()},e.prototype.getDelay=function(){var t=this.opt("selectLongPressDelay");return null==t&&(t=this.opt("longPressDelay")),t},e.prototype.bindToEl=function(t){var e=this,i=this.component,n=this.dragListener;i.bindDateHandlerToEl(t,"mousedown",function(t){e.opt("selectable")&&!i.shouldIgnoreMouse()&&n.startInteraction(t,{distance:e.opt("selectMinDistance")})}),i.bindDateHandlerToEl(t,"touchstart",function(t){e.opt("selectable")&&!i.shouldIgnoreTouch()&&n.startInteraction(t,{delay:e.getDelay()})}),o.preventSelection(t)},e.prototype.buildDragListener=function(){var t,e=this,i=this.component;return new r.default(i,{scroll:this.opt("dragScroll"),interactionStart:function(){t=null},dragStart:function(t){e.view.unselect(t)},hitOver:function(n,r,s){var a,l;s&&(a=i.getSafeHitFootprint(s),l=i.getSafeHitFootprint(n),(t=a&&l?e.computeSelection(a,l):null)?i.renderSelectionFootprint(t):!1===t&&o.disableCursor())},hitOut:function(){t=null,i.unrenderSelection()},hitDone:function(){o.enableCursor()},interactionEnd:function(i,n){!n&&t&&e.view.reportSelection(t,i)}})},e.prototype.computeSelection=function(t,e){var i=this.computeSelectionFootprint(t,e);return!(i&&!this.isSelectionFootprintAllowed(i))&&i},e.prototype.computeSelectionFootprint=function(t,e){var i=[t.unzonedRange.startMs,t.unzonedRange.endMs,e.unzonedRange.startMs,e.unzonedRange.endMs];return i.sort(o.compareNumbers),new s.default(new a.default(i[0],i[3]),t.isAllDay)},e.prototype.isSelectionFootprintAllowed=function(t){return this.component.dateProfile.validUnzonedRange.containsRange(t.unzonedRange)&&this.view.calendar.constraints.isSelectionFootprintAllowed(t)},e}(i(15).default);e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n,o,r=i(2),s=i(0),a=i(3),l=i(4),c=i(39),h=i(41),d=i(227),u=i(61),p=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.usesMinMaxTime=!0,n.timeGrid=n.instantiateTimeGrid(),n.addChild(n.timeGrid),n.opt("allDaySlot")&&(n.dayGrid=n.instantiateDayGrid(),n.addChild(n.dayGrid)),n.scroller=new c.default({overflowX:"hidden",overflowY:"auto"}),n}return r.__extends(e,t),e.prototype.instantiateTimeGrid=function(){var t=new this.timeGridClass(this);return l.copyOwnProps(n,t),t},e.prototype.instantiateDayGrid=function(){var t=new this.dayGridClass(this);return l.copyOwnProps(o,t),t},e.prototype.renderSkeleton=function(){var t,e;this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.scroller.render(),t=this.scroller.el.addClass("fc-time-grid-container"),e=a('<div class="fc-time-grid" />').appendTo(t),this.el.find(".fc-body > tr > td").append(t),this.timeGrid.headContainerEl=this.el.find(".fc-head-container"),this.timeGrid.setElement(e),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight())},e.prototype.unrenderSkeleton=function(){this.timeGrid.removeElement(),this.dayGrid&&this.dayGrid.removeElement(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var t=this.calendar.theme;return'<table class="'+t.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+t.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+t.getClass("widgetContent")+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+t.getClass("widgetHeader")+'"/>':"")+"</td></tr></tbody></table>"},e.prototype.axisStyleAttr=function(){return null!=this.axisWidth?'style="width:'+this.axisWidth+'px"':""},e.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},e.prototype.updateSize=function(e,i,n){var o,r,s;if(t.prototype.updateSize.call(this,e,i,n),this.axisWidth=l.matchCellWidths(this.el.find(".fc-axis")),this.timeGrid.colEls){var a=this.el.find(".fc-row:not(.fc-scroller *)");this.timeGrid.bottomRuleEl.hide(),this.scroller.clear(),l.uncompensateScroll(a),this.dayGrid&&(this.dayGrid.removeSegPopover(),(o=this.opt("eventLimit"))&&"number"!=typeof o&&(o=5),o&&this.dayGrid.limitRows(o)),i||(r=this.computeScrollerHeight(e),this.scroller.setHeight(r),((s=this.scroller.getScrollbarWidths()).left||s.right)&&(l.compensateScroll(a,s),r=this.computeScrollerHeight(e),this.scroller.setHeight(r)),this.scroller.lockOverflow(s),this.timeGrid.getTotalSlatHeight()<r&&this.timeGrid.bottomRuleEl.show())}else i||(r=this.computeScrollerHeight(e),this.scroller.setHeight(r))},e.prototype.computeScrollerHeight=function(t){return t-l.subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.computeInitialDateScroll=function(){var t=s.duration(this.opt("scrollTime")),e=this.timeGrid.computeTimeTop(t);return(e=Math.ceil(e))&&e++,{top:e}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(t){void 0!==t.top&&this.scroller.setScrollTop(t.top)},e.prototype.getHitFootprint=function(t){return t.component.getHitFootprint(t)},e.prototype.getHitEl=function(t){return t.component.getHitEl(t)},e.prototype.executeEventRender=function(t){var e,i,n={},o={};for(e in t)(i=t[e]).getEventDef().isAllDay()?n[e]=i:o[e]=i;this.timeGrid.executeEventRender(o),this.dayGrid&&this.dayGrid.executeEventRender(n)},e.prototype.renderDrag=function(t,e,i){var n=f(t),o=!1;return o=this.timeGrid.renderDrag(n.timed,e,i),this.dayGrid&&(o=this.dayGrid.renderDrag(n.allDay,e,i)||o),o},e.prototype.renderEventResize=function(t,e,i){var n=f(t);this.timeGrid.renderEventResize(n.timed,e,i),this.dayGrid&&this.dayGrid.renderEventResize(n.allDay,e,i)},e.prototype.renderSelectionFootprint=function(t){t.isAllDay?this.dayGrid&&this.dayGrid.renderSelectionFootprint(t):this.timeGrid.renderSelectionFootprint(t)},e}(h.default);function f(t){var e,i=[],n=[];for(e=0;e<t.length;e++)t[e].componentFootprint.isAllDay?i.push(t[e]):n.push(t[e]);return{allDay:i,timed:n}}e.default=p,p.prototype.timeGridClass=d.default,p.prototype.dayGridClass=u.default,n={renderHeadIntroHtml:function(){var t,e=this.view,i=e.calendar,n=i.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs,!0);return this.opt("weekNumbers")?(t=n.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+i.theme.getClass("widgetHeader")+'" '+e.axisStyleAttr()+">"+e.buildGotoAnchorHtml({date:n,type:"week",forceOff:this.colCnt>1},l.htmlEscape(t))+"</th>"):'<th class="fc-axis '+i.theme.getClass("widgetHeader")+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.calendar.theme.getClass("widgetContent")+'" '+t.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},o={renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.calendar.theme.getClass("widgetContent")+'" '+t.axisStyleAttr()+"><span>"+t.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(0),s=i(4),a=i(40),l=i(56),c=i(60),h=i(55),d=i(53),u=i(5),p=i(12),f=i(246),g=i(247),m=i(248),v=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}],b=function(t){function e(e){var i=t.call(this,e)||this;return i.processOptions(),i}return n.__extends(e,t),e.prototype.componentFootprintToSegs=function(t){var e,i=this.sliceRangeByTimes(t.unzonedRange);for(e=0;e<i.length;e++)this.isRTL?i[e].col=this.daysPerRow-1-i[e].dayIndex:i[e].col=i[e].dayIndex;return i},e.prototype.sliceRangeByTimes=function(t){var e,i,n=[];for(i=0;i<this.daysPerRow;i++)(e=t.intersect(this.dayRanges[i]))&&n.push({startMs:e.startMs,endMs:e.endMs,isStart:e.isStart,isEnd:e.isEnd,dayIndex:i});return n},e.prototype.processOptions=function(){var t,e=this.opt("slotDuration"),i=this.opt("snapDuration");e=r.duration(e),i=i?r.duration(i):e,this.slotDuration=e,this.snapDuration=i,this.snapsPerSlot=e/i,t=this.opt("slotLabelFormat"),o.isArray(t)&&(t=t[t.length-1]),this.labelFormat=t||this.opt("smallTimeFormat"),t=this.opt("slotLabelInterval"),this.labelInterval=t?r.duration(t):this.computeLabelInterval(e)},e.prototype.computeLabelInterval=function(t){var e,i,n;for(e=v.length-1;e>=0;e--)if(i=r.duration(v[e]),n=s.divideDurationByDuration(i,t),s.isInt(n)&&n>1)return i;return r.duration(t)},e.prototype.renderDates=function(t){this.dateProfile=t,this.updateDayTable(),this.renderSlats(),this.renderColumns()},e.prototype.unrenderDates=function(){this.unrenderColumns()},e.prototype.renderSkeleton=function(){var t=this.view.calendar.theme;this.el.html('<div class="fc-bg"></div><div class="fc-slats"></div><hr class="fc-divider '+t.getClass("widgetHeader")+'" style="display:none" />'),this.bottomRuleEl=this.el.find("hr")},e.prototype.renderSlats=function(){var t=this.view.calendar.theme;this.slatContainerEl=this.el.find("> .fc-slats").html('<table class="'+t.getClass("tableGrid")+'">'+this.renderSlatRowHtml()+"</table>"),this.slatEls=this.slatContainerEl.find("tr"),this.slatCoordCache=new d.default({els:this.slatEls,isVertical:!0})},e.prototype.renderSlatRowHtml=function(){for(var t,e,i,n=this.view,o=n.calendar,a=o.theme,l=this.isRTL,c=this.dateProfile,h="",d=r.duration(+c.minTime),u=r.duration(0);d<c.maxTime;)t=o.msToUtcMoment(c.renderUnzonedRange.startMs).time(d),e=s.isInt(s.divideDurationByDuration(u,this.labelInterval)),i='<td class="fc-axis fc-time '+a.getClass("widgetContent")+'" '+n.axisStyleAttr()+">"+(e?"<span>"+s.htmlEscape(t.format(this.labelFormat))+"</span>":"")+"</td>",h+='<tr data-time="'+t.format("HH:mm:ss")+'"'+(e?"":' class="fc-minor"')+">"+(l?"":i)+'<td class="'+a.getClass("widgetContent")+'"/>'+(l?i:"")+"</tr>",d.add(this.slotDuration),u.add(this.slotDuration);return h},e.prototype.renderColumns=function(){var t=this.dateProfile,e=this.view.calendar.theme;this.dayRanges=this.dayDates.map(function(e){return new u.default(e.clone().add(t.minTime),e.clone().add(t.maxTime))}),this.headContainerEl&&this.headContainerEl.html(this.renderHeadHtml()),this.el.find("> .fc-bg").html('<table class="'+e.getClass("tableGrid")+'">'+this.renderBgTrHtml(0)+"</table>"),this.colEls=this.el.find(".fc-day, .fc-disabled-day"),this.colCoordCache=new d.default({els:this.colEls,isHorizontal:!0}),this.renderContentSkeleton()},e.prototype.unrenderColumns=function(){this.unrenderContentSkeleton()},e.prototype.renderContentSkeleton=function(){var t,e,i="";for(t=0;t<this.colCnt;t++)i+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';e=this.contentSkeletonEl=o('<div class="fc-content-skeleton"><table><tr>'+i+"</tr></table></div>"),this.colContainerEls=e.find(".fc-content-col"),this.helperContainerEls=e.find(".fc-helper-container"),this.fgContainerEls=e.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=e.find(".fc-bgevent-container"),this.highlightContainerEls=e.find(".fc-highlight-container"),this.businessContainerEls=e.find(".fc-business-container"),this.bookendCells(e.find("tr")),this.el.append(e)},e.prototype.unrenderContentSkeleton=function(){this.contentSkeletonEl&&(this.contentSkeletonEl.remove(),this.contentSkeletonEl=null,this.colContainerEls=null,this.helperContainerEls=null,this.fgContainerEls=null,this.bgContainerEls=null,this.highlightContainerEls=null,this.businessContainerEls=null)},e.prototype.groupSegsByCol=function(t){var e,i=[];for(e=0;e<this.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i},e.prototype.attachSegsByCol=function(t,e){var i,n,o;for(i=0;i<this.colCnt;i++)for(n=t[i],o=0;o<n.length;o++)e.eq(i).append(n[o].el)},e.prototype.getNowIndicatorUnit=function(){return"minute"},e.prototype.renderNowIndicator=function(t){if(this.colContainerEls){var e,i=this.componentFootprintToSegs(new p.default(new u.default(t,t.valueOf()+1),!1)),n=this.computeDateTop(t,t),r=[];for(e=0;e<i.length;e++)r.push(o('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",n).appendTo(this.colContainerEls.eq(i[e].col))[0]);i.length>0&&r.push(o('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",n).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=o(r)}},e.prototype.unrenderNowIndicator=function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},e.prototype.updateSize=function(e,i,n){t.prototype.updateSize.call(this,e,i,n),this.slatCoordCache.build(),n&&this.updateSegVerticals([].concat(this.eventRenderer.getSegs(),this.businessSegs||[]))},e.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.outerHeight()},e.prototype.computeDateTop=function(t,e){return this.computeTimeTop(r.duration(t-e.clone().stripTime()))},e.prototype.computeTimeTop=function(t){var e,i,n=this.slatEls.length,o=(t-this.dateProfile.minTime)/this.slotDuration;return o=Math.max(0,o),o=Math.min(n,o),e=Math.floor(o),i=o-(e=Math.min(e,n-1)),this.slatCoordCache.getTopPosition(e)+this.slatCoordCache.getHeight(e)*i},e.prototype.updateSegVerticals=function(t){this.computeSegVerticals(t),this.assignSegVerticals(t)},e.prototype.computeSegVerticals=function(t){var e,i,n,o=this.opt("agendaEventMinHeight");for(e=0;e<t.length;e++)i=t[e],n=this.dayDates[i.dayIndex],i.top=this.computeDateTop(i.startMs,n),i.bottom=Math.max(i.top+o,this.computeDateTop(i.endMs,n))},e.prototype.assignSegVerticals=function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateSegVerticalCss(i))},e.prototype.generateSegVerticalCss=function(t){return{top:t.top,bottom:-t.bottom}},e.prototype.prepareHits=function(){this.colCoordCache.build(),this.slatCoordCache.build()},e.prototype.releaseHits=function(){this.colCoordCache.clear()},e.prototype.queryHit=function(t,e){var i=this.snapsPerSlot,n=this.colCoordCache,o=this.slatCoordCache;if(n.isLeftInBounds(t)&&o.isTopInBounds(e)){var r=n.getHorizontalIndex(t),s=o.getVerticalIndex(e);if(null!=r&&null!=s){var a=o.getTopOffset(s),l=o.getHeight(s),c=(e-a)/l,h=Math.floor(c*i),d=a+h/i*l,u=a+(h+1)/i*l;return{col:r,snap:s*i+h,component:this,left:n.getLeftOffset(r),right:n.getRightOffset(r),top:d,bottom:u}}}},e.prototype.getHitFootprint=function(t){var e,i=this.getCellDate(0,t.col),n=this.computeSnapTime(t.snap);return i.time(n),e=i.clone().add(this.snapDuration),new p.default(new u.default(i,e),!1)},e.prototype.computeSnapTime=function(t){return r.duration(this.dateProfile.minTime+this.snapDuration*t)},e.prototype.getHitEl=function(t){return this.colEls.eq(t.col)},e.prototype.renderDrag=function(t,e,i){var n;if(e){if(t.length)return this.helperRenderer.renderEventDraggingFootprints(t,e,i),!0}else for(n=0;n<t.length;n++)this.renderHighlight(t[n].componentFootprint)},e.prototype.unrenderDrag=function(){this.unrenderHighlight(),this.helperRenderer.unrender()},e.prototype.renderEventResize=function(t,e,i){this.helperRenderer.renderEventResizingFootprints(t,e,i)},e.prototype.unrenderEventResize=function(){this.helperRenderer.unrender()},e.prototype.renderSelectionFootprint=function(t){this.opt("selectHelper")?this.helperRenderer.renderComponentFootprint(t):this.renderHighlight(t)},e.prototype.unrenderSelection=function(){this.helperRenderer.unrender(),this.unrenderHighlight()},e}(a.default);e.default=b,b.prototype.eventRendererClass=f.default,b.prototype.businessHourRendererClass=l.default,b.prototype.helperRendererClass=g.default,b.prototype.fillRendererClass=m.default,c.default.mixInto(b),h.default.mixInto(b)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(5),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.buildRenderRange=function(e,i,n){var r=t.prototype.buildRenderRange.call(this,e,i,n),s=this.msToUtcMoment(r.startMs,n),a=this.msToUtcMoment(r.endMs,n);return/^(year|month)$/.test(i)&&(s.startOf("week"),a.weekday()&&a.add(1,"week").startOf("week")),new o.default(s,a)},e}(i(221).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(0),r=i(4),s=i(62),a=i(253),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.setGridHeight=function(t,e){e&&(t*=this.dayGrid.rowCnt/6),r.distributeHeight(this.dayGrid.rowEls,t,!e)},e.prototype.isDateInOtherMonth=function(t,e){return t.month()!==o.utc(e.currentUnzonedRange.startMs).month()},e}(s.default);e.default=l,l.prototype.dateProfileGeneratorClass=a.default},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(5),a=i(41),l=i(39),c=i(254),h=i(255),d=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.segSelector=".fc-list-item",n.scroller=new l.default({overflowX:"hidden",overflowY:"auto"}),n}return n.__extends(e,t),e.prototype.renderSkeleton=function(){this.el.addClass("fc-list-view "+this.calendar.theme.getClass("listView")),this.scroller.render(),this.scroller.el.appendTo(this.el),this.contentEl=this.scroller.scrollEl},e.prototype.unrenderSkeleton=function(){this.scroller.destroy()},e.prototype.updateSize=function(e,i,n){t.prototype.updateSize.call(this,e,i,n),this.scroller.clear(),i||this.scroller.setHeight(this.computeScrollerHeight(e))},e.prototype.computeScrollerHeight=function(t){return t-r.subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.renderDates=function(t){for(var e=this.calendar,i=e.msToUtcMoment(t.renderUnzonedRange.startMs,!0),n=e.msToUtcMoment(t.renderUnzonedRange.endMs,!0),o=[],r=[];i<n;)o.push(i.clone()),r.push(new s.default(i,i.clone().add(1,"day"))),i.add(1,"day");this.dayDates=o,this.dayRanges=r},e.prototype.componentFootprintToSegs=function(t){var e,i,n,o=this.dayRanges,r=[];for(e=0;e<o.length;e++)if((i=t.unzonedRange.intersect(o[e]))&&(n={startMs:i.startMs,endMs:i.endMs,isStart:i.isStart,isEnd:i.isEnd,dayIndex:e},r.push(n),!n.isEnd&&!t.isAllDay&&e+1<o.length&&t.unzonedRange.endMs<o[e+1].startMs+this.nextDayThreshold)){n.endMs=t.unzonedRange.endMs,n.isEnd=!0;break}return r},e.prototype.renderEmptyMessage=function(){this.contentEl.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+r.htmlEscape(this.opt("noEventsMessage"))+"</div></div></div>")},e.prototype.renderSegList=function(t){var e,i,n,r=this.groupSegsByDay(t),s=o('<table class="fc-list-table '+this.calendar.theme.getClass("tableList")+'"><tbody/></table>'),a=s.find("tbody");for(e=0;e<r.length;e++)if(i=r[e])for(a.append(this.dayHeaderHtml(this.dayDates[e])),this.eventRenderer.sortEventSegs(i),n=0;n<i.length;n++)a.append(i[n].el);this.contentEl.empty().append(s)},e.prototype.groupSegsByDay=function(t){var e,i,n=[];for(e=0;e<t.length;e++)(n[(i=t[e]).dayIndex]||(n[i.dayIndex]=[])).push(i);return n},e.prototype.dayHeaderHtml=function(t){var e=this.opt("listDayFormat"),i=this.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+t.format("YYYY-MM-DD")+'"><td class="'+(this.calendar.theme.getClass("tableListHeading")||this.calendar.theme.getClass("widgetHeader"))+'" colspan="3">'+(e?this.buildGotoAnchorHtml(t,{class:"fc-list-heading-main"},r.htmlEscape(t.format(e))):"")+(i?this.buildGotoAnchorHtml(t,{class:"fc-list-heading-alt"},r.htmlEscape(t.format(i))):"")+"</td></tr>"},e}(a.default);e.default=d,d.prototype.eventRendererClass=c.default,d.prototype.eventPointingClass=h.default},,,,,,function(t,e,i){var n=i(3),o=i(16),r=i(4),s=i(220);i(10),i(47),i(256),i(257),i(260),i(261),i(262),i(263),n.fullCalendar=o,n.fn.fullCalendar=function(t){var e=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(o,a){var l,c=n(a),h=c.data("fullCalendar");"string"==typeof t?"getCalendar"===t?o||(i=h):"destroy"===t?h&&(h.destroy(),c.removeData("fullCalendar")):h?n.isFunction(h[t])?(l=h[t].apply(h,e),o||(i=l),"destroy"===t&&c.removeData("fullCalendar")):r.warn("'"+t+"' is an unknown FullCalendar method."):r.warn("Attempting to call a FullCalendar method on an element with no calendar."):h||(h=new s.default(c,t),c.data("fullCalendar",h),h.render())}),i},t.exports=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.setElement=function(t){this.el=t,this.bindGlobalHandlers(),this.renderSkeleton(),this.set("isInDom",!0)},e.prototype.removeElement=function(){this.unset("isInDom"),this.unrenderSkeleton(),this.unbindGlobalHandlers(),this.el.remove()},e.prototype.bindGlobalHandlers=function(){},e.prototype.unbindGlobalHandlers=function(){},e.prototype.renderSkeleton=function(){},e.prototype.unrenderSkeleton=function(){},e}(i(48).default);e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.items=t||[]}return t.prototype.proxyCall=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=[];return this.items.forEach(function(i){n.push(i[t].apply(i,e))}),n},t}();e.default=i},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=function(){function t(t,e){this.el=null,this.viewsWithButtons=[],this.calendar=t,this.toolbarOptions=e}return t.prototype.setToolbarOptions=function(t){this.toolbarOptions=t},t.prototype.render=function(){var t=this.toolbarOptions.layout,e=this.el;t?(e?e.empty():e=this.el=n("<div class='fc-toolbar "+this.toolbarOptions.extraClasses+"'/>"),e.append(this.renderSection("left")).append(this.renderSection("right")).append(this.renderSection("center")).append('<div class="fc-clear"/>')):this.removeElement()},t.prototype.removeElement=function(){this.el&&(this.el.remove(),this.el=null)},t.prototype.renderSection=function(t){var e=this,i=this.calendar,r=i.theme,s=i.optionsManager,a=i.viewSpecManager,l=n('<div class="fc-'+t+'"/>'),c=this.toolbarOptions.layout[t],h=s.get("customButtons")||{},d=s.overrides.buttonText||{},u=s.get("buttonText")||{};return c&&n.each(c.split(" "),function(t,s){var c,p=n(),f=!0;n.each(s.split(","),function(t,s){var l,c,g,m,v,b,y,w,x;"title"===s?(p=p.add(n("<h2>&nbsp;</h2>")),f=!1):((l=h[s])?(g=function(t){l.click&&l.click.call(w[0],t)},(m=r.getCustomButtonIconClass(l))||(m=r.getIconClass(s))||(v=l.text)):(c=a.getViewSpec(s))?(e.viewsWithButtons.push(s),g=function(){i.changeView(s)},(v=c.buttonTextOverride)||(m=r.getIconClass(s))||(v=c.buttonTextDefault)):i[s]&&(g=function(){i[s]()},(v=d[s])||(m=r.getIconClass(s))||(v=u[s])),g&&(y=["fc-"+s+"-button",r.getClass("button"),r.getClass("stateDefault")],v?(b=o.htmlEscape(v),x=""):m&&(b="<span class='"+m+"'></span>",x=' aria-label="'+s+'"'),w=n('<button type="button" class="'+y.join(" ")+'"'+x+">"+b+"</button>").click(function(t){w.hasClass(r.getClass("stateDisabled"))||(g(t),(w.hasClass(r.getClass("stateActive"))||w.hasClass(r.getClass("stateDisabled")))&&w.removeClass(r.getClass("stateHover")))}).mousedown(function(){w.not("."+r.getClass("stateActive")).not("."+r.getClass("stateDisabled")).addClass(r.getClass("stateDown"))}).mouseup(function(){w.removeClass(r.getClass("stateDown"))}).hover(function(){w.not("."+r.getClass("stateActive")).not("."+r.getClass("stateDisabled")).addClass(r.getClass("stateHover"))},function(){w.removeClass(r.getClass("stateHover")).removeClass(r.getClass("stateDown"))}),p=p.add(w)))}),f&&p.first().addClass(r.getClass("cornerLeft")).end().last().addClass(r.getClass("cornerRight")).end(),p.length>1?(c=n("<div/>"),f&&c.addClass(r.getClass("buttonGroup")),c.append(p),l.append(c)):l.append(p)}),l},t.prototype.updateTitle=function(t){this.el&&this.el.find("h2").text(t)},t.prototype.activateButton=function(t){this.el&&this.el.find(".fc-"+t+"-button").addClass(this.calendar.theme.getClass("stateActive"))},t.prototype.deactivateButton=function(t){this.el&&this.el.find(".fc-"+t+"-button").removeClass(this.calendar.theme.getClass("stateActive"))},t.prototype.disableButton=function(t){this.el&&this.el.find(".fc-"+t+"-button").prop("disabled",!0).addClass(this.calendar.theme.getClass("stateDisabled"))},t.prototype.enableButton=function(t){this.el&&this.el.find(".fc-"+t+"-button").prop("disabled",!1).removeClass(this.calendar.theme.getClass("stateDisabled"))},t.prototype.getViewsWithButtons=function(){return this.viewsWithButtons},t}();e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=i(32),a=i(31),l=function(t){function e(e,i){var n=t.call(this)||this;return n._calendar=e,n.overrides=o.extend({},i),n.dynamicOverrides={},n.compute(),n}return n.__extends(e,t),e.prototype.add=function(t){var e,i=0;for(e in this.recordOverrides(t),t)i++;if(1===i){if("height"===e||"contentHeight"===e||"aspectRatio"===e)return void this._calendar.updateViewSize(!0);if("defaultDate"===e)return;if("businessHours"===e)return;if(/^(event|select)(Overlap|Constraint|Allow)$/.test(e))return;if("timezone"===e)return void this._calendar.view.flash("initialEvents")}this._calendar.renderHeader(),this._calendar.renderFooter(),this._calendar.viewsByType={},this._calendar.reinitView()},e.prototype.compute=function(){var t,e,i,n;t=r.firstDefined(this.dynamicOverrides.locale,this.overrides.locale),(e=a.localeOptionHash[t])||(t=s.globalDefaults.locale,e=a.localeOptionHash[t]||{}),i=r.firstDefined(this.dynamicOverrides.isRTL,this.overrides.isRTL,e.isRTL,s.globalDefaults.isRTL)?s.rtlDefaults:{},this.dirDefaults=i,this.localeDefaults=e,n=s.mergeOptions([s.globalDefaults,i,e,this.overrides,this.dynamicOverrides]),a.populateInstanceComputableOptions(n),this.reset(n)},e.prototype.recordOverrides=function(t){var e;for(e in t)this.dynamicOverrides[e]=t[e];this._calendar.viewSpecManager.clearCache(),this.compute()},e}(i(48).default);e.default=l},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(3),r=i(22),s=i(4),a=i(32),l=i(31),c=function(){function t(t,e){this.optionsManager=t,this._calendar=e,this.clearCache()}return t.prototype.clearCache=function(){this.viewSpecCache={}},t.prototype.getViewSpec=function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},t.prototype.getUnitViewSpec=function(t){var e,i,n;if(-1!==o.inArray(t,s.unitsDesc))for(e=this._calendar.header.getViewsWithButtons(),o.each(r.viewHash,function(t){e.push(t)}),i=0;i<e.length;i++)if((n=this.getViewSpec(e[i]))&&n.singleUnit===t)return n},t.prototype.buildViewSpec=function(t){for(var e,i,o,l,c,h=this.optionsManager.overrides.views||{},d=[],u=[],p=[],f=t;f;)e=r.viewHash[f],i=h[f],f=null,"function"==typeof e&&(e={class:e}),e&&(d.unshift(e),u.unshift(e.defaults||{}),o=o||e.duration,f=f||e.type),i&&(p.unshift(i),o=o||i.duration,f=f||i.type);return(e=s.mergeProps(d)).type=t,!!e.class&&((o=o||this.optionsManager.dynamicOverrides.duration||this.optionsManager.overrides.duration)&&(l=n.duration(o)).valueOf()&&(c=s.computeDurationGreatestUnit(l,o),e.duration=l,e.durationUnit=c,1===l.as(c)&&(e.singleUnit=c,p.unshift(h[c]||{}))),e.defaults=a.mergeOptions(u),e.overrides=a.mergeOptions(p),this.buildViewSpecOptions(e),this.buildViewSpecButtonText(e,t),e)},t.prototype.buildViewSpecOptions=function(t){var e=this.optionsManager;t.options=a.mergeOptions([a.globalDefaults,t.defaults,e.dirDefaults,e.localeDefaults,e.overrides,t.overrides,e.dynamicOverrides]),l.populateInstanceComputableOptions(t.options)},t.prototype.buildViewSpecButtonText=function(t,e){var i=this.optionsManager;function n(i){var n=i.buttonText||{};return n[e]||(t.buttonTextKey?n[t.buttonTextKey]:null)||(t.singleUnit?n[t.singleUnit]:null)}t.buttonTextOverride=n(i.dynamicOverrides)||n(i.overrides)||t.overrides.buttonText,t.buttonTextDefault=n(i.localeDefaults)||n(i.dirDefaults)||t.defaults.buttonText||n(a.globalDefaults)||(t.duration?this._calendar.humanizeDuration(t.duration):null)||e},t}();e.default=c},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=i(243),s=i(52),a=i(6),l=i(38),c=i(13),h=i(18),d=i(11),u=i(7),p=function(){function t(t){this.calendar=t,this.stickySource=new s.default(t),this.otherSources=[]}return t.prototype.requestEvents=function(t,e,i,n){return!n&&this.currentPeriod&&this.currentPeriod.isWithinRange(t,e)&&i===this.currentPeriod.timezone||this.setPeriod(new r.default(t,e,i)),this.currentPeriod.whenReleased()},t.prototype.addSource=function(t){this.otherSources.push(t),this.currentPeriod&&this.currentPeriod.requestSource(t)},t.prototype.removeSource=function(t){o.removeExact(this.otherSources,t),this.currentPeriod&&this.currentPeriod.purgeSource(t)},t.prototype.removeAllSources=function(){this.otherSources=[],this.currentPeriod&&this.currentPeriod.purgeAllSources()},t.prototype.refetchSource=function(t){var e=this.currentPeriod;e&&(e.freeze(),e.purgeSource(t),e.requestSource(t),e.thaw())},t.prototype.refetchAllSources=function(){var t=this.currentPeriod;t&&(t.freeze(),t.purgeAllSources(),t.requestSources(this.getSources()),t.thaw())},t.prototype.getSources=function(){return[this.stickySource].concat(this.otherSources)},t.prototype.multiQuerySources=function(t){t?n.isArray(t)||(t=[t]):t=[];var e,i=[];for(e=0;e<t.length;e++)i.push.apply(i,this.querySources(t[e]));return i},t.prototype.querySources=function(t){var e,i,o=this.otherSources;for(e=0;e<o.length;e++)if((i=o[e])===t)return[i];return(i=this.getSourceById(a.default.normalizeId(t)))?[i]:(t=l.default.parse(t,this.calendar))?n.grep(o,function(e){return i=e,t.getPrimitive()===i.getPrimitive();var i}):void 0},t.prototype.getSourceById=function(t){return n.grep(this.otherSources,function(e){return e.id&&e.id===t})[0]},t.prototype.setPeriod=function(t){this.currentPeriod&&(this.unbindPeriod(this.currentPeriod),this.currentPeriod=null),this.currentPeriod=t,this.bindPeriod(t),t.requestSources(this.getSources())},t.prototype.bindPeriod=function(t){this.listenTo(t,"release",function(t){this.trigger("release",t)})},t.prototype.unbindPeriod=function(t){this.stopListeningTo(t)},t.prototype.getEventDefByUid=function(t){if(this.currentPeriod)return this.currentPeriod.getEventDefByUid(t)},t.prototype.addEventDef=function(t,e){e&&this.stickySource.addEventDef(t),this.currentPeriod&&this.currentPeriod.addEventDef(t)},t.prototype.removeEventDefsById=function(t){this.getSources().forEach(function(e){e.removeEventDefsById(t)}),this.currentPeriod&&this.currentPeriod.removeEventDefsById(t)},t.prototype.removeAllEventDefs=function(){this.getSources().forEach(function(t){t.removeAllEventDefs()}),this.currentPeriod&&this.currentPeriod.removeAllEventDefs()},t.prototype.mutateEventsWithId=function(t,e){var i,n=this.currentPeriod,o=[];return n?(n.freeze(),(i=n.getEventDefsById(t)).forEach(function(t){n.removeEventDef(t),o.push(e.mutateSingle(t)),n.addEventDef(t)}),n.thaw(),function(){n.freeze();for(var t=0;t<i.length;t++)n.removeEventDef(i[t]),o[t](),n.addEventDef(i[t]);n.thaw()}):function(){}},t.prototype.buildMutatedEventInstanceGroup=function(t,e){var i,n,o=this.getEventDefsById(t),r=[];for(i=0;i<o.length;i++)(n=o[i].clone())instanceof c.default&&(e.mutateSingle(n),r.push.apply(r,n.buildInstances()));return new h.default(r)},t.prototype.freeze=function(){this.currentPeriod&&this.currentPeriod.freeze()},t.prototype.thaw=function(){this.currentPeriod&&this.currentPeriod.thaw()},t.prototype.getEventDefsById=function(t){return this.currentPeriod.getEventDefsById(t)},t.prototype.getEventInstances=function(){return this.currentPeriod.getEventInstances()},t.prototype.getEventInstancesWithId=function(t){return this.currentPeriod.getEventInstancesWithId(t)},t.prototype.getEventInstancesWithoutId=function(t){return this.currentPeriod.getEventInstancesWithoutId(t)},t}();e.default=p,d.default.mixInto(p),u.default.mixInto(p)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=i(20),s=i(11),a=i(5),l=i(18),c=function(){function t(t,e,i){this.pendingCnt=0,this.freezeDepth=0,this.stuntedReleaseCnt=0,this.releaseCnt=0,this.start=t,this.end=e,this.timezone=i,this.unzonedRange=new a.default(t.clone().stripZone(),e.clone().stripZone()),this.requestsByUid={},this.eventDefsByUid={},this.eventDefsById={},this.eventInstanceGroupsById={}}return t.prototype.isWithinRange=function(t,e){return!t.isBefore(this.start)&&!e.isAfter(this.end)},t.prototype.requestSources=function(t){this.freeze();for(var e=0;e<t.length;e++)this.requestSource(t[e]);this.thaw()},t.prototype.requestSource=function(t){var e=this,i={source:t,status:"pending",eventDefs:null};this.requestsByUid[t.uid]=i,this.pendingCnt+=1,t.fetch(this.start,this.end,this.timezone).then(function(t){"cancelled"!==i.status&&(i.status="completed",i.eventDefs=t,e.addEventDefs(t),e.pendingCnt--,e.tryRelease())},function(){"cancelled"!==i.status&&(i.status="failed",e.pendingCnt--,e.tryRelease())})},t.prototype.purgeSource=function(t){var e=this.requestsByUid[t.uid];e&&(delete this.requestsByUid[t.uid],"pending"===e.status?(e.status="cancelled",this.pendingCnt--,this.tryRelease()):"completed"===e.status&&e.eventDefs.forEach(this.removeEventDef.bind(this)))},t.prototype.purgeAllSources=function(){var t,e,i=this.requestsByUid,n=0;for(t in i)"pending"===(e=i[t]).status?e.status="cancelled":"completed"===e.status&&n++;this.requestsByUid={},this.pendingCnt=0,n&&this.removeAllEventDefs()},t.prototype.getEventDefByUid=function(t){return this.eventDefsByUid[t]},t.prototype.getEventDefsById=function(t){var e=this.eventDefsById[t];return e?e.slice():[]},t.prototype.addEventDefs=function(t){for(var e=0;e<t.length;e++)this.addEventDef(t[e])},t.prototype.addEventDef=function(t){var e,i=this.eventDefsById,n=t.id,o=i[n]||(i[n]=[]),r=t.buildInstances(this.unzonedRange);for(o.push(t),this.eventDefsByUid[t.uid]=t,e=0;e<r.length;e++)this.addEventInstance(r[e],n)},t.prototype.removeEventDefsById=function(t){var e=this;this.getEventDefsById(t).forEach(function(t){e.removeEventDef(t)})},t.prototype.removeAllEventDefs=function(){var t=n.isEmptyObject(this.eventDefsByUid);this.eventDefsByUid={},this.eventDefsById={},this.eventInstanceGroupsById={},t||this.tryRelease()},t.prototype.removeEventDef=function(t){var e=this.eventDefsById,i=e[t.id];delete this.eventDefsByUid[t.uid],i&&(o.removeExact(i,t),i.length||delete e[t.id],this.removeEventInstancesForDef(t))},t.prototype.getEventInstances=function(){var t,e=this.eventInstanceGroupsById,i=[];for(t in e)i.push.apply(i,e[t].eventInstances);return i},t.prototype.getEventInstancesWithId=function(t){var e=this.eventInstanceGroupsById[t];return e?e.eventInstances.slice():[]},t.prototype.getEventInstancesWithoutId=function(t){var e,i=this.eventInstanceGroupsById,n=[];for(e in i)e!==t&&n.push.apply(n,i[e].eventInstances);return n},t.prototype.addEventInstance=function(t,e){var i=this.eventInstanceGroupsById;(i[e]||(i[e]=new l.default)).eventInstances.push(t),this.tryRelease()},t.prototype.removeEventInstancesForDef=function(t){var e,i=this.eventInstanceGroupsById,n=i[t.id];n&&(e=o.removeMatching(n.eventInstances,function(e){return e.def===t}),n.eventInstances.length||delete i[t.id],e&&this.tryRelease())},t.prototype.tryRelease=function(){this.pendingCnt||(this.freezeDepth?this.stuntedReleaseCnt++:this.release())},t.prototype.release=function(){this.releaseCnt++,this.trigger("release",this.eventInstanceGroupsById)},t.prototype.whenReleased=function(){var t=this;return this.releaseCnt?r.default.resolve(this.eventInstanceGroupsById):r.default.construct(function(e){t.one("release",e)})},t.prototype.freeze=function(){this.freezeDepth++||(this.stuntedReleaseCnt=0)},t.prototype.thaw=function(){--this.freezeDepth||!this.stuntedReleaseCnt||this.pendingCnt||this.release()},t}();e.default=c,s.default.mixInto(c)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=i(7),s=function(){function t(t,e){this.isFollowing=!1,this.isHidden=!1,this.isAnimating=!1,this.options=e=e||{},this.sourceEl=t,this.parentEl=e.parentEl?n(e.parentEl):t.parent()}return t.prototype.start=function(t){this.isFollowing||(this.isFollowing=!0,this.y0=o.getEvY(t),this.x0=o.getEvX(t),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),o.getEvIsTouch(t)?this.listenTo(n(document),"touchmove",this.handleMove):this.listenTo(n(document),"mousemove",this.handleMove))},t.prototype.stop=function(t,e){var i=this,o=this.options.revertDuration,r=function(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,e&&e()};this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(n(document)),t&&o&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:o,complete:r})):r())},t.prototype.getEl=function(){var t=this.el;return t||((t=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex})).addClass("fc-unselectable"),t.appendTo(this.parentEl)),t},t.prototype.removeElement=function(){this.el&&(this.el.remove(),this.el=null)},t.prototype.updatePosition=function(){var t,e;this.getEl(),null==this.top0&&(t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},t.prototype.handleMove=function(t){this.topDelta=o.getEvY(t)-this.y0,this.leftDelta=o.getEvX(t)-this.x0,this.isHidden||this.updatePosition()},t.prototype.hide=function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},t.prototype.show=function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())},t}();e.default=s,r.default.mixInto(s)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(23),r=function(t){function e(e){var i=t.call(this,e)||this;return i.dragListener=i.buildDragListener(),i}return n.__extends(e,t),e.prototype.end=function(){this.dragListener.endInteraction()},e.prototype.bindToEl=function(t){var e=this.component,i=this.dragListener;e.bindDateHandlerToEl(t,"mousedown",function(t){e.shouldIgnoreMouse()||i.startInteraction(t)}),e.bindDateHandlerToEl(t,"touchstart",function(t){e.shouldIgnoreTouch()||i.startInteraction(t)})},e.prototype.buildDragListener=function(){var t,e=this,i=this.component,n=new o.default(i,{scroll:this.opt("dragScroll"),interactionStart:function(){t=n.origHit},hitOver:function(e,i,n){i||(t=null)},hitOut:function(){t=null},interactionEnd:function(n,o){var r;!o&&t&&(r=i.getSafeHitFootprint(t))&&e.view.triggerDayClick(r,i.getHitEl(t),n)}});return n.shouldCancelTouchScroll=!1,n.scrollAlwaysKills=!0,n},e}(i(15).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.timeGrid=e,n}return n.__extends(e,t),e.prototype.renderFgSegs=function(t){this.renderFgSegsIntoContainers(t,this.timeGrid.fgContainerEls)},e.prototype.renderFgSegsIntoContainers=function(t,e){var i,n;for(i=this.timeGrid.groupSegsByCol(t),n=0;n<this.timeGrid.colCnt;n++)this.updateFgSegCoords(i[n]);this.timeGrid.attachSegsByCol(i,e)},e.prototype.unrenderFgSegs=function(){this.fgSegs&&this.fgSegs.forEach(function(t){t.el.remove()})},e.prototype.computeEventTimeFormat=function(){return this.opt("noMeridiemTimeFormat")},e.prototype.computeDisplayEventEnd=function(){return!0},e.prototype.fgSegHtml=function(t,e){var i,n,r,s=this.view,a=s.calendar,l=t.footprint.componentFootprint,c=l.isAllDay,h=t.footprint.eventDef,d=s.isEventDefDraggable(h),u=!e&&t.isStart&&s.isEventDefResizableFromStart(h),p=!e&&t.isEnd&&s.isEventDefResizableFromEnd(h),f=this.getSegClasses(t,d,u||p),g=o.cssToStr(this.getSkinCss(h));if(f.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayRange(l.unzonedRange)){if(t.isStart||t.isEnd){var m=a.msToMoment(t.startMs),v=a.msToMoment(t.endMs);i=this._getTimeText(m,v,c),n=this._getTimeText(m,v,c,"LT"),r=this._getTimeText(m,v,c,null,!1)}}else i=this.getTimeText(t.footprint),n=this.getTimeText(t.footprint,"LT"),r=this.getTimeText(t.footprint,null,!1);return'<a class="'+f.join(" ")+'"'+(h.url?' href="'+o.htmlEscape(h.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+o.htmlEscape(r)+'" data-full="'+o.htmlEscape(n)+'"><span>'+o.htmlEscape(i)+"</span></div>":"")+(h.title?'<div class="fc-title">'+o.htmlEscape(h.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(p?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},e.prototype.updateFgSegCoords=function(t){this.timeGrid.computeSegVerticals(t),this.computeFgSegHorizontals(t),this.timeGrid.assignSegVerticals(t),this.assignFgSegHorizontals(t)},e.prototype.computeFgSegHorizontals=function(t){var e,i,n;if(this.sortEventSegs(t),function(t){var e,i,n,o,r;for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for((o=i[n]).forwardSegs=[],r=e+1;r<t.length;r++)a(o,t[r],o.forwardSegs)}(e=function(t){var e,i,n,o=[];for(e=0;e<t.length;e++){for(i=t[e],n=0;n<o.length&&a(i,o[n]).length;n++);i.level=n,(o[n]||(o[n]=[])).push(i)}return o}(t)),i=e[0]){for(n=0;n<i.length;n++)s(i[n]);for(n=0;n<i.length;n++)this.computeFgSegForwardBack(i[n],0,0)}},e.prototype.computeFgSegForwardBack=function(t,e,i){var n,o=t.forwardSegs;if(void 0===t.forwardCoord)for(o.length?(this.sortForwardSegs(o),this.computeFgSegForwardBack(o[0],e+1,i),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),n=0;n<o.length;n++)this.computeFgSegForwardBack(o[n],0,t.forwardCoord)},e.prototype.sortForwardSegs=function(t){t.sort(o.proxy(this,"compareForwardSegs"))},e.prototype.compareForwardSegs=function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareEventSegs(t,e)},e.prototype.assignFgSegHorizontals=function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateFgSegHorizontalCss(i)),i.bottom-i.top<30&&i.el.addClass("fc-short")},e.prototype.generateFgSegHorizontalCss=function(t){var e,i,n=this.opt("slotEventOverlap"),o=t.backwardCoord,r=t.forwardCoord,s=this.timeGrid.generateSegVerticalCss(t),a=this.timeGrid.isRTL;return n&&(r=Math.min(1,o+2*(r-o))),a?(e=1-r,i=o):(e=o,i=1-r),s.zIndex=t.level+1,s.left=100*e+"%",s.right=100*i+"%",n&&t.forwardPressure&&(s[a?"marginLeft":"marginRight"]=20),s},e}(i(42).default);function s(t){var e,i,n=t.forwardSegs,o=0;if(void 0===t.forwardPressure){for(e=0;e<n.length;e++)s(i=n[e]),o=Math.max(o,1+i.forwardPressure);t.forwardPressure=o}}function a(t,e,i){void 0===i&&(i=[]);for(var n=0;n<e.length;n++)o=t,r=e[n],o.bottom>r.top&&o.top<r.bottom&&i.push(e[n]);var o,r;return i}e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.renderSegs=function(t,e){var i,n,r,s=[];for(this.eventRenderer.renderFgSegsIntoContainers(t,this.component.helperContainerEls),i=0;i<t.length;i++)n=t[i],e&&e.col===n.col&&(r=e.el,n.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")})),s.push(n.el[0]);return o(s)},e}(i(58).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.attachSegEls=function(t,e){var i,n=this.component;return"bgEvent"===t?i=n.bgContainerEls:"businessHours"===t?i=n.businessContainerEls:"highlight"===t&&(i=n.highlightContainerEls),n.updateSegVerticals(e),n.attachSegsByCol(n.groupSegsByCol(e),i),e.map(function(t){return t.el[0]})},e}(i(57).default);e.default=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=i(7),s=function(){function t(t){this.isHidden=!0,this.margin=10,this.options=t||{}}return t.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},t.prototype.hide=function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},t.prototype.render=function(){var t=this,e=this.options;this.el=n('<div class="fc-popover"/>').addClass(e.className||"").css({top:0,left:0}).append(e.content).appendTo(e.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),e.autoHide&&this.listenTo(n(document),"mousedown",this.documentMousedown)},t.prototype.documentMousedown=function(t){this.el&&!n(t.target).closest(this.el).length&&this.hide()},t.prototype.removeElement=function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(n(document),"mousedown")},t.prototype.position=function(){var t,e,i,r,s,a=this.options,l=this.el.offsetParent().offset(),c=this.el.outerWidth(),h=this.el.outerHeight(),d=n(window),u=o.getScrollParent(this.el);r=a.top||0,s=void 0!==a.left?a.left:void 0!==a.right?a.right-c:0,u.is(window)||u.is(document)?(u=d,t=0,e=0):(t=(i=u.offset()).top,e=i.left),t+=d.scrollTop(),e+=d.scrollLeft(),!1!==a.viewportConstrain&&(r=Math.min(r,t+u.outerHeight()-h-this.margin),r=Math.max(r,t+this.margin),s=Math.min(s,e+u.outerWidth()-c-this.margin),s=Math.max(s,e+this.margin)),this.el.css({top:r-l.top,left:s-l.left})},t.prototype.trigger=function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},t}();e.default=s,r.default.mixInto(s)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=i(4),s=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.dayGrid=e,n}return n.__extends(e,t),e.prototype.renderBgRanges=function(e){e=o.grep(e,function(t){return t.eventDef.isAllDay()}),t.prototype.renderBgRanges.call(this,e)},e.prototype.renderFgSegs=function(t){var e=this.rowStructs=this.renderSegRows(t);this.dayGrid.rowEls.each(function(t,i){o(i).find(".fc-content-skeleton > table").append(e[t].tbodyEl)})},e.prototype.unrenderFgSegs=function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},e.prototype.renderSegRows=function(t){var e,i,n=[];for(e=this.groupSegRows(t),i=0;i<e.length;i++)n.push(this.renderSegRow(i,e[i]));return n},e.prototype.renderSegRow=function(t,e){var i,n,r,s,a,l,c,h=this.dayGrid.colCnt,d=this.buildSegLevels(e),u=Math.max(1,d.length),p=o("<tbody/>"),f=[],g=[],m=[];function v(t){for(;r<t;)(c=(m[i-1]||[])[r])?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=o("<td/>"),s.append(c)),g[i][r]=c,m[i][r]=c,r++}for(i=0;i<u;i++){if(n=d[i],r=0,s=o("<tr/>"),f.push([]),g.push([]),m.push([]),n)for(a=0;a<n.length;a++){for(v((l=n[a]).leftCol),c=o('<td class="fc-event-container"/>').append(l.el),l.leftCol!==l.rightCol?c.attr("colspan",l.rightCol-l.leftCol+1):m[i][r]=c;r<=l.rightCol;)g[i][r]=c,f[i][r]=l,r++;s.append(c)}v(h),this.dayGrid.bookendCells(s),p.append(s)}return{row:t,tbodyEl:p,cellMatrix:g,segMatrix:f,segLevels:d,segs:e}},e.prototype.buildSegLevels=function(t){var e,i,n,o=[];for(this.sortEventSegs(t),e=0;e<t.length;e++){for(i=t[e],n=0;n<o.length&&a(i,o[n]);n++);i.level=n,(o[n]||(o[n]=[])).push(i)}for(n=0;n<o.length;n++)o[n].sort(l);return o},e.prototype.groupSegRows=function(t){var e,i=[];for(e=0;e<this.dayGrid.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i},e.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},e.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},e.prototype.fgSegHtml=function(t,e){var i,n,o=this.view,s=t.footprint.eventDef,a=t.footprint.componentFootprint.isAllDay,l=o.isEventDefDraggable(s),c=!e&&a&&t.isStart&&o.isEventDefResizableFromStart(s),h=!e&&a&&t.isEnd&&o.isEventDefResizableFromEnd(s),d=this.getSegClasses(t,l,c||h),u=r.cssToStr(this.getSkinCss(s)),p="";return d.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(i=this.getTimeText(t.footprint))&&(p='<span class="fc-time">'+r.htmlEscape(i)+"</span>"),n='<span class="fc-title">'+(r.htmlEscape(s.title||"")||"&nbsp;")+"</span>",'<a class="'+d.join(" ")+'"'+(s.url?' href="'+r.htmlEscape(s.url)+'"':"")+(u?' style="'+u+'"':"")+'><div class="fc-content">'+(this.dayGrid.isRTL?n+" "+p:p+" "+n)+"</div>"+(c?'<div class="fc-resizer fc-start-resizer" />':"")+(h?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},e}(i(42).default);function a(t,e){var i,n;for(i=0;i<e.length;i++)if((n=e[i]).leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return!0;return!1}function l(t,e){return t.leftCol-e.leftCol}e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.renderSegs=function(t,e){var i,n=[];return i=this.eventRenderer.renderSegRows(t),this.component.rowEls.each(function(t,r){var s,a,l=o(r),c=o('<div class="fc-helper-skeleton"><table/></div>');e&&e.row===t?a=e.el.position().top:((s=l.find(".fc-content-skeleton tbody")).length||(s=l.find(".fc-content-skeleton table")),a=s.position().top),c.css("top",a).find("table").append(i[t].tbodyEl),l.append(c),n.push(c[0])}),o(n)},e}(i(58).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fillSegTag="td",e}return n.__extends(e,t),e.prototype.attachSegEls=function(t,e){var i,n,o,r=[];for(i=0;i<e.length;i++)n=e[i],o=this.renderFillRow(t,n),this.component.rowEls.eq(n.row).append(o),r.push(o[0]);return r},e.prototype.renderFillRow=function(t,e){var i,n,r,s=this.component.colCnt,a=e.leftCol,l=e.rightCol+1;return i="businessHours"===t?"bgevent":t.toLowerCase(),r=(n=o('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>')).find("tr"),a>0&&r.append('<td colspan="'+a+'"/>'),r.append(e.el.attr("colspan",l-a)),l<s&&r.append('<td colspan="'+(s-l)+'"/>'),this.component.bookendCells(r),n},e}(i(57).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(228),r=i(5),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.buildRenderRange=function(e,i,n){var o,s=t.prototype.buildRenderRange.call(this,e,i,n),a=this.msToUtcMoment(s.startMs,n),l=this.msToUtcMoment(s.endMs,n);return this.opt("fixedWeekCount")&&(o=Math.ceil(l.diff(a,"weeks",!0)),l.add(6-o,"weeks")),new r.default(a,l)},e}(o.default);e.default=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(4),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.renderFgSegs=function(t){t.length?this.component.renderSegList(t):this.component.renderEmptyMessage()},e.prototype.fgSegHtml=function(t){var e,i=this.view,n=i.calendar,r=n.theme,s=t.footprint,a=s.eventDef,l=s.componentFootprint,c=a.url,h=["fc-list-item"].concat(this.getClasses(a)),d=this.getBgColor(a);return e=l.isAllDay?i.getAllDayHtml():i.isMultiDayRange(l.unzonedRange)?t.isStart||t.isEnd?o.htmlEscape(this._getTimeText(n.msToMoment(t.startMs),n.msToMoment(t.endMs),l.isAllDay)):i.getAllDayHtml():o.htmlEscape(this.getTimeText(s)),c&&h.push("fc-has-url"),'<tr class="'+h.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+r.getClass("widgetContent")+'">'+(e||"")+"</td>":"")+'<td class="fc-list-item-marker '+r.getClass("widgetContent")+'"><span class="fc-event-dot"'+(d?' style="background-color:'+d+'"':"")+'></span></td><td class="fc-list-item-title '+r.getClass("widgetContent")+'"><a'+(c?' href="'+o.htmlEscape(c)+'"':"")+">"+o.htmlEscape(a.title||"")+"</a></td></tr>"},e.prototype.computeEventTimeFormat=function(){return this.opt("mediumTimeFormat")},e}(i(42).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=i(3),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.handleClick=function(e,i){var n;t.prototype.handleClick.call(this,e,i),o(i.target).closest("a[href]").length||(n=e.footprint.eventDef.url)&&!i.isDefaultPrevented()&&(window.location.href=n)},e}(i(59).default);e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(38),o=i(52),r=i(215),s=i(216);n.default.registerClass(o.default),n.default.registerClass(r.default),n.default.registerClass(s.default)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(51),o=i(213),r=i(214),s=i(258),a=i(259);n.defineThemeSystem("standard",o.default),n.defineThemeSystem("jquery-ui",r.default),n.defineThemeSystem("bootstrap3",s.default),n.defineThemeSystem("bootstrap4",a.default)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(i(19).default);e.default=o,o.prototype.classes={widget:"fc-bootstrap3",tableGrid:"table-bordered",tableList:"table",tableListHeading:"active",buttonGroup:"btn-group",button:"btn btn-default",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"panel panel-default",popoverHeader:"panel-heading",popoverContent:"panel-body",headerRow:"panel-default",dayRow:"panel-default",listView:"panel panel-default"},o.prototype.baseIconClass="glyphicon",o.prototype.iconClasses={close:"glyphicon-remove",prev:"glyphicon-chevron-left",next:"glyphicon-chevron-right",prevYear:"glyphicon-backward",nextYear:"glyphicon-forward"},o.prototype.iconOverrideOption="bootstrapGlyphicons",o.prototype.iconOverrideCustomButtonOption="bootstrapGlyphicon",o.prototype.iconOverridePrefix="glyphicon-"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e}(i(19).default);e.default=o,o.prototype.classes={widget:"fc-bootstrap4",tableGrid:"table-bordered",tableList:"table",tableListHeading:"table-active",buttonGroup:"btn-group",button:"btn btn-primary",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"card card-primary",popoverHeader:"card-header",popoverContent:"card-body",headerRow:"table-bordered",dayRow:"table-bordered",listView:"card card-primary"},o.prototype.baseIconClass="fa",o.prototype.iconClasses={close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"},o.prototype.iconOverrideOption="bootstrapFontAwesome",o.prototype.iconOverrideCustomButtonOption="bootstrapFontAwesome",o.prototype.iconOverridePrefix="fa-"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(22),o=i(62),r=i(229);n.defineView("basic",{class:o.default}),n.defineView("basicDay",{type:"basic",duration:{days:1}}),n.defineView("basicWeek",{type:"basic",duration:{weeks:1}}),n.defineView("month",{class:r.default,duration:{months:1},defaults:{fixedWeekCount:!0}})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(22),o=i(226);n.defineView("agenda",{class:o.default,defaults:{allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0}}),n.defineView("agendaDay",{type:"agenda",duration:{days:1}}),n.defineView("agendaWeek",{type:"agenda",duration:{weeks:1}})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(22),o=i(230);n.defineView("list",{class:o.default,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}}),n.defineView("listDay",{type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}}),n.defineView("listWeek",{type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}}),n.defineView("listMonth",{type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}}),n.defineView("listYear",{type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}})},function(t,e){Object.defineProperty(e,"__esModule",{value:!0})}])}),function(){"use strict";var t,e,i,n;t=function(t,e){return"string"==typeof t&&"string"==typeof e&&t.toLowerCase()===e.toLowerCase()},e=function(t,i,n){var o=n||"0",r=t.toString();return r.length<i?e(o+r,i):r},i=function(t){var e,n;for(t=t||{},e=1;e<arguments.length;e++)if(n=arguments[e])for(var o in n)n.hasOwnProperty(o)&&("object"==typeof n[o]?i(t[o],n[o]):t[o]=n[o]);return t},n={dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function(t){var e=t%10,i={1:"st",2:"nd",3:"rd"};return 1!==Math.floor(t%100/10)&&i[e]?i[e]:"th"}},separators:/[ \-+\/\.T:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g},(DateFormatter=function(t){var e=i(n,t);this.dateSettings=e.dateSettings,this.separators=e.separators,this.validParts=e.validParts,this.intParts=e.intParts,this.tzParts=e.tzParts,this.tzClip=e.tzClip}).prototype={constructor:DateFormatter,parseDate:function(e,i){var n,o,r,s,a,l,c,h,d,u,p=!1,f=!1,g=this.dateSettings,m={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(e){if(e instanceof Date)return e;if("number"==typeof e)return new Date(e);if("U"===i)return(r=parseInt(e))?new Date(1e3*r):e;if("string"!=typeof e)return"";if(!(n=i.match(this.validParts))||0===n.length)throw new Error("Invalid date format definition.");for(o=e.replace(this.separators,"\0").split("\0"),r=0;r<o.length;r++)switch(s=o[r],a=parseInt(s),n[r]){case"y":case"Y":2===(d=s.length)?m.year=parseInt((a<70?"20":"19")+s):4===d&&(m.year=a),p=!0;break;case"m":case"n":case"M":case"F":isNaN(s)?((l=g.monthsShort.indexOf(s))>-1&&(m.month=l+1),(l=g.months.indexOf(s))>-1&&(m.month=l+1)):a>=1&&a<=12&&(m.month=a),p=!0;break;case"d":case"j":a>=1&&a<=31&&(m.day=a),p=!0;break;case"g":case"h":u=o[c=n.indexOf("a")>-1?n.indexOf("a"):n.indexOf("A")>-1?n.indexOf("A"):-1],c>-1?(h=t(u,g.meridiem[0])?0:t(u,g.meridiem[1])?12:-1,a>=1&&a<=12&&h>-1?m.hour=a+h-1:a>=0&&a<=23&&(m.hour=a)):a>=0&&a<=23&&(m.hour=a),f=!0;break;case"G":case"H":a>=0&&a<=23&&(m.hour=a),f=!0;break;case"i":a>=0&&a<=59&&(m.min=a),f=!0;break;case"s":a>=0&&a<=59&&(m.sec=a),f=!0}if(!0===p&&m.year&&m.month&&m.day)m.date=new Date(m.year,m.month-1,m.day,m.hour,m.min,m.sec,0);else{if(!0!==f)return!1;m.date=new Date(0,0,0,m.hour,m.min,m.sec,0)}return m.date}},guessDate:function(t,e){if("string"!=typeof t)return t;var i,n,o,r,s=t.replace(this.separators,"\0").split("\0"),a=e.match(this.validParts),l=new Date,c=0;if(!/^[djmn]/g.test(a[0]))return t;for(n=0;n<s.length;n++){switch(c=2,o=s[n],r=parseInt(o.substr(0,2)),n){case 0:"m"===a[0]||"n"===a[0]?l.setMonth(r-1):l.setDate(r);break;case 1:"m"===a[0]||"n"===a[0]?l.setDate(r):l.setMonth(r-1);break;case 2:i=l.getFullYear(),o.length<4?(l.setFullYear(parseInt(i.toString().substr(0,4-o.length)+o)),c=o.length):(l.setFullYear=parseInt(o.substr(0,4)),c=4);break;case 3:l.setHours(r);break;case 4:l.setMinutes(r);break;case 5:l.setSeconds(r)}o.substr(c).length>0&&s.splice(n+1,0,o.substr(c))}return l},parseFormat:function(t,i){var n,o=this,r=o.dateSettings,s=/\\?(.?)/gi,a=function(t,e){return n[t]?n[t]():e};return n={d:function(){return e(n.j(),2)},D:function(){return r.daysShort[n.w()]},j:function(){return i.getDate()},l:function(){return r.days[n.w()]},N:function(){return n.w()||7},w:function(){return i.getDay()},z:function(){var t=new Date(n.Y(),n.n()-1,n.j()),e=new Date(n.Y(),0,1);return Math.round((t-e)/864e5)},W:function(){var t=new Date(n.Y(),n.n()-1,n.j()-n.N()+3),i=new Date(t.getFullYear(),0,4);return e(1+Math.round((t-i)/864e5/7),2)},F:function(){return r.months[i.getMonth()]},m:function(){return e(n.n(),2)},M:function(){return r.monthsShort[i.getMonth()]},n:function(){return i.getMonth()+1},t:function(){return new Date(n.Y(),n.n(),0).getDate()},L:function(){var t=n.Y();return t%4==0&&t%100!=0||t%400==0?1:0},o:function(){var t=n.n(),e=n.W();return n.Y()+(12===t&&e<9?1:1===t&&e>9?-1:0)},Y:function(){return i.getFullYear()},y:function(){return n.Y().toString().slice(-2)},a:function(){return n.A().toLowerCase()},A:function(){var t=n.G()<12?0:1;return r.meridiem[t]},B:function(){var t=3600*i.getUTCHours(),n=60*i.getUTCMinutes(),o=i.getUTCSeconds();return e(Math.floor((t+n+o+3600)/86.4)%1e3,3)},g:function(){return n.G()%12||12},G:function(){return i.getHours()},h:function(){return e(n.g(),2)},H:function(){return e(n.G(),2)},i:function(){return e(i.getMinutes(),2)},s:function(){return e(i.getSeconds(),2)},u:function(){return e(1e3*i.getMilliseconds(),6)},e:function(){return/\((.*)\)/.exec(String(i))[1]||"Coordinated Universal Time"},T:function(){return(String(i).match(o.tzParts)||[""]).pop().replace(o.tzClip,"")||"UTC"},I:function(){return new Date(n.Y(),0)-Date.UTC(n.Y(),0)!=new Date(n.Y(),6)-Date.UTC(n.Y(),6)?1:0},O:function(){var t=i.getTimezoneOffset(),n=Math.abs(t);return(t>0?"-":"+")+e(100*Math.floor(n/60)+n%60,4)},P:function(){var t=n.O();return t.substr(0,3)+":"+t.substr(3,2)},Z:function(){return 60*-i.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(s,a)},r:function(){return"D, d M Y H:i:s O".replace(s,a)},U:function(){return i.getTime()/1e3||0}},a(t,t)},formatDate:function(t,e){var i,n,o,r,s,a="";if("string"==typeof t&&!1===(t=this.parseDate(t,e)))return!1;if(t instanceof Date){for(o=e.length,i=0;i<o;i++)"S"!==(s=e.charAt(i))&&(r=this.parseFormat(s,t),i!==o-1&&this.intParts.test(s)&&"S"===e.charAt(i+1)&&(n=parseInt(r),r+=this.dateSettings.ordinal(n)),a+=r);return a}return""}}}(),function(t){"function"==typeof define&&define.amd?define(["jquery","jquery-mousewheel"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){"use strict";var e={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeekShort:["ن","ث","ع","خ","ج","س","ح"],dayOfWeek:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"]},ro:{months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],dayOfWeekShort:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],dayOfWeek:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeekShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],dayOfWeek:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},is:{months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],dayOfWeekShort:["Sun","Mán","Þrið","Mið","Fim","Fös","Lau"],dayOfWeek:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeekShort:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeekShort:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],dayOfWeek:["یک‌شنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه","یک‌شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeekShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dayOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeekShort:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayOfWeek:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeekShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayOfWeek:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeekShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeekShort:["zo","ma","di","wo","do","vr","za"],dayOfWeek:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeekShort:["Paz","Pts","Sal","Çar","Per","Cum","Cts"],dayOfWeek:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeekShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],dayOfWeek:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeekShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayOfWeek:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeekShort:["nd","pn","wt","śr","cz","pt","sb"],dayOfWeek:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayOfWeek:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeekShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayOfWeek:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeekShort:["日","月","火","水","木","金","土"],dayOfWeek:["日曜","月曜","火曜","水曜","木曜","金曜","土曜"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeekShort:["CN","T2","T3","T4","T5","T6","T7"],dayOfWeek:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeekShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],dayOfWeek:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeekShort:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeekShort:["Va","Hé","Ke","Sze","Cs","Pé","Szo"],dayOfWeek:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeekShort:["B","Be","Ça","Ç","Ca","C","Ş"],dayOfWeek:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeekShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayOfWeek:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeekShort:["P","E","T","K","N","R","L"],dayOfWeek:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeekShort:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."],dayOfWeek:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeekShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayOfWeek:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeekShort:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"],dayOfWeek:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeekShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayOfWeek:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeekShort:["일","월","화","수","목","금","토"],dayOfWeek:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeekShort:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],dayOfWeek:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeekShort:["Sv","Pr","Ot","Tr","Ct","Pk","St"],dayOfWeek:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeekShort:["нед","пон","вто","сре","чет","пет","саб"],dayOfWeek:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeekShort:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"],dayOfWeek:["Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeekShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayOfWeek:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeekShort:["Ne","Po","Ut","St","Št","Pi","So"],dayOfWeek:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"]},sq:{months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],dayOfWeekShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu"],dayOfWeek:["E Diel","E Hënë","E Martē","E Mërkurë","E Enjte","E Premte","E Shtunë"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeekShort:["Ned","Pon","Uto","Sre","čet","Pet","Sub"],dayOfWeek:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeekShort:["нед","пон","уто","сре","чет","пет","суб"],dayOfWeek:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeekShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],dayOfWeek:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeekShort:["א'","ב'","ג'","ד'","ה'","ו'","שבת"],dayOfWeek:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"]},hy:{months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],dayOfWeekShort:["Կի","Երկ","Երք","Չոր","Հնգ","Ուրբ","Շբթ"],dayOfWeek:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","Ուրբաթ","Շաբաթ"]},kg:{months:["Үчтүн айы","Бирдин айы","Жалган Куран","Чын Куран","Бугу","Кулжа","Теке","Баш Оона","Аяк Оона","Тогуздун айы","Жетинин айы","Бештин айы"],dayOfWeekShort:["Жек","Дүй","Шей","Шар","Бей","Жум","Ише"],dayOfWeek:["Жекшемб","Дүйшөмб","Шейшемб","Шаршемб","Бейшемби","Жума","Ишенб"]},rm:{months:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],dayOfWeekShort:["Du","Gli","Ma","Me","Gie","Ve","So"],dayOfWeek:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"]}},value:"",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1},i=null,n="en",o={meridiem:["AM","PM"]},r=function(){var r=e.i18n[n],s={days:r.dayOfWeek,daysShort:r.dayOfWeekShort,months:r.months,monthsShort:t.map(r.months,function(t){return t.substring(0,3)})};i=new DateFormatter({dateSettings:t.extend({},o,s)})};function s(t,e,i){this.date=t,this.desc=e,this.style=i}t.datetimepicker={setLocale:function(t){var i=e.i18n[t]?t:"en";n!=i&&(n=i,r())},RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"},r(),window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var i=/(\-([a-z]){1})/g;return"float"===e&&(e="styleFloat"),i.test(e)&&(e=e.replace(i,function(t,e,i){return i.toUpperCase()})),t.currentStyle[e]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n;for(i=e||0,n=this.length;i<n;i+=1)if(this[i]===t)return i;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},t.fn.xdsoftScroller=function(e){return this.each(function(){var i,n,o,r,s,a=t(this),l=function(t){var e,i={x:0,y:0};return"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type?(e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i.x=e.clientX,i.y=e.clientY):"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type||(i.x=t.clientX,i.y=t.clientY),i},c=100,h=!1,d=0,u=0,p=0,f=!1,g=0,m=function(){};"hide"!==e?(t(this).hasClass("xdsoft_scroller_box")||(i=a.children().eq(0),n=a[0].clientHeight,o=i[0].offsetHeight,r=t('<div class="xdsoft_scrollbar"></div>'),s=t('<div class="xdsoft_scroller"></div>'),r.append(s),a.addClass("xdsoft_scroller_box").append(r),m=function(t){var e=l(t).y-d+g;e<0&&(e=0),e+s[0].offsetHeight>p&&(e=p-s[0].offsetHeight),a.trigger("scroll_element.xdsoft_scroller",[c?e/c:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(i){n||a.trigger("resize_scroll.xdsoft_scroller",[e]),d=l(i).y,g=parseInt(s.css("margin-top"),10),p=r[0].offsetHeight,"mousedown"===i.type||"touchstart"===i.type?(document&&t(document.body).addClass("xdsoft_noselect"),t([document.body,window]).on("touchend mouseup.xdsoft_scroller",function e(){t([document.body,window]).off("touchend mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",m).removeClass("xdsoft_noselect")}),t(document.body).on("mousemove.xdsoft_scroller",m)):(f=!0,i.stopPropagation(),i.preventDefault())}).on("touchmove",function(t){f&&(t.preventDefault(),m(t))}).on("touchend touchcancel",function(t){f=!1,g=0}),a.on("scroll_element.xdsoft_scroller",function(t,e){n||a.trigger("resize_scroll.xdsoft_scroller",[e,!0]),e=e>1?1:e<0||isNaN(e)?0:e,s.css("margin-top",c*e),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-n)*e,10))},10)}).on("resize_scroll.xdsoft_scroller",function(t,e,l){var h,d;n=a[0].clientHeight,o=i[0].offsetHeight,d=(h=n/o)*r[0].offsetHeight,h>1?s.hide():(s.show(),s.css("height",parseInt(d>10?d:10,10)),c=r[0].offsetHeight-s[0].offsetHeight,!0!==l&&a.trigger("scroll_element.xdsoft_scroller",[e||Math.abs(parseInt(i.css("marginTop"),10))/(o-n)]))}),a.on("mousewheel",function(t){var e=Math.abs(parseInt(i.css("marginTop"),10));return(e-=20*t.deltaY)<0&&(e=0),a.trigger("scroll_element.xdsoft_scroller",[e/(o-n)]),t.stopPropagation(),!1}),a.on("touchstart",function(t){h=l(t),u=Math.abs(parseInt(i.css("marginTop"),10))}),a.on("touchmove",function(t){if(h){t.preventDefault();var e=l(t);a.trigger("scroll_element.xdsoft_scroller",[(u-(e.y-h.y))/(o-n)])}}),a.on("touchend touchcancel",function(t){h=!1,u=0})),a.trigger("resize_scroll.xdsoft_scroller",[e])):a.find(".xdsoft_scrollbar").hide()})},t.fn.datetimepicker=function(o,r){var a,l,c=this,h=17,d=13,u=27,p=37,f=38,g=39,m=40,v=9,b=116,y=65,w=67,x=86,_=90,C=89,S=!1,D=t.isPlainObject(o)||!o?t.extend(!0,{},e,o):t.extend(!0,{},e),k=0;return a=function(e){var r,a,l,c,k,T=t('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),E=t('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),R=t('<div class="xdsoft_datepicker active"></div>'),I=t('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),M=t('<div class="xdsoft_calendar"></div>'),A=t('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),F=A.find(".xdsoft_time_box").eq(0),O=t('<div class="xdsoft_time_variant"></div>'),P=t('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),N=t('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),H=t('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),L=!1,z=0;function B(){var t,i=!1;return D.startDate?i=k.strToDate(D.startDate):(i=D.value||(e&&e.val&&e.val()?e.val():""))?i=k.strToDateTime(i):D.defaultDate&&(i=k.strToDateTime(D.defaultDate),D.defaultTime&&(t=k.strtotime(D.defaultTime),i.setHours(t.getHours()),i.setMinutes(t.getMinutes()))),i&&k.isValidDate(i)?T.data("changed",!0):i="",i||0}D.id&&T.attr("id",D.id),D.style&&T.attr("style",D.style),D.weeks&&T.addClass("xdsoft_showweeks"),D.rtl&&T.addClass("xdsoft_rtl"),T.addClass("xdsoft_"+D.theme),T.addClass(D.className),I.find(".xdsoft_month span").after(N),I.find(".xdsoft_year span").after(H),I.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(e){var i,n,o=t(this).find(".xdsoft_select").eq(0),r=0,s=0,a=o.is(":visible");for(I.find(".xdsoft_select").hide(),k.currentTime&&(r=k.currentTime[t(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),o[a?"hide":"show"](),i=o.find("div.xdsoft_option"),n=0;n<i.length&&i.eq(n).data("value")!==r;n+=1)s+=i[0].offsetHeight;return o.xdsoftScroller(s/(o.children()[0].offsetHeight-o[0].clientHeight)),e.stopPropagation(),!1}),I.find(".xdsoft_select").xdsoftScroller().on("touchstart mousedown.xdsoft",function(t){t.stopPropagation(),t.preventDefault()}).on("touchstart mousedown.xdsoft",".xdsoft_option",function(e){void 0!==k.currentTime&&null!==k.currentTime||(k.currentTime=k.now());var i=k.currentTime.getFullYear();k&&k.currentTime&&k.currentTime[t(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](t(this).data("value")),t(this).parent().parent().hide(),T.trigger("xchange.xdsoft"),D.onChangeMonth&&t.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(T,k.currentTime,T.data("input")),i!==k.currentTime.getFullYear()&&t.isFunction(D.onChangeYear)&&D.onChangeYear.call(T,k.currentTime,T.data("input"))}),T.getValue=function(){return k.getCurrentTime()},T.setOptions=function(n){var o={},r=function(t,e){if(!(t="string"==typeof t||t instanceof String?document.getElementById(t):t))return!1;if(t.createTextRange){var i=t.createTextRange();return i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select(),!0}return!!t.setSelectionRange&&(t.setSelectionRange(e,e),!0)},a=function(t,e){var i=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(i).test(e)};D=t.extend(!0,{},D,n),n.allowTimes&&t.isArray(n.allowTimes)&&n.allowTimes.length&&(D.allowTimes=t.extend(!0,[],n.allowTimes)),n.weekends&&t.isArray(n.weekends)&&n.weekends.length&&(D.weekends=t.extend(!0,[],n.weekends)),n.allowDates&&t.isArray(n.allowDates)&&n.allowDates.length&&(D.allowDates=t.extend(!0,[],n.allowDates)),n.allowDateRe&&"[object String]"===Object.prototype.toString.call(n.allowDateRe)&&(D.allowDateRe=new RegExp(n.allowDateRe)),n.highlightedDates&&t.isArray(n.highlightedDates)&&n.highlightedDates.length&&(t.each(n.highlightedDates,function(e,n){var r,a=t.map(n.split(","),t.trim),l=new s(i.parseDate(a[0],D.formatDate),a[1],a[2]),c=i.formatDate(l.date,D.formatDate);void 0!==o[c]?(r=o[c].desc)&&r.length&&l.desc&&l.desc.length&&(o[c].desc=r+"\n"+l.desc):o[c]=l}),D.highlightedDates=t.extend(!0,[],o)),n.highlightedPeriods&&t.isArray(n.highlightedPeriods)&&n.highlightedPeriods.length&&(o=t.extend(!0,[],D.highlightedDates),t.each(n.highlightedPeriods,function(e,n){var r,a,l,c,h,d,u;if(t.isArray(n))r=n[0],a=n[1],l=n[2],u=n[3];else{var p=t.map(n.split(","),t.trim);r=i.parseDate(p[0],D.formatDate),a=i.parseDate(p[1],D.formatDate),l=p[2],u=p[3]}for(;r<=a;)c=new s(r,l,u),h=i.formatDate(r,D.formatDate),r.setDate(r.getDate()+1),void 0!==o[h]?(d=o[h].desc)&&d.length&&c.desc&&c.desc.length&&(o[h].desc=d+"\n"+c.desc):o[h]=c}),D.highlightedDates=t.extend(!0,[],o)),n.disabledDates&&t.isArray(n.disabledDates)&&n.disabledDates.length&&(D.disabledDates=t.extend(!0,[],n.disabledDates)),n.disabledWeekDays&&t.isArray(n.disabledWeekDays)&&n.disabledWeekDays.length&&(D.disabledWeekDays=t.extend(!0,[],n.disabledWeekDays)),!D.open&&!D.opened||D.inline||e.trigger("open.xdsoft"),D.inline&&(L=!0,T.addClass("xdsoft_inline"),e.after(T).hide()),D.inverseButton&&(D.next="xdsoft_prev",D.prev="xdsoft_next"),D.datepicker?R.addClass("active"):R.removeClass("active"),D.timepicker?A.addClass("active"):A.removeClass("active"),D.value&&(k.setCurrentTime(D.value),e&&e.val&&e.val(k.str)),isNaN(D.dayOfWeekStart)?D.dayOfWeekStart=0:D.dayOfWeekStart=parseInt(D.dayOfWeekStart,10)%7,D.timepickerScrollbar||F.xdsoftScroller("hide"),D.minDate&&/^[\+\-](.*)$/.test(D.minDate)&&(D.minDate=i.formatDate(k.strToDateTime(D.minDate),D.formatDate)),D.maxDate&&/^[\+\-](.*)$/.test(D.maxDate)&&(D.maxDate=i.formatDate(k.strToDateTime(D.maxDate),D.formatDate)),P.toggle(D.showApplyButton),I.find(".xdsoft_today_button").css("visibility",D.todayButton?"visible":"hidden"),I.find("."+D.prev).css("visibility",D.prevButton?"visible":"hidden"),I.find("."+D.next).css("visibility",D.nextButton?"visible":"hidden"),D.mask&&(e.off("keydown.xdsoft"),!0===D.mask&&(D.mask=D.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===t.type(D.mask)&&(a(D.mask,e.val())||(e.val(D.mask.replace(/[0-9]/g,"_")),r(e[0],0)),e.on("keydown.xdsoft",function(i){var n,o,s=this.value,l=i.which;if(l>=48&&l<=57||l>=96&&l<=105||8===l||46===l){for(n=function(t){try{if(document.selection&&document.selection.createRange)return document.selection.createRange().getBookmark().charCodeAt(2)-2;if(t.setSelectionRange)return t.selectionStart}catch(t){return 0}}(this),o=8!==l&&46!==l?String.fromCharCode(96<=l&&l<=105?l-48:l):"_",8!==l&&46!==l||!n||(n-=1,o="_");/[^0-9_]/.test(D.mask.substr(n,1))&&n<D.mask.length&&n>0;)n+=8===l||46===l?-1:1;if(s=s.substr(0,n)+o+s.substr(n+1),""===t.trim(s))s=D.mask.replace(/[0-9]/g,"_");else if(n===D.mask.length)return i.preventDefault(),!1;for(n+=8===l||46===l?0:1;/[^0-9_]/.test(D.mask.substr(n,1))&&n<D.mask.length&&n>0;)n+=8===l||46===l?-1:1;a(D.mask,s)?(this.value=s,r(this,n)):""===t.trim(s)?this.value=D.mask.replace(/[0-9]/g,"_"):e.trigger("error_input.xdsoft")}else if(-1!==[y,w,x,_,C].indexOf(l)&&S||-1!==[u,f,m,p,g,b,h,v,d].indexOf(l))return!0;return i.preventDefault(),!1}))),D.validateOnBlur&&e.off("blur.xdsoft").on("blur.xdsoft",function(){if(D.allowBlank&&!t.trim(t(this).val()).length)t(this).val(null),T.data("xdsoft_datetime").empty();else if(i.parseDate(t(this).val(),D.format))T.data("xdsoft_datetime").setCurrentTime(t(this).val());else{var e=+[t(this).val()[0],t(this).val()[1]].join(""),n=+[t(this).val()[2],t(this).val()[3]].join("");!D.datepicker&&D.timepicker&&e>=0&&e<24&&n>=0&&n<60?t(this).val([e,n].map(function(t){return t>9?t:"0"+t}).join(":")):t(this).val(i.formatDate(k.now(),D.format)),T.data("xdsoft_datetime").setCurrentTime(t(this).val())}T.trigger("changedatetime.xdsoft")}),D.dayOfWeekStartPrev=0===D.dayOfWeekStart?6:D.dayOfWeekStart-1,T.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},T.data("options",D).on("touchstart mousedown.xdsoft",function(t){return t.stopPropagation(),t.preventDefault(),H.hide(),N.hide(),!1}),F.append(O),F.xdsoftScroller(),T.on("afterOpen.xdsoft",function(){F.xdsoftScroller()}),T.append(R).append(A),!0!==D.withoutCopyright&&T.append(E),R.append(I).append(M).append(P),t(D.parentID).append(T),k=new function(){var e=this;e.now=function(t){var i,n,o=new Date;return!t&&D.defaultDate&&(i=e.strToDateTime(D.defaultDate),o.setFullYear(i.getFullYear()),o.setMonth(i.getMonth()),o.setDate(i.getDate())),D.yearOffset&&o.setFullYear(o.getFullYear()+D.yearOffset),!t&&D.defaultTime&&(n=e.strtotime(D.defaultTime),o.setHours(n.getHours()),o.setMinutes(n.getMinutes())),o},e.isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strToDateTime(t):e.isValidDate(t)?t:e.now(),T.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){void 0!==e.currentTime&&null!==e.currentTime||(e.currentTime=e.now());var i,n=e.currentTime.getMonth()+1;return 12===n&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),n=0),i=e.currentTime.getFullYear(),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),n+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(n),D.onChangeMonth&&t.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(T,k.currentTime,T.data("input")),i!==e.currentTime.getFullYear()&&t.isFunction(D.onChangeYear)&&D.onChangeYear.call(T,k.currentTime,T.data("input")),T.trigger("xchange.xdsoft"),n},e.prevMonth=function(){void 0!==e.currentTime&&null!==e.currentTime||(e.currentTime=e.now());var i=e.currentTime.getMonth()-1;return-1===i&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),i=11),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),i+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(i),D.onChangeMonth&&t.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(T,k.currentTime,T.data("input")),T.trigger("xchange.xdsoft"),i},e.getWeekOfYear=function(e){if(D.onGetWeekOfYear&&t.isFunction(D.onGetWeekOfYear)){var i=D.onGetWeekOfYear.call(T,e);if(void 0!==i)return i}var n=new Date(e.getFullYear(),0,1);return 4!=n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),Math.ceil(((e-n)/864e5+n.getDay()+1)/7)},e.strToDateTime=function(t){var n,o,r=[];return t&&t instanceof Date&&e.isValidDate(t)?t:((r=/^(\+|\-)(.*)$/.exec(t))&&(r[2]=i.parseDate(r[2],D.formatDate)),r&&r[2]?(n=r[2].getTime()-6e4*r[2].getTimezoneOffset(),o=new Date(e.now(!0).getTime()+parseInt(r[1]+"1",10)*n)):o=t?i.parseDate(t,D.format):e.now(),e.isValidDate(o)||(o=e.now()),o)},e.strToDate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?i.parseDate(t,D.formatDate):e.now(!0);return e.isValidDate(n)||(n=e.now(!0)),n},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?i.parseDate(t,D.formatTime):e.now(!0);return e.isValidDate(n)||(n=e.now(!0)),n},e.str=function(){return i.formatDate(e.currentTime,D.format)},e.currentTime=this.now()},P.on("touchend click",function(t){t.preventDefault(),T.data("changed",!0),k.setCurrentTime(B()),e.val(k.str()),T.trigger("close.xdsoft")}),I.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){T.data("changed",!0),k.setCurrentTime(0),T.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var t,i,n=k.getCurrentTime();n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=k.strToDate(D.minDate),n<(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()))||(i=k.strToDate(D.maxDate),n>(i=new Date(i.getFullYear(),i.getMonth(),i.getDate()))||(e.val(k.str()),e.trigger("change"),T.trigger("close.xdsoft")))}),I.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var e=t(this),i=0,n=!1;!function t(o){e.hasClass(D.next)?k.nextMonth():e.hasClass(D.prev)&&k.prevMonth(),D.monthChangeSpinner&&(n||(i=setTimeout(t,o||100)))}(500),t([document.body,window]).on("touchend mouseup.xdsoft",function e(){clearTimeout(i),n=!0,t([document.body,window]).off("touchend mouseup.xdsoft",e)})}),A.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var e=t(this),i=0,n=!1,o=110;!function t(r){var s=F[0].clientHeight,a=O[0].offsetHeight,l=Math.abs(parseInt(O.css("marginTop"),10));e.hasClass(D.next)&&a-s-D.timeHeightInTimePicker>=l?O.css("marginTop","-"+(l+D.timeHeightInTimePicker)+"px"):e.hasClass(D.prev)&&l-D.timeHeightInTimePicker>=0&&O.css("marginTop","-"+(l-D.timeHeightInTimePicker)+"px"),F.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(O.css("marginTop"),10)/(a-s))]),o=o>10?10:o-10,n||(i=setTimeout(t,r||o))}(500),t([document.body,window]).on("touchend mouseup.xdsoft",function e(){clearTimeout(i),n=!0,t([document.body,window]).off("touchend mouseup.xdsoft",e)})}),r=0,T.on("xchange.xdsoft",function(e){clearTimeout(r),r=setTimeout(function(){void 0!==k.currentTime&&null!==k.currentTime||(k.currentTime=k.now());for(var e,r,s,a,l,c,h,d,u,p,f="",g=new Date(k.currentTime.getFullYear(),k.currentTime.getMonth(),1,12,0,0),m=0,v=k.now(),b=!1,y=!1,w=[],x=!0,_="";g.getDay()!==D.dayOfWeekStart;)g.setDate(g.getDate()-1);for(f+="<table><thead><tr>",D.weeks&&(f+="<th></th>"),e=0;e<7;e+=1)f+="<th>"+D.i18n[n].dayOfWeekShort[(e+D.dayOfWeekStart)%7]+"</th>";for(f+="</tr></thead>",f+="<tbody>",!1!==D.maxDate&&(b=k.strToDate(D.maxDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59,999)),!1!==D.minDate&&(y=k.strToDate(D.minDate),y=new Date(y.getFullYear(),y.getMonth(),y.getDate()));m<k.currentTime.countDaysInMonth()||g.getDay()!==D.dayOfWeekStart||k.currentTime.getMonth()===g.getMonth();)w=[],m+=1,s=g.getDay(),a=g.getDate(),l=g.getFullYear(),c=g.getMonth(),h=k.getWeekOfYear(g),p="",w.push("xdsoft_date"),d=D.beforeShowDay&&t.isFunction(D.beforeShowDay.call)?D.beforeShowDay.call(T,g):null,D.allowDateRe&&"[object RegExp]"===Object.prototype.toString.call(D.allowDateRe)?D.allowDateRe.test(g.dateFormat(D.formatDate))||w.push("xdsoft_disabled"):D.allowDates&&D.allowDates.length>0?-1===D.allowDates.indexOf(g.dateFormat(D.formatDate))&&w.push("xdsoft_disabled"):!1!==b&&g>b||!1!==y&&g<y||d&&!1===d[0]?w.push("xdsoft_disabled"):-1!==D.disabledDates.indexOf(i.formatDate(g,D.formatDate))?w.push("xdsoft_disabled"):-1!==D.disabledWeekDays.indexOf(s)&&w.push("xdsoft_disabled"),d&&""!==d[1]&&w.push(d[1]),k.currentTime.getMonth()!==c&&w.push("xdsoft_other_month"),(D.defaultSelect||T.data("changed"))&&i.formatDate(k.currentTime,D.formatDate)===i.formatDate(g,D.formatDate)&&w.push("xdsoft_current"),i.formatDate(v,D.formatDate)===i.formatDate(g,D.formatDate)&&w.push("xdsoft_today"),0!==g.getDay()&&6!==g.getDay()&&-1===D.weekends.indexOf(i.formatDate(g,D.formatDate))||w.push("xdsoft_weekend"),void 0!==D.highlightedDates[i.formatDate(g,D.formatDate)]&&(r=D.highlightedDates[i.formatDate(g,D.formatDate)],w.push(void 0===r.style?"xdsoft_highlighted_default":r.style),p=void 0===r.desc?"":r.desc),D.beforeShowDay&&t.isFunction(D.beforeShowDay)&&w.push(D.beforeShowDay(g)),x&&(f+="<tr>",x=!1,D.weeks&&(f+="<th>"+h+"</th>")),f+='<td data-date="'+a+'" data-month="'+c+'" data-year="'+l+'" class="xdsoft_date xdsoft_day_of_week'+g.getDay()+" "+w.join(" ")+'" title="'+p+'"><div>'+a+"</div></td>",g.getDay()===D.dayOfWeekStartPrev&&(f+="</tr>",x=!0),g.setDate(a+1);if(f+="</tbody></table>",M.html(f),I.find(".xdsoft_label span").eq(0).text(D.i18n[n].months[k.currentTime.getMonth()]),I.find(".xdsoft_label span").eq(1).text(k.currentTime.getFullYear()),_="","",c="",u=function(e,n){var o,r,s=k.now(),a=D.allowTimes&&t.isArray(D.allowTimes)&&D.allowTimes.length;s.setHours(e),e=parseInt(s.getHours(),10),s.setMinutes(n),n=parseInt(s.getMinutes(),10),(o=new Date(k.currentTime)).setHours(e),o.setMinutes(n),w=[],(!1!==D.minDateTime&&D.minDateTime>o||!1!==D.maxTime&&k.strtotime(D.maxTime).getTime()<s.getTime()||!1!==D.minTime&&k.strtotime(D.minTime).getTime()>s.getTime())&&w.push("xdsoft_disabled"),(!1!==D.minDateTime&&D.minDateTime>o||!1!==D.disabledMinTime&&s.getTime()>k.strtotime(D.disabledMinTime).getTime()&&!1!==D.disabledMaxTime&&s.getTime()<k.strtotime(D.disabledMaxTime).getTime())&&w.push("xdsoft_disabled"),(r=new Date(k.currentTime)).setHours(parseInt(k.currentTime.getHours(),10)),a||r.setMinutes(Math[D.roundTime](k.currentTime.getMinutes()/D.step)*D.step),(D.initTime||D.defaultSelect||T.data("changed"))&&r.getHours()===parseInt(e,10)&&(!a&&D.step>59||r.getMinutes()===parseInt(n,10))&&(D.defaultSelect||T.data("changed")?w.push("xdsoft_current"):D.initTime&&w.push("xdsoft_init_time")),parseInt(v.getHours(),10)===parseInt(e,10)&&parseInt(v.getMinutes(),10)===parseInt(n,10)&&w.push("xdsoft_today"),_+='<div class="xdsoft_time '+w.join(" ")+'" data-hour="'+e+'" data-minute="'+n+'">'+i.formatDate(s,D.formatTime)+"</div>"},D.allowTimes&&t.isArray(D.allowTimes)&&D.allowTimes.length)for(m=0;m<D.allowTimes.length;m+=1)u(k.strtotime(D.allowTimes[m]).getHours(),c=k.strtotime(D.allowTimes[m]).getMinutes());else for(m=0,e=0;m<(D.hours12?12:24);m+=1)for(e=0;e<60;e+=D.step)u((m<10?"0":"")+m,c=(e<10?"0":"")+e);for(O.html(_),o="",m=0,m=parseInt(D.yearStart,10)+D.yearOffset;m<=parseInt(D.yearEnd,10)+D.yearOffset;m+=1)o+='<div class="xdsoft_option '+(k.currentTime.getFullYear()===m?"xdsoft_current":"")+'" data-value="'+m+'">'+m+"</div>";for(H.children().eq(0).html(o),m=parseInt(D.monthStart,10),o="";m<=parseInt(D.monthEnd,10);m+=1)o+='<div class="xdsoft_option '+(k.currentTime.getMonth()===m?"xdsoft_current":"")+'" data-value="'+m+'">'+D.i18n[n].months[m]+"</div>";N.children().eq(0).html(o),t(T).trigger("generate.xdsoft")},10),e.stopPropagation()}).on("afterOpen.xdsoft",function(){var t,e,i,n;D.timepicker&&(O.find(".xdsoft_current").length?t=".xdsoft_current":O.find(".xdsoft_init_time").length&&(t=".xdsoft_init_time"),t?(e=F[0].clientHeight,(i=O[0].offsetHeight)-e<(n=O.find(t).index()*D.timeHeightInTimePicker+1)&&(n=i-e),F.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(i-e)])):F.trigger("scroll_element.xdsoft_scroller",[0]))}),a=0,M.on("touchend click.xdsoft","td",function(i){i.stopPropagation(),a+=1;var n=t(this),o=k.currentTime;if(null==o&&(k.currentTime=k.now(),o=k.currentTime),n.hasClass("xdsoft_disabled"))return!1;o.setDate(1),o.setFullYear(n.data("year")),o.setMonth(n.data("month")),o.setDate(n.data("date")),T.trigger("select.xdsoft",[o]),e.val(k.str()),D.onSelectDate&&t.isFunction(D.onSelectDate)&&D.onSelectDate.call(T,k.currentTime,T.data("input"),i),T.data("changed",!0),T.trigger("xchange.xdsoft"),T.trigger("changedatetime.xdsoft"),(a>1||!0===D.closeOnDateSelect||!1===D.closeOnDateSelect&&!D.timepicker)&&!D.inline&&T.trigger("close.xdsoft"),setTimeout(function(){a=0},200)}),O.on("touchend click.xdsoft","div",function(e){e.stopPropagation();var i=t(this),n=k.currentTime;if(null==n&&(k.currentTime=k.now(),n=k.currentTime),i.hasClass("xdsoft_disabled"))return!1;n.setHours(i.data("hour")),n.setMinutes(i.data("minute")),T.trigger("select.xdsoft",[n]),T.data("input").val(k.str()),D.onSelectTime&&t.isFunction(D.onSelectTime)&&D.onSelectTime.call(T,k.currentTime,T.data("input"),e),T.data("changed",!0),T.trigger("xchange.xdsoft"),T.trigger("changedatetime.xdsoft"),!0!==D.inline&&!0===D.closeOnTimeSelect&&T.trigger("close.xdsoft")}),R.on("mousewheel.xdsoft",function(t){return!D.scrollMonth||(t.deltaY<0?k.nextMonth():k.prevMonth(),!1)}),e.on("mousewheel.xdsoft",function(t){return!D.scrollInput||(!D.datepicker&&D.timepicker?((l=O.find(".xdsoft_current").length?O.find(".xdsoft_current").eq(0).index():0)+t.deltaY>=0&&l+t.deltaY<O.children().length&&(l+=t.deltaY),O.children().eq(l).length&&O.children().eq(l).trigger("mousedown"),!1):D.datepicker&&!D.timepicker?(R.trigger(t,[t.deltaY,t.deltaX,t.deltaY]),e.val&&e.val(k.str()),T.trigger("changedatetime.xdsoft"),!1):void 0)}),T.on("changedatetime.xdsoft",function(e){if(D.onChangeDateTime&&t.isFunction(D.onChangeDateTime)){var i=T.data("input");D.onChangeDateTime.call(T,k.currentTime,i,e),delete D.value,i.trigger("change")}}).on("generate.xdsoft",function(){D.onGenerate&&t.isFunction(D.onGenerate)&&D.onGenerate.call(T,k.currentTime,T.data("input")),L&&(T.trigger("afterOpen.xdsoft"),L=!1)}).on("click.xdsoft",function(t){t.stopPropagation()}),l=0,c=function(){var e,i=T.data("input").offset(),n=T.data("input")[0],o=i.top+n.offsetHeight-1,r=i.left,s="absolute";document.documentElement.clientWidth-i.left<R.parent().outerWidth(!0)&&(r-=R.parent().outerWidth(!0)-n.offsetWidth);"rtl"==T.data("input").parent().css("direction")&&(r-=T.outerWidth()-T.data("input").outerWidth()),D.fixed?(o-=t(window).scrollTop(),r-=t(window).scrollLeft(),s="fixed"):(o+n.offsetHeight>t(window).height()+t(window).scrollTop()&&(o=i.top-n.offsetHeight+1),o<0&&(o=0),r+n.offsetWidth>t(window).width()&&(r=t(window).width()-n.offsetWidth)),e=T[0];do{if(e=e.parentNode,"relative"===window.getComputedStyle(e).getPropertyValue("position")&&t(window).width()>=e.offsetWidth){r-=(t(window).width()-e.offsetWidth)/2;break}}while("HTML"!==e.nodeName);T.css({left:r,top:o,position:s})},T.on("open.xdsoft",function(e){var i=!0;D.onShow&&t.isFunction(D.onShow)&&(i=D.onShow.call(T,k.currentTime,T.data("input"),e)),!1!==i&&(T.show(),c(),t(window).off("resize.xdsoft",c).on("resize.xdsoft",c),D.closeOnWithoutClick&&t([document.body,window]).on("touchstart mousedown.xdsoft",function e(){T.trigger("close.xdsoft"),t([document.body,window]).off("touchstart mousedown.xdsoft",e)}))}).on("close.xdsoft",function(e){var i=!0;I.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),D.onClose&&t.isFunction(D.onClose)&&(i=D.onClose.call(T,k.currentTime,T.data("input"),e)),!1===i||D.opened||D.inline||T.hide(),e.stopPropagation()}).on("toggle.xdsoft",function(t){T.is(":visible")?T.trigger("close.xdsoft"):T.trigger("open.xdsoft")}).data("input",e),z=0,T.data("xdsoft_datetime",k),T.setOptions(D),k.setCurrentTime(B()),e.data("xdsoft_datetimepicker",T).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(t){e.is(":disabled")||e.data("xdsoft_datetimepicker").is(":visible")&&D.closeOnInputClick||(clearTimeout(z),z=setTimeout(function(){e.is(":disabled")||(L=!0,k.setCurrentTime(B()),T.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){this.value;var i,n=e.which;return-1!==[d].indexOf(n)&&D.enterLikeTab?(i=t("input:visible,textarea:visible,button:visible,a:visible"),T.trigger("close.xdsoft"),i.eq(i.index(this)+1).focus(),!1):-1!==[v].indexOf(n)?(T.trigger("close.xdsoft"),!0):void 0})},l=function(e){var i=e.data("xdsoft_datetimepicker");i&&(i.data("xdsoft_datetime",null),i.remove(),e.data("xdsoft_datetimepicker",null).off(".xdsoft"),t(window).off("resize.xdsoft"),t([window,document.body]).off("mousedown.xdsoft touchstart"),e.unmousewheel&&e.unmousewheel())},t(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){t.keyCode===h&&(S=!0)}).on("keyup.xdsoftctrl",function(t){t.keyCode===h&&(S=!1)}),this.each(function(){var e,n=t(this).data("xdsoft_datetimepicker");if(n){if("string"===t.type(o))switch(o){case"show":t(this).select().focus(),n.trigger("open.xdsoft");break;case"hide":n.trigger("close.xdsoft");break;case"toggle":n.trigger("toggle.xdsoft");break;case"destroy":l(t(this));break;case"reset":this.value=this.defaultValue,this.value&&n.data("xdsoft_datetime").isValidDate(i.parseDate(this.value,D.format))||n.data("changed",!1),n.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":n.data("input").trigger("blur.xdsoft");break;default:n[o]&&t.isFunction(n[o])&&(c=n[o](r))}else n.setOptions(o);return 0}"string"!==t.type(o)&&(!D.lazyInit||D.open||D.inline?a(t(this)):(e=t(this)).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(i){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(k),k=setTimeout(function(){e.data("xdsoft_datetimepicker")||a(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100))}))}),c},t.fn.datetimepicker.defaults=e}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){var e,i,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(t.event.fixHooks)for(var s=n.length;s;)t.event.fixHooks[n[--s]]=t.event.mouseHooks;var a=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],l,!1);else this.onmousewheel=l;t.data(this,"mousewheel-line-height",a.getLineHeight(this)),t.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],l,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(n){var o,s=n||window.event,l=r.call(arguments,1),d=0,u=0,p=0,f=0,g=0;if((n=t.event.fix(s)).type="mousewheel","detail"in s&&(p=-1*s.detail),"wheelDelta"in s&&(p=s.wheelDelta),"wheelDeltaY"in s&&(p=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*p,p=0),d=0===p?u:p,"deltaY"in s&&(d=p=-1*s.deltaY),"deltaX"in s&&(u=s.deltaX,0===p&&(d=-1*u)),0!==p||0!==u){if(1===s.deltaMode){var m=t.data(this,"mousewheel-line-height");d*=m,p*=m,u*=m}else if(2===s.deltaMode){var v=t.data(this,"mousewheel-page-height");d*=v,p*=v,u*=v}if(o=Math.max(Math.abs(p),Math.abs(u)),(!i||o<i)&&(i=o,h(s,o)&&(i/=40)),h(s,o)&&(d/=40,u/=40,p/=40),d=Math[d>=1?"floor":"ceil"](d/i),u=Math[u>=1?"floor":"ceil"](u/i),p=Math[p>=1?"floor":"ceil"](p/i),a.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=n.clientX-b.left,g=n.clientY-b.top}return n.deltaX=u,n.deltaY=p,n.deltaFactor=i,n.offsetX=f,n.offsetY=g,n.deltaMode=0,l.unshift(n,d,u,p),e&&clearTimeout(e),e=setTimeout(c,200),(t.event.dispatch||t.event.handle).apply(this,l)}}function c(){i=null}function h(t,e){return a.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function i(t){var e=t.parent(),i=e.find(".minicolors-panel"),o=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(n(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(o.showSpeed,function(){o.show&&o.show.call(t.get(0))}))}function n(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),o=i.data("minicolors-settings");n.fadeOut(o.hideSpeed,function(){o.hide&&o.hide.call(i.get(0)),e.removeClass("minicolors-focus")})})}function o(t,e,i){var n,o,s,a,l=t.parents(".minicolors").find(".minicolors-input"),c=l.data("minicolors-settings"),h=t.find("[class$=-picker]"),d=t.offset().left,u=t.offset().top,p=Math.round(e.pageX-d),f=Math.round(e.pageY-u),g=i?c.animationSpeed:0;e.originalEvent.changedTouches&&(p=e.originalEvent.changedTouches[0].pageX-d,f=e.originalEvent.changedTouches[0].pageY-u),p<0&&(p=0),f<0&&(f=0),p>t.width()&&(p=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(n=75-p,o=75-f,s=Math.sqrt(n*n+o*o),(a=Math.atan2(o,n))<0&&(a+=2*Math.PI),s>75&&(s=75,p=75-75*Math.cos(a),f=75-75*Math.sin(a)),p=Math.round(p),f=Math.round(f)),t.is(".minicolors-grid")?h.stop(!0).animate({top:f+"px",left:p+"px"},g,c.animationEasing,function(){r(l,t)}):h.stop(!0).animate({top:f+"px"},g,c.animationEasing,function(){r(l,t)})}function r(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,o,r,s,c,u,p,f=t.val(),g=t.attr("data-opacity"),m=t.parent(),v=t.data("minicolors-settings"),b=m.find(".minicolors-swatch"),y=m.find(".minicolors-grid"),w=m.find(".minicolors-slider"),x=m.find(".minicolors-opacity-slider"),_=y.find("[class$=-picker]"),C=w.find("[class$=-picker]"),S=x.find("[class$=-picker]"),D=i(_,y),k=i(C,w),T=i(S,x);if(e.is(".minicolors-grid, .minicolors-slider")){switch(v.control){case"wheel":s=y.width()/2-D.x,c=y.height()/2-D.y,u=Math.sqrt(s*s+c*c),(p=Math.atan2(c,s))<0&&(p+=2*Math.PI),u>75&&(u=75,D.x=69-75*Math.cos(p),D.y=69-75*Math.sin(p)),o=h(u/.75,0,100),f=d({h:n=h(180*p/Math.PI,0,360),s:o,b:r=h(100-Math.floor(k.y*(100/w.height())),0,100)}),w.css("backgroundColor",d({h:n,s:o,b:100}));break;case"saturation":f=d({h:n=h(parseInt(D.x*(360/y.width()),10),0,360),s:o=h(100-Math.floor(k.y*(100/w.height())),0,100),b:r=h(100-Math.floor(D.y*(100/y.height())),0,100)}),w.css("backgroundColor",d({h:n,s:100,b:r})),m.find(".minicolors-grid-inner").css("opacity",o/100);break;case"brightness":f=d({h:n=h(parseInt(D.x*(360/y.width()),10),0,360),s:o=h(100-Math.floor(D.y*(100/y.height())),0,100),b:r=h(100-Math.floor(k.y*(100/w.height())),0,100)}),w.css("backgroundColor",d({h:n,s:o,b:100})),m.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:f=d({h:n=h(360-parseInt(k.y*(360/w.height()),10),0,360),s:o=h(Math.floor(D.x*(100/y.width())),0,100),b:r=h(100-Math.floor(D.y*(100/y.height())),0,100)}),y.css("backgroundColor",d({h:n,s:100,b:100}))}t.val(l(f,v.letterCase))}e.is(".minicolors-opacity-slider")&&(g=v.opacity?parseFloat(1-T.y/x.height()).toFixed(2):1,v.opacity&&t.attr("data-opacity",g)),b.find("SPAN").css({backgroundColor:f,opacity:g}),a(t,f,g)}function s(t,e){var i,n,o,r,s,p,f,g=t.parent(),m=t.data("minicolors-settings"),v=g.find(".minicolors-swatch"),b=g.find(".minicolors-grid"),y=g.find(".minicolors-slider"),w=g.find(".minicolors-opacity-slider"),x=b.find("[class$=-picker]"),_=y.find("[class$=-picker]"),C=w.find("[class$=-picker]");switch((i=l(c(t.val(),!0),m.letterCase))||(i=l(c(m.defaultValue,!0),m.letterCase)),n=function(t){var e=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;e.b=n,e.s=0!==n?255*o/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/o:t.g===n?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1;e.h*=60,e.h<0&&(e.h+=360);return e.s*=100/255,e.b*=100/255,e}(u(t));0===e.s&&(e.h=360);return e}(i),e||t.val(i),m.opacity&&(o=""===t.attr("data-opacity")?1:h(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),t.attr("data-opacity",o),v.find("SPAN").css("opacity",o),s=h(w.height()-w.height()*o,0,w.height()),C.css("top",s+"px")),v.find("SPAN").css("backgroundColor",i),m.control){case"wheel":p=h(Math.ceil(.75*n.s),0,b.height()/2),f=n.h*Math.PI/180,r=h(75-Math.cos(f)*p,0,b.width()),s=h(75-Math.sin(f)*p,0,b.height()),x.css({top:s+"px",left:r+"px"}),s=150-n.b/(100/b.height()),""===i&&(s=0),_.css("top",s+"px"),y.css("backgroundColor",d({h:n.h,s:n.s,b:100}));break;case"saturation":r=h(5*n.h/12,0,150),s=h(b.height()-Math.ceil(n.b/(100/b.height())),0,b.height()),x.css({top:s+"px",left:r+"px"}),s=h(y.height()-n.s*(y.height()/100),0,y.height()),_.css("top",s+"px"),y.css("backgroundColor",d({h:n.h,s:100,b:n.b})),g.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":r=h(5*n.h/12,0,150),s=h(b.height()-Math.ceil(n.s/(100/b.height())),0,b.height()),x.css({top:s+"px",left:r+"px"}),s=h(y.height()-n.b*(y.height()/100),0,y.height()),_.css("top",s+"px"),y.css("backgroundColor",d({h:n.h,s:n.s,b:100})),g.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:r=h(Math.ceil(n.s/(100/b.width())),0,b.width()),s=h(b.height()-Math.ceil(n.b/(100/b.height())),0,b.height()),x.css({top:s+"px",left:r+"px"}),s=h(y.height()-n.h/(360/y.height()),0,y.height()),_.css("top",s+"px"),b.css("backgroundColor",d({h:n.h,s:100,b:100}))}t.data("minicolors-initialized")&&a(t,i,o)}function a(t,e,i){var n=t.data("minicolors-settings"),o=t.data("minicolors-lastChange");o&&o.hex===e&&o.opacity===i||(t.data("minicolors-lastChange",{hex:e,opacity:i}),n.change&&(n.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){n.change.call(t.get(0),e,i)},n.changeDelay))):n.change.call(t.get(0),e,i)),t.trigger("change").trigger("input"))}function l(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function c(t,e){return 3!==(t=t.replace(/[^A-F0-9]/gi,"")).length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t)}function h(t,e,i){return t<e&&(t=e),t>i&&(t=i),t}function d(e){return i=function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=o;else{var r=o,s=(255-n)*o/255,a=i%60*(r-s)/60;360===i&&(i=0),i<60?(e.r=r,e.b=s,e.g=s+a):i<120?(e.g=r,e.b=s,e.r=r-a):i<180?(e.g=r,e.r=s,e.b=s+a):i<240?(e.b=r,e.r=s,e.g=r-a):i<300?(e.b=r,e.g=s,e.r=s+a):i<360?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}(e),n=[i.r.toString(16),i.g.toString(16),i.b.toString(16)],t.each(n,function(t,e){1===e.length&&(n[t]="0"+e)}),"#"+n.join("");var i,n}function u(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},t.extend(t.fn,{minicolors:function(o,r){switch(o){case"destroy":return t(this).each(function(){e(t(this))}),t(this);case"hide":return n(),t(this);case"opacity":return void 0===r?t(this).attr("data-opacity"):(t(this).each(function(){s(t(this).attr("data-opacity",r))}),t(this));case"rgbObject":return function(e){var i=u(c(t(e).val(),!0)),n=t(e).attr("data-opacity");if(!i)return null;void 0!==n&&t.extend(i,{a:parseFloat(n)});return i}(t(this));case"rgbString":case"rgbaString":return function(e,i){var n=u(c(t(e).val(),!0)),o=t(e).attr("data-opacity");if(!n)return null;void 0===o&&(o=1);return i?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(o)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"}(t(this),"rgbaString"===o);case"settings":return void 0===r?t(this).data("minicolors-settings"):(t(this).each(function(){var i=t(this).data("minicolors-settings")||{};e(t(this)),t(this).minicolors(t.extend(!0,i,r))}),t(this));case"show":return i(t(this).eq(0)),t(this);case"value":return void 0===r?t(this).val():(t(this).each(function(){s(t(this).val(r))}),t(this));default:return"create"!==o&&(r=o),t(this).each(function(){!function(e,i){var n=t('<div class="minicolors" />'),o=t.minicolors.defaults;if(e.data("minicolors-initialized"))return;i=t.extend(!0,{},o,i),n.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",!0!==i.dataUris),void 0!==i.position&&t.each(i.position.split(" "),function(){n.addClass("minicolors-position-"+this)});e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",7).wrap(n).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-swatch").on("click",function(t){t.preventDefault(),e.focus()}));e.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),i.inline&&e.parent().addClass("minicolors-inline");s(e,!1),e.data("minicolors-initialized",!0)}(t(this),r)}),t(this)}}}),t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||n()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(document).data("minicolors-target",i),o(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(document).data("minicolors-target");i&&o(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(e){var n=t(this).parent().find(".minicolors-input");e.preventDefault(),i(n)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&i(e)}).on("blur.minicolors",".minicolors-input",function(){var e=t(this),i=e.data("minicolors-settings");e.data("minicolors-initialized")&&(e.val(c(e.val(),!0)),""===e.val()&&e.val(c(i.defaultValue,!0)),e.val(l(e.val(),i.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:n();break;case 13:case 27:n(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&s(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){s(e,!0)},1)})}),function(t,e,i,n,o){"use strict";var r,s,a=0,l=(r=n.userAgent,s=/msie\s\d+/i,r.search(s)>0&&s.exec(r).toString().split(" ")[1]<9&&(t("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,i=[].slice;if("function"!=typeof e)throw new TypeError;var n=i.call(arguments,1),o=function(){if(this instanceof o){var r=function(){};r.prototype=e.prototype;var s=new r,a=e.apply(s,n.concat(i.call(arguments)));return Object(a)===a?a:s}return e.apply(t,n.concat(i.call(arguments)))};return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=o)return-1;for(i=Math.max(r>=0?r:o-Math.abs(r),0);i<o;){if(i in n&&n[i]===t)return i;i++}return-1});var c=function(n,o,r){this.VERSION="2.0.13",this.input=n,this.plugin_count=r,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,this.$cache={win:t(i),body:t(e.body),input:t(n),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};var s=this.$cache.input,a={type:s.data("type"),min:s.data("min"),max:s.data("max"),from:s.data("from"),to:s.data("to"),step:s.data("step"),min_interval:s.data("minInterval"),max_interval:s.data("maxInterval"),drag_interval:s.data("dragInterval"),values:s.data("values"),from_fixed:s.data("fromFixed"),from_min:s.data("fromMin"),from_max:s.data("fromMax"),from_shadow:s.data("fromShadow"),to_fixed:s.data("toFixed"),to_min:s.data("toMin"),to_max:s.data("toMax"),to_shadow:s.data("toShadow"),prettify_enabled:s.data("prettifyEnabled"),prettify_separator:s.data("prettifySeparator"),force_edges:s.data("forceEdges"),keyboard:s.data("keyboard"),keyboard_step:s.data("keyboardStep"),grid:s.data("grid"),grid_margin:s.data("gridMargin"),grid_num:s.data("gridNum"),grid_snap:s.data("gridSnap"),hide_min_max:s.data("hideMinMax"),hide_from_to:s.data("hideFromTo"),prefix:s.data("prefix"),postfix:s.data("postfix"),max_postfix:s.data("maxPostfix"),decorate_both:s.data("decorateBoth"),values_separator:s.data("valuesSeparator"),disable:s.data("disable")};a.values=a.values&&a.values.split(",");var l=s.prop("value");l&&((l=l.split(";"))[0]&&l[0]==+l[0]&&(l[0]=+l[0]),l[1]&&l[1]==+l[1]&&(l[1]=+l[1]),o&&o.values&&o.values.length?(a.from=l[0]&&o.values.indexOf(l[0]),a.to=l[1]&&o.values.indexOf(l[1])):(a.from=l[0]&&+l[0],a.to=l[1]&&+l[1])),o=t.extend(a,o),this.options=t.extend({type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!1,keyboard_step:5,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",disable:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null},o),this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single:0,p_single_real:0,p_from:0,p_from_real:0,p_to:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from:0,p_from_left:0,p_to:0,p_to_left:0,p_single:0,p_single_left:0},this.init()};c.prototype={init:function(t){this.coords.p_step=this.options.step/((this.options.max-this.options.min)/100),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs js-irs-'+this.plugin_count+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="-1"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>'),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.cont.removeClass("irs-disabled"),this.$cache.input[0].disabled=!1,this.bindEvents())},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,n=this.options.to;i>t&&n===e?this.$cache.s_from.addClass("type_last"):n<e&&this.$cache.s_to.addClass("type_last")},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),l&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),l&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this)))},pointerMove:function(t){if(this.dragging){var e=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;this.coords.x_pointer=e-this.coords.x_gap,this.calc()}},pointerUp:function(e){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,(t.contains(this.$cache.cont[0],e.target)||this.dragging)&&(this.is_finish=!0,this.callOnFinish()),this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,this.dragging=!1,l&&t("*").prop("unselectable",!1),this.updateScene())},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single);break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from),this.coords.p_gap_right=this.toFixed(this.coords.p_to-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},pointerDown:function(e,i){i.preventDefault();var n=i.pageX||i.originalEvent.touches&&i.originalEvent.touches[0].pageX;2!==i.button&&(this.current_plugin=this.plugin_count,this.target=e,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=n-this.coords.x_gap,this.calcPointer(),this.changeLevel(e),l&&t("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer;t?e+=this.options.keyboard_step:e-=this.options.keyboard_step,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min)),this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},calc:function(t){if(this.options&&(this.calc_count++,(10===this.calc_count||t)&&(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1)),this.coords.w_rs)){this.calcPointer(),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100);var e=100-this.coords.p_handle,i=this.toFixed(this.coords.p_pointer-this.coords.p_gap);switch("click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,i=this.toFixed(this.coords.p_pointer-this.coords.p_gap),this.target=this.chooseHandle(i)),i<0?i=0:i>e&&(i=e),this.target){case"base":var n=(this.options.max-this.options.min)/100,o=(this.result.from-this.options.min)/n,r=(this.result.to-this.options.min)/n;this.coords.p_single_real=this.toFixed(o),this.coords.p_from_real=this.toFixed(o),this.coords.p_to_real=this.toFixed(r),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single=this.toFixed(o-this.coords.p_handle/100*o),this.coords.p_from=this.toFixed(o-this.coords.p_handle/100*o),this.coords.p_to=this.toFixed(r-this.coords.p_handle/100*r),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.calcWithStep(i/e*100),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single=this.toFixed(this.coords.p_single_real/100*e);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.calcWithStep(i/e*100),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from=this.toFixed(this.coords.p_from_real/100*e);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.calcWithStep(i/e*100),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to=this.toFixed(this.coords.p_to_real/100*e);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;i=this.toFixed(i+.1*this.coords.p_handle),this.coords.p_from_real=this.calcWithStep((i-this.coords.p_gap_left)/e*100),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from=this.toFixed(this.coords.p_from_real/100*e),this.coords.p_to_real=this.calcWithStep((i+this.coords.p_gap_right)/e*100),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to=this.toFixed(this.coords.p_to_real/100*e)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single,this.result.from_percent=this.coords.p_single_real,this.result.from=this.calcReal(this.coords.p_single_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to-this.coords.p_from),this.result.from_percent=this.coords.p_from_real,this.result.from=this.calcReal(this.coords.p_from_real),this.result.to_percent=this.coords.p_to_real,this.result.to=this.calcReal(this.coords.p_to_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointer:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},chooseHandle:function(t){return"single"===this.options.type?"single":t>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single+this.coords.p_handle/2-this.labels.p_single/2,this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from+this.coords.p_handle/2-this.labels.p_from/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to+this.coords.p_handle/2-this.labels.p_to/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to)/2-this.labels.p_single/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw)&&(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.s_single[0].style.left=this.coords.p_single+"%",this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?(this.$cache.input.prop("value",this.result.from_value),this.$cache.input.data("from",this.result.from_value)):(this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from))):(this.$cache.s_from[0].style.left=this.coords.p_from+"%",this.$cache.s_to[0].style.left=this.coords.p_to+"%",(this.old_from!==this.result.from||this.force_redraw)&&(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),(this.old_to!==this.result.to||this.force_redraw)&&(this.$cache.to[0].style.left=this.labels.p_to_left+"%"),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?(this.$cache.input.prop("value",this.result.from_value+";"+this.result.to_value),this.$cache.input.data("from",this.result.from_value),this.$cache.input.data("to",this.result.to_value)):(this.$cache.input.prop("value",this.result.from+";"+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||this.$cache.input.trigger("change"),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&this.callOnFinish(),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},callOnStart:function(){this.options.onStart&&"function"==typeof this.options.onStart&&this.options.onStart(this.result)},callOnChange:function(){this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this.result)},callOnFinish:function(){this.options.onFinish&&"function"==typeof this.options.onFinish&&this.options.onFinish(this.result)},callOnUpdate:function(){this.options.onUpdate&&"function"==typeof this.options.onUpdate&&this.options.onUpdate(this.result)},drawLabels:function(){if(this.options){var t,e,i,n=this.options.values.length,o=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type)n?(t=this.decorate(o[this.result.from]),this.$cache.single.html(t)):(t=this.decorate(this._prettify(this.result.from),this.result.from),this.$cache.single.html(t)),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible";else{n?(this.options.decorate_both?(t=this.decorate(o[this.result.from]),t+=this.options.values_separator,t+=this.decorate(o[this.result.to])):t=this.decorate(o[this.result.from]+this.options.values_separator+o[this.result.to]),e=this.decorate(o[this.result.from]),i=this.decorate(o[this.result.to]),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i)):(this.options.decorate_both?(t=this.decorate(this._prettify(this.result.from),this.result.from),t+=this.options.values_separator,t+=this.decorate(this._prettify(this.result.to),this.result.to)):t=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.to),e=this.decorate(this._prettify(this.result.from),this.result.from),i=this.decorate(this._prettify(this.result.to),this.result.to),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i)),this.calcLabels();var r=Math.min(this.labels.p_single_left,this.labels.p_from_left),s=this.labels.p_single_left+this.labels.p_single,a=this.labels.p_to_left+this.labels.p_to,l=Math.max(s,a);this.labels.p_from_left+this.labels.p_from>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",this.result.from===this.result.to?(this.$cache.from[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden",l=a):(this.$cache.from[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",l=Math.max(s,a))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),r<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",l>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var t,e,i,n,o=this.options,r=this.$cache,s="number"==typeof o.from_min&&!isNaN(o.from_min),a="number"==typeof o.from_max&&!isNaN(o.from_max),l="number"==typeof o.to_min&&!isNaN(o.to_min),c="number"==typeof o.to_max&&!isNaN(o.to_max);"single"===o.type?o.from_shadow&&(s||a)?(t=this.calcPercent(s?o.from_min:o.min),e=this.calcPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,r.shad_single[0].style.display="block",r.shad_single[0].style.left=t+"%",r.shad_single[0].style.width=e+"%"):r.shad_single[0].style.display="none":(o.from_shadow&&(s||a)?(t=this.calcPercent(s?o.from_min:o.min),e=this.calcPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,r.shad_from[0].style.display="block",r.shad_from[0].style.left=t+"%",r.shad_from[0].style.width=e+"%"):r.shad_from[0].style.display="none",o.to_shadow&&(l||c)?(i=this.calcPercent(l?o.to_min:o.min),n=this.calcPercent(c?o.to_max:o.max)-i,i=this.toFixed(i-this.coords.p_handle/100*i),n=this.toFixed(n-this.coords.p_handle/100*n),i+=this.coords.p_handle/2,r.shad_to[0].style.display="block",r.shad_to[0].style.left=i+"%",r.shad_to[0].style.width=n+"%"):r.shad_to[0].style.display="none")},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input")},calcPercent:function(t){var e=(this.options.max-this.options.min)/100,i=(t-this.options.min)/e;return this.toFixed(i)},calcReal:function(t){var e,i,n=this.options.min,o=this.options.max,r=n.toString().split(".")[1],s=o.toString().split(".")[1],a=0,l=0;if(0===t)return this.options.min;if(100===t)return this.options.max;r&&(a=e=r.length),s&&(a=i=s.length),e&&i&&(a=e>=i?e:i),n<0&&(n=+(n+(l=Math.abs(n))).toFixed(a),o=+(o+l).toFixed(a));var c,h=(o-n)/100*t+n,d=this.options.step.toString().split(".")[1];return d?h=+h.toFixed(d.length):(h/=this.options.step,h=+(h*=this.options.step).toFixed(0)),l&&(h-=l),(c=d?+h.toFixed(d.length):this.toFixed(h))<this.options.min?c=this.options.min:c>this.options.max&&(c=this.options.max),c},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return e>100&&(e=100),100===t&&(e=100),this.toFixed(e)},checkMinInterval:function(t,e,i){var n,o,r=this.options;return r.min_interval?(n=this.calcReal(t),o=this.calcReal(e),"from"===i?o-n<r.min_interval&&(n=o-r.min_interval):n-o<r.min_interval&&(n=o+r.min_interval),this.calcPercent(n)):t},checkMaxInterval:function(t,e,i){var n,o,r=this.options;return r.max_interval?(n=this.calcReal(t),o=this.calcReal(e),"from"===i?o-n>r.max_interval&&(n=o-r.max_interval):n-o>r.max_interval&&(n=o+r.max_interval),this.calcPercent(n)):t},checkDiapason:function(t,e,i){var n=this.calcReal(t),o=this.options;return"number"!=typeof e&&(e=o.min),"number"!=typeof i&&(i=o.max),n<e&&(n=e),n>i&&(n=i),this.calcPercent(n)},toFixed:function(t){return+(t=t.toFixed(9))},_prettify:function(t){return this.options.prettify_enabled?this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(t):this.prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges?(t<0?t=0:t>100-e&&(t=100-e),this.toFixed(t)):this.toFixed(t)},validate:function(){var t,e,i=this.options,n=this.result,o=i.values,r=o.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.keyboard_step&&(i.keyboard_step=+i.keyboard_step),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<=i.min&&(i.min?i.max=2*i.min:i.max=i.min+1,i.step=1),r)for(i.p_values=[],i.min=0,i.max=r-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<r;e++)t=+o[e],isNaN(t)?t=o[e]:(o[e]=t,t=this._prettify(t)),i.p_values.push(t);("number"!=typeof i.from||isNaN(i.from))&&(i.from=i.min),("number"!=typeof i.to||isNaN(i.from))&&(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):((i.from<i.min||i.from>i.max)&&(i.from=i.min),(i.to>i.max||i.to<i.min)&&(i.to=i.max),i.from>i.to&&(i.from=i.to)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),("number"!=typeof i.keyboard_step||isNaN(i.keyboard_step)||!i.keyboard_step||i.keyboard_step<0)&&(i.keyboard_step=5),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),n&&(n.min!==i.min&&(n.min=i.min),n.max!==i.max&&(n.max=i.max),(n.from<n.min||n.from>n.max)&&(n.from=i.from),(n.to<n.min||n.to>n.max)&&(n.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",n=this.options;return n.prefix&&(i+=n.prefix),i+=t,n.max_postfix&&(n.values.length&&t===n.p_values[n.max]?(i+=n.max_postfix,n.postfix&&(i+=" ")):e===n.max&&(i+=n.max_postfix,n.postfix&&(i+=" "))),n.postfix&&(i+=n.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.calcPercent(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.calcPercent(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,n,o,r=this.options,s=r.max-r.min,a=r.grid_num,l=0,c=0,h=4,d="";for(this.calcGridMargin(),r.grid_snap?(a=s/r.step,l=this.toFixed(r.step/(s/100))):l=this.toFixed(100/a),a>4&&(h=3),a>7&&(h=2),a>14&&(h=1),a>28&&(h=0),t=0;t<a+1;t++){for(i=h,(c=this.toFixed(l*t))>100&&(c=100,(i-=2)<0&&(i=0)),this.coords.big[t]=c,n=(c-l*(t-1))/(i+1),e=1;e<=i&&0!==c;e++)d+='<span class="irs-grid-pol small" style="left: '+this.toFixed(c-n*e)+'%"></span>';d+='<span class="irs-grid-pol" style="left: '+c+'%"></span>',o=this.calcReal(c),d+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+c+'%">'+(o=r.values.length?r.p_values[o]:this._prettify(o))+"</span>"}this.coords.big_num=Math.ceil(a+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(d),this.cacheGridLabels()}},cacheGridLabels:function(){var t,e,i=this.coords.big_num;for(e=0;e<i;e++)t=this.$cache.grid.find(".js-grid-text-"+e),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){var t,e=[],i=[],n=this.coords.big_num;for(t=0;t<n;t++)this.coords.big_w[t]=this.$cache.grid_labels[t].outerWidth(!1),this.coords.big_p[t]=this.toFixed(this.coords.big_w[t]/this.coords.w_rs*100),this.coords.big_x[t]=this.toFixed(this.coords.big_p[t]/2),e[t]=this.toFixed(this.coords.big[t]-this.coords.big_x[t]),i[t]=this.toFixed(e[t]+this.coords.big_p[t]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,i[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),i[n-1]>100+this.coords.grid_gap&&(i[n-1]=100+this.coords.grid_gap,e[n-1]=this.toFixed(i[n-1]-this.coords.big_p[n-1]),this.coords.big_x[n-1]=this.toFixed(this.coords.big_p[n-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,i),this.calcGridCollision(4,e,i),t=0;t<n;t++)this.$cache.grid_labels[t][0].style.marginLeft=-this.coords.big_x[t]+"%"},calcGridCollision:function(t,e,i){var n,o,r,s=this.coords.big_num;for(n=0;n<s&&!((o=n+t/2)>=s);n+=t)r=this.$cache.grid_labels[o][0],i[n]<=e[o]?r.style.visibility="visible":r.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(e){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.options=t.extend(this.options,e),this.validate(),this.updateResult(e),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),t.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},t.fn.ionRangeSlider=function(e){return this.each(function(){t.data(this,"ionRangeSlider")||t.data(this,"ionRangeSlider",new c(this,e,a++))})},function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!i.requestAnimationFrame;++n)i.requestAnimationFrame=i[e[n]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[e[n]+"CancelAnimationFrame"]||i[e[n]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e,n){var o=(new Date).getTime(),r=Math.max(0,16-(o-t)),s=i.setTimeout(function(){e(o+r)},r);return t=o+r,s}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}()}(jQuery,document,window,navigator),function(t,e,i){var n=function(t,i){"use strict";var n=function(e,i){this.CLASS&&"ColVis"==this.CLASS||alert("Warning: ColVis must be initialised with the keyword 'new'"),void 0===i&&(i={});var o=t.fn.dataTable.camelToHungarian;return o&&(o(n.defaults,n.defaults,!0),o(n.defaults,i)),this.s={dt:null,oInit:i,hidden:!0,abOriginal:[]},this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null},n.aInstances.push(this),this.s.dt=t.fn.dataTable.Api?new t.fn.dataTable.Api(e).settings()[0]:e,this._fnConstruct(i),this};return n.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var t=this.dom.buttons.length-1;t>=0;t--)this.dom.collection.removeChild(this.dom.buttons[t]);this.dom.buttons.splice(0,this.dom.buttons.length),this.dom.groupButtons.splice(0,this.dom.groupButtons.length),this.dom.restore&&this.dom.restore.parentNode(this.dom.restore),this._fnAddGroups(),this._fnAddButtons(),this._fnDrawCallback()},_fnConstruct:function(i){this._fnApplyCustomisation(i);var n,o,r=this;for(this.dom.wrapper=e.createElement("div"),this.dom.wrapper.className="ColVis",this.dom.button=t("<button />",{class:this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton ui-button ui-state-default":"ColVis_Button ColVis_MasterButton"}).append("<span>"+this.s.buttonText+"</span>").bind("mouseover"==this.s.activate?"mouseover":"click",function(t){t.preventDefault(),r._fnCollectionShow()}).appendTo(this.dom.wrapper)[0],this.dom.catcher=this._fnDomCatcher(),this.dom.collection=this._fnDomCollection(),this.dom.background=this._fnDomBackground(),this._fnAddGroups(),this._fnAddButtons(),n=0,o=this.s.dt.aoColumns.length;n<o;n++)this.s.abOriginal.push(this.s.dt.aoColumns[n].bVisible);this.s.dt.aoDrawCallback.push({fn:function(){r._fnDrawCallback.call(r)},sName:"ColVis"}),t(this.s.dt.oInstance).bind("column-reorder.dt",function(t,e,i){for(n=0,o=r.s.aiExclude.length;n<o;n++)r.s.aiExclude[n]=i.aiInvertMapping[r.s.aiExclude[n]];var s=r.s.abOriginal.splice(i.iFrom,1)[0];r.s.abOriginal.splice(i.iTo,0,s),r.fnRebuild()}),t(this.s.dt.oInstance).bind("destroy.dt",function(){t(r.dom.wrapper).remove()}),this._fnDrawCallback()},_fnApplyCustomisation:function(e){t.extend(!0,this.s,n.defaults,e),!this.s.showAll&&this.s.bShowAll&&(this.s.showAll=this.s.sShowAll),!this.s.restore&&this.s.bRestore&&(this.s.restore=this.s.sRestore);var i=this.s.groups,o=this.s.aoGroups;if(i)for(var r=0,s=i.length;r<s;r++)i[r].title&&(o[r].sTitle=i[r].title),i[r].columns&&(o[r].aiColumns=i[r].columns)},_fnDrawCallback:function(){for(var e,i=this.s.dt.aoColumns,n=this.dom.buttons,o=this.s.aoGroups,r=0,s=n.length;r<s;r++)void 0!==(e=n[r]).__columnIdx&&t("input",e).prop("checked",i[e.__columnIdx].bVisible);for(var a=function(t){for(var e=0,n=t.length;e<n;e++)if(!1===i[t[e]].bVisible)return!1;return!0},l=function(t){for(var e=0,n=t.length;e<n;e++)if(!0===i[t[e]].bVisible)return!1;return!0},c=0,h=o.length;c<h;c++)a(o[c].aiColumns)?(t("input",this.dom.groupButtons[c]).prop("checked",!0),t("input",this.dom.groupButtons[c]).prop("indeterminate",!1)):l(o[c].aiColumns)?(t("input",this.dom.groupButtons[c]).prop("checked",!1),t("input",this.dom.groupButtons[c]).prop("indeterminate",!1)):t("input",this.dom.groupButtons[c]).prop("indeterminate",!0)},_fnAddGroups:function(){var t;if(void 0!==this.s.aoGroups)for(var e=0,i=this.s.aoGroups.length;e<i;e++)t=this._fnDomGroupButton(e),this.dom.groupButtons.push(t),this.dom.buttons.push(t),this.dom.collection.appendChild(t)},_fnAddButtons:function(){var e,i=this.s.dt.aoColumns;if(-1===t.inArray("all",this.s.aiExclude))for(var n=0,o=i.length;n<o;n++)-1===t.inArray(n,this.s.aiExclude)&&((e=this._fnDomColumnButton(n)).__columnIdx=n,this.dom.buttons.push(e));"alpha"===this.s.order&&this.dom.buttons.sort(function(t,e){var n=i[t.__columnIdx].sTitle,o=i[e.__columnIdx].sTitle;return n===o?0:n<o?-1:1}),this.s.restore&&((e=this._fnDomRestoreButton()).className+=" ColVis_Restore",this.dom.buttons.push(e)),this.s.showAll&&((e=this._fnDomShowXButton(this.s.showAll,!0)).className+=" ColVis_ShowAll",this.dom.buttons.push(e)),this.s.showNone&&((e=this._fnDomShowXButton(this.s.showNone,!1)).className+=" ColVis_ShowNone",this.dom.buttons.push(e)),t(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var e=this,i=this.s.dt;return t('<li class="ColVis_Special '+(i.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click(function(t){for(var i=0,n=e.s.abOriginal.length;i<n;i++)e.s.dt.oInstance.fnSetColumnVis(i,e.s.abOriginal[i],!1);e._fnAdjustOpenRows(),e.s.dt.oInstance.fnAdjustColumnSizing(!1),e.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomShowXButton:function(e,i){var n=this,o=this.s.dt;return t('<li class="ColVis_Special '+(o.bJUI?"ui-button ui-state-default":"")+'">'+e+"</li>").click(function(t){for(var e=0,o=n.s.abOriginal.length;e<o;e++)-1===n.s.aiExclude.indexOf(e)&&n.s.dt.oInstance.fnSetColumnVis(e,i,!1);n._fnAdjustOpenRows(),n.s.dt.oInstance.fnAdjustColumnSizing(!1),n.s.dt.oInstance.fnDraw(!1)})[0]},_fnDomGroupButton:function(e){var i=this,n=this.s.dt,o=this.s.aoGroups[e];return t('<li class="ColVis_Special '+(n.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+o.sTitle+"</span></label></li>").click(function(e){var n=!t("input",this).is(":checked");"li"!==e.target.nodeName.toLowerCase()&&(n=!n);for(var r=0;r<o.aiColumns.length;r++)i.s.dt.oInstance.fnSetColumnVis(o.aiColumns[r],n)})[0]},_fnDomColumnButton:function(e){var i=this,n=this.s.dt.aoColumns[e],o=this.s.dt,r=null===this.s.fnLabel?n.sTitle:this.s.fnLabel(e,n.sTitle,n.nTh);return t("<li "+(o.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+r+"</span></label></li>").click(function(n){var r=!t("input",this).is(":checked");"li"!==n.target.nodeName.toLowerCase()&&("input"!=n.target.nodeName.toLowerCase()&&null!==i.s.fnStateChange||(r=!r));var s=t.fn.dataTableExt.iApiIndex;t.fn.dataTableExt.iApiIndex=i._fnDataTablesApiIndex.call(i),o.oFeatures.bServerSide?(i.s.dt.oInstance.fnSetColumnVis(e,r,!1),i.s.dt.oInstance.fnAdjustColumnSizing(!1),""===o.oScroll.sX&&""===o.oScroll.sY||i.s.dt.oInstance.oApi._fnScrollDraw(i.s.dt),i._fnDrawCallback()):i.s.dt.oInstance.fnSetColumnVis(e,r),t.fn.dataTableExt.iApiIndex=s,null!==i.s.fnStateChange&&("span"==n.target.nodeName.toLowerCase()&&n.preventDefault(),i.s.fnStateChange.call(i,e,r))})[0]},_fnDataTablesApiIndex:function(){for(var t=0,e=this.s.dt.oInstance.length;t<e;t++)if(this.s.dt.oInstance[t]==this.s.dt.nTable)return t;return 0},_fnDomCollection:function(){return t("<ul />",{class:this.s.dt.bJUI?"ColVis_collection ui-buttonset ui-buttonset-multi":"ColVis_collection"}).css({display:"none",opacity:0,position:this.s.bCssPosition?"":"absolute"})[0]},_fnDomCatcher:function(){var i=this,n=e.createElement("div");return n.className="ColVis_catcher",t(n).click(function(){i._fnCollectionHide.call(i,null,null)}),n},_fnDomBackground:function(){var e=this,i=t("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){e._fnCollectionHide.call(e,null,null)});return"mouseover"==this.s.activate&&i.mouseover(function(){e.s.overcollection=!1,e._fnCollectionHide.call(e,null,null)}),i[0]},_fnCollectionShow:function(){var i,n=this,o=t(this.dom.button).offset(),r=this.dom.collection,s=this.dom.background,a=parseInt(o.left,10),l=parseInt(o.top+t(this.dom.button).outerHeight(),10);this.s.bCssPosition||(r.style.top=l+"px",r.style.left=a+"px"),t(r).css({display:"block",opacity:0}),s.style.bottom="0px",s.style.right="0px";var c=this.dom.catcher.style;if(c.height=t(this.dom.button).outerHeight()+"px",c.width=t(this.dom.button).outerWidth()+"px",c.top=o.top+"px",c.left=a+"px",e.body.appendChild(s),e.body.appendChild(r),e.body.appendChild(this.dom.catcher),t(r).animate({opacity:1},n.s.iOverlayFade),t(s).animate({opacity:.1},n.s.iOverlayFade,"linear",function(){t.browser&&t.browser.msie&&"6.0"==t.browser.version&&n._fnDrawCallback()}),!this.s.bCssPosition){i="left"==this.s.sAlign?a:a-t(r).outerWidth()+t(this.dom.button).outerWidth(),r.style.left=i+"px";var h=t(r).outerWidth(),d=(t(r).outerHeight(),t(e).width());i+h>d&&(r.style.left=d-h+"px")}this.s.hidden=!1},_fnCollectionHide:function(){var i=this;this.s.hidden||null===this.dom.collection||(this.s.hidden=!0,t(this.dom.collection).animate({opacity:0},i.s.iOverlayFade,function(t){this.style.display="none"}),t(this.dom.background).animate({opacity:0},i.s.iOverlayFade,function(t){e.body.removeChild(i.dom.background),e.body.removeChild(i.dom.catcher)}))},_fnAdjustOpenRows:function(){for(var t=this.s.dt.aoOpenRows,e=this.s.dt.oApi._fnVisbleColumns(this.s.dt),i=0,n=t.length;i<n;i++)t[i].nTr.getElementsByTagName("td")[0].colSpan=e}},n.fnRebuild=function(e){var i=null;void 0!==e&&(i=t.fn.dataTable.Api?new t.fn.dataTable.Api(e).table().node():e.fnSettings().nTable);for(var o=0,r=n.aInstances.length;o<r;o++)void 0!==e&&i!=n.aInstances[o].s.dt.nTable||n.aInstances[o].fnRebuild()},n.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:!1,sRestore:"Restore original",bShowAll:!1,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:!1,aoGroups:[],order:"column"},n.aInstances=[],n.prototype.CLASS="ColVis",n.VERSION="1.1.2",n.prototype.VERSION=n.VERSION,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.7.0")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInit;return new n(t,e.colVis||e.oColVis||{}).button()},cFeature:"C",sFeature:"ColVis"}):alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download"),t.fn.dataTable.ColVis=n,t.fn.DataTable.ColVis=n,n};"function"==typeof define&&define.amd?define(["jquery","datatables"],n):"object"==typeof exports?n(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColVis&&n(jQuery,jQuery.fn.dataTable)}(window,document),function(t){t.fn.rating=function(){var e;function i(e,i,n,o){var r=t(e).find('[data-value="'+i+'"]');r.removeClass(o).addClass(n),r.prevAll("[data-value]").removeClass(o).addClass(n),r.nextAll("[data-value]").removeClass(n).addClass(o)}function n(e,i,n){t(e).find("[data-value]").removeClass(i).addClass(n)}function o(t,e){t.val(e).trigger("change"),e===t.data("empty-value")?t.siblings(".rating-clear").hide():t.siblings(".rating-clear").show()}for(e=this.length-1;e>=0;e--){var r,s,a=t(this[e]),l=a.data("max")||5,c=a.data("min")||0,h=a.val()||0,d=a.data("icon-lib")||"glyphicon";for(active=a.data("active-icon")||"glyphicon-star",inactive=a.data("inactive-icon")||"glyphicon-star-empty",clearable=a.data("clearable")||null,clearable_i=a.data("clearable-icon")||"glyphicon-remove",stars="",s=c;s<=l;s++)stars+=s<=h?['<i class="',d," ",active,'" data-value="',s,'"></i>'].join(""):['<i class="',d," ",inactive,'" data-value="',s,'"></i>'].join("");clearable&&(stars+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="',d," ",clearable_i,'"></span> ',clearable,"</a>"].join(""));var u=a.clone(!0).addClass("hidden").data("max",l).data("min",c).data("icon-lib",d).data("active-icon",active).data("inactive-icon",inactive);r=['<div class="rating-input">',stars,"</div>"].join(""),a.parents(".rating-input").length<=0&&a.replaceWith(t(r).append(u))}t(".rating-input").on("mouseenter","[data-value]",function(){var e=t(this);input=e.siblings("input"),i(e.closest(".rating-input"),e.data("value"),input.data("active-icon"),input.data("inactive-icon"))}).on("mouseleave","[data-value]",function(){var e=t(this),o=e.siblings("input"),r=o.val(),s=o.data("min"),a=o.data("max"),l=o.data("active-icon"),c=o.data("inactive-icon");r>=s&&r<=a?i(e.closest(".rating-input"),r,l,c):n(e.closest(".rating-input"),l,c)}).on("click","[data-value]",function(e){var i=t(this),n=i.data("value");return o(i.siblings("input"),n),e.preventDefault(),!1}).on("click",".rating-clear",function(e){var i=t(this),r=i.siblings("input"),s=r.data("active-icon"),a=r.data("inactive-icon");return o(r,r.data("empty-value")),n(i.closest(".rating-input"),s,a),e.preventDefault(),!1}).each(function(){var e=t(this).find("input"),o=e.val(),r=e.data("min"),s=e.data("max");""!==o&&+o>=r&&+o<=s?(i(this,o),t(this).find(".rating-clear").show()):(e.val(e.data("empty-value")),n(this))})},t(function(){t("input.rating[type=number]").length>0&&t("input.rating[type=number]").rating()})}(jQuery),function(){"use strict";var t,e;t=jQuery,(e=function(e,i){var n,o,r=this;return this.options=t.extend({title:null,footer:null,remote:null},t.fn.ekkoLightbox.defaults,i||{}),this.$element=t(e),"",this.modal_id=this.options.modal_id?this.options.modal_id:"ekkoLightbox-"+Math.floor(1e3*Math.random()+1),o='<div class="modal-header"'+(this.options.title||this.options.always_show_close?"":' style="display:none"')+'><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+(this.options.title||"&nbsp;")+"</h4></div>",n='<div class="modal-footer"'+(this.options.footer?"":' style="display:none"')+">"+this.options.footer+"</div>",t(document.body).append('<div id="'+this.modal_id+'" class="ekko-lightbox modal fade" tabindex="-1"><div class="modal-dialog"><div class="modal-content">'+o+'<div class="modal-body"><div class="ekko-lightbox-container"><div></div></div></div>'+n+"</div></div></div>"),this.modal=t("#"+this.modal_id),this.modal_dialog=this.modal.find(".modal-dialog").first(),this.modal_content=this.modal.find(".modal-content").first(),this.modal_body=this.modal.find(".modal-body").first(),this.lightbox_container=this.modal_body.find(".ekko-lightbox-container").first(),this.lightbox_body=this.lightbox_container.find("> div:first-child").first(),this.showLoading(),this.modal_arrows=null,this.border={top:parseFloat(this.modal_dialog.css("border-top-width"))+parseFloat(this.modal_content.css("border-top-width"))+parseFloat(this.modal_body.css("border-top-width")),right:parseFloat(this.modal_dialog.css("border-right-width"))+parseFloat(this.modal_content.css("border-right-width"))+parseFloat(this.modal_body.css("border-right-width")),bottom:parseFloat(this.modal_dialog.css("border-bottom-width"))+parseFloat(this.modal_content.css("border-bottom-width"))+parseFloat(this.modal_body.css("border-bottom-width")),left:parseFloat(this.modal_dialog.css("border-left-width"))+parseFloat(this.modal_content.css("border-left-width"))+parseFloat(this.modal_body.css("border-left-width"))},this.padding={top:parseFloat(this.modal_dialog.css("padding-top"))+parseFloat(this.modal_content.css("padding-top"))+parseFloat(this.modal_body.css("padding-top")),right:parseFloat(this.modal_dialog.css("padding-right"))+parseFloat(this.modal_content.css("padding-right"))+parseFloat(this.modal_body.css("padding-right")),bottom:parseFloat(this.modal_dialog.css("padding-bottom"))+parseFloat(this.modal_content.css("padding-bottom"))+parseFloat(this.modal_body.css("padding-bottom")),left:parseFloat(this.modal_dialog.css("padding-left"))+parseFloat(this.modal_content.css("padding-left"))+parseFloat(this.modal_body.css("padding-left"))},this.modal.on("show.bs.modal",this.options.onShow.bind(this)).on("shown.bs.modal",function(){return r.modal_shown(),r.options.onShown.call(r)}).on("hide.bs.modal",this.options.onHide.bind(this)).on("hidden.bs.modal",function(){return r.gallery&&t(document).off("keydown.ekkoLightbox"),r.modal.remove(),r.options.onHidden.call(r)}).modal("show",i),this.modal}).prototype={modal_shown:function(){var e,i=this;return this.options.remote?(this.gallery=this.$element.data("gallery"),this.gallery&&("document.body"===this.options.gallery_parent_selector||""===this.options.gallery_parent_selector?this.gallery_items=t(document.body).find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]'):this.gallery_items=this.$element.parents(this.options.gallery_parent_selector).first().find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]'),this.gallery_index=this.gallery_items.index(this.$element),t(document).on("keydown.ekkoLightbox",this.navigate.bind(this)),this.options.directional_arrows&&this.gallery_items.length>1&&(this.lightbox_container.prepend('<div class="ekko-lightbox-nav-overlay"><a href="#" class="'+this.strip_stops(this.options.left_arrow_class)+'"></a><a href="#" class="'+this.strip_stops(this.options.right_arrow_class)+'"></a></div>'),this.modal_arrows=this.lightbox_container.find("div.ekko-lightbox-nav-overlay").first(),this.lightbox_container.find("a"+this.strip_spaces(this.options.left_arrow_class)).on("click",function(t){return t.preventDefault(),i.navigate_left()}),this.lightbox_container.find("a"+this.strip_spaces(this.options.right_arrow_class)).on("click",function(t){return t.preventDefault(),i.navigate_right()}))),this.options.type?"image"===this.options.type?this.preloadImage(this.options.remote,!0):"youtube"===this.options.type&&(e=this.getYoutubeId(this.options.remote))?this.showYoutubeVideo(e):"vimeo"===this.options.type?this.showVimeoVideo(this.options.remote):"instagram"===this.options.type?this.showInstagramVideo(this.options.remote):"url"===this.options.type?this.showInstagramVideo(this.options.remote):this.error('Could not detect remote target type. Force the type using data-type="image|youtube|vimeo|url"'):this.detectRemoteType(this.options.remote)):this.error("No remote target given")},strip_stops:function(t){return t.replace(/\./g,"")},strip_spaces:function(t){return t.replace(/\s/g,"")},isImage:function(t){return t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSwf:function(t){return t.match(/\.(swf)((\?|#).*)?$/i)},getYoutubeId:function(t){var e;return!(!(e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/))||11!==e[2].length)&&e[2]},getVimeoId:function(t){return t.indexOf("vimeo")>0&&t},getInstagramId:function(t){return t.indexOf("instagram")>0&&t},navigate:function(t){if(39===(t=t||window.event).keyCode||37===t.keyCode){if(39===t.keyCode)return this.navigate_right();if(37===t.keyCode)return this.navigate_left()}},navigateTo:function(e){var i,n;return e<0||e>this.gallery_items.length-1?this:(this.showLoading(),this.gallery_index=e,this.options.onNavigate.call(this,this.gallery_index),this.$element=t(this.gallery_items.get(this.gallery_index)),this.updateTitleAndFooter(),n=this.$element.attr("data-remote")||this.$element.attr("href"),this.detectRemoteType(n,this.$element.attr("data-type")||!1),this.gallery_index+1<this.gallery_items.length&&(n=(i=t(this.gallery_items.get(this.gallery_index+1),!1)).attr("data-remote")||i.attr("href"),"image"===i.attr("data-type")||this.isImage(n))?this.preloadImage(n,!1):void 0)},navigate_left:function(){if(1!==this.gallery_items.length)return 0===this.gallery_index?this.gallery_index=this.gallery_items.length-1:this.gallery_index--,this.options.onNavigate.call(this,"left",this.gallery_index),this.navigateTo(this.gallery_index)},navigate_right:function(){if(1!==this.gallery_items.length)return this.gallery_index===this.gallery_items.length-1?this.gallery_index=0:this.gallery_index++,this.options.onNavigate.call(this,"right",this.gallery_index),this.navigateTo(this.gallery_index)},detectRemoteType:function(t,e){var i;return"image"===e||this.isImage(t)?(this.options.type="image",this.preloadImage(t,!0)):"youtube"===e||(i=this.getYoutubeId(t))?(this.options.type="youtube",this.showYoutubeVideo(i)):"vimeo"===e||(i=this.getVimeoId(t))?(this.options.type="vimeo",this.showVimeoVideo(i)):"instagram"===e||(i=this.getInstagramId(t))?(this.options.type="instagram",this.showInstagramVideo(i)):"url"===e||(i=this.getInstagramId(t))?(this.options.type="instagram",this.showInstagramVideo(i)):(this.options.type="url",this.loadRemoteContent(t))},updateTitleAndFooter:function(){var t,e,i,n;return i=this.modal_content.find(".modal-header"),e=this.modal_content.find(".modal-footer"),n=this.$element.data("title")||"",t=this.$element.data("footer")||"",n||this.options.always_show_close?i.css("display","").find(".modal-title").html(n||"&nbsp;"):i.css("display","none"),t?e.css("display","").html(t):e.css("display","none"),this},showLoading:function(){return this.lightbox_body.html('<div class="modal-loading">Loading..</div>'),this},showYoutubeVideo:function(t){var e,i;if(560/315,i=this.$element.data("width")||560,e=(i=this.checkDimensions(i))/(560/315),this.resize(i),this.lightbox_body.html('<iframe width="'+i+'" height="'+e+'" src="//www.youtube.com/embed/'+t+'?badge=0&autoplay=1&html5=1" frameborder="0" allowfullscreen></iframe>'),this.options.onContentLoaded.call(this),this.modal_arrows)return this.modal_arrows.css("display","none")},showVimeoVideo:function(t){var e,i;if(500/281,i=this.$element.data("width")||560,e=(i=this.checkDimensions(i))/(500/281),this.resize(i),this.lightbox_body.html('<iframe width="'+i+'" height="'+e+'" src="'+t+'?autoplay=1" frameborder="0" allowfullscreen></iframe>'),this.options.onContentLoaded.call(this),this.modal_arrows)return this.modal_arrows.css("display","none")},showInstagramVideo:function(t){var e;if(e=this.$element.data("width")||612,e=this.checkDimensions(e),this.resize(e),this.lightbox_body.html('<iframe width="'+e+'" height="'+e+'" src="'+this.addTrailingSlash(t)+'embed/" frameborder="0" allowfullscreen></iframe>'),this.options.onContentLoaded.call(this),this.modal_arrows)return this.modal_arrows.css("display","none")},loadRemoteContent:function(e){var i,n=this;if(i=this.$element.data("width")||560,this.resize(i),this.$element.data("disableExternalCheck")||!1||this.isExternal(e)?(this.lightbox_body.html('<iframe width="'+i+'" height="'+i+'" src="'+e+'" frameborder="0" allowfullscreen></iframe>'),this.options.onContentLoaded.call(this)):this.lightbox_body.load(e,t.proxy(function(){return n.$element.trigger("loaded.bs.modal")})),this.modal_arrows)return this.modal_arrows.css("display","block")},isExternal:function(t){var e;return"string"==typeof(e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/))[1]&&e[1].length>0&&e[1].toLowerCase()!==location.protocol||"string"==typeof e[2]&&e[2].length>0&&e[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host},error:function(t){return this.lightbox_body.html(t),this},preloadImage:function(e,i){var n,o=this;return n=new Image,null!=i&&!0!==i||(n.onload=function(){var e;return(e=t("<img />")).attr("src",n.src),e.addClass("img-responsive"),o.lightbox_body.html(e),o.modal_arrows&&o.modal_arrows.css("display","block"),o.resize(n.width),o.options.onContentLoaded.call(o)},n.onerror=function(){return o.error("Failed to load image: "+e)}),n.src=e,n},resize:function(e){var i;return i=e+this.border.left+this.padding.left+this.padding.right+this.border.right,this.modal_dialog.css("width","auto").css("max-width",i),this.lightbox_container.find("a").css("line-height",function(){return t(this).parent().height()+"px"}),this},checkDimensions:function(t){return t+this.border.left+this.padding.left+this.padding.right+this.border.right>document.body.clientWidth&&(t=this.modal_body.width()),t},close:function(){return this.modal.modal("hide")},addTrailingSlash:function(t){return"/"!==t.substr(-1)&&(t+="/"),t}},t.fn.ekkoLightbox=function(i){return this.each(function(){var n;return n=t(this),i=t.extend({remote:n.attr("data-remote")||n.attr("href"),gallery_parent_selector:n.attr("data-parent"),type:n.attr("data-type")},i,n.data()),new e(this,i),this})},t.fn.ekkoLightbox.defaults={gallery_parent_selector:"*:not(.row)",left_arrow_class:".glyphicon .glyphicon-chevron-left",right_arrow_class:".glyphicon .glyphicon-chevron-right",directional_arrows:!0,type:null,always_show_close:!0,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}}}.call(this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){var e=/\+/g;function i(t){return r.raw?t:encodeURIComponent(t)}function n(t){return i(r.json?JSON.stringify(t):String(t))}function o(i,n){var o=r.raw?i:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(e," ")),r.json?JSON.parse(t):t}catch(t){}}(i);return t.isFunction(n)?n(o):o}var r=t.cookie=function(e,s,a){if(void 0!==s&&!t.isFunction(s)){if("number"==typeof(a=t.extend({},r.defaults,a)).expires){var l=a.expires,c=a.expires=new Date;c.setTime(+c+864e5*l)}return document.cookie=[i(e),"=",n(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var h,d=e?void 0:{},u=document.cookie?document.cookie.split("; "):[],p=0,f=u.length;p<f;p++){var g=u[p].split("="),m=(h=g.shift(),r.raw?h:decodeURIComponent(h)),v=g.join("=");if(e&&e===m){d=o(v,s);break}e||void 0===(v=o(v))||(d[m]=v)}return d};r.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),function(t){t.color={},t.color.make=function(e,i,n,o){var r={};return r.r=e||0,r.g=i||0,r.b=n||0,r.a=null!=o?o:1,r.add=function(t,e){for(var i=0;i<t.length;++i)r[t.charAt(i)]+=e;return r.normalize()},r.scale=function(t,e){for(var i=0;i<t.length;++i)r[t.charAt(i)]*=e;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return r.r=t(0,parseInt(r.r),255),r.g=t(0,parseInt(r.g),255),r.b=t(0,parseInt(r.b),255),r.a=t(0,r.a,1),r},r.clone=function(){return t.color.make(r.r,r.b,r.g,r.a)},r.normalize()},t.color.extract=function(e,i){var n;do{if(""!=(n=e.css(i).toLowerCase())&&"transparent"!=n)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,o=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return o(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return o(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var r=t.trim(i).toLowerCase();return"transparent"==r?o(255,255,255,0):o((n=e[r]||[0,0,0])[0],n[1],n[2])};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){var e=Object.prototype.hasOwnProperty;function i(e,i){var n=i.children("."+e)[0];if(null==n&&((n=document.createElement("canvas")).className=e,t(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var o=this.context=n.getContext("2d"),r=window.devicePixelRatio||1,s=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;this.pixelRatio=r/s,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function n(e,n,o,r){var s=[],a={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,h=null,d=null,u=null,p=[],f=[],g={left:0,right:0,top:0,bottom:0},m=0,v=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},y=this;function w(t,e){e=[y].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function x(e){s=function(e){for(var i=[],n=0;n<e.length;++n){var o=t.extend(!0,{},a.series);null!=e[n].data?(o.data=e[n].data,delete e[n].data,t.extend(!0,o,e[n]),e[n].data=o.data):o.data=e[n],i.push(o)}return i}(e),function(){var e,i=s.length,n=-1;for(e=0;e<s.length;++e){var o=s[e].color;null!=o&&(i--,"number"==typeof o&&o>n&&(n=o))}i<=n&&(i=n+1);var r,l=[],c=a.colors,h=c.length,d=0;for(e=0;e<i;e++)r=t.color.parse(c[e%h]||"#666"),e%h==0&&e&&(d=d>=0?d<.5?-d-.2:0:-d),l[e]=r.scale("rgb",1+d);var u,g=0;for(e=0;e<s.length;++e){if(null==(u=s[e]).color?(u.color=l[g].toString(),++g):"number"==typeof u.color&&(u.color=l[u.color].toString()),null==u.lines.show){var m,v=!0;for(m in u)if(u[m]&&u[m].show){v=!1;break}v&&(u.lines.show=!0)}null==u.lines.zero&&(u.lines.zero=!!u.lines.fill),u.xaxis=D(p,_(u,"x")),u.yaxis=D(f,_(u,"y"))}}(),function(){var e,i,n,o,r,a,l,c,h,d,u,p,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=Number.MAX_VALUE;function v(t,e,i){e<t.datamin&&e!=-m&&(t.datamin=e),i>t.datamax&&i!=m&&(t.datamax=i)}for(t.each(C(),function(t,e){e.datamin=f,e.datamax=g,e.used=!1}),e=0;e<s.length;++e)(r=s[e]).datapoints={points:[]},w(b.processRawData,[r,r.data,r.datapoints]);for(e=0;e<s.length;++e){if(r=s[e],u=r.data,!(p=r.datapoints.format)){if((p=[]).push({x:!0,number:!0,required:!0}),p.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var y=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:y}),r.bars.horizontal&&(delete p[p.length-1].y,p[p.length-1].x=!0)}r.datapoints.format=p}if(null==r.datapoints.pointsize){r.datapoints.pointsize=p.length,l=r.datapoints.pointsize,a=r.datapoints.points;var x=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,i=n=0;i<u.length;++i,n+=l){var _=null==(d=u[i]);if(!_)for(o=0;o<l;++o)c=d[o],(h=p[o])&&(h.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=m:c==-1/0&&(c=-m)),null==c&&(h.required&&(_=!0),null!=h.defaultValue&&(c=h.defaultValue))),a[n+o]=c;if(_)for(o=0;o<l;++o)null!=(c=a[n+o])&&!1!==(h=p[o]).autoscale&&(h.x&&v(r.xaxis,c,c),h.y&&v(r.yaxis,c,c)),a[n+o]=null;else if(x&&n>0&&null!=a[n-l]&&a[n-l]!=a[n]&&a[n-l+1]!=a[n+1]){for(o=0;o<l;++o)a[n+l+o]=a[n+o];a[n+1]=a[n-l+1],n+=l}}}}for(e=0;e<s.length;++e)r=s[e],w(b.processDatapoints,[r,r.datapoints]);for(e=0;e<s.length;++e){r=s[e],a=r.datapoints.points,l=r.datapoints.pointsize,p=r.datapoints.format;var S=f,D=f,k=g,T=g;for(i=0;i<a.length;i+=l)if(null!=a[i])for(o=0;o<l;++o)c=a[i+o],(h=p[o])&&!1!==h.autoscale&&c!=m&&c!=-m&&(h.x&&(c<S&&(S=c),c>k&&(k=c)),h.y&&(c<D&&(D=c),c>T&&(T=c)));if(r.bars.show){var E;switch(r.bars.align){case"left":E=0;break;case"right":E=-r.bars.barWidth;break;default:E=-r.bars.barWidth/2}r.bars.horizontal?(D+=E,T+=E+r.bars.barWidth):(S+=E,k+=E+r.bars.barWidth)}v(r.xaxis,S,k),v(r.yaxis,D,T)}t.each(C(),function(t,e){e.datamin==f&&(e.datamin=null),e.datamax==g&&(e.datamax=null)})}()}function _(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function C(){return t.grep(p.concat(f),function(t){return t})}function S(t){var e,i,n={};for(e=0;e<p.length;++e)(i=p[e])&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<f.length;++e)(i=f[e])&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function D(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==p?"x":"y",options:t.extend(!0,{},e==p?a.xaxis:a.yaxis)}),e[i-1]}function k(){N&&clearTimeout(N),h.unbind("mousemove",H),h.unbind("mouseleave",L),h.unbind("click",z),w(b.shutdown,[h])}function T(e){var i=e.labelWidth,n=e.labelHeight,o=e.options.position,r="x"===e.direction,s=e.options.tickLength,c=a.grid.axisMargin,h=a.grid.labelMargin,d=!0,u=!0,m=!0,v=!1;t.each(r?p:f,function(t,i){i&&(i.show||i.reserveSpace)&&(i===e?v=!0:i.options.position===o&&(v?u=!1:d=!1),v||(m=!1))}),u&&(c=0),null==s&&(s=m?"full":5),isNaN(+s)||(h+=+s),r?(n+=h,"bottom"==o?(g.bottom+=n+c,e.box={top:l.height-g.bottom,height:n}):(e.box={top:g.top+c,height:n},g.top+=n+c)):(i+=h,"left"==o?(e.box={left:g.left+c,width:i},g.left+=i+c):(g.right+=i+c,e.box={left:l.width-g.right,width:i})),e.position=o,e.tickLength=s,e.box.padding=h,e.innermost=d}function E(){var i,n=C(),o=a.grid.show;for(var r in g){var c=a.grid.margin||0;g[r]="number"==typeof c?c:c[r]||0}for(var r in w(b.processOffset,[g]),g)"object"==typeof a.grid.borderWidth?g[r]+=o?a.grid.borderWidth[r]:0:g[r]+=o?a.grid.borderWidth:0;if(t.each(n,function(t,e){var i=e.options;e.show=null==i.show?e.used:i.show,e.reserveSpace=null==i.reserveSpace?e.show:i.reserveSpace,function(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),o=n-i;if(0==o){var r=0==n?1:.01;null==e.min&&(i-=r),null!=e.max&&null==e.min||(n+=r)}else{var s=e.autoscaleMargin;null!=s&&(null==e.min&&(i-=o*s)<0&&null!=t.datamin&&t.datamin>=0&&(i=0),null==e.max&&(n+=o*s)>0&&null!=t.datamax&&t.datamax<=0&&(n=0))}t.min=i,t.max=n}(e)}),o){var h=t.grep(n,function(t){return t.show||t.reserveSpace});for(t.each(h,function(e,i){!function(e){var i,n=e.options;i="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==e.direction?l.width:l.height);var o=(e.max-e.min)/i,r=-Math.floor(Math.log(o)/Math.LN10),s=n.tickDecimals;null!=s&&r>s&&(r=s);var a,c=Math.pow(10,-r),h=o/c;h<1.5?a=1:h<3?(a=2,h>2.25&&(null==s||r+1<=s)&&(a=2.5,++r)):a=h<7.5?5:10;a*=c,null!=n.minTickSize&&a<n.minTickSize&&(a=n.minTickSize);if(e.delta=o,e.tickDecimals=Math.max(0,null!=s?s:r),e.tickSize=n.tickSize||a,"time"==n.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");e.tickGenerator||(e.tickGenerator=function(t){var e,i,n,o=[],r=(i=t.min,(n=t.tickSize)*Math.floor(i/n)),s=0,a=Number.NaN;do{e=a,a=r+s*t.tickSize,o.push(a),++s}while(a<t.max&&a!=e);return o},e.tickFormatter=function(t,e){var i=e.tickDecimals?Math.pow(10,e.tickDecimals):1,n=""+Math.round(t*i)/i;if(null!=e.tickDecimals){var o=n.indexOf("."),r=-1==o?0:n.length-o-1;if(r<e.tickDecimals)return(r?n:n+".")+(""+i).substr(1,e.tickDecimals-r)}return n});t.isFunction(n.tickFormatter)&&(e.tickFormatter=function(t,e){return""+n.tickFormatter(t,e)});if(null!=n.alignTicksWithAxis){var d=("x"==e.direction?p:f)[n.alignTicksWithAxis-1];if(d&&d.used&&d!=e){var u=e.tickGenerator(e);if(u.length>0&&(null==n.min&&(e.min=Math.min(e.min,u[0])),null==n.max&&u.length>1&&(e.max=Math.max(e.max,u[u.length-1]))),e.tickGenerator=function(t){var e,i,n=[];for(i=0;i<d.ticks.length;++i)e=(d.ticks[i].v-d.min)/(d.max-d.min),e=t.min+e*(t.max-t.min),n.push(e);return n},!e.mode&&null==n.tickDecimals){var g=Math.max(0,1-Math.floor(Math.log(e.delta)/Math.LN10)),m=e.tickGenerator(e);m.length>1&&/\..*0$/.test((m[1]-m[0]).toFixed(g))||(e.tickDecimals=g)}}}}(i),function(e){var i,n,o=e.options.ticks,r=[];null==o||"number"==typeof o&&o>0?r=e.tickGenerator(e):o&&(r=t.isFunction(o)?o(e):o);for(e.ticks=[],i=0;i<r.length;++i){var s=null,a=r[i];"object"==typeof a?(n=+a[0],a.length>1&&(s=a[1])):n=+a,null==s&&(s=e.tickFormatter(n,e)),isNaN(n)||e.ticks.push({v:n,label:s})}}(i),function(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}(i,i.ticks),function(t){for(var e=t.options,i=t.ticks||[],n=e.labelWidth||0,o=e.labelHeight||0,r=n||("x"==t.direction?Math.floor(l.width/(i.length||1)):null),s=t.direction+"Axis "+t.direction+t.n+"Axis",a="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+s,c=e.font||"flot-tick-label tickLabel",h=0;h<i.length;++h){var d=i[h];if(d.label){var u=l.getTextInfo(a,d.label,c,null,r);n=Math.max(n,u.width),o=Math.max(o,u.height)}}t.labelWidth=e.labelWidth||n,t.labelHeight=e.labelHeight||o}(i)}),i=h.length-1;i>=0;--i)T(h[i]);!function(){var e,i=a.grid.minBorderMargin;if(null==i)for(i=0,e=0;e<s.length;++e)i=Math.max(i,2*(s[e].points.radius+s[e].points.lineWidth/2));var n={left:i,right:i,top:i,bottom:i};t.each(C(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(n.left=Math.max(n.left,e.labelWidth/2),n.right=Math.max(n.right,e.labelWidth/2)):(n.bottom=Math.max(n.bottom,e.labelHeight/2),n.top=Math.max(n.top,e.labelHeight/2)))}),g.left=Math.ceil(Math.max(n.left,g.left)),g.right=Math.ceil(Math.max(n.right,g.right)),g.top=Math.ceil(Math.max(n.top,g.top)),g.bottom=Math.ceil(Math.max(n.bottom,g.bottom))}(),t.each(h,function(t,e){!function(t){"x"==t.direction?(t.box.left=g.left-t.labelWidth/2,t.box.width=l.width-g.left-g.right+t.labelWidth):(t.box.top=g.top-t.labelHeight/2,t.box.height=l.height-g.bottom-g.top+t.labelHeight)}(e)})}m=l.width-g.left-g.right,v=l.height-g.bottom-g.top,t.each(n,function(t,e){!function(t){function e(t){return t}var i,n,o=t.options.transform||e,r=t.options.inverseTransform;"x"==t.direction?(i=t.scale=m/Math.abs(o(t.max)-o(t.min)),n=Math.min(o(t.max),o(t.min))):(i=-(i=t.scale=v/Math.abs(o(t.max)-o(t.min))),n=Math.max(o(t.max),o(t.min))),t.p2c=o==e?function(t){return(t-n)*i}:function(t){return(o(t)-n)*i},t.c2p=r?function(t){return r(n+t/i)}:function(t){return n+t/i}}(e)}),o&&t.each(C(),function(t,e){var i,n,o,r,s,a=e.box,c=e.direction+"Axis "+e.direction+e.n+"Axis",h="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+c,d=e.options.font||"flot-tick-label tickLabel";if(l.removeText(h),e.show&&0!=e.ticks.length)for(var u=0;u<e.ticks.length;++u)!(i=e.ticks[u]).label||i.v<e.min||i.v>e.max||("x"==e.direction?(r="center",n=g.left+e.p2c(i.v),"bottom"==e.position?o=a.top+a.padding:(o=a.top+a.height-a.padding,s="bottom")):(s="middle",o=g.top+e.p2c(i.v),"left"==e.position?(n=a.left+a.width-a.padding,r="right"):n=a.left+a.padding),l.addText(h,n,o,i.label,d,null,null,r,s))}),function(){null!=a.legend.container?t(a.legend.container).html(""):e.find(".legend").remove();if(!a.legend.show)return;for(var i,n,o=[],r=[],l=!1,c=a.legend.labelFormatter,h=0;h<s.length;++h)(i=s[h]).label&&(n=c?c(i.label,i):i.label)&&r.push({label:n,color:i.color});if(a.legend.sorted)if(t.isFunction(a.legend.sorted))r.sort(a.legend.sorted);else if("reverse"==a.legend.sorted)r.reverse();else{var d="descending"!=a.legend.sorted;r.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=d?1:-1})}for(var h=0;h<r.length;++h){var u=r[h];h%a.legend.noColumns==0&&(l&&o.push("</tr>"),o.push("<tr>"),l=!0),o.push('<td class="legendColorBox"><div style="border:1px solid '+a.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+u.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+u.label+"</td>")}l&&o.push("</tr>");if(0==o.length)return;var p='<table style="font-size:smaller;color:'+a.grid.color+'">'+o.join("")+"</table>";if(null!=a.legend.container)t(a.legend.container).html(p);else{var f="",m=a.legend.position,v=a.legend.margin;null==v[0]&&(v=[v,v]),"n"==m.charAt(0)?f+="top:"+(v[1]+g.top)+"px;":"s"==m.charAt(0)&&(f+="bottom:"+(v[1]+g.bottom)+"px;"),"e"==m.charAt(1)?f+="right:"+(v[0]+g.right)+"px;":"w"==m.charAt(1)&&(f+="left:"+(v[0]+g.left)+"px;");var b=t('<div class="legend">'+p.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(e);if(0!=a.legend.backgroundOpacity){var y=a.legend.backgroundColor;null==y&&((y=(y=a.grid.backgroundColor)&&"string"==typeof y?t.color.parse(y):t.color.extract(b,"background-color")).a=1,y=y.toString());var w=b.children();t('<div style="position:absolute;width:'+w.width()+"px;height:"+w.height()+"px;"+f+"background-color:"+y+';"> </div>').prependTo(b).css("opacity",a.legend.backgroundOpacity)}}}()}function R(){l.clear(),w(b.drawBackground,[d]);var t=a.grid;t.show&&t.backgroundColor&&(d.save(),d.translate(g.left,g.top),d.fillStyle=G(a.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,m,v),d.restore()),t.show&&!t.aboveData&&M();for(var e=0;e<s.length;++e)w(b.drawSeries,[d,s[e]]),A(s[e]);w(b.draw,[d]),t.show&&t.aboveData&&M(),l.render(),$()}function I(t,e){for(var i,n,o,r,s=C(),a=0;a<s.length;++a)if((i=s[a]).direction==e&&(t[r=e+i.n+"axis"]||1!=i.n||(r=e+"axis"),t[r])){n=t[r].from,o=t[r].to;break}if(t[r]||(i="x"==e?p[0]:f[0],n=t[e+"1"],o=t[e+"2"]),null!=n&&null!=o&&n>o){var l=n;n=o,o=l}return{from:n,to:o,axis:i}}function M(){var e,i,n,o;d.save(),d.translate(g.left,g.top);var r=a.grid.markings;if(r)for(t.isFunction(r)&&((i=y.getAxes()).xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,r=r(i)),e=0;e<r.length;++e){var s=r[e],l=I(s,"x"),c=I(s,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var h=l.from===l.to,u=c.from===c.to;if(!h||!u)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),h||u){var p=s.lineWidth||a.grid.markingsLineWidth,f=p%2?.5:0;d.beginPath(),d.strokeStyle=s.color||a.grid.markingsColor,d.lineWidth=p,h?(d.moveTo(l.to+f,c.from),d.lineTo(l.to+f,c.to)):(d.moveTo(l.from,c.to+f),d.lineTo(l.to,c.to+f)),d.stroke()}else d.fillStyle=s.color||a.grid.markingsColor,d.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}i=C(),n=a.grid.borderWidth;for(var b=0;b<i.length;++b){var w,x,_,S,D=i[b],k=D.box,T=D.tickLength;if(D.show&&0!=D.ticks.length){for(d.lineWidth=1,"x"==D.direction?(w=0,x="full"==T?"top"==D.position?0:v:k.top-g.top+("top"==D.position?k.height:0)):(x=0,w="full"==T?"left"==D.position?0:m:k.left-g.left+("left"==D.position?k.width:0)),D.innermost||(d.strokeStyle=D.options.color,d.beginPath(),_=S=0,"x"==D.direction?_=m+1:S=v+1,1==d.lineWidth&&("x"==D.direction?x=Math.floor(x)+.5:w=Math.floor(w)+.5),d.moveTo(w,x),d.lineTo(w+_,x+S),d.stroke()),d.strokeStyle=D.options.tickColor,d.beginPath(),e=0;e<D.ticks.length;++e){var E=D.ticks[e].v;_=S=0,isNaN(E)||E<D.min||E>D.max||"full"==T&&("object"==typeof n&&n[D.position]>0||n>0)&&(E==D.min||E==D.max)||("x"==D.direction?(w=D.p2c(E),S="full"==T?-v:T,"top"==D.position&&(S=-S)):(x=D.p2c(E),_="full"==T?-m:T,"left"==D.position&&(_=-_)),1==d.lineWidth&&("x"==D.direction?w=Math.floor(w)+.5:x=Math.floor(x)+.5),d.moveTo(w,x),d.lineTo(w+_,x+S))}d.stroke()}}n&&(o=a.grid.borderColor,"object"==typeof n||"object"==typeof o?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o}),n.top>0&&(d.strokeStyle=o.top,d.lineWidth=n.top,d.beginPath(),d.moveTo(0-n.left,0-n.top/2),d.lineTo(m,0-n.top/2),d.stroke()),n.right>0&&(d.strokeStyle=o.right,d.lineWidth=n.right,d.beginPath(),d.moveTo(m+n.right/2,0-n.top),d.lineTo(m+n.right/2,v),d.stroke()),n.bottom>0&&(d.strokeStyle=o.bottom,d.lineWidth=n.bottom,d.beginPath(),d.moveTo(m+n.right,v+n.bottom/2),d.lineTo(0,v+n.bottom/2),d.stroke()),n.left>0&&(d.strokeStyle=o.left,d.lineWidth=n.left,d.beginPath(),d.moveTo(0-n.left/2,v+n.bottom),d.lineTo(0-n.left/2,0),d.stroke())):(d.lineWidth=n,d.strokeStyle=a.grid.borderColor,d.strokeRect(-n/2,-n/2,m+n,v+n))),d.restore()}function A(t){t.lines.show&&function(t){function e(t,e,i,n,o){var r=t.points,s=t.pointsize,a=null,l=null;d.beginPath();for(var c=s;c<r.length;c+=s){var h=r[c-s],u=r[c-s+1],p=r[c],f=r[c+1];if(null!=h&&null!=p){if(u<=f&&u<o.min){if(f<o.min)continue;h=(o.min-u)/(f-u)*(p-h)+h,u=o.min}else if(f<=u&&f<o.min){if(u<o.min)continue;p=(o.min-u)/(f-u)*(p-h)+h,f=o.min}if(u>=f&&u>o.max){if(f>o.max)continue;h=(o.max-u)/(f-u)*(p-h)+h,u=o.max}else if(f>=u&&f>o.max){if(u>o.max)continue;p=(o.max-u)/(f-u)*(p-h)+h,f=o.max}if(h<=p&&h<n.min){if(p<n.min)continue;u=(n.min-h)/(p-h)*(f-u)+u,h=n.min}else if(p<=h&&p<n.min){if(h<n.min)continue;f=(n.min-h)/(p-h)*(f-u)+u,p=n.min}if(h>=p&&h>n.max){if(p>n.max)continue;u=(n.max-h)/(p-h)*(f-u)+u,h=n.max}else if(p>=h&&p>n.max){if(h>n.max)continue;f=(n.max-h)/(p-h)*(f-u)+u,p=n.max}h==a&&u==l||d.moveTo(n.p2c(h)+e,o.p2c(u)+i),a=p,l=f,d.lineTo(n.p2c(p)+e,o.p2c(f)+i)}}d.stroke()}d.save(),d.translate(g.left,g.top),d.lineJoin="round";var i=t.lines.lineWidth,n=t.shadowSize;if(i>0&&n>0){d.lineWidth=n,d.strokeStyle="rgba(0,0,0,0.1)";var o=Math.PI/18;e(t.datapoints,Math.sin(o)*(i/2+n/2),Math.cos(o)*(i/2+n/2),t.xaxis,t.yaxis),d.lineWidth=n/2,e(t.datapoints,Math.sin(o)*(i/2+n/4),Math.cos(o)*(i/2+n/4),t.xaxis,t.yaxis)}d.lineWidth=i,d.strokeStyle=t.color;var r=O(t.lines,t.color,0,v);r&&(d.fillStyle=r,function(t,e,i){var n=t.points,o=t.pointsize,r=Math.min(Math.max(0,i.min),i.max),s=0,a=!1,l=1,c=0,h=0;for(;!(o>0&&s>n.length+o);){var u=n[(s+=o)-o],p=n[s-o+l],f=n[s],g=n[s+l];if(a){if(o>0&&null!=u&&null==f){h=s,o=-o,l=2;continue}if(o<0&&s==c+o){d.fill(),a=!1,l=1,s=c=h+(o=-o);continue}}if(null!=u&&null!=f){if(u<=f&&u<e.min){if(f<e.min)continue;p=(e.min-u)/(f-u)*(g-p)+p,u=e.min}else if(f<=u&&f<e.min){if(u<e.min)continue;g=(e.min-u)/(f-u)*(g-p)+p,f=e.min}if(u>=f&&u>e.max){if(f>e.max)continue;p=(e.max-u)/(f-u)*(g-p)+p,u=e.max}else if(f>=u&&f>e.max){if(u>e.max)continue;g=(e.max-u)/(f-u)*(g-p)+p,f=e.max}if(a||(d.beginPath(),d.moveTo(e.p2c(u),i.p2c(r)),a=!0),p>=i.max&&g>=i.max)d.lineTo(e.p2c(u),i.p2c(i.max)),d.lineTo(e.p2c(f),i.p2c(i.max));else if(p<=i.min&&g<=i.min)d.lineTo(e.p2c(u),i.p2c(i.min)),d.lineTo(e.p2c(f),i.p2c(i.min));else{var m=u,v=f;p<=g&&p<i.min&&g>=i.min?(u=(i.min-p)/(g-p)*(f-u)+u,p=i.min):g<=p&&g<i.min&&p>=i.min&&(f=(i.min-p)/(g-p)*(f-u)+u,g=i.min),p>=g&&p>i.max&&g<=i.max?(u=(i.max-p)/(g-p)*(f-u)+u,p=i.max):g>=p&&g>i.max&&p<=i.max&&(f=(i.max-p)/(g-p)*(f-u)+u,g=i.max),u!=m&&d.lineTo(e.p2c(m),i.p2c(p)),d.lineTo(e.p2c(u),i.p2c(p)),d.lineTo(e.p2c(f),i.p2c(g)),f!=v&&(d.lineTo(e.p2c(f),i.p2c(g)),d.lineTo(e.p2c(v),i.p2c(g)))}}}}(t.datapoints,t.xaxis,t.yaxis));i>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis);d.restore()}(t),t.bars.show&&function(t){var e;switch(d.save(),d.translate(g.left,g.top),d.lineWidth=t.bars.lineWidth,d.strokeStyle=t.color,t.bars.align){case"left":e=0;break;case"right":e=-t.bars.barWidth;break;default:e=-t.bars.barWidth/2}var i=t.bars.fill?function(e,i){return O(t.bars,t.color,e,i)}:null;(function(e,i,n,o,r,s){for(var a=e.points,l=e.pointsize,c=0;c<a.length;c+=l)null!=a[c]&&F(a[c],a[c+1],a[c+2],i,n,o,r,s,d,t.bars.horizontal,t.bars.lineWidth)})(t.datapoints,e,e+t.bars.barWidth,i,t.xaxis,t.yaxis),d.restore()}(t),t.points.show&&function(t){function e(t,e,i,n,o,r,s,a){for(var l=t.points,c=t.pointsize,h=0;h<l.length;h+=c){var u=l[h],p=l[h+1];null==u||u<r.min||u>r.max||p<s.min||p>s.max||(d.beginPath(),u=r.p2c(u),p=s.p2c(p)+n,"circle"==a?d.arc(u,p,e,0,o?Math.PI:2*Math.PI,!1):a(d,u,p,e,o),d.closePath(),i&&(d.fillStyle=i,d.fill()),d.stroke())}}d.save(),d.translate(g.left,g.top);var i=t.points.lineWidth,n=t.shadowSize,o=t.points.radius,r=t.points.symbol;0==i&&(i=1e-4);if(i>0&&n>0){var s=n/2;d.lineWidth=s,d.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,o,null,s+s/2,!0,t.xaxis,t.yaxis,r),d.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,o,null,s/2,!0,t.xaxis,t.yaxis,r)}d.lineWidth=i,d.strokeStyle=t.color,e(t.datapoints,o,O(t.points,t.color),0,!1,t.xaxis,t.yaxis,r),d.restore()}(t)}function F(t,e,i,n,o,r,s,a,l,c,h){var d,u,p,f,g,m,v,b,y;c?(b=m=v=!0,g=!1,f=e+n,p=e+o,(u=t)<(d=i)&&(y=u,u=d,d=y,g=!0,m=!1)):(g=m=v=!0,b=!1,d=t+n,u=t+o,(f=e)<(p=i)&&(y=f,f=p,p=y,b=!0,v=!1)),u<s.min||d>s.max||f<a.min||p>a.max||(d<s.min&&(d=s.min,g=!1),u>s.max&&(u=s.max,m=!1),p<a.min&&(p=a.min,b=!1),f>a.max&&(f=a.max,v=!1),d=s.p2c(d),p=a.p2c(p),u=s.p2c(u),f=a.p2c(f),r&&(l.fillStyle=r(p,f),l.fillRect(d,f,u-d,p-f)),h>0&&(g||m||v||b)&&(l.beginPath(),l.moveTo(d,p),g?l.lineTo(d,f):l.moveTo(d,f),v?l.lineTo(u,f):l.moveTo(u,f),m?l.lineTo(u,p):l.moveTo(u,p),b?l.lineTo(d,p):l.moveTo(d,p),l.stroke()))}function O(e,i,n,o){var r=e.fill;if(!r)return null;if(e.fillColor)return G(e.fillColor,n,o,i);var s=t.color.parse(i);return s.a="number"==typeof r?r:.4,s.normalize(),s.toString()}y.setData=x,y.setupGrid=E,y.draw=R,y.getPlaceholder=function(){return e},y.getCanvas=function(){return l.element},y.getPlotOffset=function(){return g},y.width=function(){return m},y.height=function(){return v},y.offset=function(){var t=h.offset();return t.left+=g.left,t.top+=g.top,t},y.getData=function(){return s},y.getAxes=function(){var e={};return t.each(p.concat(f),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},y.getXAxes=function(){return p},y.getYAxes=function(){return f},y.c2p=S,y.p2c=function(t){var e,i,n,o={};for(e=0;e<p.length;++e)if((i=p[e])&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){o.left=i.p2c(t[n]);break}for(e=0;e<f.length;++e)if((i=f[e])&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){o.top=i.p2c(t[n]);break}return o},y.getOptions=function(){return a},y.highlight=j,y.unhighlight=W,y.triggerRedrawOverlay=$,y.pointOffset=function(t){return{left:parseInt(p[_(t,"x")-1].p2c(+t.x)+g.left,10),top:parseInt(f[_(t,"y")-1].p2c(+t.y)+g.top,10)}},y.shutdown=k,y.destroy=function(){k(),e.removeData("plot").empty(),s=[],a=null,l=null,c=null,h=null,d=null,u=null,p=[],f=[],b=null,P=[],y=null},y.resize=function(){var t=e.width(),i=e.height();l.resize(t,i),c.resize(t,i)},y.hooks=b,function(){for(var e={Canvas:i},n=0;n<r.length;++n){var o=r[n];o.init(y,e),o.options&&t.extend(!0,a,o.options)}}(),function(i){t.extend(!0,a,i),i&&i.colors&&(a.colors=i.colors);null==a.xaxis.color&&(a.xaxis.color=t.color.parse(a.grid.color).scale("a",.22).toString());null==a.yaxis.color&&(a.yaxis.color=t.color.parse(a.grid.color).scale("a",.22).toString());null==a.xaxis.tickColor&&(a.xaxis.tickColor=a.grid.tickColor||a.xaxis.color);null==a.yaxis.tickColor&&(a.yaxis.tickColor=a.grid.tickColor||a.yaxis.color);null==a.grid.borderColor&&(a.grid.borderColor=a.grid.color);null==a.grid.tickColor&&(a.grid.tickColor=t.color.parse(a.grid.color).scale("a",.22).toString());var n,o,r,s=e.css("font-size"),l=s?+s.replace("px",""):13,c={style:e.css("font-style"),size:Math.round(.8*l),variant:e.css("font-variant"),weight:e.css("font-weight"),family:e.css("font-family")};for(r=a.xaxes.length||1,n=0;n<r;++n)(o=a.xaxes[n])&&!o.tickColor&&(o.tickColor=o.color),o=t.extend(!0,{},a.xaxis,o),a.xaxes[n]=o,o.font&&(o.font=t.extend({},c,o.font),o.font.color||(o.font.color=o.color),o.font.lineHeight||(o.font.lineHeight=Math.round(1.15*o.font.size)));for(r=a.yaxes.length||1,n=0;n<r;++n)(o=a.yaxes[n])&&!o.tickColor&&(o.tickColor=o.color),o=t.extend(!0,{},a.yaxis,o),a.yaxes[n]=o,o.font&&(o.font=t.extend({},c,o.font),o.font.color||(o.font.color=o.color),o.font.lineHeight||(o.font.lineHeight=Math.round(1.15*o.font.size)));a.xaxis.noTicks&&null==a.xaxis.ticks&&(a.xaxis.ticks=a.xaxis.noTicks);a.yaxis.noTicks&&null==a.yaxis.ticks&&(a.yaxis.ticks=a.yaxis.noTicks);a.x2axis&&(a.xaxes[1]=t.extend(!0,{},a.xaxis,a.x2axis),a.xaxes[1].position="top",null==a.x2axis.min&&(a.xaxes[1].min=null),null==a.x2axis.max&&(a.xaxes[1].max=null));a.y2axis&&(a.yaxes[1]=t.extend(!0,{},a.yaxis,a.y2axis),a.yaxes[1].position="right",null==a.y2axis.min&&(a.yaxes[1].min=null),null==a.y2axis.max&&(a.yaxes[1].max=null));a.grid.coloredAreas&&(a.grid.markings=a.grid.coloredAreas);a.grid.coloredAreasColor&&(a.grid.markingsColor=a.grid.coloredAreasColor);a.lines&&t.extend(!0,a.series.lines,a.lines);a.points&&t.extend(!0,a.series.points,a.points);a.bars&&t.extend(!0,a.series.bars,a.bars);null!=a.shadowSize&&(a.series.shadowSize=a.shadowSize);null!=a.highlightColor&&(a.series.highlightColor=a.highlightColor);for(n=0;n<a.xaxes.length;++n)D(p,n+1).options=a.xaxes[n];for(n=0;n<a.yaxes.length;++n)D(f,n+1).options=a.yaxes[n];for(var h in b)a.hooks[h]&&a.hooks[h].length&&(b[h]=b[h].concat(a.hooks[h]));w(b.processOptions,[a])}(o),function(){e.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==e.css("position")&&e.css("position","relative");l=new i("flot-base",e),c=new i("flot-overlay",e),d=l.context,u=c.context,h=t(c.element).unbind();var n=e.data("plot");n&&(n.shutdown(),c.clear());e.data("plot",y)}(),x(n),E(),R(),function(){a.grid.hoverable&&(h.mousemove(H),h.bind("mouseleave",L));a.grid.clickable&&h.click(z);w(b.bindEvents,[h])}();var P=[],N=null;function H(t){a.grid.hoverable&&B("plothover",t,function(t){return 0!=t.hoverable})}function L(t){a.grid.hoverable&&B("plothover",t,function(t){return!1})}function z(t){B("plotclick",t,function(t){return 0!=t.clickable})}function B(t,i,n){var o=h.offset(),r=i.pageX-o.left-g.left,l=i.pageY-o.top-g.top,c=S({left:r,top:l});c.pageX=i.pageX,c.pageY=i.pageY;var d=function(t,e,i){var n,o,r,l=a.grid.mouseActiveRadius,c=l*l+1,h=null;for(n=s.length-1;n>=0;--n)if(i(s[n])){var d=s[n],u=d.xaxis,p=d.yaxis,f=d.datapoints.points,g=u.c2p(t),m=p.c2p(e),v=l/u.scale,b=l/p.scale;if(r=d.datapoints.pointsize,u.options.inverseTransform&&(v=Number.MAX_VALUE),p.options.inverseTransform&&(b=Number.MAX_VALUE),d.lines.show||d.points.show)for(o=0;o<f.length;o+=r){var y=f[o],w=f[o+1];if(null!=y&&!(y-g>v||y-g<-v||w-m>b||w-m<-b)){var x=Math.abs(u.p2c(y)-t),_=Math.abs(p.p2c(w)-e),C=x*x+_*_;C<c&&(c=C,h=[n,o/r])}}if(d.bars.show&&!h){var S,D;switch(d.bars.align){case"left":S=0;break;case"right":S=-d.bars.barWidth;break;default:S=-d.bars.barWidth/2}for(D=S+d.bars.barWidth,o=0;o<f.length;o+=r){y=f[o],w=f[o+1];var k=f[o+2];null!=y&&(s[n].bars.horizontal?g<=Math.max(k,y)&&g>=Math.min(k,y)&&m>=w+S&&m<=w+D:g>=y+S&&g<=y+D&&m>=Math.min(k,w)&&m<=Math.max(k,w))&&(h=[n,o/r])}}}return h?(n=h[0],o=h[1],r=s[n].datapoints.pointsize,{datapoint:s[n].datapoints.points.slice(o*r,(o+1)*r),dataIndex:o,series:s[n],seriesIndex:n}):null}(r,l,n);if(d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+o.left+g.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+o.top+g.top,10)),a.grid.autoHighlight){for(var u=0;u<P.length;++u){var p=P[u];p.auto!=t||d&&p.series==d.series&&p.point[0]==d.datapoint[0]&&p.point[1]==d.datapoint[1]||W(p.series,p.point)}d&&j(d.series,d.datapoint,t)}e.trigger(t,[c,d])}function $(){var t=a.interaction.redrawOverlayInterval;-1!=t?N||(N=setTimeout(U,t)):U()}function U(){var t,e;for(N=null,u.save(),c.clear(),u.translate(g.left,g.top),t=0;t<P.length;++t)(e=P[t]).series.bars.show?q(e.series,e.point):V(e.series,e.point);u.restore(),w(b.drawOverlay,[u])}function j(t,e,i){if("number"==typeof t&&(t=s[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var o=Y(t,e);-1==o?(P.push({series:t,point:e,auto:i}),$()):i||(P[o].auto=!1)}function W(t,e){if(null==t&&null==e)return P=[],void $();if("number"==typeof t&&(t=s[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var n=Y(t,e);-1!=n&&(P.splice(n,1),$())}function Y(t,e){for(var i=0;i<P.length;++i){var n=P[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function V(e,i){var n=i[0],o=i[1],r=e.xaxis,s=e.yaxis,a="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(n<r.min||n>r.max||o<s.min||o>s.max)){var l=e.points.radius+e.points.lineWidth/2;u.lineWidth=l,u.strokeStyle=a;var c=1.5*l;n=r.p2c(n),o=s.p2c(o),u.beginPath(),"circle"==e.points.symbol?u.arc(n,o,c,0,2*Math.PI,!1):e.points.symbol(u,n,o,c,!1),u.closePath(),u.stroke()}}function q(e,i){var n,o="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),r=o;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}u.lineWidth=e.bars.lineWidth,u.strokeStyle=o,F(i[0],i[1],i[2]||0,n,n+e.bars.barWidth,function(){return r},e.xaxis,e.yaxis,u,e.bars.horizontal,e.bars.lineWidth)}function G(e,i,n,o){if("string"==typeof e)return e;for(var r=d.createLinearGradient(0,n,0,i),s=0,a=e.colors.length;s<a;++s){var l=e.colors[s];if("string"!=typeof l){var c=t.color.parse(o);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}r.addColorStop(s/(a-1),l)}return r}}t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),i.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var i=this.element,n=this.context,o=this.pixelRatio;this.width!=t&&(i.width=t*o,i.style.width=t+"px",this.width=t),this.height!=e&&(i.height=e*o,i.style.height=e+"px",this.height=e),n.restore(),n.save(),n.scale(o,o)},i.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},i.prototype.render=function(){var t=this._textCache;for(var i in t)if(e.call(t,i)){var n=this.getTextLayer(i),o=t[i];for(var r in n.hide(),o)if(e.call(o,r)){var s=o[r];for(var a in s)if(e.call(s,a)){for(var l,c=s[a].positions,h=0;l=c[h];h++)l.active?l.rendered||(n.append(l.element),l.rendered=!0):(c.splice(h--,1),l.rendered&&l.element.detach());0==c.length&&delete s[a]}}n.show()}},i.prototype.getTextLayer=function(e){var i=this.text[e];return null==i&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},i.prototype.getTextInfo=function(e,i,n,o,r){var s,a,l,c;if(i=""+i,s="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,null==(a=this._textCache[e])&&(a=this._textCache[e]={}),null==(l=a[s])&&(l=a[s]={}),null==(c=l[i])){var h=t("<div></div>").html(i).css({position:"absolute","max-width":r,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof n?h.css({font:s,color:n.color}):"string"==typeof n&&h.addClass(n),c=l[i]={width:h.outerWidth(!0),height:h.outerHeight(!0),element:h,positions:[]},h.detach()}return c},i.prototype.addText=function(t,e,i,n,o,r,s,a,l){var c=this.getTextInfo(t,n,o,r,s),h=c.positions;"center"==a?e-=c.width/2:"right"==a&&(e-=c.width),"middle"==l?i-=c.height/2:"bottom"==l&&(i-=c.height);for(var d,u=0;d=h[u];u++)if(d.x==e&&d.y==i)return void(d.active=!0);d={active:!0,rendered:!1,element:h.length?c.element.clone():c.element,x:e,y:i},h.push(d),d.element.css({top:Math.round(i),left:Math.round(e),"text-align":a})},i.prototype.removeText=function(t,i,n,o,r,s){if(null==o){var a=this._textCache[t];if(null!=a)for(var l in a)if(e.call(a,l)){var c=a[l];for(var h in c)if(e.call(c,h))for(var d=c[h].positions,u=0;p=d[u];u++)p.active=!1}}else{var p;for(d=this.getTextInfo(t,o,r,s).positions,u=0;p=d[u];u++)p.x==i&&p.y==n&&(p.active=!1)}},t.plot=function(e,i,o){return new n(t(e),i,o,t.plot.plugins)},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,i){return this.each(function(){t.plot(this,e,i)})}}(jQuery),function(t){var e=10,i=.95;var n={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(t,e){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+e.color+";'>"+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};t.plot.plugins.push({init:function(n){var o=null,r=null,s=null,a=null,l=null,c=null,h=!1,d=null,u=[];function p(e,i,n){h||(h=!0,o=e.getCanvas(),r=t(o).parent(),s=e.getOptions(),e.setData(function(e){for(var i=0,n=0,o=0,r=s.series.pie.combine.color,a=[],l=0;l<e.length;++l){var c=e[l].data;t.isArray(c)&&1==c.length&&(c=c[0]),t.isArray(c)?!isNaN(parseFloat(c[1]))&&isFinite(c[1])?c[1]=+c[1]:c[1]=0:c=!isNaN(parseFloat(c))&&isFinite(c)?[1,+c]:[1,0],e[l].data=[c]}for(var l=0;l<e.length;++l)i+=e[l].data[0][1];for(var l=0;l<e.length;++l){var c=e[l].data[0][1];c/i<=s.series.pie.combine.threshold&&(n+=c,o++,r||(r=e[l].color))}for(var l=0;l<e.length;++l){var c=e[l].data[0][1];(o<2||c/i>s.series.pie.combine.threshold)&&a.push(t.extend(e[l],{data:[[1,c]],color:e[l].color,label:e[l].label,angle:c*Math.PI*2/i,percent:c/(i/100)}))}return o>1&&a.push({data:[[1,n]],color:r,label:s.series.pie.combine.label,angle:n*Math.PI*2/i,percent:n/(i/100)}),a}(e.getData())))}function f(n,o){if(r){var u=n.getPlaceholder().width(),p=n.getPlaceholder().height(),f=r.children().filter(".legend").children().width()||0;d=o,h=!1,a=Math.min(u,p/s.series.pie.tilt)/2,c=p/2+s.series.pie.offset.top,l=u/2,"auto"==s.series.pie.offset.left?(s.legend.position.match("w")?l+=f/2:l-=f/2,l<a?l=a:l>u-a&&(l=u-a)):l+=s.series.pie.offset.left;var m=n.getData(),v=0;do{v>0&&(a*=i),v+=1,b(),s.series.pie.tilt<=.8&&y()}while(!w()&&v<e);v>=e&&(b(),r.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),n.setSeries&&n.insertLegend&&(n.setSeries(m),n.insertLegend())}function b(){d.clearRect(0,0,u,p),r.children().filter(".pieLabel, .pieLabelBackground").remove()}function y(){var t=s.series.pie.shadow.left,e=s.series.pie.shadow.top,i=s.series.pie.shadow.alpha,n=s.series.pie.radius>1?s.series.pie.radius:a*s.series.pie.radius;if(!(n>=u/2-t||n*s.series.pie.tilt>=p/2-e||n<=10)){d.save(),d.translate(t,e),d.globalAlpha=i,d.fillStyle="#000",d.translate(l,c),d.scale(1,s.series.pie.tilt);for(var o=1;o<=10;o++)d.beginPath(),d.arc(0,0,n,0,2*Math.PI,!1),d.fill(),n-=o;d.restore()}}function w(){var e=Math.PI*s.series.pie.startAngle,i=s.series.pie.radius>1?s.series.pie.radius:a*s.series.pie.radius;d.save(),d.translate(l,c),d.scale(1,s.series.pie.tilt),d.save();for(var n=e,o=0;o<m.length;++o)m[o].startAngle=n,h(m[o].angle,m[o].color,!0);if(d.restore(),s.series.pie.stroke.width>0){for(d.save(),d.lineWidth=s.series.pie.stroke.width,n=e,o=0;o<m.length;++o)h(m[o].angle,s.series.pie.stroke.color,!1);d.restore()}return g(d),d.restore(),!s.series.pie.label.show||function(){for(var i=e,n=s.series.pie.label.radius>1?s.series.pie.label.radius:a*s.series.pie.label.radius,o=0;o<m.length;++o){if(m[o].percent>=100*s.series.pie.label.threshold&&!h(m[o],i,o))return!1;i+=m[o].angle}return!0;function h(e,i,o){if(0==e.data[0][1])return!0;var a,h=s.legend.labelFormatter,d=s.series.pie.label.formatter;a=h?h(e.label,e):e.label,d&&(a=d(a,e));var f=(i+e.angle+i)/2,g=l+Math.round(Math.cos(f)*n),m=c+Math.round(Math.sin(f)*n)*s.series.pie.tilt,v="<span class='pieLabel' id='pieLabel"+o+"' style='position:absolute;top:"+m+"px;left:"+g+"px;'>"+a+"</span>";r.append(v);var b=r.children("#pieLabel"+o),y=m-b.height()/2,w=g-b.width()/2;if(b.css("top",y),b.css("left",w),0-y>0||0-w>0||p-(y+b.height())<0||u-(w+b.width())<0)return!1;if(0!=s.series.pie.label.background.opacity){var x=s.series.pie.label.background.color;null==x&&(x=e.color);var _="top:"+y+"px;left:"+w+"px;";t("<div class='pieLabelBackground' style='position:absolute;width:"+b.width()+"px;height:"+b.height()+"px;"+_+"background-color:"+x+";'></div>").css("opacity",s.series.pie.label.background.opacity).insertBefore(b)}return!0}}();function h(t,e,o){t<=0||isNaN(t)||(o?d.fillStyle=e:(d.strokeStyle=e,d.lineJoin="round"),d.beginPath(),Math.abs(t-2*Math.PI)>1e-9&&d.moveTo(0,0),d.arc(0,0,i,n,n+t/2,!1),d.arc(0,0,i,n+t/2,n+t,!1),d.closePath(),n+=t,o?d.fill():d.stroke())}}}function g(t){if(s.series.pie.innerRadius>0){t.save();var e=s.series.pie.innerRadius>1?s.series.pie.innerRadius:a*s.series.pie.innerRadius;t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=s.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=s.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}}function m(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}function v(t){y("plothover",t)}function b(t){y("plotclick",t)}function y(t,e){var i=n.offset(),o=function(t,e){for(var i,o,r=n.getData(),s=n.getOptions(),h=s.series.pie.radius>1?s.series.pie.radius:a*s.series.pie.radius,u=0;u<r.length;++u){var p=r[u];if(p.pie.show){if(d.save(),d.beginPath(),d.moveTo(0,0),d.arc(0,0,h,p.startAngle,p.startAngle+p.angle/2,!1),d.arc(0,0,h,p.startAngle+p.angle/2,p.startAngle+p.angle,!1),d.closePath(),i=t-l,o=e-c,d.isPointInPath){if(d.isPointInPath(t-l,e-c))return d.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:u}}else if(m([[0,0],[h*Math.cos(p.startAngle),h*Math.sin(p.startAngle)],[h*Math.cos(p.startAngle+p.angle/4),h*Math.sin(p.startAngle+p.angle/4)],[h*Math.cos(p.startAngle+p.angle/2),h*Math.sin(p.startAngle+p.angle/2)],[h*Math.cos(p.startAngle+p.angle/1.5),h*Math.sin(p.startAngle+p.angle/1.5)],[h*Math.cos(p.startAngle+p.angle),h*Math.sin(p.startAngle+p.angle)]],[i,o]))return d.restore(),{datapoint:[p.percent,p.data],dataIndex:0,series:p,seriesIndex:u};d.restore()}}return null}(parseInt(e.pageX-i.left),parseInt(e.pageY-i.top));if(s.grid.autoHighlight)for(var h=0;h<u.length;++h){var p=u[h];p.auto!=t||o&&p.series==o.series||w(p.series)}o&&function(t,e){var i=x(t);-1==i?(u.push({series:t,auto:e}),n.triggerRedrawOverlay()):e||(u[i].auto=!1)}(o.series,t);var f={pageX:e.pageX,pageY:e.pageY};r.trigger(t,[f,o])}function w(t){null==t&&(u=[],n.triggerRedrawOverlay());var e=x(t);-1!=e&&(u.splice(e,1),n.triggerRedrawOverlay())}function x(t){for(var e=0;e<u.length;++e)if(u[e].series==t)return e;return-1}n.hooks.processOptions.push(function(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.legend.show?e.series.pie.label.show=!1:e.series.pie.label.show=!0),"auto"==e.series.pie.radius&&(e.series.pie.label.show?e.series.pie.radius=.75:e.series.pie.radius=1),e.series.pie.tilt>1?e.series.pie.tilt=1:e.series.pie.tilt<0&&(e.series.pie.tilt=0))}),n.hooks.bindEvents.push(function(t,e){var i=t.getOptions();i.series.pie.show&&(i.grid.hoverable&&e.unbind("mousemove").mousemove(v),i.grid.clickable&&e.unbind("click").click(b))}),n.hooks.processDatapoints.push(function(t,e,i,n){t.getOptions().series.pie.show&&p(t)}),n.hooks.drawOverlay.push(function(t,e){t.getOptions().series.pie.show&&function(t,e){var i=t.getOptions(),n=i.series.pie.radius>1?i.series.pie.radius:a*i.series.pie.radius;e.save(),e.translate(l,c),e.scale(1,i.series.pie.tilt);for(var o=0;o<u.length;++o)r(u[o].series);function r(t){t.angle<=0||isNaN(t.angle)||(e.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",e.beginPath(),Math.abs(t.angle-2*Math.PI)>1e-9&&e.moveTo(0,0),e.arc(0,0,n,t.startAngle,t.startAngle+t.angle/2,!1),e.arc(0,0,n,t.startAngle+t.angle/2,t.startAngle+t.angle,!1),e.closePath(),e.fill())}g(e),e.restore()}(t,e)}),n.hooks.draw.push(function(t,e){t.getOptions().series.pie.show&&f(t,e)})},options:n,name:"pie",version:"1.1"})}(jQuery),function(t){"use strict";var e=0;function i(e,i){return t.map(e,function(t){return function(t,e){return t+".touchspin_"+e}(t,i)})}t.fn.TouchSpin=function(n){if("destroy"!==n){var o={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},r={min:"min",max:"max",initval:"init-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var s,a,l,c,h,d,u,p,f=t(this),g=f.data(),m=0,v=!1;function b(){var t,e,i;""!==(t=f.val())&&(s.decimals>0&&"."===t||(e=parseFloat(t),isNaN(e)&&(e=0),i=e,e.toString()!==t&&(i=e),e<s.min&&(i=s.min),e>s.max&&(i=s.max),i=function(t){switch(s.forcestepdivisibility){case"round":return(Math.round(t/s.step)*s.step).toFixed(s.decimals);case"floor":return(Math.floor(t/s.step)*s.step).toFixed(s.decimals);case"ceil":return(Math.ceil(t/s.step)*s.step).toFixed(s.decimals);default:return t}}(i),Number(t).toString()!==i.toString()&&(f.val(i),f.trigger("change"))))}function y(){if(s.booster){var t=Math.pow(2,Math.floor(m/s.boostat))*s.step;return s.maxboostedstep&&t>s.maxboostedstep&&(t=s.maxboostedstep,c=Math.round(c/t)*t),Math.max(s.step,t)}return s.step}function w(){b(),c=parseFloat(l.input.val()),isNaN(c)&&(c=0);var t=c,e=y();(c+=e)>s.max&&(c=s.max,f.trigger("touchspin.on.max"),S()),l.input.val(Number(c).toFixed(s.decimals)),t!==c&&f.trigger("change")}function x(){b(),c=parseFloat(l.input.val()),isNaN(c)&&(c=0);var t=c,e=y();(c-=e)<s.min&&(c=s.min,f.trigger("touchspin.on.min"),S()),l.input.val(c.toFixed(s.decimals)),t!==c&&f.trigger("change")}function _(){S(),m=0,v="down",f.trigger("touchspin.on.startspin"),f.trigger("touchspin.on.startdownspin"),u=setTimeout(function(){h=setInterval(function(){m++,x()},s.stepinterval)},s.stepintervaldelay)}function C(){S(),m=0,v="up",f.trigger("touchspin.on.startspin"),f.trigger("touchspin.on.startupspin"),p=setTimeout(function(){d=setInterval(function(){m++,w()},s.stepinterval)},s.stepintervaldelay)}function S(){switch(clearTimeout(u),clearTimeout(p),clearInterval(h),clearInterval(d),v){case"up":f.trigger("touchspin.on.stopupspin"),f.trigger("touchspin.on.stopspin");break;case"down":f.trigger("touchspin.on.stopdownspin"),f.trigger("touchspin.on.stopspin")}m=0,v=!1}!function(){if(f.data("alreadyinitialized"))return;if(f.data("alreadyinitialized",!0),e+=1,f.data("spinnerid",e),!f.is("input"))return void console.log("Must be an input.");s=t.extend({},o,g,(c={},t.each(r,function(t,e){var i="bts-"+e;f.is("[data-"+i+"]")&&(c[t]=f.data(i))}),c),n),""!==s.initval&&""===f.val()&&f.val(s.initval),b(),function(){var e=f.val(),i=f.parent();""!==e&&(e=Number(e).toFixed(s.decimals));f.data("initvalue",e).val(e),f.addClass("form-control"),i.hasClass("input-group")?function(e){e.addClass("bootstrap-touchspin");var i,n,o=f.prev(),r=f.next(),l='<span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+"</span>",c='<span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+"</span>";o.hasClass("input-group-btn")?(i='<button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+"</button>",o.append(i)):(i='<span class="input-group-btn"><button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+"</button></span>",t(i).insertBefore(f));r.hasClass("input-group-btn")?(n='<button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button>",r.prepend(n)):(n='<span class="input-group-btn"><button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button></span>",t(n).insertAfter(f));t(l).insertBefore(f),t(c).insertAfter(f),a=e}(i):function(){var e;e=s.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+'</span><span class="input-group-btn-vertical"><button class="'+s.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+s.verticalupclass+'"></i></button><button class="'+s.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+s.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+'</span><span class="input-group-btn"><button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button></span></div>";a=t(e).insertBefore(f),t(".bootstrap-touchspin-prefix",a).after(f),f.hasClass("input-sm")?a.addClass("input-group-sm"):f.hasClass("input-lg")&&a.addClass("input-group-lg")}()}(),l={down:t(".bootstrap-touchspin-down",a),up:t(".bootstrap-touchspin-up",a),input:t("input",a),prefix:t(".bootstrap-touchspin-prefix",a).addClass(s.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",a).addClass(s.postfix_extraclass)},function(){""===s.prefix&&l.prefix.hide();""===s.postfix&&l.postfix.hide()}(),f.on("keydown",function(t){var e=t.keyCode||t.which;38===e?("up"!==v&&(w(),C()),t.preventDefault()):40===e&&("down"!==v&&(x(),_()),t.preventDefault())}),f.on("keyup",function(t){var e=t.keyCode||t.which;38===e?S():40===e&&S()}),f.on("blur",function(){b()}),l.down.on("keydown",function(t){var e=t.keyCode||t.which;32!==e&&13!==e||("down"!==v&&(x(),_()),t.preventDefault())}),l.down.on("keyup",function(t){var e=t.keyCode||t.which;32!==e&&13!==e||S()}),l.up.on("keydown",function(t){var e=t.keyCode||t.which;32!==e&&13!==e||("up"!==v&&(w(),C()),t.preventDefault())}),l.up.on("keyup",function(t){var e=t.keyCode||t.which;32!==e&&13!==e||S()}),l.down.on("mousedown.touchspin",function(t){l.down.off("touchstart.touchspin"),f.is(":disabled")||(x(),_(),t.preventDefault(),t.stopPropagation())}),l.down.on("touchstart.touchspin",function(t){l.down.off("mousedown.touchspin"),f.is(":disabled")||(x(),_(),t.preventDefault(),t.stopPropagation())}),l.up.on("mousedown.touchspin",function(t){l.up.off("touchstart.touchspin"),f.is(":disabled")||(w(),C(),t.preventDefault(),t.stopPropagation())}),l.up.on("touchstart.touchspin",function(t){l.up.off("mousedown.touchspin"),f.is(":disabled")||(w(),C(),t.preventDefault(),t.stopPropagation())}),l.up.on("mouseout touchleave touchend touchcancel",function(t){v&&(t.stopPropagation(),S())}),l.down.on("mouseout touchleave touchend touchcancel",function(t){v&&(t.stopPropagation(),S())}),l.down.on("mousemove touchmove",function(t){v&&(t.stopPropagation(),t.preventDefault())}),l.up.on("mousemove touchmove",function(t){v&&(t.stopPropagation(),t.preventDefault())}),t(document).on(i(["mouseup","touchend","touchcancel"],e).join(" "),function(t){v&&(t.preventDefault(),S())}),t(document).on(i(["mousemove","touchmove","scroll","scrollstart"],e).join(" "),function(t){v&&(t.preventDefault(),S())}),f.on("mousewheel DOMMouseScroll",function(t){if(s.mousewheel&&f.is(":focus")){var e=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),e<0?x():w()}}),f.on("touchspin.uponce",function(){S(),w()}),f.on("touchspin.downonce",function(){S(),x()}),f.on("touchspin.startupspin",function(){C()}),f.on("touchspin.startdownspin",function(){_()}),f.on("touchspin.stopspin",function(){S()}),f.on("touchspin.updatesettings",function(e,i){!function(e){(function(e){s=t.extend({},s,e)})(e),b();var i=l.input.val();""!==i&&(i=Number(l.input.val()),l.input.val(i.toFixed(s.decimals)))}(i)}),l.input.css("display","block");var c}()})}this.each(function(){var e=t(this).data();t(document).off(i(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],e.spinnerid).join(" "))})}}(jQuery),function(t,e){"use strict";var i,n,o,r=t,s=r.document,a=r.navigator,l=r.setTimeout,c=r.clearTimeout,h=r.setInterval,d=r.clearInterval,u=r.getComputedStyle,p=r.encodeURIComponent,f=r.ActiveXObject,g=r.Error,m=r.Number.parseInt||r.parseInt,v=r.Number.parseFloat||r.parseFloat,b=r.Number.isNaN||r.isNaN,y=r.Date.now,w=r.Object.keys,x=r.Object.defineProperty,_=r.Object.prototype.hasOwnProperty,C=r.Array.prototype.slice,S=function(){var t=function(t){return t};if("function"==typeof r.wrap&&"function"==typeof r.unwrap)try{var e=s.createElement("div"),i=r.unwrap(e);1===e.nodeType&&i&&1===i.nodeType&&(t=r.unwrap)}catch(t){}return t}(),D=function(t){return C.call(t,0)},k=function(){var t,e,i,n,o,r=D(arguments),s=r[0]||{};for(t=1,e=r.length;t<e;t++)if(null!=(i=r[t]))for(n in i)_.call(i,n)&&(s[n],s!==(o=i[n])&&void 0!==o&&(s[n]=o));return s},T=function(t){var e,i,n,o;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if("number"==typeof t.length)for(e=[],i=0,n=t.length;i<n;i++)_.call(t,i)&&(e[i]=T(t[i]));else for(o in e={},t)_.call(t,o)&&(e[o]=T(t[o]));return e},E=function(t,e){for(var i={},n=0,o=e.length;n<o;n++)e[n]in t&&(i[e[n]]=t[e[n]]);return i},R=function(t,e){var i={};for(var n in t)-1===e.indexOf(n)&&(i[n]=t[n]);return i},I=function(t,e){if(t&&1===t.nodeType&&t.ownerDocument&&e&&(1===e.nodeType&&e.ownerDocument&&e.ownerDocument===t.ownerDocument||9===e.nodeType&&!e.ownerDocument&&e===t.ownerDocument))do{if(t===e)return!0;t=t.parentNode}while(t);return!1},M=function(t){var e;return"string"==typeof t&&t&&(e=t.split("#")[0].split("?")[0],e=t.slice(0,t.lastIndexOf("/")+1)),e},A=function(){var t,e,i;if(s.currentScript&&(t=s.currentScript.src))return t;if(1===(e=s.getElementsByTagName("script")).length)return e[0].src||void 0;if("readyState"in e[0])for(i=e.length;i--;)if("interactive"===e[i].readyState&&(t=e[i].src))return t;return"loading"===s.readyState&&(t=e[e.length-1].src)?t:(t=function(){var t,e;try{throw new g}catch(t){e=t}return e&&(t=e.sourceURL||e.fileName||function(t){var e,i;return"string"==typeof t&&t&&((i=t.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&i[1]?e=i[1]:(i=t.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&i[1]&&(e=i[1])),e}(e.stack)),t}())?t:void 0},F=null==t.opener&&(!!t.top&&t!=t.top||!!t.parent&&t!=t.parent),O={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},P={},N={},H=null,L=0,z=0,B={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},$=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],U=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],j=new RegExp("^flash-("+U.map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),W=new RegExp("^flash-("+U.slice(1).map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),Y={swfPath:(M(A())||function(){var t,e,i,n=s.getElementsByTagName("script");for(t=n.length;t--;){if(!(i=n[t].src)){e=null;break}if(i=M(i),null==e)e=i;else if(e!==i){e=null;break}}return e||void 0}()||"")+"ZeroClipboard.swf",trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},V=function(t){void 0===t?(!function(t){if(t)for(var e in t)_.call(t,e)&&delete t[e]}(N),H=null):"string"==typeof t&&_.call(N,t)&&delete N[t]},q=function(t){return"string"==typeof t&&t&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(t)},G=function(t){var e;if("string"==typeof t&&t?(e=t,t={}):"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(e=t.type),e){e=e.toLowerCase(),!t.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&"clipboard-error"===t.name)&&(t.target=o),k(t,{type:e,target:t.target||n||null,relatedTarget:t.relatedTarget||null,currentTarget:O&&O.bridge||null,timeStamp:t.timeStamp||y()||null});var i=B[t.type];return"error"===t.type&&t.name&&i&&(i=i[t.name]),i&&(t.message=i),"ready"===t.type&&k(t,{target:null,version:O.version}),"error"===t.type&&(j.test(t.name)&&k(t,{target:null,minimumVersion:"11.0.0"}),W.test(t.name)&&k(t,{version:O.version})),"copy"===t.type&&(t.clipboardData={setData:St.setData,clearData:St.clearData}),"aftercopy"===t.type&&(t=at(t,H)),t.target&&!t.relatedTarget&&(t.relatedTarget=X(t.target)),Z(t)}},X=function(t){var e=t&&t.getAttribute&&t.getAttribute("data-clipboard-target");return e?s.getElementById(e):null},Z=function(t){if(t&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)){var e=t.target,i="_mouseover"===t.type&&t.relatedTarget?t.relatedTarget:void 0,n="_mouseout"===t.type&&t.relatedTarget?t.relatedTarget:void 0,o=mt(e),a=r.screenLeft||r.screenX||0,l=r.screenTop||r.screenY||0,c=s.body.scrollLeft+s.documentElement.scrollLeft,h=s.body.scrollTop+s.documentElement.scrollTop,d=o.left+("number"==typeof t._stageX?t._stageX:0),u=o.top+("number"==typeof t._stageY?t._stageY:0),p=d-c,f=u-h,g=a+p,m=l+f,v="number"==typeof t.movementX?t.movementX:0,b="number"==typeof t.movementY?t.movementY:0;delete t._stageX,delete t._stageY,k(t,{srcElement:e,fromElement:i,toElement:n,screenX:g,screenY:m,pageX:d,pageY:u,clientX:p,clientY:f,x:p,y:f,movementX:v,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return t},J=function(t){var e=t&&"string"==typeof t.type&&t.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(e)},K=function(t,e,i,n){n?l(function(){t.apply(e,i)},0):t.apply(e,i)},Q=function(t){if("object"==typeof t&&t&&t.type){var e=J(t),i=P["*"]||[],n=P[t.type]||[],o=i.concat(n);if(o&&o.length){var s,a,l,c,h;for(s=0,a=o.length;s<a;s++)c=this,"string"==typeof(l=o[s])&&"function"==typeof r[l]&&(l=r[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(h=k({},t),K(l,c,[h],e))}return this}},tt=function(t){var e=t.target||n||null,r="swf"===t._source;switch(delete t._source,t.type){case"error":var s="flash-sandboxed"===t.name||function(t){var e=null;return(!1===F||t&&"error"===t.type&&t.name&&-1!==$.indexOf(t.name))&&(e=!1),e}(t);"boolean"==typeof s&&(O.sandboxed=s),-1!==U.indexOf(t.name)?k(O,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,degraded:"flash-degraded"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1}):"version-mismatch"===t.name&&(i=t.swfVersion,k(O,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),bt();break;case"ready":i=t.swfVersion;var a=!0===O.deactivated;k(O,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:a,ready:!a}),bt();break;case"beforecopy":o=e;break;case"copy":var l,c,h=t.relatedTarget;!N["text/html"]&&!N["text/plain"]&&h&&(c=h.value||h.outerHTML||h.innerHTML)&&(l=h.value||h.textContent||h.innerText)?(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l),c!==l&&t.clipboardData.setData("text/html",c)):!N["text/plain"]&&t.target&&(l=t.target.getAttribute("data-clipboard-text"))&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l));break;case"aftercopy":et(t),St.clearData(),e&&e!==ut()&&e.focus&&e.focus();break;case"_mouseover":St.focus(e),!0===Y.bubbleEvents&&r&&(e&&e!==t.relatedTarget&&!I(t.relatedTarget,e)&&it(k({},t,{type:"mouseenter",bubbles:!1,cancelable:!1})),it(k({},t,{type:"mouseover"})));break;case"_mouseout":St.blur(),!0===Y.bubbleEvents&&r&&(e&&e!==t.relatedTarget&&!I(t.relatedTarget,e)&&it(k({},t,{type:"mouseleave",bubbles:!1,cancelable:!1})),it(k({},t,{type:"mouseout"})));break;case"_mousedown":pt(e,Y.activeClass),!0===Y.bubbleEvents&&r&&it(k({},t,{type:t.type.slice(1)}));break;case"_mouseup":ft(e,Y.activeClass),!0===Y.bubbleEvents&&r&&it(k({},t,{type:t.type.slice(1)}));break;case"_click":o=null,!0===Y.bubbleEvents&&r&&it(k({},t,{type:t.type.slice(1)}));break;case"_mousemove":!0===Y.bubbleEvents&&r&&it(k({},t,{type:t.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type))return!0},et=function(t){if(t.errors&&t.errors.length>0){var e=T(t);k(e,{type:"error",name:"clipboard-error"}),delete e.success,l(function(){St.emit(e)},0)}},it=function(t){if(t&&"string"==typeof t.type&&t){var e,i=t.target||null,n=i&&i.ownerDocument||s,o={view:n.defaultView||r,canBubble:!0,cancelable:!0,detail:"click"===t.type?1:0,button:"number"==typeof t.which?t.which-1:"number"==typeof t.button?t.button:n.createEvent?0:1},a=k(o,t);i&&n.createEvent&&i.dispatchEvent&&(a=[a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget],(e=n.createEvent("MouseEvents")).initMouseEvent&&(e.initMouseEvent.apply(e,a),e._source="js",i.dispatchEvent(e)))}},nt=function(t){for(var e=t&&t.parentNode;e&&"OBJECT"===e.nodeName&&e.parentNode;)e=e.parentNode;return e||null},ot=function(){var t,e=O.bridge,i=nt(e);if(!e){var n=dt(r.location.host,Y),o="never"===n?"none":"all",a=ct(k({jsVersion:St.version},Y)),l=Y.swfPath+lt(Y.swfPath,Y);i=function(){var t=s.createElement("div");return t.id=Y.containerId,t.className=Y.containerClass,t.style.position="absolute",t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",t.style.zIndex=""+xt(Y.zIndex),t}();var c=s.createElement("div");i.appendChild(c),s.body.appendChild(i);var d=s.createElement("div"),u="activex"===O.pluginType;d.innerHTML='<object id="'+Y.swfObjectId+'" name="'+Y.swfObjectId+'" width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+n+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+a+'"/><div id="'+Y.swfObjectId+'_fallbackContent">&nbsp;</div></object>',e=d.firstChild,d=null,S(e).ZeroClipboard=St,i.replaceChild(e,c),function(){var t=Y.flashLoadTimeout;if("number"==typeof t&&t>=0){var e=Math.min(1e3,t/10),i=Y.swfObjectId+"_fallbackContent";z=h(function(){var t=s.getElementById(i);vt(t)&&(bt(),O.deactivated=null,St.emit({type:"error",name:"swf-not-found"}))},e)}}()}return e||((e=s[Y.swfObjectId])&&(t=e.length)&&(e=e[t-1]),!e&&i&&(e=i.firstChild)),O.bridge=e||null,e},rt=function(){var t=O.bridge;if(t){var e=nt(t);e&&("activex"===O.pluginType&&"readyState"in t?(t.style.display="none",function i(){if(4===t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode&&t.parentNode.removeChild(t),e.parentNode&&e.parentNode.removeChild(e)}else l(i,10)}()):(t.parentNode&&t.parentNode.removeChild(t),e.parentNode&&e.parentNode.removeChild(e))),bt(),O.ready=null,O.bridge=null,O.deactivated=null,i=void 0}},st=function(t){var e={},i={};if("object"==typeof t&&t){for(var n in t)if(n&&_.call(t,n)&&"string"==typeof t[n]&&t[n])switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=t[n],i.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=t[n],i.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=t[n],i.rtf=n}return{data:e,formatMap:i}}},at=function(t,e){if("object"!=typeof t||!t||"object"!=typeof e||!e)return t;var i={};for(var n in t)if(_.call(t,n))if("errors"===n){i[n]=t[n]?t[n].slice():[];for(var o=0,r=i[n].length;o<r;o++)i[n][o].format=e[i[n][o].format]}else if("success"!==n&&"data"!==n)i[n]=t[n];else{i[n]={};var s=t[n];for(var a in s)a&&_.call(s,a)&&_.call(e,a)&&(i[n][e[a]]=s[a])}return i},lt=function(t,e){return null==e||e&&!0===e.cacheBust?(-1===t.indexOf("?")?"?":"&")+"noCache="+y():""},ct=function(t){var e,i,n,o,s="",a=[];if(t.trustedDomains&&("string"==typeof t.trustedDomains?o=[t.trustedDomains]:"object"==typeof t.trustedDomains&&"length"in t.trustedDomains&&(o=t.trustedDomains)),o&&o.length)for(e=0,i=o.length;e<i;e++)if(_.call(o,e)&&o[e]&&"string"==typeof o[e]){if(!(n=ht(o[e])))continue;if("*"===n){a.length=0,a.push(n);break}a.push.apply(a,[n,"//"+n,r.location.protocol+"//"+n])}return a.length&&(s+="trustedOrigins="+p(a.join(","))),!0===t.forceEnhancedClipboard&&(s+=(s?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof t.swfObjectId&&t.swfObjectId&&(s+=(s?"&":"")+"swfObjectId="+p(t.swfObjectId)),"string"==typeof t.jsVersion&&t.jsVersion&&(s+=(s?"&":"")+"jsVersion="+p(t.jsVersion)),s},ht=function(t){if(null==t||""===t)return null;if(""===(t=t.replace(/^\s+|\s+$/g,"")))return null;var e=t.indexOf("//"),i=(t=-1===e?t:t.slice(e+2)).indexOf("/");return(t=-1===i?t:-1===e||0===i?null:t.slice(0,i))&&".swf"===t.slice(-4).toLowerCase()?null:t||null},dt=function(t,e){var i=ht(e.swfPath);null===i&&(i=t);var n=function(t){var e,i,n,o=[];if("string"==typeof t&&(t=[t]),"object"!=typeof t||!t||"number"!=typeof t.length)return o;for(e=0,i=t.length;e<i;e++)if(_.call(t,e)&&(n=ht(t[e]))){if("*"===n){o.length=0,o.push("*");break}-1===o.indexOf(n)&&o.push(n)}return o}(e.trustedDomains),o=n.length;if(o>0){if(1===o&&"*"===n[0])return"always";if(-1!==n.indexOf(t))return 1===o&&t===i?"sameDomain":"always"}return"never"},ut=function(){try{return s.activeElement}catch(t){return null}},pt=function(t,e){var i,n,o,r=[];if("string"==typeof e&&e&&(r=e.split(/\s+/)),t&&1===t.nodeType&&r.length>0)if(t.classList)for(i=0,n=r.length;i<n;i++)t.classList.add(r[i]);else if(t.hasOwnProperty("className")){for(o=" "+t.className+" ",i=0,n=r.length;i<n;i++)-1===o.indexOf(" "+r[i]+" ")&&(o+=r[i]+" ");t.className=o.replace(/^\s+|\s+$/g,"")}return t},ft=function(t,e){var i,n,o,r=[];if("string"==typeof e&&e&&(r=e.split(/\s+/)),t&&1===t.nodeType&&r.length>0)if(t.classList&&t.classList.length>0)for(i=0,n=r.length;i<n;i++)t.classList.remove(r[i]);else if(t.className){for(o=(" "+t.className+" ").replace(/[\r\n\t]/g," "),i=0,n=r.length;i<n;i++)o=o.replace(" "+r[i]+" "," ");t.className=o.replace(/^\s+|\s+$/g,"")}return t},gt=function(t,e){var i=u(t,null).getPropertyValue(e);return"cursor"!==e||i&&"auto"!==i||"A"!==t.nodeName?i:"pointer"},mt=function(t){var e={left:0,top:0,width:0,height:0};if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),n=r.pageXOffset,o=r.pageYOffset,a=s.documentElement.clientLeft||0,l=s.documentElement.clientTop||0,c=0,h=0;if("relative"===gt(s.body,"position")){var d=s.body.getBoundingClientRect(),u=s.documentElement.getBoundingClientRect();c=d.left-u.left||0,h=d.top-u.top||0}e.left=i.left+n-a-c,e.top=i.top+o-l-h,e.width="width"in i?i.width:i.right-i.left,e.height="height"in i?i.height:i.bottom-i.top}return e},vt=function(t){if(!t)return!1;var e=u(t,null),i=v(e.height)>0,n=v(e.width)>0,o=v(e.top)>=0,r=v(e.left)>=0,s=i&&n&&o&&r,a=s?null:mt(t);return"none"!==e.display&&"collapse"!==e.visibility&&(s||!!a&&(i||a.height>0)&&(n||a.width>0)&&(o||a.top>=0)&&(r||a.left>=0))},bt=function(){c(L),L=0,d(z),z=0},yt=function(){var t;if(n&&(t=nt(O.bridge))){var e=mt(n);k(t.style,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",zIndex:""+xt(Y.zIndex)})}},wt=function(t){!0===O.ready&&(O.bridge&&"function"==typeof O.bridge.setHandCursor?O.bridge.setHandCursor(t):O.ready=!1)},xt=function(t){return/^(?:auto|inherit)$/.test(t)?t:("number"!=typeof t||b(t)?"string"==typeof t&&(e=xt(m(t,10))):e=t,"number"==typeof e?e:"auto");var e},_t=function(e){var i,n,o,r=O.sandboxed,s=null;if(e=!0===e,!1===F)s=!1;else{try{n=t.frameElement||null}catch(t){o={name:t.name,message:t.message}}if(n&&1===n.nodeType&&"IFRAME"===n.nodeName)try{s=n.hasAttribute("sandbox")}catch(t){s=null}else{try{i=document.domain||null}catch(t){i=null}(null===i||o&&"SecurityError"===o.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(o.message.toLowerCase()))&&(s=!0)}}return O.sandboxed=s,r===s||e||Ct(f),s},Ct=function(t){var e,i,n=!1,o=!1,r=!1,s="";function l(t){var e=t.match(/[\d]+/g);return e.length=3,e.join(".")}function c(t){var e;t&&(n=!0,t.version&&(s=l(t.version)),!s&&t.description&&(s=l(t.description)),t.filename&&(e=t.filename,r=!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))))}if(a.plugins&&a.plugins.length)c(a.plugins["Shockwave Flash"]),a.plugins["Shockwave Flash 2.0"]&&(n=!0,s="2.0.0.11");else if(a.mimeTypes&&a.mimeTypes.length)c((i=a.mimeTypes["application/x-shockwave-flash"])&&i.enabledPlugin);else if(void 0!==t){o=!0;try{e=new t("ShockwaveFlash.ShockwaveFlash.7"),n=!0,s=l(e.GetVariable("$version"))}catch(i){try{e=new t("ShockwaveFlash.ShockwaveFlash.6"),n=!0,s="6.0.21"}catch(i){try{e=new t("ShockwaveFlash.ShockwaveFlash"),n=!0,s=l(e.GetVariable("$version"))}catch(t){o=!1}}}}O.disabled=!0!==n,O.outdated=s&&v(s)<v("11.0.0"),O.version=s||"0.0.0",O.pluginType=r?"pepper":o?"activex":n?"netscape":"unknown"};Ct(f),_t(!0);var St=function(){if(!(this instanceof St))return new St;"function"==typeof St._createClient&&St._createClient.apply(this,D(arguments))};x(St,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),St.config=function(){return function(t){if("object"==typeof t&&null!==t)for(var e in t)if(_.call(t,e))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(e))Y[e]=t[e];else if(null==O.bridge)if("containerId"===e||"swfObjectId"===e){if(!q(t[e]))throw new Error("The specified `"+e+"` value is not valid as an HTML4 Element ID");Y[e]=t[e]}else Y[e]=t[e];return"string"==typeof t&&t?_.call(Y,t)?Y[t]:void 0:T(Y)}.apply(this,D(arguments))},St.state=function(){return function(){return _t(),{browser:E(a,["userAgent","platform","appName"]),flash:R(O,["bridge"]),zeroclipboard:{version:St.version,config:St.config()}}}.apply(this,D(arguments))},St.isFlashUnusable=function(){return function(){return!!(O.disabled||O.outdated||O.sandboxed||O.unavailable||O.degraded||O.deactivated)}.apply(this,D(arguments))},St.on=function(){return function(t,e){var n,o,r,s={};if("string"==typeof t&&t)r=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&void 0===e)for(n in t)_.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&St.on(n,t[n]);if(r&&r.length){for(n=0,o=r.length;n<o;n++)s[t=r[n].replace(/^on/,"")]=!0,P[t]||(P[t]=[]),P[t].push(e);if(s.ready&&O.ready&&St.emit({type:"ready"}),s.error){for(n=0,o=U.length;n<o;n++)if(!0===O[U[n].replace(/^flash-/,"")]){St.emit({type:"error",name:U[n]});break}void 0!==i&&St.version!==i&&St.emit({type:"error",name:"version-mismatch",jsVersion:St.version,swfVersion:i})}}return St}.apply(this,D(arguments))},St.off=function(){return function(t,e){var i,n,o,r,s;if(0===arguments.length)r=w(P);else if("string"==typeof t&&t)r=t.split(/\s+/);else if("object"==typeof t&&t&&void 0===e)for(i in t)_.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&St.off(i,t[i]);if(r&&r.length)for(i=0,n=r.length;i<n;i++)if(t=r[i].toLowerCase().replace(/^on/,""),(s=P[t])&&s.length)if(e)for(o=s.indexOf(e);-1!==o;)s.splice(o,1),o=s.indexOf(e,o);else s.length=0;return St}.apply(this,D(arguments))},St.handlers=function(){return function(t){return"string"==typeof t&&t?T(P[t])||null:T(P)}.apply(this,D(arguments))},St.emit=function(){return function(t){var e,i,n;if((t=G(t))&&!tt(t))return"ready"===t.type&&!0===O.overdue?St.emit({type:"error",name:"flash-overdue"}):(e=k({},t),Q.call(this,e),"copy"===t.type&&(i=(n=st(N)).data,H=n.formatMap),i)}.apply(this,D(arguments))},St.create=function(){return function(){var t=O.sandboxed;if(_t(),"boolean"!=typeof O.ready&&(O.ready=!1),O.sandboxed!==t&&!0===O.sandboxed)O.ready=!1,St.emit({type:"error",name:"flash-sandboxed"});else if(!St.isFlashUnusable()&&null===O.bridge){var e=Y.flashLoadTimeout;"number"==typeof e&&e>=0&&(L=l(function(){"boolean"!=typeof O.deactivated&&(O.deactivated=!0),!0===O.deactivated&&St.emit({type:"error",name:"flash-deactivated"})},e)),O.overdue=!1,ot()}}.apply(this,D(arguments))},St.destroy=function(){return function(){St.clearData(),St.blur(),St.emit("destroy"),rt(),St.off()}.apply(this,D(arguments))},St.setData=function(){return function(t,e){var i;if("object"==typeof t&&t&&void 0===e)i=t,St.clearData();else{if("string"!=typeof t||!t)return;(i={})[t]=e}for(var n in i)"string"==typeof n&&n&&_.call(i,n)&&"string"==typeof i[n]&&i[n]&&(N[n]=i[n])}.apply(this,D(arguments))},St.clearData=function(){return V.apply(this,D(arguments))},St.getData=function(){return function(t){return void 0===t?T(N):"string"==typeof t&&_.call(N,t)?N[t]:void 0}.apply(this,D(arguments))},St.focus=St.activate=function(){return function(t){if(t&&1===t.nodeType){n&&(ft(n,Y.activeClass),n!==t&&ft(n,Y.hoverClass)),n=t,pt(t,Y.hoverClass);var e=t.getAttribute("title")||Y.title;if("string"==typeof e&&e){var i=nt(O.bridge);i&&i.setAttribute("title",e)}var o=!0===Y.forceHandCursor||"pointer"===gt(t,"cursor");wt(o),yt()}}.apply(this,D(arguments))},St.blur=St.deactivate=function(){return function(){var t=nt(O.bridge);t&&(t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px"),n&&(ft(n,Y.hoverClass),ft(n,Y.activeClass),n=null)}.apply(this,D(arguments))},St.activeElement=function(){return function(){return n||null}.apply(this,D(arguments))};var Dt=0,kt={},Tt=0,Et={},Rt={};k(Y,{autoActivate:!0});var It=function(t){if(!t||!t.type)return!1;if(t.client&&t.client!==this)return!1;var e=kt[this.id],i=e&&e.elements,n=!!i&&i.length>0,o=!t.target||n&&-1!==i.indexOf(t.target),r=t.relatedTarget&&n&&-1!==i.indexOf(t.relatedTarget),s=t.client&&t.client===this;return!(!e||!(o||r||s))},Mt=function(t){var e=kt[this.id];if("object"==typeof t&&t&&t.type&&e){var i=J(t),n=e&&e.handlers["*"]||[],o=e&&e.handlers[t.type]||[],s=n.concat(o);if(s&&s.length){var a,l,c,h,d;for(a=0,l=s.length;a<l;a++)h=this,"string"==typeof(c=s[a])&&"function"==typeof r[c]&&(c=r[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(h=c,c=c.handleEvent),"function"==typeof c&&(d=k({},t),K(c,h,[d],i))}}},At=function(t){return"string"==typeof t&&(t=[]),"number"!=typeof t.length?[t]:t},Ft=function(t){if(t&&1===t.nodeType){var e=function(t){(t||(t=r.event))&&("js"!==t._source&&(t.stopImmediatePropagation(),t.preventDefault()),delete t._source)},i=function(i){(i||(i=r.event))&&(e(i),St.focus(t))};t.addEventListener("mouseover",i,!1),t.addEventListener("mouseout",e,!1),t.addEventListener("mouseenter",e,!1),t.addEventListener("mouseleave",e,!1),t.addEventListener("mousemove",e,!1),Rt[t.zcClippingId]={mouseover:i,mouseout:e,mouseenter:e,mouseleave:e,mousemove:e}}},Ot=function(t){if(t&&1===t.nodeType){var e=Rt[t.zcClippingId];if("object"==typeof e&&e){for(var i,n,o=["move","leave","enter","out","over"],r=0,s=o.length;r<s;r++)"function"==typeof(n=e[i="mouse"+o[r]])&&t.removeEventListener(i,n,!1);delete Rt[t.zcClippingId]}}};St._createClient=function(){(function(t){var e=this;e.id=""+Dt++,kt[e.id]={instance:e,elements:[],handlers:{}},t&&e.clip(t),St.on("*",function(t){return e.emit(t)}),St.on("destroy",function(){e.destroy()}),St.create()}).apply(this,D(arguments))},St.prototype.on=function(){return function(t,e){var n,o,r,s={},a=kt[this.id],l=a&&a.handlers;if(!a)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof t&&t)r=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&void 0===e)for(n in t)_.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.on(n,t[n]);if(r&&r.length){for(n=0,o=r.length;n<o;n++)s[t=r[n].replace(/^on/,"")]=!0,l[t]||(l[t]=[]),l[t].push(e);if(s.ready&&O.ready&&this.emit({type:"ready",client:this}),s.error){for(n=0,o=U.length;n<o;n++)if(O[U[n].replace(/^flash-/,"")]){this.emit({type:"error",name:U[n],client:this});break}void 0!==i&&St.version!==i&&this.emit({type:"error",name:"version-mismatch",jsVersion:St.version,swfVersion:i})}}return this}.apply(this,D(arguments))},St.prototype.off=function(){return function(t,e){var i,n,o,r,s,a=kt[this.id],l=a&&a.handlers;if(!l)return this;if(0===arguments.length)r=w(l);else if("string"==typeof t&&t)r=t.split(/\s+/);else if("object"==typeof t&&t&&void 0===e)for(i in t)_.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&this.off(i,t[i]);if(r&&r.length)for(i=0,n=r.length;i<n;i++)if((s=l[t=r[i].toLowerCase().replace(/^on/,"")])&&s.length)if(e)for(o=s.indexOf(e);-1!==o;)s.splice(o,1),o=s.indexOf(e,o);else s.length=0;return this}.apply(this,D(arguments))},St.prototype.handlers=function(){return function(t){var e=null,i=kt[this.id]&&kt[this.id].handlers;return i&&(e="string"==typeof t&&t?i[t]?i[t].slice(0):[]:T(i)),e}.apply(this,D(arguments))},St.prototype.emit=function(){return function(t){if(It.call(this,t)){"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(t=k({},t));var e=k({},G(t),{client:this});Mt.call(this,e)}return this}.apply(this,D(arguments))},St.prototype.clip=function(){return function(t){if(!kt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");t=At(t);for(var e=0;e<t.length;e++)if(_.call(t,e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?-1===Et[t[e].zcClippingId].indexOf(this.id)&&Et[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+Tt++,Et[t[e].zcClippingId]=[this.id],!0===Y.autoActivate&&Ft(t[e]));var i=kt[this.id]&&kt[this.id].elements;-1===i.indexOf(t[e])&&i.push(t[e])}return this}.apply(this,D(arguments))},St.prototype.unclip=function(){return function(t){var e=kt[this.id];if(!e)return this;for(var i,n=e.elements,o=(t=void 0===t?n.slice(0):At(t)).length;o--;)if(_.call(t,o)&&t[o]&&1===t[o].nodeType){for(i=0;-1!==(i=n.indexOf(t[o],i));)n.splice(i,1);var r=Et[t[o].zcClippingId];if(r){for(i=0;-1!==(i=r.indexOf(this.id,i));)r.splice(i,1);0===r.length&&(!0===Y.autoActivate&&Ot(t[o]),delete t[o].zcClippingId)}}return this}.apply(this,D(arguments))},St.prototype.elements=function(){return function(){var t=kt[this.id];return t&&t.elements?t.elements.slice(0):[]}.apply(this,D(arguments))},St.prototype.destroy=function(){return function(){kt[this.id]&&(this.unclip(),this.off(),delete kt[this.id])}.apply(this,D(arguments))},St.prototype.setText=function(t){if(!kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return St.setData("text/plain",t),this},St.prototype.setHtml=function(t){if(!kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return St.setData("text/html",t),this},St.prototype.setRichText=function(t){if(!kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return St.setData("application/rtf",t),this},St.prototype.setData=function(){if(!kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return St.setData.apply(this,D(arguments)),this},St.prototype.clearData=function(){if(!kt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return St.clearData.apply(this,D(arguments)),this},St.prototype.getData=function(){if(!kt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return St.getData.apply(this,D(arguments))},"function"==typeof define&&define.amd?define(function(){return St}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=St:t.ZeroClipboard=St}(function(){return this||window}()),function(t,e){var i=function(){var t={};return function(){!function(t,e){"use strict";function i(t,i,n){if("string"!=typeof t)throw"invalid module definition, module id must be defined and be a string";if(i===e)throw"invalid module definition, dependencies must be specified";if(n===e)throw"invalid module definition, definition function must be specified";!function(t,e){for(var i,n=[],s=0;s<t.length;++s){if(!(i=r[t[s]]||o(t[s])))throw"module definition dependecy not found: "+t[s];n.push(i)}e.apply(null,n)}(i,function(){r[t]=n.apply(null,arguments)})}function n(t){return!!r[t]}function o(e){for(var i=t,n=e.split(/[.\/]/),o=0;o<n.length;++o){if(!i[n[o]])return;i=i[n[o]]}return i}var r={};i("moxie/core/utils/Basic",[],function(){function t(t){return void 0===t?"undefined":null===t?"null":t.nodeType?"node":{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function e(){return n(!1,!1,arguments)}function i(i){switch(t(i)){case"array":return Array.prototype.slice.call(i);case"object":return e({},i)}return i}function n(e,s,a){var l,c=a[0];return o(a,function(a,h){h>0&&o(a,function(o,a){var h=-1!==r(t(o),["array","object"]);return!!(o===l||e&&c[a]===l)||(h&&s&&(o=i(o)),void(t(c[a])===t(o)&&h?n(e,s,[c[a],o]):c[a]=o))})}),c}function o(t,e){var i,n,o,r;if(t){try{i=t.length}catch(t){i=r}if(i===r||"number"!=typeof i){for(n in t)if(t.hasOwnProperty(n)&&!1===e(t[n],n))return}else for(o=0;i>o;o++)if(!1===e(t[o],o))return}}function r(t,e){if(e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i}return-1}var s=function(){var t=0;return function(e){var i,n=(new Date).getTime().toString(32);for(i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(e||"o_")+n+(t++).toString(32)}}();return{guid:s,typeOf:t,extend:e,extendIf:function(){return n(!0,!1,arguments)},extendImmutable:function(){return n(!1,!0,arguments)},extendImmutableIf:function(){return n(!0,!0,arguments)},clone:function(e){switch(t(e)){case"array":return n(!1,!0,[[],e]);case"object":return n(!1,!0,[{},e]);default:return e}},inherit:function(t,e){function i(){this.constructor=t}for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.parent=e.prototype,t},each:o,isEmptyObj:function(e){var i;if(!e||"object"!==t(e))return!0;for(i in e)return!1;return!0},inSeries:function(e,i){var n=e.length;"function"!==t(i)&&(i=function(){}),e&&e.length||i(),function o(r){"function"===t(e[r])&&e[r](function(t){++r<n&&!t?o(r):i(t)})}(0)},inParallel:function(t,e){var i=0,n=t.length,r=new Array(n);o(t,function(t,o){t(function(t){if(t)return e(t);var s=[].slice.call(arguments);s.shift(),r[o]=s,++i===n&&(r.unshift(null),e.apply(this,r))})})},inArray:r,arrayDiff:function(e,i){var n=[];for(var o in"array"!==t(e)&&(e=[e]),"array"!==t(i)&&(i=[i]),e)-1===r(e[o],i)&&n.push(e[o]);return!!n.length&&n},arrayIntersect:function(t,e){var i=[];return o(t,function(t){-1!==r(t,e)&&i.push(t)}),i.length?i:null},toArray:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i},trim:function(t){return t?String.prototype.trim?String.prototype.trim.call(t):t.toString().replace(/^\s*/,"").replace(/\s*$/,""):t},sprintf:function(t){var e=[].slice.call(arguments,1);return t.replace(/%([a-z])/g,function(t,i){var n=e.shift();switch(i){case"s":return n+"";case"d":return parseInt(n,10);case"f":return parseFloat(n);case"c":return"";default:return n}})},parseSizeStr:function(t){if("string"!=typeof t)return t;var e,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return t=/^([0-9\.]+)([tmgk]?)$/.exec(t.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),e=t[2],t=+t[1],i.hasOwnProperty(e)&&(t*=i[e]),Math.floor(t)},delay:function(t,e){var i=this;setTimeout(function(){t.call(i)},e||1)}}}),i("moxie/core/utils/Encode",[],function(){var t=function(t){return unescape(encodeURIComponent(t))},e=function(t){return decodeURIComponent(escape(t))};return{utf8_encode:t,utf8_decode:e,atob:function(t,i){if("function"==typeof window.atob)return i?e(window.atob(t)):window.atob(t);var n,o,r,s,a,l,c,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,p=0,f="",g=[];if(!t)return t;t+="";do{s=d.indexOf(t.charAt(u++)),a=d.indexOf(t.charAt(u++)),l=d.indexOf(t.charAt(u++)),c=d.indexOf(t.charAt(u++)),n=255&(h=s<<18|a<<12|l<<6|c)>>16,o=255&h>>8,r=255&h,g[p++]=64==l?String.fromCharCode(n):64==c?String.fromCharCode(n,o):String.fromCharCode(n,o,r)}while(u<t.length);return f=g.join(""),i?e(f):f},btoa:function(e,i){if(i&&(e=t(e)),"function"==typeof window.btoa)return window.btoa(e);var n,o,r,s,a,l,c,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,p=0,f="",g=[];if(!e)return e;do{n=e.charCodeAt(u++),o=e.charCodeAt(u++),r=e.charCodeAt(u++),s=63&(h=n<<16|o<<8|r)>>18,a=63&h>>12,l=63&h>>6,c=63&h,g[p++]=d.charAt(s)+d.charAt(a)+d.charAt(l)+d.charAt(c)}while(u<e.length);f=g.join("");var m=e.length%3;return(m?f.slice(0,m-3):f)+"===".slice(m||3)}}}),i("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(t){var i=function(t){var e="function",i="object",n="name",o="version",r={has:function(t,e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()}},s={rgx:function(){for(var n,o,r,s,a,l,c,h=0,d=arguments;h<d.length;h+=2){var u=d[h],p=d[h+1];if(void 0===n)for(s in n={},p)typeof(a=p[s])===i?n[a[0]]=t:n[a]=t;for(o=r=0;o<u.length;o++)if(l=u[o].exec(this.getUA())){for(s=0;s<p.length;s++)c=l[++r],typeof(a=p[s])===i&&a.length>0?2==a.length?n[a[0]]=typeof a[1]==e?a[1].call(this,c):a[1]:3==a.length?n[a[0]]=typeof a[1]!==e||a[1].exec&&a[1].test?c?c.replace(a[1],a[2]):t:c?a[1].call(this,c,a[2]):t:4==a.length&&(n[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):t):n[a]=c||t;break}if(l)break}return n},str:function(e,n){for(var o in n)if(typeof n[o]===i&&n[o].length>0){for(var s=0;s<n[o].length;s++)if(r.has(n[o][s],e))return"?"===o?t:o}else if(r.has(n[o],e))return"?"===o?t:o;return e}},a={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},l={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[n,o],[/\s(opr)\/([\w\.]+)/i],[[n,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[n,o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[n,"IE"],o],[/(edge)\/((\d+)?[\w\.]+)/i],[n,o],[/(yabrowser)\/([\w\.]+)/i],[[n,"Yandex"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],o],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[n,o],[/(dolfin)\/([\w\.]+)/i],[[n,"Dolphin"],o],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[n,"Chrome"],o],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[o,[n,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[o,[n,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[o,[n,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[n,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,n],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[n,[o,s.str,a.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[n,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[n,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[n,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[n,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[n,o],[/rv\:([\w\.]+).*(gecko)/i],[o,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[n,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[n,[o,s.str,a.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[n,"Windows"],[o,s.str,a.os.windows.version]],[/\((bb)(10);/i],[[n,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[n,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[n,"Symbian"],o],[/\((series40);/i],[n],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[n,"Firefox OS"],o],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[n,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[n,"Chromium OS"],o],[/(sunos)\s?([\w\.]+\d)*/i],[[n,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[n,o],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[n,"iOS"],[o,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[n,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[n,o]]};return function(t){var e=t||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return s.rgx.apply(this,l.browser)},this.getEngine=function(){return s.rgx.apply(this,l.engine)},this.getOS=function(){return s.rgx.apply(this,l.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return e},this.setUA=function(t){return e=t,this},this.setUA(e)}}(),n=function(){var i={access_global_ns:function(){return!!window.moxie},define_property:!1,create_canvas:function(){var t=document.createElement("canvas"),e=!(!t.getContext||!t.getContext("2d"));return i.create_canvas=e,e},return_response_type:function(e){try{if(-1!==t.inArray(e,["","text","document"]))return!0;if(window.XMLHttpRequest){var i=new XMLHttpRequest;if(i.open("get","/"),"responseType"in i)return i.responseType=e,i.responseType===e}}catch(t){}return!1},use_blob_uri:function(){var t=window.URL;return i.use_blob_uri=t&&"createObjectURL"in t&&"revokeObjectURL"in t&&("IE"!==r.browser||r.verComp(r.version,"11.0.46",">=")),i.use_blob_uri},use_data_uri:function(){var t=new Image;return t.onload=function(){i.use_data_uri=1===t.width&&1===t.height},setTimeout(function(){t.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return i.use_data_uri&&("IE"!==r.browser||r.version>=9)},use_data_uri_of:function(t){return i.use_data_uri&&33e3>t||i.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var t=document.createElement("input");return t.setAttribute("type","file"),i.use_fileinput=!t.disabled},use_webgl:function(){var t,n=document.createElement("canvas"),o=null;try{o=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(t){}return o||(o=null),t=!!o,i.use_webgl=t,n=e,t}};return function(e){var n=[].slice.call(arguments);return n.shift(),"function"===t.typeOf(i[e])?i[e].apply(this,n):!!i[e]}}(),o=(new i).getResult(),r={can:n,uaParser:i,browser:o.browser.name,version:o.browser.version,os:o.os.name,osVersion:o.os.version,verComp:function(t,e,i){var n=0,o=0,r=0,s={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},a=function(t){return(t=(t=(""+t).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?t.split("."):[-8]},l=function(t){return t?isNaN(t)?s[t]||-7:parseInt(t,10):0};for(t=a(t),e=a(e),o=Math.max(t.length,e.length),n=0;o>n;n++)if(t[n]!=e[n]){if(t[n]=l(t[n]),e[n]=l(e[n]),t[n]<e[n]){r=-1;break}if(t[n]>e[n]){r=1;break}}if(!i)return r;switch(i){case">":case"gt":return r>0;case">=":case"ge":return r>=0;case"<=":case"le":return 0>=r;case"==":case"=":case"eq":return 0===r;case"<>":case"!=":case"ne":return 0!==r;case"":case"<":case"lt":return 0>r;default:return null}},swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return r.OS=r.os,r}),i("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(t){function e(t,e){var i;for(i in t)if(t[i]===e)return i;return null}return{RuntimeError:function(){function i(t,i){this.code=t,this.name=e(n,t),this.message=this.name+(i||": RuntimeError "+this.code)}var n={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return t.extend(i,n),i.prototype=Error.prototype,i}(),OperationNotAllowedException:function(){function e(t){this.code=t,this.name="OperationNotAllowedException"}return t.extend(e,{NOT_ALLOWED_ERR:1}),e.prototype=Error.prototype,e}(),ImageError:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": ImageError "+this.code}var n={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return t.extend(i,n),i.prototype=Error.prototype,i}(),FileException:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": FileException "+this.code}var n={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return t.extend(i,n),i.prototype=Error.prototype,i}(),DOMException:function(){function i(t){this.code=t,this.name=e(n,t),this.message=this.name+": DOMException "+this.code}var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return t.extend(i,n),i.prototype=Error.prototype,i}(),EventException:function(){function e(t){this.code=t,this.name="EventException"}return t.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0}),e.prototype=Error.prototype,e}()}}),i("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(t){var e=function(t,e){if(!t.className)return!1;var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");return i.test(t.className)};return{get:function(t){return"string"!=typeof t?t:document.getElementById(t)},hasClass:e,addClass:function(t,i){e(t,i)||(t.className=t.className?t.className.replace(/\s+$/,"")+" "+i:i)},removeClass:function(t,e){if(t.className){var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t.className=t.className.replace(i,function(t,e,i){return" "===e&&" "===i?" ":""})}},getStyle:function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null)[e]:void 0},getPos:function(e,i){function n(t){var e,i,n=0,o=0;return t&&(i=t.getBoundingClientRect(),e="CSS1Compat"===c.compatMode?c.documentElement:c.body,n=i.left+e.scrollLeft,o=i.top+e.scrollTop),{x:n,y:o}}var o,r,s,a=0,l=0,c=document;if(e=e,i=i||c.body,e&&e.getBoundingClientRect&&"IE"===t.browser&&(!c.documentMode||c.documentMode<8))return r=n(e),s=n(i),{x:r.x-s.x,y:r.y-s.y};for(o=e;o&&o!=i&&o.nodeType;)a+=o.offsetLeft||0,l+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=i&&o.nodeType;)a-=o.scrollLeft||0,l-=o.scrollTop||0,o=o.parentNode;return{x:a,y:l}},getSize:function(t){return{w:t.offsetWidth||t.clientWidth,h:t.offsetHeight||t.clientHeight}}}}),i("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(t,e,i){function n(){this.uid=i.guid()}var o={};return i.extend(n.prototype,{init:function(){this.uid||(this.uid=i.guid("uid_"))},addEventListener:function(t,e,n,r){var s,a=this;return this.hasOwnProperty("uid")||(this.uid=i.guid("uid_")),t=i.trim(t),/\s/.test(t)?void i.each(t.split(/\s+/),function(t){a.addEventListener(t,e,n,r)}):(t=t.toLowerCase(),n=parseInt(n,10)||0,(s=o[this.uid]&&o[this.uid][t]||[]).push({fn:e,priority:n,scope:r||this}),o[this.uid]||(o[this.uid]={}),void(o[this.uid][t]=s))},hasEventListener:function(t){var e;return t?(t=t.toLowerCase(),e=o[this.uid]&&o[this.uid][t]):e=o[this.uid],e||!1},removeEventListener:function(t,e){var n,r,s=this;if(t=t.toLowerCase(),/\s/.test(t))i.each(t.split(/\s+/),function(t){s.removeEventListener(t,e)});else if(n=o[this.uid]&&o[this.uid][t]){if(e){for(r=n.length-1;r>=0;r--)if(n[r].fn===e){n.splice(r,1);break}}else n=[];n.length||(delete o[this.uid][t],i.isEmptyObj(o[this.uid])&&delete o[this.uid])}},removeAllEventListeners:function(){o[this.uid]&&delete o[this.uid]},dispatchEvent:function(t){var n,r,s,a,l,c={},h=!0;if("string"!==i.typeOf(t)){if(a=t,"string"!==i.typeOf(a.type))throw new e.EventException(e.EventException.UNSPECIFIED_EVENT_TYPE_ERR);t=a.type,a.total!==l&&a.loaded!==l&&(c.total=a.total,c.loaded=a.loaded),c.async=a.async||!1}if(-1!==t.indexOf("::")?function(e){n=e[0],t=e[1]}(t.split("::")):n=this.uid,t=t.toLowerCase(),r=o[n]&&o[n][t]){r.sort(function(t,e){return e.priority-t.priority}),(s=[].slice.call(arguments)).shift(),c.type=t,s.unshift(c);var d=[];i.each(r,function(t){s[0].target=t.scope,c.async?d.push(function(e){setTimeout(function(){e(!1===t.fn.apply(t.scope,s))},1)}):d.push(function(e){e(!1===t.fn.apply(t.scope,s))})}),d.length&&i.inSeries(d,function(t){h=!t})}return h},bindOnce:function(t,e,i,n){var o=this;o.bind.call(this,t,function i(){return o.unbind(t,i),e.apply(this,arguments)},i,n)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(t){var e=this;this.bind(t.join(" "),function(t){var e="on"+t.type.toLowerCase();"function"===i.typeOf(this[e])&&this[e].apply(this,arguments)}),i.each(t,function(t){t="on"+t.toLowerCase(t),"undefined"===i.typeOf(e[t])&&(e[t]=null)})}}),n.instance=new n,n}),i("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(t,e,i,n){function o(t,n,r,a,l){var c,h=this,d=e.guid(n+"_"),u=l||"browser";t=t||{},s[d]=this,r=e.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},r),t.preferred_caps&&(u=o.getMode(a,t.preferred_caps,u)),c=function(){var t={};return{exec:function(e,i,n,o){return c[i]&&(t[e]||(t[e]={context:this,instance:new c[i]}),t[e].instance[n])?t[e].instance[n].apply(this,o):void 0},removeInstance:function(e){delete t[e]},removeAllInstances:function(){var i=this;e.each(t,function(t,n){"function"===e.typeOf(t.instance.destroy)&&t.instance.destroy.call(t.context),i.removeInstance(n)})}}}(),e.extend(this,{initialized:!1,uid:d,type:n,mode:o.getMode(a,t.required_caps,u),shimid:d+"_container",clients:0,options:t,can:function(t,i){var n=arguments[2]||r;if("string"===e.typeOf(t)&&"undefined"===e.typeOf(i)&&(t=o.parseCaps(t)),"object"===e.typeOf(t)){for(var s in t)if(!this.can(s,t[s],n))return!1;return!0}return"function"===e.typeOf(n[t])?n[t].call(this,i):i===n[t]},getShimContainer:function(){var t,n=i.get(this.shimid);return n||(t=i.get(this.options.container)||document.body,(n=document.createElement("div")).id=this.shimid,n.className="moxie-shim moxie-shim-"+this.type,e.extend(n.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.appendChild(n),t=null),n},getShim:function(){return c},shimExec:function(t,e){var i=[].slice.call(arguments,2);return h.getShim().exec.call(this,this.uid,t,e,i)},exec:function(t,e){var i=[].slice.call(arguments,2);return h[t]&&h[t][e]?h[t][e].apply(this,i):h.shimExec.apply(this,arguments)},destroy:function(){if(h){var t=i.get(this.shimid);t&&t.parentNode.removeChild(t),c&&c.removeAllInstances(),this.unbindAll(),delete s[this.uid],this.uid=null,d=h=c=t=null}}}),this.mode&&t.required_caps&&!this.can(t.required_caps)&&(this.mode=!1)}var r={},s={};return o.order="html5,flash,silverlight,html4",o.getRuntime=function(t){return!!s[t]&&s[t]},o.addConstructor=function(t,e){e.prototype=n.instance,r[t]=e},o.getConstructor=function(t){return r[t]||null},o.getInfo=function(t){var e=o.getRuntime(t);return e?{uid:e.uid,type:e.type,mode:e.mode,can:function(){return e.can.apply(e,arguments)}}:null},o.parseCaps=function(t){var i={};return"string"!==e.typeOf(t)?t||{}:(e.each(t.split(","),function(t){i[t]=!0}),i)},o.can=function(t,e){var i,n,r=o.getConstructor(t);return!!r&&(i=new r({required_caps:e}),n=i.mode,i.destroy(),!!n)},o.thatCan=function(t,e){var i=(e||o.order).split(/\s*,\s*/);for(var n in i)if(o.can(i[n],t))return i[n];return null},o.getMode=function(t,i,n){var o=null;if("undefined"===e.typeOf(n)&&(n="browser"),i&&!e.isEmptyObj(t)){if(e.each(i,function(i,n){if(t.hasOwnProperty(n)){var r=t[n](i);if("string"==typeof r&&(r=[r]),o){if(!(o=e.arrayIntersect(o,r)))return o=!1}else o=r}}),o)return-1!==e.inArray(n,o)?n:o[0];if(!1===o)return!1}return n},o.getGlobalEventTarget=function(){if(/^moxie\./.test(t.global_event_dispatcher)&&!t.can("access_global_ns")){var i=e.guid("moxie_event_target_");window[i]=function(t,e){n.instance.dispatchEvent(t,e)},t.global_event_dispatcher=i}return t.global_event_dispatcher},o.capTrue=function(){return!0},o.capFalse=function(){return!1},o.capTest=function(t){return function(){return!!t}},o}),i("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(t,e,i,n){return function(){var t;i.extend(this,{connectRuntime:function(o){var r,s=this;if("string"===i.typeOf(o)?r=o:"string"===i.typeOf(o.ruid)&&(r=o.ruid),r){if(t=n.getRuntime(r))return s.ruid=r,t.clients++,t;throw new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)}!function i(r){var a,l;return r.length?(a=r.shift().toLowerCase(),(l=n.getConstructor(a))?(t=new l(o),t.bind("Init",function(){t.initialized=!0,setTimeout(function(){t.clients++,s.ruid=t.uid,s.trigger("RuntimeInit",t)},1)}),t.bind("Error",function(){t.destroy(),i(r)}),t.bind("Exception",function(t,i){var n=i.name+"(#"+i.code+")"+(i.message?", from: "+i.message:"");s.trigger("RuntimeError",new e.RuntimeError(e.RuntimeError.EXCEPTION_ERR,n))}),t.mode?void t.init():void t.trigger("Error")):void i(r)):(s.trigger("RuntimeError",new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)),void(t=null))}((o.runtime_order||n.order).split(/\s*,\s*/))},disconnectRuntime:function(){t&&--t.clients<=0&&t.destroy(),t=null},getRuntime:function(){return t&&t.uid?t:t=null},exec:function(){return t?t.exec.apply(this,arguments):null},can:function(e){return!!t&&t.can(e)}})}}),i("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(t,e,i){var n={};return function o(r,s){function a(e,i,r){var s,a=n[this.uid];return"string"===t.typeOf(a)&&a.length?((s=new o(null,{type:r,size:i-e})).detach(a.substr(e,s.size)),s):null}i.call(this),r&&this.connectRuntime(r),s?"string"===t.typeOf(s)&&(s={data:s}):s={},t.extend(this,{uid:s.uid||t.guid("uid_"),ruid:r,size:s.size||0,type:s.type||"",slice:function(t,e,i){return this.isDetached()?a.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),t,e,i)},getSource:function(){return n[this.uid]?n[this.uid]:null},detach:function(t){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),"data:"==(t=t||"").substr(0,5)){var i=t.indexOf(";base64,");this.type=t.substring(5,i),t=e.atob(t.substring(i+8))}this.size=t.length,n[this.uid]=t},isDetached:function(){return!this.ruid&&"string"===t.typeOf(n[this.uid])},destroy:function(){this.detach(),delete n[this.uid]}}),s.data?this.detach(s.data):n[this.uid]=s}}),i("moxie/core/I18n",["moxie/core/utils/Basic"],function(t){var e={};return{addI18n:function(i){return t.extend(e,i)},translate:function(t){return e[t]||t},_:function(t){return this.translate(t)},sprintf:function(e){var i=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var e=i.shift();return"undefined"!==t.typeOf(e)?e:""})}}}),i("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(t,e){var i={},n={},o=function(t){var e,o,r,s=t.split(/,/);for(e=0;e<s.length;e+=2){for(r=s[e+1].split(/ /),o=0;o<r.length;o++)i[r[o]]=s[e];n[s[e]]=r}},r=function(e){var i=[];return t.each(e,function(e){if("*"===(e=e.toLowerCase()))return i=[],!1;var o=e.match(/^(\w+)\/(\*|\w+)$/);o&&("*"===o[2]?t.each(n,function(t,e){new RegExp("^"+o[1]+"/").test(e)&&[].push.apply(i,n[e])}):n[e]&&[].push.apply(i,n[e]))}),i},s=function(t){var e=t&&t.match(/\.([^.]+)$/);return e?e[1].toLowerCase():""};return o("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb xlt xla,application/vnd.ms-powerpoint,ppt pps pot ppa,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),{mimes:i,extensions:n,addMimeType:o,extList2mimes:function(e,i){var n,o,r,s,a=[];for(o=0;o<e.length;o++)for(n=e[o].extensions.toLowerCase().split(/\s*,\s*/),r=0;r<n.length;r++){if("*"===n[r])return[];if(s=a[n[r]],i&&/^\w+$/.test(n[r]))a.push("."+n[r]);else if(s&&-1===t.inArray(s,a))a.push(s);else if(!s)return[]}return a},mimes2exts:r,mimes2extList:function(i){var n=[],o=[];return"string"===t.typeOf(i)&&(i=t.trim(i).split(/\s*,\s*/)),o=r(i),n.push({title:e.translate("Files"),extensions:o.length?o.join(","):"*"}),n},getFileExtension:s,getFileMime:function(t){return i[s(t)]||""}}}),i("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(t,e,i,n,o,r,s,a,l){function c(e){var r,c,d;if(-1!==t.inArray(t.typeOf(e),["string","node"])&&(e={browse_button:e}),!(c=n.get(e.browse_button)))throw new o.DOMException(o.DOMException.NOT_FOUND_ERR);d={accept:[{title:s.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:c.parentNode||document.body},"string"==typeof(e=t.extend({},d,e)).required_caps&&(e.required_caps=a.parseCaps(e.required_caps)),"string"==typeof e.accept&&(e.accept=i.mimes2extList(e.accept)),(r=n.get(e.container))||(r=document.body),"static"===n.getStyle(r,"position")&&(r.style.position="relative"),r=c=null,l.call(this),t.extend(this,{uid:t.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var i=this;i.bind("RuntimeInit",function(o,r){i.ruid=r.uid,i.shimid=r.shimid,i.bind("Ready",function(){i.trigger("Refresh")},999),i.bind("Refresh",function(){var i,o,s,a,l;s=n.get(e.browse_button),a=n.get(r.shimid),s&&(i=n.getPos(s,n.get(e.container)),o=n.getSize(s),l=parseInt(n.getStyle(s,"z-index"),10)||0,a&&t.extend(a.style,{top:i.y+"px",left:i.x+"px",width:o.w+"px",height:o.h+"px",zIndex:l+1})),a=s=null}),r.exec.call(i,"FileInput","init",e)}),i.connectRuntime(t.extend({},e,{required_caps:{select_file:!0}}))},getOption:function(t){return e[t]},setOption:function(t,n){if(e.hasOwnProperty(t)){var r=e[t];switch(t){case"accept":"string"==typeof n&&(n=i.mimes2extList(n));break;case"container":case"required_caps":throw new o.FileException(o.FileException.NO_MODIFICATION_ALLOWED_ERR)}e[t]=n,this.exec("FileInput","setOption",t,n),this.trigger("OptionChanged",t,n,r)}},disable:function(e){var i=this.getRuntime();i&&this.exec("FileInput","disable","undefined"===t.typeOf(e)||e)},refresh:function(){this.trigger("Refresh")},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===t.typeOf(this.files)&&t.each(this.files,function(t){t.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(h)}var h=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return c.prototype=r.instance,c}),i("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(t,e,i){function n(n,o){var r;if(o||(o={}),i.apply(this,arguments),this.type||(this.type=e.getFileMime(o.name)),o.name)r=(r=o.name.replace(/\\/g,"/")).substr(r.lastIndexOf("/")+1);else if(this.type){var s=this.type.split("/")[0];r=t.guid((""!==s?s:"file")+"_"),e.extensions[this.type]&&(r+="."+e.extensions[this.type][0])}t.extend(this,{name:r||t.guid("file_"),relativePath:"",lastModifiedDate:o.lastModifiedDate||(new Date).toLocaleString()})}return n.prototype=i.prototype,n}),i("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(t,e,i,n,o,r,s,a,l){function c(i){var o,r=this;"string"==typeof i&&(i={drop_zone:i}),o={accept:[{title:t.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},(i="object"==typeof i?n.extend({},o,i):o).container=e.get(i.drop_zone)||document.body,"static"===e.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=l.mimes2extList(i.accept)),s.call(r),n.extend(r,{uid:n.guid("uid_"),ruid:null,files:null,init:function(){r.bind("RuntimeInit",function(t,e){r.ruid=e.uid,e.exec.call(r,"FileDrop","init",i),r.dispatchEvent("ready")}),r.connectRuntime(i)},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(h)}var h=["ready","dragenter","dragleave","drop","error"];return c.prototype=a.instance,c}),i("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(t,e,i,n,o,r){function s(){function n(t,n){if(this.trigger("loadstart"),this.readyState===s.LOADING)return this.trigger("error",new i.DOMException(i.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend");if(!(n instanceof o))return this.trigger("error",new i.DOMException(i.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend");if(this.result=null,this.readyState=s.LOADING,n.isDetached()){var r=n.getSource();switch(t){case"readAsText":case"readAsBinaryString":this.result=r;break;case"readAsDataURL":this.result="data:"+n.type+";base64,"+e.btoa(r)}this.readyState=s.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(n.ruid),this.exec("FileReader","read",t,n)}r.call(this),t.extend(this,{uid:t.guid("uid_"),readyState:s.EMPTY,result:null,error:null,readAsBinaryString:function(t){n.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){n.call(this,"readAsDataURL",t)},readAsText:function(t){n.call(this,"readAsText",t)},abort:function(){this.result=null,-1===t.inArray(this.readyState,[s.EMPTY,s.DONE])&&(this.readyState===s.LOADING&&(this.readyState=s.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(a),this.bind("Error",function(t,e){this.readyState=s.DONE,this.error=e},999),this.bind("Load",function(){this.readyState=s.DONE},999)}var a=["loadstart","progress","load","abort","error","loadend"];return s.EMPTY=0,s.LOADING=1,s.DONE=2,s.prototype=n.instance,s}),i("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(t){var e=function(i,n){var o,r=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],s=r.length,a={},l=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(i||""),c=/^\/\/\w/.test(i);switch(t.typeOf(n)){case"undefined":n=e(document.location.href,!1);break;case"string":n=e(n,!1)}for(;s--;)l[s]&&(a[r[s]]=l[s]);if(o=!c&&!a.scheme,(c||o)&&(a.scheme=n.scheme),o){a.host=n.host,a.port=n.port;var h="";/^[^\/]/.test(a.path)&&(h=n.path,h=/\/[^\/]*\.[^\/]*$/.test(h)?h.replace(/\/[^\/]+$/,"/"):h.replace(/\/?$/,"/")),a.path=h+(a.path||"")}return a.port||(a.port={http:80,https:443}[a.scheme]||80),a.port=parseInt(a.port,10),a.path||(a.path="/"),delete a.source,a};return{parseUrl:e,resolveUrl:function(t){var i="object"==typeof t?t:e(t);return i.scheme+"://"+i.host+(i.port!=={http:80,https:443}[i.scheme]?":"+i.port:"")+i.path+(i.query?i.query:"")},hasSameOrigin:function(t){function i(t){return[t.scheme,t.host,t.port].join("/")}return"string"==typeof t&&(t=e(t)),i(e())===i(t)}}}),i("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,i){function n(){this.uid=t.guid("uid_"),e.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return n.prototype=i.instance,n}),i("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(t,e,i){return function(){function n(t,e){if(!e.isDetached()){var n=this.connectRuntime(e.ruid).exec.call(this,"FileReaderSync","read",t,e);return this.disconnectRuntime(),n}var o=e.getSource();switch(t){case"readAsBinaryString":return o;case"readAsDataURL":return"data:"+e.type+";base64,"+i.btoa(o);case"readAsText":for(var r="",s=0,a=o.length;a>s;s++)r+=String.fromCharCode(o[s]);return r}}e.call(this),t.extend(this,{uid:t.guid("uid_"),readAsBinaryString:function(t){return n.call(this,"readAsBinaryString",t)},readAsDataURL:function(t){return n.call(this,"readAsDataURL",t)},readAsText:function(t){return n.call(this,"readAsText",t)}})}}),i("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(t,e,i){return function(){var t,n=[];e.extend(this,{append:function(o,r){var s=this,a=e.typeOf(r);r instanceof i?t={name:o,value:r}:"array"===a?(o+="[]",e.each(r,function(t){s.append(o,t)})):"object"===a?e.each(r,function(t,e){s.append(o+"["+e+"]",t)}):"null"===a||"undefined"===a||"number"===a&&isNaN(r)?s.append(o,"false"):n.push({name:o,value:r.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return t&&t.value||null},getBlobName:function(){return t&&t.name||null},each:function(i){e.each(n,function(t){i(t.value,t.name)}),t&&i(t.value,t.name)},destroy:function(){t=null,n=[]}})}}),i("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(t,e,i,n,o,r,s,a,l,c,h,d){function u(){this.uid=t.guid("uid_")}function p(){function i(t,e){return C.hasOwnProperty(t)?1===arguments.length?h.can("define_property")?C[t]:_[t]:void(h.can("define_property")?C[t]=e:_[t]=e):void 0}function l(e){function n(){w&&(w.destroy(),w=null),a.dispatchEvent("loadend"),a=null}function o(o){w.bind("LoadStart",function(t){i("readyState",p.LOADING),a.dispatchEvent("readystatechange"),a.dispatchEvent(t),I&&a.upload.dispatchEvent(t)}),w.bind("Progress",function(t){i("readyState")!==p.LOADING&&(i("readyState",p.LOADING),a.dispatchEvent("readystatechange")),a.dispatchEvent(t)}),w.bind("UploadProgress",function(t){I&&a.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:t.total,loaded:t.loaded})}),w.bind("Load",function(e){i("readyState",p.DONE),i("status",Number(o.exec.call(w,"XMLHttpRequest","getStatus")||0)),i("statusText",f[i("status")]||""),i("response",o.exec.call(w,"XMLHttpRequest","getResponse",i("responseType"))),~t.inArray(i("responseType"),["text",""])?i("responseText",i("response")):"document"===i("responseType")&&i("responseXML",i("response")),P=o.exec.call(w,"XMLHttpRequest","getAllResponseHeaders"),a.dispatchEvent("readystatechange"),i("status")>0?(I&&a.upload.dispatchEvent(e),a.dispatchEvent(e)):(A=!0,a.dispatchEvent("error")),n()}),w.bind("Abort",function(t){a.dispatchEvent(t),n()}),w.bind("Error",function(t){A=!0,i("readyState",p.DONE),a.dispatchEvent("readystatechange"),M=!0,a.dispatchEvent(t),n()}),o.exec.call(w,"XMLHttpRequest","send",{url:m,method:v,async:S,user:b,password:y,headers:D,mimeType:T,encoding:k,responseType:a.responseType,withCredentials:a.withCredentials,options:O},e)}var a=this;(new Date).getTime(),w=new s,"string"==typeof O.required_caps&&(O.required_caps=r.parseCaps(O.required_caps)),O.required_caps=t.extend({},O.required_caps,{return_response_type:a.responseType}),e instanceof c&&(O.required_caps.send_multipart=!0),t.isEmptyObj(D)||(O.required_caps.send_custom_headers=!0),F||(O.required_caps.do_cors=!0),O.ruid?o(w.connectRuntime(O)):(w.bind("RuntimeInit",function(t,e){o(e)}),w.bind("RuntimeError",function(t,e){a.dispatchEvent("RuntimeError",e)}),w.connectRuntime(O))}var m,v,b,y,w,x,_=this,C={timeout:0,readyState:p.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},S=!0,D={},k=null,T=null,E=!1,R=!1,I=!1,M=!1,A=!1,F=!1,O={},P="";t.extend(this,C,{uid:t.guid("uid_"),upload:new u,open:function(r,s,a,l,c){var h;if(!r||!s)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(r)||n.utf8_encode(r)!==r)throw new e.DOMException(e.DOMException.SYNTAX_ERR);if(~t.inArray(r.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(v=r.toUpperCase()),~t.inArray(v,["CONNECT","TRACE","TRACK"]))throw new e.DOMException(e.DOMException.SECURITY_ERR);if(s=n.utf8_encode(s),h=o.parseUrl(s),F=o.hasSameOrigin(h),m=o.resolveUrl(s),(l||c)&&!F)throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);if(b=l||h.user,y=c||h.pass,!1===(S=a||!0)&&(i("timeout")||i("withCredentials")||""!==i("responseType")))throw new e.DOMException(e.DOMException.INVALID_ACCESS_ERR);E=!S,R=!1,D={},function(){i("responseText",""),i("responseXML",null),i("response",null),i("status",0),i("statusText",""),null}.call(this),i("readyState",p.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(o,r){if(i("readyState")!==p.OPENED||R)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(o)||n.utf8_encode(o)!==o)throw new e.DOMException(e.DOMException.SYNTAX_ERR);return o=t.trim(o).toLowerCase(),!~t.inArray(o,["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"])&&!/^(proxy\-|sec\-)/.test(o)&&(D[o]?D[o]+=", "+r:D[o]=r,!0)},hasRequestHeader:function(t){return t&&D[t.toLowerCase()]||!1},getAllResponseHeaders:function(){return P||""},getResponseHeader:function(e){return e=e.toLowerCase(),A||~t.inArray(e,["set-cookie","set-cookie2"])?null:P&&""!==P&&(x||(x={},t.each(P.split(/\r\n/),function(e){var i=e.split(/:\s+/);2===i.length&&(i[0]=t.trim(i[0]),x[i[0].toLowerCase()]={header:i[0],value:t.trim(i[1])})})),x.hasOwnProperty(e))?x[e].header+": "+x[e].value:null},overrideMimeType:function(n){var o,r;if(~t.inArray(i("readyState"),[p.LOADING,p.DONE]))throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(n=t.trim(n.toLowerCase()),/;/.test(n)&&(o=n.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(n=o[1],o[2]&&(r=o[2])),!d.mimes[n])throw new e.DOMException(e.DOMException.SYNTAX_ERR);n,r},send:function(i,o){if(O="string"===t.typeOf(o)?{ruid:o}:o||{},this.readyState!==p.OPENED||R)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);if(i instanceof a)O.ruid=i.ruid,T=i.type||"application/octet-stream";else if(i instanceof c){if(i.hasBlob()){var r=i.getBlob();O.ruid=r.ruid,T=r.type||"application/octet-stream"}}else"string"==typeof i&&(k="UTF-8",T="text/plain;charset=UTF-8",i=n.utf8_encode(i));this.withCredentials||(this.withCredentials=O.required_caps&&O.required_caps.send_browser_cookies&&!F),I=!E&&this.upload.hasEventListener(),A=!1,M=!i,E||(R=!0),l.call(this,i)},abort:function(){if(A=!0,E=!1,~t.inArray(i("readyState"),[p.UNSENT,p.OPENED,p.DONE]))i("readyState",p.UNSENT);else{if(i("readyState",p.DONE),R=!1,!w)throw new e.DOMException(e.DOMException.INVALID_STATE_ERR);w.getRuntime().exec.call(w,"XMLHttpRequest","abort",M),M=!0}},destroy:function(){w&&("function"===t.typeOf(w.destroy)&&w.destroy(),w=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(g.concat(["readystatechange"])),this.upload.handleEventProps(g)}var f={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};u.prototype=i.instance;var g=["loadstart","progress","abort","error","load","timeout","loadend"];return p.UNSENT=0,p.OPENED=1,p.HEADERS_RECEIVED=2,p.LOADING=3,p.DONE=4,p.prototype=i.instance,p}),i("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(t,e,i,n){function o(){function n(){h=d=0,c=this.result=null}function r(e,i){var n=this;l=i,n.bind("TransportingProgress",function(e){d=e.loaded,h>d&&-1===t.inArray(n.state,[o.IDLE,o.DONE])&&s.call(n)},999),n.bind("TransportingComplete",function(){d=h,n.state=o.DONE,c=null,n.result=l.exec.call(n,"Transporter","getAsBlob",e||"")},999),n.state=o.BUSY,n.trigger("TransportingStarted"),s.call(n)}function s(){var t,i=h-d;u>i&&(u=i),t=e.btoa(c.substr(d,u)),l.exec.call(this,"Transporter","receive",t,h)}var a,l,c,h,d,u;i.call(this),t.extend(this,{uid:t.guid("uid_"),state:o.IDLE,result:null,transport:function(e,i,o){var s=this;if(o=t.extend({chunk_size:204798},o),(a=o.chunk_size%3)&&(o.chunk_size+=3-a),u=o.chunk_size,n.call(this),c=e,h=e.length,"string"===t.typeOf(o)||o.ruid)r.call(s,i,this.connectRuntime(o));else{var l=function(t,e){s.unbind("RuntimeInit",l),r.call(s,i,e)};this.bind("RuntimeInit",l),this.connectRuntime(o)}},abort:function(){var t=this;t.state=o.IDLE,l&&(l.exec.call(t,"Transporter","clear"),t.trigger("TransportingAborted")),n.call(t)},destroy:function(){this.unbindAll(),l=null,this.disconnectRuntime(),n.call(this)}})}return o.IDLE=0,o.BUSY=1,o.DONE=2,o.prototype=n.instance,o}),i("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(t,e,i,n,o,r,s,a,l,c,h,d,u){function p(){function n(e){var r=t.typeOf(e);try{if(e instanceof p){if(!e.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);(function(e,i){var n=this.connectRuntime(e.ruid);this.ruid=n.uid,n.exec.call(this,"Image","loadFromImage",e,"undefined"===t.typeOf(i)||i)}).apply(this,arguments)}else if(e instanceof h){if(!~t.inArray(e.type,["image/jpeg","image/png"]))throw new i.ImageError(i.ImageError.WRONG_FORMAT);c.apply(this,arguments)}else if(-1!==t.inArray(r,["blob","file"]))n.call(this,new d(null,e),arguments[1]);else if("string"===r)"data:"===e.substr(0,5)?n.call(this,new h(null,{data:e}),arguments[1]):function(t,e){var i,n=this;(i=new o).open("get",t),i.responseType="blob",i.onprogress=function(t){n.trigger(t)},i.onload=function(){c.call(n,i.response,!0)},i.onerror=function(t){n.trigger(t)},i.onloadend=function(){i.destroy()},i.bind("RuntimeError",function(t,e){n.trigger("RuntimeError",e)}),i.send(null,e)}.apply(this,arguments);else{if("node"!==r||"img"!==e.nodeName.toLowerCase())throw new i.DOMException(i.DOMException.TYPE_MISMATCH_ERR);n.call(this,e.src,arguments[1])}}catch(t){this.trigger("error",t.code)}}function c(e,i){function n(t){o.ruid=t.uid,t.exec.call(o,"Image","loadFromBlob",e)}var o=this;o.name=e.name||"",e.isDetached()?(this.bind("RuntimeInit",function(t,e){n(e)}),i&&"string"==typeof i.required_caps&&(i.required_caps=r.parseCaps(i.required_caps)),this.connectRuntime(t.extend({required_caps:{access_image_binary:!0,resize_image:!0}},i))):n(this.connectRuntime(e.ruid))}s.call(this),t.extend(this,{uid:t.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){n.apply(this,arguments)},resize:function(e){var n,o,r=this,s={x:0,y:0,width:r.width,height:r.height},a=t.extendIf({width:r.width,height:r.height,type:r.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},e);try{if(!r.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(r.width>p.MAX_RESIZE_WIDTH||r.height>p.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);if(n=r.meta&&r.meta.tiff&&r.meta.tiff.Orientation||1,-1!==t.inArray(n,[5,6,7,8])){var l=a.width;a.width=a.height,a.height=l}if(a.crop){switch(o=Math.max(a.width/r.width,a.height/r.height),e.fit?(s.width=Math.min(Math.ceil(a.width/o),r.width),s.height=Math.min(Math.ceil(a.height/o),r.height),o=a.width/s.width):(s.width=Math.min(a.width,r.width),s.height=Math.min(a.height,r.height),o=1),"boolean"==typeof a.crop&&(a.crop="cc"),a.crop.toLowerCase().replace(/_/,"-")){case"rb":case"right-bottom":s.x=r.width-s.width,s.y=r.height-s.height;break;case"cb":case"center-bottom":s.x=Math.floor((r.width-s.width)/2),s.y=r.height-s.height;break;case"lb":case"left-bottom":s.x=0,s.y=r.height-s.height;break;case"lt":case"left-top":s.x=0,s.y=0;break;case"ct":case"center-top":s.x=Math.floor((r.width-s.width)/2),s.y=0;break;case"rt":case"right-top":s.x=r.width-s.width,s.y=0;break;case"rc":case"right-center":case"right-middle":s.x=r.width-s.width,s.y=Math.floor((r.height-s.height)/2);break;case"lc":case"left-center":case"left-middle":s.x=0,s.y=Math.floor((r.height-s.height)/2);break;case"cc":case"center-center":case"center-middle":default:s.x=Math.floor((r.width-s.width)/2),s.y=Math.floor((r.height-s.height)/2)}s.x=Math.max(s.x,0),s.y=Math.max(s.y,0)}else(o=Math.min(a.width/r.width,a.height/r.height))>1&&!a.fit&&(o=1);this.exec("Image","resize",s,o,a)}catch(t){r.trigger("error",t.code)}},downsize:function(e){var i,n={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,fit:!1,preserveHeaders:!0,resample:"default"};i="object"==typeof e?t.extend(n,e):t.extend(n,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]}),this.resize(i)},crop:function(t,e,i){this.downsize(t,e,!0,i)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return this.exec("Image","getAsCanvas")},getAsBlob:function(t,e){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",t||"image/jpeg",e||90)},getAsDataURL:function(t,e){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",t||"image/jpeg",e||90)},getAsBinaryString:function(t,e){var i=this.getAsDataURL(t,e);return u.atob(i.substring(i.indexOf("base64,")+7))},embed:function(n,o){var r,s=this,c=t.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,fit:!0,resample:"nearest"},o);try{if(!(n=e.get(n)))throw new i.DOMException(i.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);this.width>p.MAX_RESIZE_WIDTH||(this.height,p.MAX_RESIZE_HEIGHT);var h=new p;return h.bind("Resize",function(){(function(e,o){var c=this;if(l.can("create_canvas")){var h=c.getAsCanvas();if(h)return n.appendChild(h),h=null,c.destroy(),void s.trigger("embedded")}var d=c.getAsDataURL(e,o);if(!d)throw new i.ImageError(i.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",d.length))n.innerHTML='<img src="'+d+'" width="'+c.width+'" height="'+c.height+'" alt="" />',c.destroy(),s.trigger("embedded");else{var p=new a;p.bind("TransportingComplete",function(){r=s.connectRuntime(this.result.ruid),s.bind("Embedded",function(){t.extend(r.getShimContainer().style,{top:"0px",left:"0px",width:c.width+"px",height:c.height+"px"}),r=null},999),r.exec.call(s,"ImageView","display",this.result.uid,width,height),c.destroy()}),p.transport(u.atob(d.substring(d.indexOf("base64,")+7)),e,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:n})}}).call(this,c.type,c.quality)}),h.bind("Load",function(){this.downsize(c)}),this.meta.thumb&&this.meta.thumb.width>=c.width&&this.meta.thumb.height>=c.height?h.load(this.meta.thumb.data):h.clone(this,!1),h}catch(t){this.trigger("error",t.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.meta&&this.meta.thumb&&this.meta.thumb.data.destroy(),this.unbindAll()}}),this.handleEventProps(f),this.bind("Load Resize",function(){return function(t){try{return t||(t=this.exec("Image","getInfo")),this.size=t.size,this.width=t.width,this.height=t.height,this.type=t.type,this.meta=t.meta,""===this.name&&(this.name=t.name),!0}catch(t){return this.trigger("error",t.code),!1}}.call(this)},999)}var f=["progress","load","error","resize","embedded"];return p.MAX_RESIZE_WIDTH=8192,p.MAX_RESIZE_HEIGHT=8192,p.prototype=c.instance,p}),i("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,i,o){var r="html5",s={};return i.addConstructor(r,function(e){var a=this,l=i.capTest,c=i.capTrue,h=t.extend({access_binary:l(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return a.can("access_binary")&&!!s.Image},display_media:l((o.can("create_canvas")||o.can("use_data_uri_over32kb"))&&n("moxie/image/Image")),do_cors:l(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:l(function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&("IE"!==o.browser||o.verComp(o.version,9,">"))}()),filter_by_extension:l(!("Chrome"===o.browser&&o.verComp(o.version,28,"<")||"IE"===o.browser&&o.verComp(o.version,10,"<")||"Safari"===o.browser&&o.verComp(o.version,7,"<")||"Firefox"===o.browser&&o.verComp(o.version,37,"<"))),return_response_headers:c,return_response_type:function(t){return!("json"!==t||!window.JSON)||o.can("return_response_type",t)},return_status_code:c,report_upload_progress:l(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return a.can("access_binary")&&o.can("create_canvas")},select_file:function(){return o.can("use_fileinput")&&window.File},select_folder:function(){return a.can("select_file")&&("Chrome"===o.browser&&o.verComp(o.version,21,">=")||"Firefox"===o.browser&&o.verComp(o.version,42,">="))},select_multiple:function(){return!(!a.can("select_file")||"Safari"===o.browser&&"Windows"===o.os||"iOS"===o.os&&o.verComp(o.osVersion,"7.0.0",">")&&o.verComp(o.osVersion,"8.0.0","<"))},send_binary_string:l(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:l(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||a.can("send_binary_string")},slice_blob:l(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return a.can("slice_blob")&&a.can("send_multipart")},summon_file_dialog:function(){return a.can("select_file")&&!("Firefox"===o.browser&&o.verComp(o.version,4,"<")||"Opera"===o.browser&&o.verComp(o.version,12,"<")||"IE"===o.browser&&o.verComp(o.version,10,"<"))},upload_filesize:c,use_http_method:c},arguments[2]);i.call(this,e,arguments[1]||r,h),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(a),t=a=null}}(this.destroy)}),t.extend(this.getShim(),s)}),s}),i("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(t,e){return t.Blob=function(){this.slice=function(){return new e(this.getRuntime().uid,function(t,e,i){var n;if(!window.File.prototype.slice)return(n=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?n.call(t,e,i):null;try{return t.slice(),t.slice(e,i)}catch(n){return t.slice(e,i-e)}}.apply(this,arguments))},this.destroy=function(){this.getRuntime().getShim().removeInstance(this.uid)}}}),i("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(t){function e(){this.returnValue=!1}function i(){this.cancelBubble=!0}var n={},o="moxie_"+t.guid(),r=function(e,i,r){var s,a;if(i=i.toLowerCase(),e[o]&&n[e[o]]&&n[e[o]][i]){for(var l=(s=n[e[o]][i]).length-1;l>=0&&(s[l].orig!==r&&s[l].key!==r||(e.removeEventListener?e.removeEventListener(i,s[l].func,!1):e.detachEvent&&e.detachEvent("on"+i,s[l].func),s[l].orig=null,s[l].func=null,s.splice(l,1),r===a));l--);if(s.length||delete n[e[o]][i],t.isEmptyObj(n[e[o]])){delete n[e[o]];try{delete e[o]}catch(t){e[o]=a}}}};return{addEvent:function(r,s,a,l){var c,h;s=s.toLowerCase(),r.addEventListener?(c=a,r.addEventListener(s,c,!1)):r.attachEvent&&(c=function(){var t=window.event;t.target||(t.target=t.srcElement),t.preventDefault=e,t.stopPropagation=i,a(t)},r.attachEvent("on"+s,c)),r[o]||(r[o]=t.guid()),n.hasOwnProperty(r[o])||(n[r[o]]={}),(h=n[r[o]]).hasOwnProperty(s)||(h[s]=[]),h[s].push({func:c,orig:a,key:l})},removeEvent:r,removeAllEvents:function(e,i){e&&e[o]&&t.each(n[e[o]],function(t,n){r(e,n,i)})}}}),i("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,o,r,s){return t.FileInput=function(){var t,a;i.extend(this,{init:function(l){var c,h,d,u,p,f,g=this,m=g.getRuntime();t=l,d=r.extList2mimes(t.accept,m.can("filter_by_extension")),(h=m.getShimContainer()).innerHTML='<input id="'+m.uid+'" type="file" style="font-size:999px;opacity:0;"'+(t.multiple&&m.can("select_multiple")?"multiple":"")+(t.directory&&m.can("select_folder")?"webkitdirectory directory":"")+(d?' accept="'+d.join(",")+'"':"")+" />",c=n.get(m.uid),i.extend(c.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),u=n.get(t.browse_button),a=n.getStyle(u,"z-index")||"auto",m.can("summon_file_dialog")&&("static"===n.getStyle(u,"position")&&(u.style.position="relative"),o.addEvent(u,"click",function(t){var e=n.get(m.uid);e&&!e.disabled&&e.click(),t.preventDefault()},g.uid),g.bind("Refresh",function(){p=parseInt(a,10)||1,n.get(t.browse_button).style.zIndex=p,this.getRuntime().getShimContainer().style.zIndex=p-1})),f=m.can("summon_file_dialog")?u:h,o.addEvent(f,"mouseover",function(){g.trigger("mouseenter")},g.uid),o.addEvent(f,"mouseout",function(){g.trigger("mouseleave")},g.uid),o.addEvent(f,"mousedown",function(){g.trigger("mousedown")},g.uid),o.addEvent(n.get(t.container),"mouseup",function(){g.trigger("mouseup")},g.uid),(m.can("summon_file_dialog")?c:u).setAttribute("tabindex",-1),c.onchange=function n(){if(g.files=[],i.each(this.files,function(i){var n="";return!(!t.directory||"."!=i.name)||(i.webkitRelativePath&&(n="/"+i.webkitRelativePath.replace(/^\//,"")),(i=new e(m.uid,i)).relativePath=n,void g.files.push(i))}),"IE"!==s.browser&&"IEMobile"!==s.browser)this.value="";else{var o=this.cloneNode(!0);this.parentNode.replaceChild(o,this),o.onchange=n}g.files.length&&g.trigger("change")},g.trigger({type:"ready",async:!0}),h=null},setOption:function(t,e){var i=this.getRuntime(),o=n.get(i.uid);switch(t){case"accept":if(e){var s=e.mimes||r.extList2mimes(e,i.can("filter_by_extension"));o.setAttribute("accept",s.join(","))}else o.removeAttribute("accept");break;case"directory":e&&i.can("select_folder")?(o.setAttribute("directory",""),o.setAttribute("webkitdirectory","")):(o.removeAttribute("directory"),o.removeAttribute("webkitdirectory"));break;case"multiple":e&&i.can("select_multiple")?o.setAttribute("multiple",""):o.removeAttribute("multiple")}},disable:function(t){var e,i=this.getRuntime();(e=n.get(i.uid))&&(e.disabled=!!t)},destroy:function(){var e=this.getRuntime(),i=e.getShim(),r=e.getShimContainer(),s=t&&n.get(t.container),l=t&&n.get(t.browse_button);s&&o.removeAllEvents(s,this.uid),l&&(o.removeAllEvents(l,this.uid),l.style.zIndex=a),r&&(o.removeAllEvents(r,this.uid),r.innerHTML=""),i.removeInstance(this.uid),t=r=s=l=i=null}})}}),i("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(t,e,i,n,o,r){return t.FileDrop=function(){function t(t){if(!t.dataTransfer||!t.dataTransfer.types)return!1;var e=i.toArray(t.dataTransfer.types||[]);return-1!==i.inArray("Files",e)||-1!==i.inArray("public.file-url",e)||-1!==i.inArray("application/x-moz-file",e)}function s(t,i){if(a(t)){var n=new e(d,t);n.relativePath=i||"",u.push(n)}}function a(t){if(!p.length)return!0;var e=r.getFileExtension(t.name);return!e||-1!==i.inArray(e,p)}function l(t,e){var n=[];i.each(t,function(t){n.push(function(e){c(t,e)})}),i.inSeries(n,function(){e()})}function c(t,e){t.isFile?t.file(function(i){s(i,t.fullPath),e()},function(){e()}):t.isDirectory?function(t,e){var i=[],n=t.createReader();!function t(e){n.readEntries(function(n){n.length?([].push.apply(i,n),t(e)):e()},e)}(function(){l(i,e)})}(t,e):e()}var h,d,u=[],p=[];i.extend(this,{init:function(e){var n,r=this;h=e,d=r.ruid,p=function(t){for(var e=[],n=0;n<t.length;n++)[].push.apply(e,t[n].extensions.split(/\s*,\s*/));return-1===i.inArray("*",e)?e:[]}(h.accept),n=h.container,o.addEvent(n,"dragover",function(e){t(e)&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")},r.uid),o.addEvent(n,"drop",function(e){t(e)&&(e.preventDefault(),u=[],e.dataTransfer.items&&e.dataTransfer.items[0].webkitGetAsEntry?function(t,e){var n=[];i.each(t,function(t){var e=t.webkitGetAsEntry();e&&(e.isFile?s(t.getAsFile(),e.fullPath):n.push(e))}),n.length?l(n,e):e()}(e.dataTransfer.items,function(){r.files=u,r.trigger("drop")}):(i.each(e.dataTransfer.files,function(t){s(t)}),r.files=u,r.trigger("drop")))},r.uid),o.addEvent(n,"dragenter",function(){r.trigger("dragenter")},r.uid),o.addEvent(n,"dragleave",function(){r.trigger("dragleave")},r.uid)},destroy:function(){o.removeAllEvents(h&&n.get(h.container),this.uid),d=u=p=h=null,this.getRuntime().getShim().removeInstance(this.uid)}})}}),i("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(t,e,i){return t.FileReader=function(){function t(t){return e.atob(t.substring(t.indexOf("base64,")+7))}var n,o=!1;i.extend(this,{read:function(e,r){var s=this;s.result="",(n=new window.FileReader).addEventListener("progress",function(t){s.trigger(t)}),n.addEventListener("load",function(e){s.result=o?t(n.result):n.result,s.trigger(e)}),n.addEventListener("error",function(t){s.trigger(t,n.error)}),n.addEventListener("loadend",function(t){n=null,s.trigger(t)}),"function"===i.typeOf(n[e])?(o=!1,n[e](r.getSource())):"readAsBinaryString"===e&&(o=!0,n.readAsDataURL(r.getSource()))},abort:function(){n&&n.abort()},destroy:function(){n=null,this.getRuntime().getShim().removeInstance(this.uid)}})}}),i("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(t,e,i,n,o,r,s,a,l){return t.XMLHttpRequest=function(){function t(t,e){var i,n,o=this;i=e.getBlob().getSource(),(n=new window.FileReader).onload=function(){e.append(e.getBlobName(),new r(null,{type:i.type,data:n.result})),u.send.call(o,t,e)},n.readAsBinaryString(i)}function c(t){var e="----moxieboundary"+(new Date).getTime(),i="--",n="\r\n",o="",s=this.getRuntime();if(!s.can("send_binary_string"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return h.setRequestHeader("Content-Type","multipart/form-data; boundary="+e),t.each(function(t,s){o+=t instanceof r?i+e+n+'Content-Disposition: form-data; name="'+s+'"; filename="'+unescape(encodeURIComponent(t.name||"blob"))+'"'+n+"Content-Type: "+(t.type||"application/octet-stream")+n+n+t.getSource()+n:i+e+n+'Content-Disposition: form-data; name="'+s+'"'+n+n+unescape(encodeURIComponent(t))+n}),o+=i+e+i+n}var h,d,u=this;e.extend(this,{send:function(i,o){var a=this,u="Mozilla"===l.browser&&l.verComp(l.version,4,">=")&&l.verComp(l.version,7,"<"),p="Android Browser"===l.browser,f=!1;if(d=i.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),(h=!window.XMLHttpRequest||"IE"===l.browser&&l.verComp(l.version,8,"<")?function(){for(var t=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(t){}}():new window.XMLHttpRequest).open(i.method,i.url,i.async,i.user,i.password),o instanceof r)o.isDetached()&&(f=!0),o=o.getSource();else if(o instanceof s){if(o.hasBlob())if(o.getBlob().isDetached())o=c.call(a,o),f=!0;else if((u||p)&&"blob"===e.typeOf(o.getBlob().getSource())&&window.FileReader)return void t.call(a,i,o);if(o instanceof s){var g=new window.FormData;o.each(function(t,e){t instanceof r?g.append(e,t.getSource()):g.append(e,t)}),o=g}}h.upload?(i.withCredentials&&(h.withCredentials=!0),h.addEventListener("load",function(t){a.trigger(t)}),h.addEventListener("error",function(t){a.trigger(t)}),h.addEventListener("progress",function(t){a.trigger(t)}),h.upload.addEventListener("progress",function(t){a.trigger({type:"UploadProgress",loaded:t.loaded,total:t.total})})):h.onreadystatechange=function(){switch(h.readyState){case 1:case 2:break;case 3:var t,e;try{n.hasSameOrigin(i.url)&&(t=h.getResponseHeader("Content-Length")||0),h.responseText&&(e=h.responseText.length)}catch(i){t=e=0}a.trigger({type:"progress",lengthComputable:!!t,total:parseInt(t,10),loaded:e});break;case 4:h.onreadystatechange=function(){};try{if(h.status>=200&&h.status<400){a.trigger("load");break}}catch(t){}a.trigger("error")}},e.isEmptyObj(i.headers)||e.each(i.headers,function(t,e){h.setRequestHeader(e,t)}),""!==i.responseType&&"responseType"in h&&(h.responseType="json"!==i.responseType||l.can("return_response_type","json")?i.responseType:"text"),f?h.sendAsBinary?h.sendAsBinary(o):function(){for(var t=new Uint8Array(o.length),e=0;e<o.length;e++)t[e]=255&o.charCodeAt(e);h.send(t.buffer)}():h.send(o),a.trigger("loadstart")},getStatus:function(){try{if(h)return h.status}catch(t){}return 0},getResponse:function(t){var e=this.getRuntime();try{switch(t){case"blob":var n=new o(e.uid,h.response),r=h.getResponseHeader("Content-Disposition");if(r){var s=r.match(/filename=([\'\"'])([^\1]+)\1/);s&&(d=s[2])}return n.name=d,n.type||(n.type=i.getFileMime(d)),n;case"json":return l.can("return_response_type","json")?h.response:200===h.status&&window.JSON?JSON.parse(h.responseText):null;case"document":return function(t){var e=t.responseXML,i=t.responseText;return"IE"===l.browser&&i&&e&&!e.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(t.getResponseHeader("Content-Type"))&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,e.validateOnParse=!1,e.loadXML(i)),e&&("IE"===l.browser&&0!==e.parseError||!e.documentElement||"parsererror"===e.documentElement.tagName)?null:e}(h);default:return""!==h.responseText?h.responseText:null}}catch(t){return null}},getAllResponseHeaders:function(){try{return h.getAllResponseHeaders()}catch(t){}return""},abort:function(){h&&h.abort()},destroy:function(){u=d=null,this.getRuntime().getShim().removeInstance(this.uid)}})}}),i("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(t){function e(t){t instanceof ArrayBuffer?i.apply(this,arguments):n.apply(this,arguments)}function i(e){var i=new DataView(e);t.extend(this,{readByteAt:function(t){return i.getUint8(t)},writeByteAt:function(t,e){i.setUint8(t,e)},SEGMENT:function(t,n,o){switch(arguments.length){case 2:return e.slice(t,t+n);case 1:return e.slice(t);case 3:if(null===o&&(o=new ArrayBuffer),o instanceof ArrayBuffer){var r=new Uint8Array(this.length()-n+o.byteLength);t>0&&r.set(new Uint8Array(e.slice(0,t)),0),r.set(new Uint8Array(o),t),r.set(new Uint8Array(e.slice(t+n)),t+o.byteLength),this.clear(),e=r.buffer,i=new DataView(e);break}default:return e}},length:function(){return e?e.byteLength:0},clear:function(){i=e=null}})}function n(e){function i(t,i,n){n=3===arguments.length?n:e.length-i-1,e=e.substr(0,i)+t+e.substr(n+i)}t.extend(this,{readByteAt:function(t){return e.charCodeAt(t)},writeByteAt:function(t,e){i(String.fromCharCode(e),t,1)},SEGMENT:function(t,n,o){switch(arguments.length){case 1:return e.substr(t);case 2:return e.substr(t,n);case 3:i(null!==o?o:"",t,n);break;default:return e}},length:function(){return e?e.length:0},clear:function(){e=null}})}return t.extend(e.prototype,{littleEndian:!1,read:function(t,e){var i,n,o;if(t+e>this.length())throw new Error("You are trying to read outside the source boundaries.");for(n=this.littleEndian?0:-8*(e-1),o=0,i=0;e>o;o++)i|=this.readByteAt(t+o)<<Math.abs(n+8*o);return i},write:function(t,e,i){var n,o;if(t>this.length())throw new Error("You are trying to write outside the source boundaries.");for(n=this.littleEndian?0:-8*(i-1),o=0;i>o;o++)this.writeByteAt(t+o,255&e>>Math.abs(n+8*o))},BYTE:function(t){return this.read(t,1)},SHORT:function(t){return this.read(t,2)},LONG:function(t){return this.read(t,4)},SLONG:function(t){var e=this.read(t,4);return e>2147483647?e-4294967296:e},CHAR:function(t){return String.fromCharCode(this.read(t,1))},STRING:function(t,e){return this.asArray("CHAR",t,e).join("")},asArray:function(t,e,i){for(var n=[],o=0;i>o;o++)n[o]=this[t](e+o);return n}}),e}),i("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(t,e){return function i(n){var o,r,s,a=[],l=0;if(65496!==(o=new t(n)).SHORT(0))throw o.clear(),new e.ImageError(e.ImageError.WRONG_FORMAT);for(r=2;r<=o.length();)if((s=o.SHORT(r))>=65488&&65495>=s)r+=2;else{if(65498===s||65497===s)break;l=o.SHORT(r+2)+2,s>=65505&&65519>=s&&a.push({hex:s,name:"APP"+(15&s),start:r,length:l,segment:o.SEGMENT(r,l)}),r+=l}return o.clear(),{headers:a,restore:function(e){var i,n,o;for(o=new t(e),r=65504==o.SHORT(2)?4+o.SHORT(4):2,n=0,i=a.length;i>n;n++)o.SEGMENT(r,0,a[n].segment),r+=a[n].length;return e=o.SEGMENT(),o.clear(),e},strip:function(e){var n,o,r,s;for(r=new i(e),o=r.headers,r.purge(),n=new t(e),s=o.length;s--;)n.SEGMENT(o[s].start,o[s].length,"");return e=n.SEGMENT(),n.clear(),e},get:function(t){for(var e=[],i=0,n=a.length;n>i;i++)a[i].name===t.toUpperCase()&&e.push(a[i].segment);return e},set:function(t,e){var i,n,o,r=[];for("string"==typeof e?r.push(e):r=e,i=n=0,o=a.length;o>i&&(a[i].name===t.toUpperCase()&&(a[i].segment=r[n],a[i].length=r[n].length,n++),!(n>=r.length));i++);},purge:function(){this.headers=a=[]}}}}),i("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(t,i,n){function o(r){function s(i,o){var r,s,a,l,d,u,p,f,g=this,m=[],v={},b={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},y={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(r=g.SHORT(i),s=0;r>s;s++)if(m=[],p=i+2+12*s,(a=o[g.SHORT(p)])!==e){if(l=b[g.SHORT(p+=2)],d=g.LONG(p+=2),!(u=y[l]))throw new n.ImageError(n.ImageError.INVALID_META_ERR);if(p+=4,u*d>4&&(p=g.LONG(p)+h.tiffHeader),p+u*d>=this.length())throw new n.ImageError(n.ImageError.INVALID_META_ERR);"ASCII"!==l?(m=g.asArray(l,p,d),f=1==d?m[0]:m,v[a]=c.hasOwnProperty(a)&&"object"!=typeof f?c[a][f]:f):v[a]=t.trim(g.STRING(p,d).replace(/\0$/,""))}return v}var a,l,c,h,d,u;if(i.call(this,r),l={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},d=(h={tiffHeader:10}).tiffHeader,a={clear:this.clear},t.extend(this,{read:function(){try{return o.prototype.read.apply(this,arguments)}catch(t){throw new n.ImageError(n.ImageError.INVALID_META_ERR)}},write:function(){try{return o.prototype.write.apply(this,arguments)}catch(t){throw new n.ImageError(n.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(t){return this.LONG(t)/this.LONG(t+4)},SRATIONAL:function(t){return this.SLONG(t)/this.SLONG(t+4)},ASCII:function(t){return this.CHAR(t)},TIFF:function(){return u||null},EXIF:function(){var e=null;if(h.exifIFD){try{e=s.call(this,h.exifIFD,l.exif)}catch(t){return null}if(e.ExifVersion&&"array"===t.typeOf(e.ExifVersion)){for(var i=0,n="";i<e.ExifVersion.length;i++)n+=String.fromCharCode(e.ExifVersion[i]);e.ExifVersion=n}}return e},GPS:function(){var e=null;if(h.gpsIFD){try{e=s.call(this,h.gpsIFD,l.gps)}catch(t){return null}e.GPSVersionID&&"array"===t.typeOf(e.GPSVersionID)&&(e.GPSVersionID=e.GPSVersionID.join("."))}return e},thumb:function(){if(h.IFD1)try{var t=s.call(this,h.IFD1,l.thumb);if("JPEGInterchangeFormat"in t)return this.SEGMENT(h.tiffHeader+t.JPEGInterchangeFormat,t.JPEGInterchangeFormatLength)}catch(t){}return null},setExif:function(t,e){return("PixelXDimension"===t||"PixelYDimension"===t)&&function(t,e,i){var n,o,r,s=0;if("string"==typeof e){var a=l[t.toLowerCase()];for(var c in a)if(a[c]===e){e=c;break}}n=h[t.toLowerCase()+"IFD"],o=this.SHORT(n);for(var d=0;o>d;d++)if(r=n+12*d+2,this.SHORT(r)==e){s=r+8;break}if(!s)return!1;try{this.write(s,i,4)}catch(t){return!1}return!0}.call(this,"exif",t,e)},clear:function(){a.clear(),r=l=c=u=h=a=null}}),65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new n.ImageError(n.ImageError.INVALID_META_ERR);if(this.littleEndian=18761==this.SHORT(d),42!==this.SHORT(d+=2))throw new n.ImageError(n.ImageError.INVALID_META_ERR);h.IFD0=h.tiffHeader+this.LONG(d+=2),"ExifIFDPointer"in(u=s.call(this,h.IFD0,l.tiff))&&(h.exifIFD=h.tiffHeader+u.ExifIFDPointer,delete u.ExifIFDPointer),"GPSInfoIFDPointer"in u&&(h.gpsIFD=h.tiffHeader+u.GPSInfoIFDPointer,delete u.GPSInfoIFDPointer),t.isEmptyObj(u)&&(u=null);var p=this.LONG(h.IFD0+12*this.SHORT(h.IFD0)+2);p&&(h.IFD1=h.tiffHeader+p)}return o.prototype=i.prototype,o}),i("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(t,e,i,n,o){return function(r){function s(t){var e,i,n=0;for(t||(t=a);n<=t.length();){if((e=t.SHORT(n+=2))>=65472&&65475>=e)return n+=5,{height:t.SHORT(n),width:t.SHORT(n+=2)};i=t.SHORT(n+=2),n+=i-2}return null}var a,l,c,h;if(65496!==(a=new n(r)).SHORT(0))throw new e.ImageError(e.ImageError.WRONG_FORMAT);l=new i(r);try{c=new o(l.get("app1")[0])}catch(t){}h=s.call(this),t.extend(this,{type:"image/jpeg",size:a.length(),width:h&&h.width||0,height:h&&h.height||0,setExif:function(e,i){return!!c&&("object"===t.typeOf(e)?t.each(e,function(t,e){c.setExif(e,t)}):c.setExif(e,i),void l.set("app1",c.SEGMENT()))},writeHeaders:function(){return arguments.length?l.restore(arguments[0]):l.restore(r)},stripHeaders:function(t){return l.strip(t)},purge:function(){(function(){c&&l&&a&&(c.clear(),l.purge(),a.clear(),h=l=c=a=null)}).call(this)}}),c&&(this.meta={tiff:c.TIFF(),exif:c.EXIF(),gps:c.GPS(),thumb:function(){var t,e,i=c.thumb();return i&&(t=new n(i),e=s(t),t.clear(),e)?(e.data=i,e):null}()})}}),i("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(t,e,i){return function(n){function o(){r&&(r.clear(),n=s=r=null)}var r,s;r=new i(n),function(){var e=0,i=0,n=[35152,20039,3338,6666];for(i=0;i<n.length;i++,e+=2)if(n[i]!=r.SHORT(e))throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),s=function(){var t,e;return"IHDR"==(t=function(t){var e,i,n,o;return e=r.LONG(t),i=r.STRING(t+=4,4),n=t+=4,o=r.LONG(t+e),{length:e,type:i,start:n,CRC:o}}.call(this,8)).type?(e=t.start,{width:r.LONG(e),height:r.LONG(e+=4)}):null}.call(this),e.extend(this,{type:"image/png",size:r.length(),width:s.width,height:s.height,purge:function(){o.call(this)}}),o.call(this)}}),i("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(t,e,i,n){return function(o){var r,s=[i,n];r=function(){for(var t=0;t<s.length;t++)try{return new s[t](o)}catch(t){}throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),t.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(t){return t},stripHeaders:function(t){return t},purge:function(){o=null}}),t.extend(this,r),this.purge=function(){r.purge(),r=null}}}),i("moxie/runtime/html5/image/ResizerCanvas",[],function(){return{scale:function t(e,i,n){var o=e.width>e.height?"width":"height",r=Math.round(e[o]*i),s=!1;"nearest"!==n&&(.5>i||i>2)&&(i=.5>i?.5:2,s=!0);var a=function(t,e){var i=t.width,n=t.height,o=Math.round(i*e),r=Math.round(n*e),s=document.createElement("canvas");return s.width=o,s.height=r,s.getContext("2d").drawImage(t,0,0,i,n,0,0,o,r),t=null,s}(e,i);return s?t(a,r/a[o],n):a}}}),i("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/ResizerCanvas","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,o,r,s,a,l){return t.Image=function(){function t(){if(!m&&!f)throw new i.ImageError(i.DOMException.INVALID_STATE_ERR);return m||f}function c(){var e=t();return"canvas"==e.nodeName.toLowerCase()?e:((m=document.createElement("canvas")).width=e.width,m.height=e.height,m.getContext("2d").drawImage(e,0,0),m)}function h(t){return n.atob(t.substring(t.indexOf("base64,")+7))}function d(t){var e=this;(f=new Image).onerror=function(){p.call(this),e.trigger("error",i.ImageError.WRONG_FORMAT)},f.onload=function(){e.trigger("load")},f.src="data:"==t.substr(0,5)?t:function(t,e){return"data:"+(e||"")+";base64,"+n.btoa(t)}(t,b.type)}function u(t,i){var n=Math.PI/180,o=document.createElement("canvas"),r=o.getContext("2d"),s=t.width,a=t.height;switch(e.inArray(i,[5,6,7,8])>-1?(o.width=a,o.height=s):(o.width=s,o.height=a),i){case 2:r.translate(s,0),r.scale(-1,1);break;case 3:r.translate(s,a),r.rotate(180*n);break;case 4:r.translate(0,a),r.scale(1,-1);break;case 5:r.rotate(90*n),r.scale(1,-1);break;case 6:r.rotate(90*n),r.translate(0,-a);break;case 7:r.rotate(90*n),r.translate(s,-a),r.scale(-1,1);break;case 8:r.rotate(-90*n),r.translate(-s,0)}return r.drawImage(t,0,0,s,a),o}function p(){g&&(g.purge(),g=null),v=f=m=b=null,w=!1}var f,g,m,v,b,y=this,w=!1,x=!0;e.extend(this,{loadFromBlob:function(t){var e=this.getRuntime(),n=!(arguments.length>1)||arguments[1];if(!e.can("access_binary"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return b=t,t.isDetached()?(v=t.getSource(),void d.call(this,v)):void function(t,e){var n,o=this;return window.FileReader?((n=new FileReader).onload=function(){e.call(o,this.result)},n.onerror=function(){o.trigger("error",i.ImageError.WRONG_FORMAT)},void n.readAsDataURL(t)):e.call(this,t.getAsDataURL())}.call(this,t.getSource(),function(t){n&&(v=h(t)),d.call(this,t)})},loadFromImage:function(t,e){this.meta=t.meta,b=new r(null,{name:t.name,size:t.size,type:t.type}),d.call(this,e?v=t.getAsBinaryString():t.getAsDataURL())},getInfo:function(){var e,i=this.getRuntime();return!g&&v&&i.can("access_image_binary")&&(g=new s(v)),e={width:t().width||0,height:t().height||0,type:b.type||l.getFileMime(b.name),size:v&&v.length||b.size||0,name:b.name||"",meta:null},x&&(e.meta=g&&g.meta||this.meta||{},!e.meta||!e.meta.thumb||e.meta.thumb.data instanceof o||(e.meta.thumb.data=new o(null,{type:"image/jpeg",data:e.meta.thumb.data}))),e},resize:function(e,i,n){var o=document.createElement("canvas");if(o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(t(),e.x,e.y,e.width,e.height,0,0,o.width,o.height),m=a.scale(o,i),!(x=n.preserveHeaders)){var r=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;m=u(m,r)}this.width=m.width,this.height=m.height,w=!0,this.trigger("Resize")},getAsCanvas:function(){return m||(m=c()),m.id=this.uid+"_canvas",m},getAsBlob:function(t,e){return t!==this.type?(w=!0,new r(null,{name:b.name||"",type:t,data:y.getAsDataURL(t,e)})):new r(null,{name:b.name||"",type:t,data:y.getAsBinaryString(t,e)})},getAsDataURL:function(t){var e=arguments[1]||90;if(!w)return f.src;if(c(),"image/jpeg"!==t)return m.toDataURL("image/png");try{return m.toDataURL("image/jpeg",e/100)}catch(t){return m.toDataURL("image/jpeg")}},getAsBinaryString:function(t,e){if(!w)return v||(v=h(y.getAsDataURL(t,e))),v;if("image/jpeg"!==t)v=h(y.getAsDataURL(t,e));else{var i;e||(e=90),c();try{i=m.toDataURL("image/jpeg",e/100)}catch(t){i=m.toDataURL("image/jpeg")}v=h(i),g&&(v=g.stripHeaders(v),x&&(g.meta&&g.meta.exif&&g.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),v=g.writeHeaders(v)),g.purge(),g=null)}return w=!1,v},destroy:function(){y=null,p.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}}),i("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,i,o,r){function s(t){var n=i.get(t);n&&"OBJECT"==n.nodeName&&("IE"===e.browser?(n.style.display="none",function e(){4==n.readyState?function(t){var e=i.get(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}(t):setTimeout(e,10)}()):n.parentNode.removeChild(n))}var a="flash",l={};return r.addConstructor(a,function(c){var h,d=this;c=t.extend({swf_url:e.swf_url},c),r.call(this,c,a,{access_binary:function(t){return t&&"browser"===d.mode},access_image_binary:function(t){return t&&"browser"===d.mode},display_media:r.capTest(n("moxie/image/Image")),do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===d.mode},resize_image:r.capTrue,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||(!t.arrayDiff(e,["","text","document"])||"browser"===d.mode)},return_status_code:function(e){return"browser"===d.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:function(t){return t&&"browser"===d.mode},send_browser_cookies:function(t){return t&&"browser"===d.mode},send_custom_headers:function(t){return t&&"browser"===d.mode},send_multipart:r.capTrue,slice_blob:function(t){return t&&"browser"===d.mode},stream_upload:function(t){return t&&"browser"===d.mode},summon_file_dialog:!1,upload_filesize:function(e){return t.parseSizeStr(e)<=2097152||"client"===d.mode},use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}},{access_binary:function(t){return t?"browser":"client"},access_image_binary:function(t){return t?"browser":"client"},report_upload_progress:function(t){return t?"browser":"client"},return_response_type:function(e){return t.arrayDiff(e,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"browser":["client","browser"]},send_binary_string:function(t){return t?"browser":"client"},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"browser":"client"},slice_blob:function(t){return t?"browser":"client"},stream_upload:function(t){return t?"client":"browser"},upload_filesize:function(e){return t.parseSizeStr(e)>=2097152?"client":"browser"}},"client"),function(){var t;try{t=(t=navigator.plugins["Shockwave Flash"]).description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1])}()<11.3&&(this.mode=!1),t.extend(this,{getShim:function(){return i.get(this.uid)},shimExec:function(t,e){var i=[].slice.call(arguments,2);return d.getShim().exec(this.uid,t,e,i)},init:function(){var i,n,s;s=this.getShimContainer(),t.extend(s.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),i='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+c.swf_url+'" ',"IE"===e.browser&&(i+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),i+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+c.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+r.getGlobalEventTarget()+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===e.browser?(n=document.createElement("div"),s.appendChild(n),n.outerHTML=i,n=s=null):s.innerHTML=i,h=setTimeout(function(){d&&!d.initialized&&d.trigger("Error",new o.RuntimeError(o.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(t){return function(){s(d.uid),t.call(d),clearTimeout(h),c=h=t=d=null}}(this.destroy)},l)}),l}),i("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var i={slice:function(t,i,n,o){var r=this.getRuntime();return 0>i?i=Math.max(t.size+i,0):i>0&&(i=Math.min(i,t.size)),0>n?n=Math.max(t.size+n,0):n>0&&(n=Math.min(n,t.size)),(t=r.shimExec.call(this,"Blob","slice",i,n,o||""))&&(t=new e(r.uid,t)),t}};return t.Blob=i}),i("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(t,e,i,n){var o={init:function(t){var o=this,r=this.getRuntime(),s=i.get(t.browse_button);s&&(s.setAttribute("tabindex",-1),s=null),this.bind("Change",function(){var t=r.shimExec.call(o,"FileInput","getFiles");o.files=[],n.each(t,function(t){o.files.push(new e(r.uid,t))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{accept:t.accept,multiple:t.multiple}),this.trigger("ready")}};return t.FileInput=o}),i("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function i(t,i){switch(i){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var n={read:function(t,e){var n=this;return n.result="","readAsDataURL"===t&&(n.result="data:"+(e.type||"")+";base64,"),n.bind("Progress",function(e,o){o&&(n.result+=i(o,t))},999),n.getRuntime().shimExec.call(this,"FileReader","readAsBase64",e.uid)}};return t.FileReader=n}),i("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(t,e){function i(t,i){switch(i){case"readAsText":return e.atob(t,"utf8");case"readAsBinaryString":return e.atob(t);case"readAsDataURL":return t}return null}var n={read:function(t,e){var n,o=this.getRuntime();return(n=o.shimExec.call(this,"FileReaderSync","readAsBase64",e.uid))?("readAsDataURL"===t&&(n="data:"+(e.type||"")+";base64,"+n),i(n,t,e.type)):null}};return t.FileReaderSync=n}),i("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(t,e){var i={getAsBlob:function(t){var i=this.getRuntime(),n=i.shimExec.call(this,"Transporter","getAsBlob",t);return n?new e(i.uid,n):null}};return t.Transporter=i}),i("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/runtime/flash/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter","moxie/runtime/flash/runtime/Transporter"],function(t,e,i,n,o,r,s,a){var l={send:function(t,n){function o(){t.transport=d.mode,d.shimExec.call(h,"XMLHttpRequest","send",t,n)}function r(t,e){d.shimExec.call(h,"XMLHttpRequest","appendBlob",t,e.uid),n=null,o()}function l(t,e){var i=new a;i.bind("TransportingComplete",function(){e(this.result)}),i.transport(t.getSource(),t.type,{ruid:d.uid})}var c,h=this,d=h.getRuntime();if(e.isEmptyObj(t.headers)||e.each(t.headers,function(t,e){d.shimExec.call(h,"XMLHttpRequest","setRequestHeader",e,t.toString())}),n instanceof s)if(n.each(function(t,e){t instanceof i?c=e:d.shimExec.call(h,"XMLHttpRequest","append",e,t)}),n.hasBlob()){var u=n.getBlob();u.isDetached()?l(u,function(t){u.destroy(),r(c,t)}):r(c,u)}else n=null,o();else n instanceof i?n.isDetached()?l(n,function(t){n.destroy(),n=t.uid,o()}):(n=n.uid,o()):o()},getResponse:function(t){var i,r,s=this.getRuntime();if(r=s.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(r=new n(s.uid,r),"blob"===t)return r;try{if(i=new o,~e.inArray(t,["","text"]))return i.readAsText(r);if("json"===t&&window.JSON)return JSON.parse(i.readAsText(r))}finally{r.destroy()}}return null},abort:function(){var t=this.getRuntime();t.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return t.XMLHttpRequest=l}),i("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(t,e,i,n,o){var r={loadFromBlob:function(t){function e(t){o.shimExec.call(n,"Image","loadFromBlob",t.uid),n=o=null}var n=this,o=n.getRuntime();if(t.isDetached()){var r=new i;r.bind("TransportingComplete",function(){e(r.result.getSource())}),r.transport(t.getSource(),t.type,{ruid:o.uid})}else e(t.getSource())},loadFromImage:function(t){var e=this.getRuntime();return e.shimExec.call(this,"Image","loadFromImage",t.uid)},getInfo:function(){var t=this.getRuntime(),e=t.shimExec.call(this,"Image","getInfo");return e.meta&&e.meta.thumb&&e.meta.thumb.data&&!(t.meta.thumb.data instanceof n)&&(e.meta.thumb.data=new n(t.uid,e.meta.thumb.data)),e},getAsBlob:function(t,e){var i=this.getRuntime(),o=i.shimExec.call(this,"Image","getAsBlob",t,e);return o?new n(i.uid,o):null},getAsDataURL:function(){var t=this.getRuntime(),e=t.Image.getAsBlob.apply(this,arguments);return e?(new o).readAsDataURL(e):null}};return t.Image=r}),i("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(t,e,i,o,r){var s="silverlight",a={};return r.addConstructor(s,function(l){var c,h=this;l=t.extend({xap_url:e.xap_url},l),r.call(this,l,s,{access_binary:r.capTrue,access_image_binary:r.capTrue,display_media:r.capTest(n("moxie/image/Image")),do_cors:r.capTrue,drag_and_drop:!1,report_upload_progress:r.capTrue,resize_image:r.capTrue,return_response_headers:function(t){return t&&"client"===h.mode},return_response_type:function(t){return"json"!==t||!!window.JSON},return_status_code:function(e){return"client"===h.mode||!t.arrayDiff(e,[200,404])},select_file:r.capTrue,select_multiple:r.capTrue,send_binary_string:r.capTrue,send_browser_cookies:function(t){return t&&"browser"===h.mode},send_custom_headers:function(t){return t&&"client"===h.mode},send_multipart:r.capTrue,slice_blob:r.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:r.capTrue,use_http_method:function(e){return"client"===h.mode||!t.arrayDiff(e,["GET","POST"])}},{return_response_headers:function(t){return t?"client":"browser"},return_status_code:function(e){return t.arrayDiff(e,[200,404])?"client":["client","browser"]},send_browser_cookies:function(t){return t?"browser":"client"},send_custom_headers:function(t){return t?"client":"browser"},use_http_method:function(e){return t.arrayDiff(e,["GET","POST"])?"client":["client","browser"]}}),function(t){var e,i,n,o,r,s=!1,a=0;try{try{new ActiveXObject("AgControl.AgControl").IsVersionSupported(t)&&(s=!0),null}catch(c){var l=navigator.plugins["Silverlight Plug-In"];if(l){for("1.0.30226.2"===(e=l.description)&&(e="2.0.30226.2"),i=e.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=t.split(".");n.length>4;)n.pop();do{o=parseInt(n[a],10),r=parseInt(i[a],10),a++}while(a<n.length&&o===r);r>=o&&!isNaN(o)&&(s=!0)}}}catch(t){s=!1}return s}("2.0.31005.0")&&"Opera"!==e.browser||(this.mode=!1),t.extend(this,{getShim:function(){return i.get(this.uid).content.Moxie},shimExec:function(t,e){var i=[].slice.call(arguments,2);return h.getShim().exec(this.uid,t,e,i)},init:function(){this.getShimContainer().innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+l.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+r.getGlobalEventTarget()+'"/></object>',c=setTimeout(function(){h&&!h.initialized&&h.trigger("Error",new o.RuntimeError(o.RuntimeError.NOT_INIT_ERR))},"Windows"!==e.OS?1e4:5e3)},destroy:function(t){return function(){t.call(h),clearTimeout(c),l=c=t=h=null}}(this.destroy)},a)}),a}),i("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(t,e,i){return t.Blob=e.extend({},i)}),i("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(t,e,i,n){function o(t){for(var e="",i=0;i<t.length;i++)e+=(""!==e?"|":"")+t[i].title+" | *."+t[i].extensions.replace(/,/g,";*.");return e}var r={init:function(t){var r=this,s=this.getRuntime(),a=i.get(t.browse_button);a&&(a.setAttribute("tabindex",-1),a=null),this.bind("Change",function(){var t=s.shimExec.call(r,"FileInput","getFiles");r.files=[],n.each(t,function(t){r.files.push(new e(s.uid,t))})},999),s.shimExec.call(this,"FileInput","init",o(t.accept),t.multiple),this.trigger("ready")},setOption:function(t,e){"accept"==t&&(e=o(e)),this.getRuntime().shimExec.call(this,"FileInput","setOption",t,e)}};return t.FileInput=r}),i("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(t,e,i){var n={init:function(){var t,n=this,o=n.getRuntime();return t=o.getShimContainer(),i.addEvent(t,"dragover",function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"},n.uid),i.addEvent(t,"dragenter",function(t){t.preventDefault();var i=e.get(o.uid).dragEnter(t);i&&t.stopPropagation()},n.uid),i.addEvent(t,"drop",function(t){t.preventDefault();var i=e.get(o.uid).dragDrop(t);i&&t.stopPropagation()},n.uid),o.shimExec.call(this,"FileDrop","init")}};return t.FileDrop=n}),i("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(t,e,i){return t.FileReader=e.extend({},i)}),i("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(t,e,i){return t.FileReaderSync=e.extend({},i)}),i("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(t,e,i){return t.Transporter=e.extend({},i)}),i("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(t,e,i){return t.XMLHttpRequest=e.extend({},i)}),i("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(t,e,i,n){return t.Image=e.extend({},n,{getInfo:function(){var t=this.getRuntime(),n={meta:{}},o=t.shimExec.call(this,"Image","getInfo");return o.meta&&(e.each(["tiff","exif","gps","thumb"],function(t){var e,i,r,s,a=o.meta[t];if(a&&a.keys)for(n.meta[t]={},i=0,r=a.keys.length;r>i;i++)e=a.keys[i],(s=a[e])&&(/^(\d|[1-9]\d+)$/.test(s)?s=parseInt(s,10):/^\d*\.\d+$/.test(s)&&(s=parseFloat(s)),n.meta[t][e]=s)}),n.meta&&n.meta.thumb&&n.meta.thumb.data&&!(t.meta.thumb.data instanceof i)&&(n.meta.thumb.data=new i(t.uid,n.meta.thumb.data))),n.width=parseInt(o.width,10),n.height=parseInt(o.height,10),n.size=parseInt(o.size,10),n.type=o.type,n.name=o.name,n},resize:function(t,e,i){this.getRuntime().shimExec.call(this,"Image","resize",t.x,t.y,t.width,t.height,e,i.preserveHeaders,i.resample)}})}),i("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(t,e,i,o){var r="html4",s={};return i.addConstructor(r,function(e){var a=this,l=i.capTest,c=i.capTrue;i.call(this,e,r,{access_binary:l(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:l((o.can("create_canvas")||o.can("use_data_uri_over32kb"))&&n("moxie/image/Image")),do_cors:!1,drag_and_drop:!1,filter_by_extension:l(!("Chrome"===o.browser&&o.verComp(o.version,28,"<")||"IE"===o.browser&&o.verComp(o.version,10,"<")||"Safari"===o.browser&&o.verComp(o.version,7,"<")||"Firefox"===o.browser&&o.verComp(o.version,37,"<"))),resize_image:function(){return s.Image&&a.can("access_binary")&&o.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(e){return!("json"!==e||!window.JSON)||!!~t.inArray(e,["text","document",""])},return_status_code:function(e){return!t.arrayDiff(e,[200,404])},select_file:function(){return o.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return a.can("select_file")},summon_file_dialog:function(){return a.can("select_file")&&!("Firefox"===o.browser&&o.verComp(o.version,4,"<")||"Opera"===o.browser&&o.verComp(o.version,12,"<")||"IE"===o.browser&&o.verComp(o.version,10,"<"))},upload_filesize:c,use_http_method:function(e){return!t.arrayDiff(e,["GET","POST"])}}),t.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(a),t=a=null}}(this.destroy)}),t.extend(this.getShim(),s)}),s}),i("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(t,e,i,n,o,r,s){return t.FileInput=function(){function t(){var r,c,d,u,p,f,g=this,m=g.getRuntime();f=i.guid("uid_"),r=m.getShimContainer(),a&&((d=n.get(a+"_form"))&&(i.extend(d.style,{top:"100%"}),d.firstChild.setAttribute("tabindex",-1))),(u=document.createElement("form")).setAttribute("id",f+"_form"),u.setAttribute("method","post"),u.setAttribute("enctype","multipart/form-data"),u.setAttribute("encoding","multipart/form-data"),i.extend(u.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),(p=document.createElement("input")).setAttribute("id",f),p.setAttribute("type","file"),p.setAttribute("accept",h.join(",")),m.can("summon_file_dialog")&&p.setAttribute("tabindex",-1),i.extend(p.style,{fontSize:"999px",opacity:0}),u.appendChild(p),r.appendChild(u),i.extend(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===s.browser&&s.verComp(s.version,10,"<")&&i.extend(p.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),p.onchange=function(){var i;this.value&&(i=this.files?this.files[0]:{name:this.value},i=new e(m.uid,i),this.onchange=function(){},t.call(g),g.files=[i],p.setAttribute("id",i.uid),u.setAttribute("id",i.uid+"_form"),g.trigger("change"),p=u=null)},m.can("summon_file_dialog")&&(c=n.get(l.browse_button),o.removeEvent(c,"click",g.uid),o.addEvent(c,"click",function(t){p&&!p.disabled&&p.click(),t.preventDefault()},g.uid)),a=f,r=d=c=null}var a,l,c,h=[];i.extend(this,{init:function(e){var i,s=this,a=s.getRuntime();l=e,h=r.extList2mimes(e.accept,a.can("filter_by_extension")),i=a.getShimContainer(),function(){var t,r,h;t=n.get(e.browse_button),c=n.getStyle(t,"z-index")||"auto",a.can("summon_file_dialog")?("static"===n.getStyle(t,"position")&&(t.style.position="relative"),s.bind("Refresh",function(){r=parseInt(c,10)||1,n.get(l.browse_button).style.zIndex=r,this.getRuntime().getShimContainer().style.zIndex=r-1})):t.setAttribute("tabindex",-1),h=a.can("summon_file_dialog")?t:i,o.addEvent(h,"mouseover",function(){s.trigger("mouseenter")},s.uid),o.addEvent(h,"mouseout",function(){s.trigger("mouseleave")},s.uid),o.addEvent(h,"mousedown",function(){s.trigger("mousedown")},s.uid),o.addEvent(n.get(e.container),"mouseup",function(){s.trigger("mouseup")},s.uid),t=null}(),t.call(this),i=null,s.trigger({type:"ready",async:!0})},setOption:function(t,e){var i,o=this.getRuntime();"accept"==t&&(h=e.mimes||r.extList2mimes(e,o.can("filter_by_extension"))),(i=n.get(a))&&i.setAttribute("accept",h.join(","))},disable:function(t){var e;(e=n.get(a))&&(e.disabled=!!t)},destroy:function(){var t=this.getRuntime(),e=t.getShim(),i=t.getShimContainer(),r=l&&n.get(l.container),s=l&&n.get(l.browse_button);r&&o.removeAllEvents(r,this.uid),s&&(o.removeAllEvents(s,this.uid),s.style.zIndex=c),i&&(o.removeAllEvents(i,this.uid),i.innerHTML=""),e.removeInstance(this.uid),a=h=l=i=r=s=e=null}})}}),i("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(t,e){return t.FileReader=e}),i("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(t,e,i,n,o,r,s,a){return t.XMLHttpRequest=function(){function t(t){var e,n,o,s,a=this,l=!1;if(h){if(e=h.id.replace(/_iframe$/,""),n=i.get(e+"_form")){for(o=n.getElementsByTagName("input"),s=o.length;s--;)switch(o[s].getAttribute("type")){case"hidden":o[s].parentNode.removeChild(o[s]);break;case"file":l=!0}o=[],l||n.parentNode.removeChild(n),n=null}setTimeout(function(){r.removeEvent(h,"load",a.uid),h.parentNode&&h.parentNode.removeChild(h);var e=a.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=h=null,t()},1)}}var l,c,h;e.extend(this,{send:function(d,u){var p,f,g,m,v=this,b=v.getRuntime();if(l=c=null,u instanceof a&&u.hasBlob()){if(m=u.getBlob(),p=m.uid,g=i.get(p),!(f=i.get(p+"_form")))throw new o.DOMException(o.DOMException.NOT_FOUND_ERR)}else p=e.guid("uid_"),(f=document.createElement("form")).setAttribute("id",p+"_form"),f.setAttribute("method",d.method),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),b.getShimContainer().appendChild(f);f.setAttribute("target",p+"_iframe"),u instanceof a&&u.each(function(t,i){if(t instanceof s)g&&g.setAttribute("name",i);else{var n=document.createElement("input");e.extend(n,{type:"hidden",name:i,value:t}),g?f.insertBefore(n,g):f.appendChild(n)}}),f.setAttribute("action",d.url),function(){var i=b.getShimContainer()||document.body,o=document.createElement("div");o.innerHTML='<iframe id="'+p+'_iframe" name="'+p+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',h=o.firstChild,i.appendChild(h),r.addEvent(h,"load",function(){var i;try{i=h.contentWindow.document||h.contentDocument||window.frames[h.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(i.title)?l=i.title.replace(/^(\d+).*$/,"$1"):(l=200,c=e.trim(i.body.innerHTML),v.trigger({type:"progress",loaded:c.length,total:c.length}),m&&v.trigger({type:"uploadprogress",loaded:m.size||1025,total:m.size||1025}))}catch(e){if(!n.hasSameOrigin(d.url))return void t.call(v,function(){v.trigger("error")});l=404}t.call(v,function(){v.trigger("load")})},v.uid)}(),f.submit(),v.trigger("loadstart")},getStatus:function(){return l},getResponse:function(t){if("json"===t&&"string"===e.typeOf(c)&&window.JSON)try{return JSON.parse(c.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(t){return null}return c},abort:function(){var e=this;h&&h.contentWindow&&(h.contentWindow.stop?h.contentWindow.stop():h.contentWindow.document.execCommand?h.contentWindow.document.execCommand("Stop"):h.src="about:blank"),t.call(this,function(){e.dispatchEvent("abort")})},destroy:function(){this.getRuntime().getShim().removeInstance(this.uid)}})}}),i("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(t,e){return t.Image=e}),function(i){for(var n=0;n<i.length;n++){for(var o=t,s=i[n],a=s.split(/[.\/]/),l=0;l<a.length-1;++l)o[a[l]]===e&&(o[a[l]]={}),o=o[a[l]];o[a[a.length-1]]=r[s]}}(["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Dom","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/core/I18n","moxie/core/utils/Mime","moxie/file/FileInput","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/image/Image","moxie/core/utils/Events","moxie/runtime/html5/image/ResizerCanvas"])}(this)}.apply(t,arguments),t.moxie};"function"==typeof define&&define.amd?define("moxie",[],i):"object"==typeof module&&module.exports?module.exports=i():t.moxie=i()}(this||window),function(t,e){var i=function(){var t={};return function(t){!function(t,e,i){function n(t){function e(t,e,i){var o={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};o[t]?n[o[t]]=e:i||(n[t]=e)}var i=t.required_features,n={};return"string"==typeof i?l.each(i.split(/\s*,\s*/),function(t){e(t,!0)}):"object"==typeof i?l.each(i,function(t,i){e(i,t)}):!0===i&&(t.chunk_size&&t.chunk_size>0&&(n.slice_blob=!0),l.isEmptyObj(t.resize)&&!1!==t.multipart||(n.send_binary_string=!0),t.http_method&&(n.use_http_method=t.http_method),l.each(t,function(t,i){e(i,!!t,!0)})),n}var o=window.setTimeout,r={},s=e.core.utils,a=e.runtime.Runtime,l={VERSION:"2.3.6",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,moxie:e,mimeTypes:s.Mime.mimes,ua:s.Env,typeOf:s.Basic.typeOf,extend:s.Basic.extend,guid:s.Basic.guid,getAll:function(t){var e,i=[];"array"!==l.typeOf(t)&&(t=[t]);for(var n=t.length;n--;)(e=l.get(t[n]))&&i.push(e);return i.length?i:null},get:s.Dom.get,each:s.Basic.each,getPos:s.Dom.getPos,getSize:s.Dom.getSize,xmlEncode:function(t){var e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"};return t?(""+t).replace(/[<>&\"\']/g,function(t){return e[t]?"&"+e[t]+";":t}):t},toArray:s.Basic.toArray,inArray:s.Basic.inArray,inSeries:s.Basic.inSeries,addI18n:e.core.I18n.addI18n,translate:e.core.I18n.translate,sprintf:s.Basic.sprintf,isEmptyObj:s.Basic.isEmptyObj,hasClass:s.Dom.hasClass,addClass:s.Dom.addClass,removeClass:s.Dom.removeClass,getStyle:s.Dom.getStyle,addEvent:s.Events.addEvent,removeEvent:s.Events.removeEvent,removeAllEvents:s.Events.removeAllEvents,cleanName:function(t){var e,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],e=0;e<i.length;e+=2)t=t.replace(i[e],i[e+1]);return t=(t=t.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(t,e){var i="";return l.each(e,function(t,e){i+=(i?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),i&&(t+=(t.indexOf("?")>0?"&":"?")+i),t},formatSize:function(t){function e(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}if(t===i||/\D/.test(t))return l.translate("N/A");var n=Math.pow(1024,4);return t>n?e(t/n,1)+" "+l.translate("tb"):t>(n/=1024)?e(t/n,1)+" "+l.translate("gb"):t>(n/=1024)?e(t/n,1)+" "+l.translate("mb"):t>1024?Math.round(t/1024)+" "+l.translate("kb"):t+" "+l.translate("b")},parseSize:s.Basic.parseSizeStr,predictRuntime:function(t,e){var i,n;return i=new l.Uploader(t),n=a.thatCan(i.getOption().required_features,e||t.runtimes),i.destroy(),n},addFileFilter:function(t,e){r[t]=e}};l.addFileFilter("mime_types",function(t,e,i){t.length&&!t.regexp.test(e.name)?(this.trigger("Error",{code:l.FILE_EXTENSION_ERROR,message:l.translate("File extension error."),file:e}),i(!1)):i(!0)}),l.addFileFilter("max_file_size",function(t,e,i){t=l.parseSize(t),void 0!==e.size&&t&&e.size>t?(this.trigger("Error",{code:l.FILE_SIZE_ERROR,message:l.translate("File size error."),file:e}),i(!1)):i(!0)}),l.addFileFilter("prevent_duplicates",function(t,e,i){if(t)for(var n=this.files.length;n--;)if(e.name===this.files[n].name&&e.size===this.files[n].size)return this.trigger("Error",{code:l.FILE_DUPLICATE_ERROR,message:l.translate("Duplicate file error."),file:e}),void i(!1);i(!0)}),l.addFileFilter("prevent_empty",function(t,e,n){t&&!e.size&&e.size!==i?(this.trigger("Error",{code:l.FILE_SIZE_ERROR,message:l.translate("File size error."),file:e}),n(!1)):n(!0)}),l.Uploader=function(t){function s(){var t,e,i=0;if(this.state==l.STARTED){for(e=0;e<E.length;e++)t||E[e].status!=l.QUEUED?i++:(t=E[e],this.trigger("BeforeUpload",t)&&(t.status=l.UPLOADING,this.trigger("UploadFile",t)));i==E.length&&(this.state!==l.STOPPED&&(this.state=l.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",E))}}function c(t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,h()}function h(){var t,e,n,o=0;for(D.reset(),t=0;t<E.length;t++)(e=E[t]).size!==i?(D.size+=e.origSize,n=e.loaded*e.origSize/e.size,(!e.completeTimestamp||e.completeTimestamp>S)&&(o+=n),D.loaded+=n):D.size=i,e.status==l.DONE?D.uploaded++:e.status==l.FAILED?D.failed++:D.queued++;D.size===i?D.percent=E.length>0?Math.ceil(D.uploaded/E.length*100):0:(D.bytesPerSec=Math.ceil(o/((+new Date-S||1)/1e3)),D.percent=D.size>0?Math.ceil(D.loaded/D.size*100):0)}function d(){var t=I[0]||M[0];return!!t&&t.getRuntime().uid}function u(t,i){var n=this,o=0,r=[],s={runtime_order:t.runtimes,required_caps:t.required_features,preferred_caps:R,swf_url:t.flash_swf_url,xap_url:t.silverlight_xap_url};l.each(t.runtimes.split(/\s*,\s*/),function(e){t[e]&&(s[e]=t[e])}),t.browse_button&&l.each(t.browse_button,function(i){r.push(function(r){var c=new e.file.FileInput(l.extend({},s,{accept:t.filters.mime_types,name:t.file_data_name,multiple:t.multi_selection,container:t.container,browse_button:i}));c.onready=function(){var t=a.getInfo(this.ruid);l.extend(n.features,{chunks:t.can("slice_blob"),multipart:t.can("send_multipart"),multi_selection:t.can("select_multiple")}),o++,I.push(this),r()},c.onchange=function(){n.addFile(this.files)},c.bind("mouseenter mouseleave mousedown mouseup",function(e){A||(t.browse_button_hover&&("mouseenter"===e.type?l.addClass(i,t.browse_button_hover):"mouseleave"===e.type&&l.removeClass(i,t.browse_button_hover)),t.browse_button_active&&("mousedown"===e.type?l.addClass(i,t.browse_button_active):"mouseup"===e.type&&l.removeClass(i,t.browse_button_active)))}),c.bind("mousedown",function(){n.trigger("Browse")}),c.bind("error runtimeerror",function(){c=null,r()}),c.init()})}),t.drop_element&&l.each(t.drop_element,function(t){r.push(function(i){var r=new e.file.FileDrop(l.extend({},s,{drop_zone:t}));r.onready=function(){var t=a.getInfo(this.ruid);l.extend(n.features,{chunks:t.can("slice_blob"),multipart:t.can("send_multipart"),dragdrop:t.can("drag_and_drop")}),o++,M.push(this),i()},r.ondrop=function(){n.addFile(this.files)},r.bind("error runtimeerror",function(){r=null,i()}),r.init()})}),l.inSeries(r,function(){"function"==typeof i&&i(o)})}function p(t,n,o,r){var s=new e.image.Image;try{s.onload=function(){n.width>this.width&&n.height>this.height&&n.quality===i&&n.preserve_headers&&!n.crop?(this.destroy(),r(t)):s.downsize(n.width,n.height,n.crop,n.preserve_headers)},s.onresize=function(){var e=this.getAsBlob(t.type,n.quality);this.destroy(),r(e)},s.bind("error runtimeerror",function(){this.destroy(),r(t)}),s.load(t,o)}catch(e){r(t)}}function f(t,i,o){function r(t,i,n){var o=C[t];switch(t){case"max_file_size":"max_file_size"===t&&(C.max_file_size=C.filters.max_file_size=i);break;case"chunk_size":(i=l.parseSize(i))&&(C[t]=i,C.send_file_name=!0);break;case"multipart":C[t]=i,i||(C.send_file_name=!0);break;case"http_method":C[t]="PUT"===i.toUpperCase()?"PUT":"POST";break;case"unique_names":C[t]=i,i&&(C.send_file_name=!0);break;case"filters":"array"===l.typeOf(i)&&(i={mime_types:i}),n?l.extend(C.filters,i):C.filters=i,i.mime_types&&("string"===l.typeOf(i.mime_types)&&(i.mime_types=e.core.utils.Mime.mimes2extList(i.mime_types)),i.mime_types.regexp=function(t){var e=[];return l.each(t,function(t){l.each(t.extensions.split(/,/),function(t){/^\s*\*\s*$/.test(t)?e.push("\\.*"):e.push("\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+e.join("|")+")$","i")}(i.mime_types),C.filters.mime_types=i.mime_types);break;case"resize":C.resize=!!i&&l.extend({preserve_headers:!0,crop:!1},i);break;case"prevent_duplicates":C.prevent_duplicates=C.filters.prevent_duplicates=!!i;break;case"container":case"browse_button":case"drop_element":i="container"===t?l.get(i):l.getAll(i);case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":C[t]=i,n||(c=!0);break;default:C[t]=i}n||s.trigger("OptionChanged",t,i,o)}var s=this,c=!1;"object"==typeof t?l.each(t,function(t,e){r(e,t,o)}):r(t,i,o),o?(C.required_features=n(l.extend({},C)),R=n(l.extend({},C,{required_features:!0}))):c&&(s.trigger("Destroy"),u.call(s,C,function(t){t?(s.runtime=a.getInfo(d()).type,s.trigger("Init",{runtime:s.runtime}),s.trigger("PostInit")):s.trigger("Error",{code:l.INIT_ERROR,message:l.translate("Init error.")})}))}function g(t,e){if(t.settings.unique_names){var i=e.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),e.target_name=e.id+"."+n}}function m(t,i){function n(){d-- >0?o(r,1e3):(i.loaded=f,t.trigger("Error",{code:l.HTTP_ERROR,message:l.translate("HTTP Error."),file:i,response:k.responseText,status:k.status,responseHeaders:k.getAllResponseHeaders()}))}function r(){var e,n,o={};i.status===l.UPLOADING&&t.state!==l.STOPPED&&(t.settings.send_file_name&&(o.name=i.target_name||i.name),h&&u.chunks&&a.size>h?(n=Math.min(h,a.size-f),e=a.slice(f,f+n)):(n=a.size,e=a),h&&u.chunks&&(t.settings.send_chunk_number?(o.chunk=Math.ceil(f/h),o.chunks=Math.ceil(a.size/h)):(o.offset=f,o.total=a.size)),t.trigger("BeforeChunkUpload",i,o,e,f)&&s(o,e,n))}function s(s,h,p){var m;(k=new e.xhr.XMLHttpRequest).upload&&(k.upload.onprogress=function(e){i.loaded=Math.min(i.size,f+e.loaded),t.trigger("UploadProgress",i)}),k.onload=function(){return k.status<200||k.status>=400?void n():(d=t.settings.max_retries,p<a.size?(h.destroy(),f+=p,i.loaded=Math.min(f,a.size),t.trigger("ChunkUploaded",i,{offset:i.loaded,total:a.size,response:k.responseText,status:k.status,responseHeaders:k.getAllResponseHeaders()}),"Android Browser"===l.ua.browser&&t.trigger("UploadProgress",i)):i.loaded=i.size,h=m=null,void(!f||f>=a.size?(i.size!=i.origSize&&(a.destroy(),a=null),t.trigger("UploadProgress",i),i.status=l.DONE,i.completeTimestamp=+new Date,t.trigger("FileUploaded",i,{response:k.responseText,status:k.status,responseHeaders:k.getAllResponseHeaders()})):o(r,1)))},k.onerror=function(){n()},k.onloadend=function(){this.destroy()},t.settings.multipart&&u.multipart?(k.open(t.settings.http_method,c,!0),l.each(t.settings.headers,function(t,e){k.setRequestHeader(e,t)}),m=new e.xhr.FormData,l.each(l.extend(s,t.settings.multipart_params),function(t,e){m.append(e,t)}),m.append(t.settings.file_data_name,h),k.send(m,g)):(c=l.buildUrl(t.settings.url,l.extend(s,t.settings.multipart_params)),k.open(t.settings.http_method,c,!0),l.each(t.settings.headers,function(t,e){k.setRequestHeader(e,t)}),k.hasRequestHeader("Content-Type")||k.setRequestHeader("Content-Type","application/octet-stream"),k.send(h,g))}var a,c=t.settings.url,h=t.settings.chunk_size,d=t.settings.max_retries,u=t.features,f=0,g={runtime_order:t.settings.runtimes,required_caps:t.settings.required_features,preferred_caps:R,swf_url:t.settings.flash_swf_url,xap_url:t.settings.silverlight_xap_url};i.loaded&&(f=i.loaded=h?h*Math.floor(i.loaded/h):0),a=i.getSource(),l.isEmptyObj(t.settings.resize)||-1===l.inArray(a.type,["image/jpeg","image/png"])?r():p(a,t.settings.resize,g,function(t){a=t,i.size=t.size,r()})}function v(t,e){c(e)}function b(t){if(t.state==l.STARTED)S=+new Date;else if(t.state==l.STOPPED)for(var e=t.files.length-1;e>=0;e--)t.files[e].status==l.UPLOADING&&(t.files[e].status=l.QUEUED,h())}function y(){k&&k.abort()}function w(t){h(),o(function(){s.call(t)},1)}function x(t,e){e.code===l.INIT_ERROR?t.destroy():e.code===l.HTTP_ERROR&&(e.file.status=l.FAILED,e.file.completeTimestamp=+new Date,c(e.file),t.state==l.STARTED&&(t.trigger("CancelUpload"),o(function(){s.call(t)},1)))}function _(t){t.stop(),l.each(E,function(t){t.destroy()}),E=[],I.length&&(l.each(I,function(t){t.destroy()}),I=[]),M.length&&(l.each(M,function(t){t.destroy()}),M=[]),R={},A=!1,S=k=null,D.reset()}var C,S,D,k,T=l.guid(),E=[],R={},I=[],M=[],A=!1;C={chunk_size:0,file_data_name:"file",filters:{mime_types:[],max_file_size:0,prevent_duplicates:!1,prevent_empty:!0},flash_swf_url:"js/Moxie.swf",http_method:"POST",max_retries:0,multipart:!0,multi_selection:!0,resize:!1,runtimes:a.order,send_file_name:!0,send_chunk_number:!0,silverlight_xap_url:"js/Moxie.xap"},f.call(this,t,null,!0),D=new l.QueueProgress,l.extend(this,{id:T,uid:T,state:l.STOPPED,features:{},runtime:null,files:E,settings:C,total:D,init:function(){var t,e,i=this;return"function"==typeof(t=i.getOption("preinit"))?t(i):l.each(t,function(t,e){i.bind(e,t)}),function(){this.bind("FilesAdded FilesRemoved",function(t){t.trigger("QueueChanged"),t.refresh()}),this.bind("CancelUpload",y),this.bind("BeforeUpload",g),this.bind("UploadFile",m),this.bind("UploadProgress",v),this.bind("StateChanged",b),this.bind("QueueChanged",h),this.bind("Error",x),this.bind("FileUploaded",w),this.bind("Destroy",_)}.call(i),l.each(["container","browse_button","drop_element"],function(t){return null===i.getOption(t)?(e={code:l.INIT_ERROR,message:l.sprintf(l.translate("%s specified, but cannot be found."),t)},!1):void 0}),e?i.trigger("Error",e):C.browse_button||C.drop_element?void u.call(i,C,function(t){var e=i.getOption("init");"function"==typeof e?e(i):l.each(e,function(t,e){i.bind(e,t)}),t?(i.runtime=a.getInfo(d()).type,i.trigger("Init",{runtime:i.runtime}),i.trigger("PostInit")):i.trigger("Error",{code:l.INIT_ERROR,message:l.translate("Init error.")})}):i.trigger("Error",{code:l.INIT_ERROR,message:l.translate("You must specify either browse_button or drop_element.")})},setOption:function(t,e){f.call(this,t,e,!this.runtime)},getOption:function(t){return t?C[t]:C},refresh:function(){I.length&&l.each(I,function(t){t.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=l.STARTED&&(this.state=l.STARTED,this.trigger("StateChanged"),s.call(this))},stop:function(){this.state!=l.STOPPED&&(this.state=l.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){A=arguments[0]===i||arguments[0],I.length&&l.each(I,function(t){t.disable(A)}),this.trigger("DisableBrowse",A)},getFile:function(t){var e;for(e=E.length-1;e>=0;e--)if(E[e].id===t)return E[e]},addFile:function(t,i){function n(t,e){var i=[];l.each(a.settings.filters,function(e,n){r[n]&&i.push(function(i){r[n].call(a,e,t,function(t){i(!t)})})}),l.inSeries(i,e)}var s,a=this,c=[],h=[];s=d(),function t(r){var d=l.typeOf(r);if(r instanceof e.file.File){if(!r.ruid&&!r.isDetached()){if(!s)return!1;r.ruid=s,r.connectRuntime(s)}t(new l.File(r))}else r instanceof e.file.Blob?(t(r.getSource()),r.destroy()):r instanceof l.File?(i&&(r.name=i),c.push(function(t){n(r,function(e){e||(E.push(r),h.push(r),a.trigger("FileFiltered",r)),o(t,1)})})):-1!==l.inArray(d,["file","blob"])?t(new e.file.File(null,r)):"node"===d&&"filelist"===l.typeOf(r.files)?l.each(r.files,t):"array"===d&&(i=null,l.each(r,t))}(t),c.length&&l.inSeries(c,function(){h.length&&a.trigger("FilesAdded",h)})},removeFile:function(t){for(var e="string"==typeof t?t:t.id,i=E.length-1;i>=0;i--)if(E[i].id===e)return this.splice(i,1)[0]},splice:function(t,e){var n=E.splice(t===i?0:t,e===i?E.length:e),o=!1;return this.state==l.STARTED&&(l.each(n,function(t){return t.status===l.UPLOADING?(o=!0,!1):void 0}),o&&this.stop()),this.trigger("FilesRemoved",n),l.each(n,function(t){t.destroy()}),o&&this.start(),n},dispatchEvent:function(t){var e,i;if(t=t.toLowerCase(),e=this.hasEventListener(t)){e.sort(function(t,e){return e.priority-t.priority}),(i=[].slice.call(arguments)).shift(),i.unshift(this);for(var n=0;n<e.length;n++)if(!1===e[n].fn.apply(e[n].scope,i))return!1}return!0},bind:function(t,e,i,n){l.Uploader.prototype.bind.call(this,t,e,n,i)},destroy:function(){this.trigger("Destroy"),C=D=null,this.unbindAll()}})},l.Uploader.prototype=e.core.EventTarget.instance,l.File=function(){var t={};return function(e){l.extend(this,{id:l.guid(),name:e.name||e.fileName,type:e.type||"",relativePath:e.relativePath||"",size:e.fileSize||e.size,origSize:e.fileSize||e.size,loaded:0,percent:0,status:l.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),completeTimestamp:0,getNative:function(){var t=this.getSource().getSource();return-1!==l.inArray(l.typeOf(t),["blob","file"])?t:null},getSource:function(){return t[this.id]?t[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete t[this.id])}}),t[this.id]=e}}(),l.QueueProgress=function(){var t=this;t.size=0,t.loaded=0,t.uploaded=0,t.failed=0,t.queued=0,t.percent=0,t.bytesPerSec=0,t.reset=function(){t.size=t.loaded=t.uploaded=t.failed=t.queued=t.percent=t.bytesPerSec=0}},t.plupload=l}(this,t)}.apply(t,arguments),t.plupload};"function"==typeof define&&define.amd?define("plupload",["./moxie"],i):"object"==typeof module&&module.exports?module.exports=i(require("./moxie")):t.plupload=i(t.moxie)}(this||window),function(t,e){var i={};function n(t){return e.translate(t)||t}t.fn.pluploadQueue=function(o){return o?(this.each(function(){var r,s,a,l;function c(i){var n;i.status==e.DONE&&(n="plupload_done"),i.status==e.FAILED&&(n="plupload_failed"),i.status==e.QUEUED&&(n="plupload_delete"),i.status==e.UPLOADING&&(n="plupload_uploading");var o=t("#"+i.id).attr("class",n).find("a").css("display","block");i.hint&&o.attr("title",i.hint)}function h(){t("span.plupload_total_status",s).html(r.total.percent+"%"),t("div.plupload_progress_bar",s).css("width",r.total.percent+"%"),t("span.plupload_upload_status",s).html(e.sprintf(n("Uploaded %d/%d files"),r.total.uploaded,r.files.length))}function d(){var i,o=t("ul.plupload_filelist",s).html(""),l=0;t.each(r.files,function(n,s){i="",s.status==e.DONE&&(s.target_name&&(i+='<input type="hidden" name="'+a+"_"+l+'_tmpname" value="'+e.xmlEncode(s.target_name)+'" />'),i+='<input type="hidden" name="'+a+"_"+l+'_name" value="'+e.xmlEncode(s.name)+'" />',i+='<input type="hidden" name="'+a+"_"+l+'_status" value="'+(s.status==e.DONE?"done":"failed")+'" />',l++,t("#"+a+"_count").val(l)),o.append('<li id="'+s.id+'"><div class="plupload_file_name"><span>'+s.name+'</span></div><div class="plupload_file_action"><a href="#"></a></div><div class="plupload_file_status">'+s.percent+'%</div><div class="plupload_file_size">'+e.formatSize(s.size)+'</div><div class="plupload_clearer">&nbsp;</div>'+i+"</li>"),c(s),t("#"+s.id+".plupload_delete a").click(function(e){t("#"+s.id).remove(),r.removeFile(s),e.preventDefault()})}),t("span.plupload_total_file_size",s).html(e.formatSize(r.total.size)),0===r.total.queued?t("span.plupload_add_text",s).html(n("Add Files")):t("span.plupload_add_text",s).html(e.sprintf(n("%d files queued"),r.total.queued)),t("a.plupload_start",s).toggleClass("plupload_disabled",r.files.length==r.total.uploaded+r.total.failed),o[0].scrollTop=o[0].scrollHeight,h(),!r.files.length&&r.features.dragdrop&&r.settings.dragdrop&&t("#"+a+"_filelist").append('<li class="plupload_droptext">'+n("Drag files here.")+"</li>")}s=t(this),(a=s.attr("id"))||(a=e.guid(),s.attr("id",a)),l=s.html(),function(e,i){i.contents().each(function(e,i){(i=t(i)).is(".plupload")||i.remove()}),i.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+e+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+n("Select files")+'</div><div class="plupload_header_text">'+n("Add files to the upload queue and click the start button.")+'</div></div></div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+n("Filename")+'</div><div class="plupload_file_action">&nbsp;</div><div class="plupload_file_status"><span>'+n("Status")+'</span></div><div class="plupload_file_size">'+n("Size")+'</div><div class="plupload_clearer">&nbsp;</div></div><ul id="'+e+'_filelist" class="plupload_filelist"></ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="plupload_button plupload_add" id="'+e+'_browse">'+n("Add Files")+'</a><a href="#" class="plupload_button plupload_start">'+n("Start Upload")+'</a></div><span class="plupload_upload_status"></span></div><div class="plupload_file_action"></div><div class="plupload_file_status"><span class="plupload_total_status">0%</span></div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"></div></div></div><div class="plupload_clearer">&nbsp;</div></div></div></div></div><input type="hidden" id="'+e+'_count" name="'+e+'_count" value="0" /></div>')}(a,s),(o=t.extend({dragdrop:!0,browse_button:a+"_browse",container:a},o)).dragdrop&&(o.drop_element=a+"_filelist"),r=new e.Uploader(o),i[a]=r,r.bind("UploadFile",function(e,i){t("#"+i.id).addClass("plupload_current_file")}),r.bind("Init",function(e,i){!o.unique_names&&o.rename&&s.on("click","#"+a+"_filelist div.plupload_file_name span",function(i){var n,o,r,s=t(i.target),a="";s.closest("li").hasClass("plupload_delete")&&(r=(n=e.getFile(s.parents("li")[0].id)).name,(o=/^(.+)(\.[^.]+)$/.exec(r))&&(r=o[1],a=o[2]),s.hide().after('<input type="text" />'),s.next().val(r).focus().blur(function(){s.show().next().remove()}).keydown(function(e){var i=t(this);13==e.keyCode&&(e.preventDefault(),n.name=i.val()+a,s.html(n.name),i.blur())}))}),t("#"+a+"_container").attr("title","Using runtime: "+i.runtime),t("a.plupload_start",s).click(function(e){t(this).hasClass("plupload_disabled")||r.start(),e.preventDefault()}),t("a.plupload_stop",s).click(function(t){t.preventDefault(),r.stop()}),t("a.plupload_start",s).addClass("plupload_disabled")}),r.bind("Error",function(o,c){var h,d=c.file;d&&(h=c.message,c.details&&(h+=" ("+c.details+")"),c.code==e.FILE_SIZE_ERROR&&alert(n("Error: File too large:")+" "+d.name),c.code==e.FILE_EXTENSION_ERROR&&alert(n("Error: Invalid file extension:")+" "+d.name),d.hint=h,t("#"+d.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",h)),c.code===e.INIT_ERROR&&setTimeout(function(){delete i[a],r.destroy(),s.html(l),r=s=l=null},1)}),r.bind("PostInit",function(e){e.settings.dragdrop&&e.features.dragdrop&&t("#"+a+"_filelist").append('<li class="plupload_droptext">'+n("Drag files here.")+"</li>")}),r.init(),r.bind("StateChanged",function(){r.state===e.STARTED?(t("li.plupload_delete a,div.plupload_buttons",s).hide(),r.disableBrowse(!0),t("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",s).css("display","block"),t("span.plupload_upload_status",s).html("Uploaded "+r.total.uploaded+"/"+r.files.length+" files"),o.multiple_queues&&t("span.plupload_total_status,span.plupload_total_file_size",s).show()):(d(),t("a.plupload_stop,div.plupload_progress",s).hide(),t("a.plupload_delete",s).css("display","block"),o.multiple_queues&&r.total.uploaded+r.total.failed==r.files.length&&(t(".plupload_buttons,.plupload_upload_status",s).css("display","inline"),r.disableBrowse(!1),t(".plupload_start",s).addClass("plupload_disabled"),t("span.plupload_total_status,span.plupload_total_file_size",s).hide()))}),r.bind("FilesAdded",d),r.bind("FilesRemoved",function(){var e=t("#"+a+"_filelist").scrollTop();d(),t("#"+a+"_filelist").scrollTop(e)}),r.bind("FileUploaded",function(t,e){c(e)}),r.bind("UploadProgress",function(e,i){t("#"+i.id+" div.plupload_file_status",s).html(i.percent+"%"),c(i),h()}),o.setup&&o.setup(r)}),this):i[t(this[0]).attr("id")]}}(jQuery,plupload),function(t){t.textcounter=function(e,i){var n=this;n.$el=t(e),n.el=e,n.$el.data("textcounter",n),n.init=function(){n.options=t.extend({},t.textcounter.defaultOptions,i);var e=n.options.countDown?n.options.countDownText:n.options.counterText,o=n.options.countDown?n.options.max:0,r=t("<div/>").addClass(n.options.textCountMessageClass).html(e.replace("%d",'<span class="'+n.options.textCountClass+'">'+o+"</span>")),s=t("<div/>").addClass(n.options.countOverflowContainerClass);n.hideMessage(s),n.$container=t("<"+n.options.countContainerElement+"/>").addClass(n.options.countContainerClass).append(r).append(s),n.$text_counter=n.$container.find("span"),n.$el.after(n.$container),n.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",n.checkLimits).trigger("click.textcounter"),n.options.init(n.el)},n.checkLimits=function(e){var i=n.$el,o=(n.$container,i.val()),r=0,s=0,a=void 0!==e.originalEvent;if(t.isEmptyObject(o)||(r=n.textCount(o)),"auto"==n.options.max)void 0!==(l=n.$el.attr("maxlength"))&&!1!==l?n.options.max=l:n.$container.text("error: [maxlength] attribute not set");else if("autocustom"==n.options.max){var l;void 0!==(l=n.$el.attr(n.options.autoCustomAttr))&&!1!==l?n.options.max=l:n.$container.text("error: ["+n.options.autoCustomAttr+"] attribute not set")}if(s=n.options.countDown?n.options.max-r:r,n.setCount(s),n.options.min>0&&a&&(r<n.options.min?(n.setErrors("min"),n.options.minunder(n.el)):r>=n.options.min&&(n.options.mincount(n.el),n.clearErrors("min"))),-1!==n.options.max)if(r===n.options.max&&0!==n.options.max)n.options.maxcount(n.el),n.clearErrors("max");else if(r>n.options.max&&0!==n.options.max)if(n.options.stopInputAtMaximum){var c="";if("word"==n.options.type)for(var h=o.split(/[^\S\n]/g),d=0;d<h.length&&!(d>=n.options.max);)void 0!==h[d]&&(c+=h[d]+" ",d++);else{var u=n.options.twoCharCarriageReturn?n.options.max-n.twoCharCarriageReturnCount(o):n.options.max;if(n.options.countSpaces)c=o.substring(0,u);else{var p=o.split(""),f=p.length,g=0;for(d=0;g<u&&d<f;)" "!==p[d]&&g++,c+=p[d++]}}i.val(c.trim()),r=n.textCount(i.val()),s=n.options.countDown?n.options.max-r:r,n.setCount(s)}else n.setErrors("max");else n.options.maxunder(n.el),n.clearErrors("max");-1==n.options.minDisplayCutoff&&-1==n.options.maxDisplayCutoff?n.$container.show():r<=n.options.min+n.options.minDisplayCutoff?n.$container.show():-1!==n.options.max&&r>=n.options.max-n.options.maxDisplayCutoff?n.$container.show():n.$container.hide()},n.textCount=function(t){return"word"==n.options.type?n.wordCount(t):n.characterCount(t)},n.wordCount=function(t){return t.trim().replace(/\s+/gi," ").split(" ").length},n.characterCount=function(t){var e=0,i=0;if(n.options.twoCharCarriageReturn&&(i=n.twoCharCarriageReturnCount(t)),e=n.options.countSpaces?t.replace(/[^\S\n|\r|\r\n]/g," ").length:t.replace(/\s/g,"").length,n.options.countExtendedCharacters){var o=t.match(/[^\x00-\xff]/gi);e=null==o?t.length:t.length+o.length}return n.options.twoCharCarriageReturn&&(e+=i),e},n.twoCharCarriageReturnCount=function(t){var e=t.match(/(\r\n|\n|\r)/g),i=0;return null!==e&&(i=e.length),i},n.setCount=function(t){n.$text_counter.text(t)},n.setErrors=function(t){var e=n.$el,i=n.$container,o="";switch(e.addClass(n.options.inputErrorClass),i.addClass(n.options.counterErrorClass),t){case"min":o=n.options.minimumErrorText;break;case"max":o=n.options.maximumErrorText,n.options.countOverflow&&n.setOverflowMessage()}n.options.displayErrorText&&(i.children(".error-text-"+t).length||i.append("<"+n.options.errorTextElement+' class="error-text error-text-'+t+'">'+o+"</"+n.options.errorTextElement+">"))},n.setOverflowMessage=function(){n.hideMessage(n.$container.find("."+n.options.textCountMessageClass)),n.removeOverflowMessage();var t=n.options.countOverflowText.replace("%d",n.textCount(n.$el.val())-n.options.max).replace("%type",n.options.type+"s"),e=n.$container.find("."+n.options.countOverflowContainerClass).append(t);n.showMessage(e)},n.removeOverflowMessage=function(){n.$container.find("."+n.options.countOverflowContainerClass).empty()},n.showMessage=function(t){t.css("display","inline")},n.hideMessage=function(t){t.css("display","none")},n.clearErrors=function(t){var e=n.$el,i=n.$container;i.children(".error-text-"+t).remove(),0==i.children(".error-text").length&&(n.removeOverflowMessage(),n.showMessage(n.$container.find("."+n.options.textCountMessageClass)),e.removeClass(n.options.inputErrorClass),i.removeClass(n.options.counterErrorClass))},n.init()},t.textcounter.defaultOptions={type:"character",min:0,max:200,autoCustomAttr:"counterlimit",countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountMessageClass:"text-count-message",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"%d",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: %d",countExtendedCharacters:!1,twoCharCarriageReturn:!1,countOverflow:!1,countOverflowText:"Maximum %type exceeded by %d",countOverflowContainerClass:"text-count-overflow-wrapper",minDisplayCutoff:-1,maxDisplayCutoff:-1,maxunder:function(t){},minunder:function(t){},maxcount:function(t){},mincount:function(t){},init:function(t){}},t.fn.textcounter=function(e){return this.each(function(){new t.textcounter(this,e)})}}(jQuery),function(){function t(e){var i=t.modules[e];if(!i)throw new Error('failed to require "'+e+'"');return"exports"in i||"function"!=typeof i.definition||(i.client=i.component=!0,i.definition.call(this,i.exports={},i),delete i.definition),i.exports}t.loader="component",t.helper={},t.helper.semVerSort=function(t,e){for(var i=t.version.split("."),n=e.version.split("."),o=0;o<i.length;++o){var r=parseInt(i[o],10),s=parseInt(n[o],10);if(r!==s)return r>s?1:-1;var a=i[o].substr((""+r).length),l=n[o].substr((""+s).length);if(""===a&&""!==l)return 1;if(""!==a&&""===l)return-1;if(""!==a&&""!==l)return a>l?1:-1}return 0},t.latest=function(e,i){function n(t){throw new Error('failed to find latest module of "'+t+'"')}var o=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(e)||n(e);for(var r=Object.keys(t.modules),s=[],a=[],l=0;l<r.length;l++){var c=r[l];if(new RegExp(e+"@").test(c)){var h=c.substr(e.length+1);null!=o.exec(c)?s.push({version:h,name:c}):a.push({version:h,name:c})}}if(0===s.concat(a).length&&n(e),s.length>0){var d=s.sort(t.helper.semVerSort).pop().name;return!0===i?d:t(d)}d=a.pop().name;return!0===i?d:t(d)},t.modules={},t.register=function(e,i){t.modules[e]={definition:i}},t.define=function(e,i){t.modules[e]={exports:i}},t.register("abpetkov~transitionize@0.0.3",function(t,e){function i(t,e){if(!(this instanceof i))return new i(t,e);this.element=t,this.props=e||{},this.init()}e.exports=i,i.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},i.prototype.init=function(){var t=[];for(var e in this.props)t.push(e+" "+this.props[e]);this.element.style.transition=t.join(", "),this.isSafari()&&(this.element.style.webkitTransition=t.join(", "))}}),t.register("ftlabs~fastclick@v0.6.11",function(t,e){function i(t){"use strict";var e,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return i.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return i.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return i.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return i.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return i.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return i.prototype.onTouchCancel.apply(n,arguments)},i.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}i.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,i.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),i.prototype.deviceIsIOS4=i.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i.prototype.deviceIsIOSWithBadTarget=i.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),i.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},i.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},i.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},i.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},i.prototype.updateScrollParent=function(t){"use strict";var e,i;if(!(e=t.fastClickScrollParent)||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},i.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if((n=window.getSelection()).rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},i.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},i.prototype.onTouchMove=function(t){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},i.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(t){"use strict";var e,i,n,o,r,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(r=t.changedTouches[0],(s=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)||s).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=s.tagName.toLowerCase())){if(e=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=e}}else if(this.needsFocus(s))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(s),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(o=s.fastClickScrollParent)||o.fastClickLastScrollTop===o.scrollTop)||(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},i.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},i.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},i.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(t){"use strict";var e,n;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},i.attach=function(t){"use strict";return new i(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return i}):void 0!==e&&e.exports?(e.exports=i.attach,e.exports.FastClick=i):window.FastClick=i}),t.register("component~indexof@0.0.3",function(t,e){e.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}}),t.register("component~classes@1.2.1",function(e,i){var n=t("component~indexof@0.0.3"),o=/\s+/,r=Object.prototype.toString;function s(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}i.exports=function(t){return new s(t)},s.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~n(e,t)||e.push(t),this.el.className=e.join(" "),this},s.prototype.remove=function(t){if("[object RegExp]"==r.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),i=n(e,t);return~i&&e.splice(i,1),this.el.className=e.join(" "),this},s.prototype.removeMatching=function(t){for(var e=this.array(),i=0;i<e.length;i++)t.test(e[i])&&this.remove(e[i]);return this},s.prototype.toggle=function(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},s.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,"").split(o);return""===t[0]&&t.shift(),t},s.prototype.has=s.prototype.contains=function(t){return this.list?this.list.contains(t):!!~n(this.array(),t)}}),t.register("switchery",function(e,i){var n=t("abpetkov~transitionize@0.0.3"),o=t("ftlabs~fastclick@v0.6.11"),r=t("component~classes@1.2.1");i.exports=a;var s={color:"#71ae52",secondaryColor:"#dfdfdf",jackColor:"#fff",className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};function a(t,e){if(!(this instanceof a))return new a(t,e);for(var i in this.element=t,this.options=e||{},s)null==this.options[i]&&(this.options[i]=s[i]);null!=this.element&&"checkbox"==this.element.type&&this.init()}a.prototype.hide=function(){this.element.style.display="none"},a.prototype.show=function(){var t=this.create();this.insertAfter(this.element,t)},a.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.switcher},a.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},a.prototype.isChecked=function(){return this.element.checked},a.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},a.prototype.setPosition=function(t){var e=this.isChecked(),i=this.switcher,n=this.jack;t&&e?e=!1:t&&!e&&(e=!0),!0===e?(this.element.checked=!0,window.getComputedStyle?n.style.left=parseInt(window.getComputedStyle(i).width)-parseInt(window.getComputedStyle(n).width)+"px":n.style.left=parseInt(i.currentStyle.width)-parseInt(n.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(n.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==s.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackColor,this.setSpeed())},a.prototype.setSpeed=function(){var t={},e={left:this.options.speed.replace(/[a-z]/,"")/2+"s"};t=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},n(this.switcher,t),n(this.jack,e)},a.prototype.setSize=function(){switch(this.options.size){case"small":r(this.switcher).add("switchery-small");break;case"large":r(this.switcher).add("switchery-large");break;default:r(this.switcher).add("switchery-default")}},a.prototype.colorize=function(){var t=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+t+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},a.prototype.handleOnchange=function(t){if(document.dispatchEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),this.element.dispatchEvent(e)}else this.element.fireEvent("onchange")},a.prototype.handleChange=function(){var t=this,e=this.element;e.addEventListener?e.addEventListener("change",function(){t.setPosition()}):e.attachEvent("onchange",function(){t.setPosition()})},a.prototype.handleClick=function(){var t=this,e=this.switcher,i="label"!==t.element.parentNode.tagName.toLowerCase();!1===this.isDisabled()?(o(e),e.addEventListener?e.addEventListener("click",function(e){t.setPosition(i),t.handleOnchange(t.element.checked)}):e.attachEvent("onclick",function(){t.setPosition(i),t.handleOnchange(t.element.checked)})):(this.element.disabled=!0,this.switcher.style.opacity=this.options.disabledOpacity)},a.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},a.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},a.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()}}),"object"==typeof exports?module.exports=t("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return t("switchery")}):(this||window).Switchery=t("switchery")}();
